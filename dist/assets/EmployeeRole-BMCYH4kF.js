import{r as s,j as e,B as r,T as x,s as c,aM as y,f as w,C as R,g as I,a as ee,ad as te,b as V,aq as ae,ar as se,an as le,x as ne}from"./index-Ds4opi1T.js";import{S as oe}from"./Search-CB1swKPE.js";import{T as re,a as ie}from"./Tabs-UHSOatSP.js";import{T as ce}from"./TableContainer-Cgjl1NIg.js";import{T as de,a as he,b as W,c as n,d as ue}from"./TableRow-muiuXFY-.js";const je=()=>{const[O,F]=s.useState("Role name example"),[i,m]=s.useState({Trip:!1,Vehicle:!1,Driver:!1,Marketing:!1,"Store setup":!1,"My wallet":!1,Profile:!1,Employees:!1,"My shop":!1,Reviews:!1,Chat:!1,Report:!1}),[u,T]=s.useState(0),[p,f]=s.useState(""),[$,E]=s.useState(""),[q,D]=s.useState(""),[z,k]=s.useState(""),[G,P]=s.useState(""),[H,A]=s.useState(""),[J,N]=s.useState(!1),[M,U]=s.useState(""),[d,b]=s.useState(()=>{const t=localStorage.getItem("roles");return t?JSON.parse(t):[{id:1,roleName:"manager",modules:"Vehicle",createdAt:"11-Sep-25"}]}),[_,j]=s.useState(!1),[h,g]=s.useState(null);s.useEffect(()=>{localStorage.setItem("roles",JSON.stringify(d)),window.dispatchEvent(new Event("rolesUpdated"))},[d]);const v=t=>{m({...i,[t.target.name]:t.target.checked})},K=(t,a)=>{T(a)},Q=t=>{if(t.preventDefault(),!p.trim()){alert("Role name is required to submit.");return}const a=Object.entries(i).filter(([l,S])=>S).map(([l])=>l).join(", "),o={id:h?h.id:Date.now(),roleName:p.trim(),modules:a||"None",createdAt:h?h.createdAt:new Date().toLocaleDateString("en-GB")};h?(b(d.map(l=>l.id===h.id?o:l)),j(!1),g(null)):b([...d,o]),console.log({roleName:O,permissions:i}),N(!0),B()},B=()=>{F("Role name example"),m({Trip:!1,Vehicle:!1,Driver:!1,Marketing:!1,"Store setup":!1,"My wallet":!1,Profile:!1,Employees:!1,"My shop":!1,Reviews:!1,Chat:!1,Report:!1}),f(""),E(""),D(""),k(""),P(""),A(""),j(!1),g(null)},L=(t,a)=>{a!=="clickaway"&&N(!1)},X=t=>{b(d.filter(a=>a.id!==t))},Y=t=>{j(!0),g(t),f(t.roleName),T(0);const a={...i};t.modules.split(", ").forEach(o=>{o in a&&(a[o]=!0)}),m(a)};function C(t){const{children:a,value:o,index:l,...S}=t;return e.jsx("div",{role:"tabpanel",hidden:o!==l,id:`simple-tabpanel-${l}`,"aria-labelledby":`simple-tab-${l}`,...S,children:o===l&&e.jsx(r,{sx:{p:3},children:a})})}function Z(t){return{id:`simple-tab-${t}`,"aria-controls":`simple-tabpanel-${t}`}}return e.jsxs(r,{sx:{p:3,width:1200,margin:"auto",backgroundColor:"white"},children:[e.jsxs(x,{variant:"h6",gutterBottom:!0,children:[e.jsx("span",{role:"img","aria-label":"user",children:"ðŸ‘¤"})," Custom Role"]}),e.jsxs(r,{component:"form",sx:{backgroundColor:"#fff",p:2,borderRadius:1,boxShadow:1},children:[e.jsx(x,{variant:"subtitle1",gutterBottom:!0,children:"Role Form"}),e.jsx(r,{sx:{mb:2},children:e.jsx(r,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:e.jsx(re,{value:u,onChange:K,"aria-label":"language tabs",children:e.jsx(ie,{label:"Default",...Z(0)})})})}),e.jsxs(C,{value:u,index:0,children:[e.jsx(c,{fullWidth:!0,label:"Role name (Default)*",variant:"outlined",value:p,onChange:t=>f(t.target.value),placeholder:"Type role name",sx:{mb:2},required:!0,inputProps:{maxLength:100}}),e.jsx(c,{fullWidth:!0,label:"Short description (Default)",variant:"outlined",multiline:!0,rows:4,value:$,onChange:t=>E(t.target.value),placeholder:"Type short description",inputProps:{maxLength:500}})]}),e.jsxs(C,{value:u,index:1,children:[e.jsx(c,{fullWidth:!0,label:"Role name (English)",variant:"outlined",value:q,onChange:t=>D(t.target.value),placeholder:"Type role name in English",sx:{mb:2},inputProps:{maxLength:100}}),e.jsx(c,{fullWidth:!0,label:"Short description (English)",variant:"outlined",multiline:!0,rows:4,value:z,onChange:t=>k(t.target.value),placeholder:"Type short description in English",inputProps:{maxLength:500}})]}),e.jsxs(C,{value:u,index:2,children:[e.jsx(c,{fullWidth:!0,label:"Role name (Arabic)",variant:"outlined",value:G,onChange:t=>P(t.target.value),placeholder:"Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",sx:{mb:2},dir:"rtl",inputProps:{style:{textAlign:"right"},maxLength:100}}),e.jsx(c,{fullWidth:!0,label:"Short description (Arabic)",variant:"outlined",multiline:!0,rows:4,value:H,onChange:t=>A(t.target.value),placeholder:"Ø§ÙƒØªØ¨ ÙˆØµÙÙ‹Ø§ Ù‚ØµÙŠØ±Ù‹Ø§ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",dir:"rtl",inputProps:{style:{textAlign:"right"},maxLength:500}})]}),e.jsx(x,{variant:"subtitle1",gutterBottom:!0,children:"Module Permission :"}),e.jsx(y,{row:!0,sx:{justifyContent:"space-between",mb:2},children:["Trip","Vehicle","Driver","Marketing"].map(t=>e.jsx(w,{control:e.jsx(R,{checked:i[t],onChange:v,name:t}),label:t},t))}),e.jsx(y,{row:!0,sx:{justifyContent:"space-between",mb:2},children:["Store setup","My wallet","Profile","Employees"].map(t=>e.jsx(w,{control:e.jsx(R,{checked:i[t],onChange:v,name:t}),label:t},t))}),e.jsx(y,{row:!0,sx:{justifyContent:"space-between",mb:2},children:["My shop","Reviews","Chat","Report"].map(t=>e.jsx(w,{control:e.jsx(R,{checked:i[t],onChange:v,name:t}),label:t},t))}),e.jsxs(r,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(I,{variant:"outlined",color:"#E15B65",onClick:B,sx:{color:"#E15B65"},children:"Reset"}),e.jsx(I,{variant:"contained",color:"primary",onClick:Q,sx:{color:"white",bgcolor:"#E15B65"},children:"Submit"})]})]}),!_&&e.jsxs(r,{sx:{mt:5,backgroundColor:"#fff",p:2,borderRadius:1,boxShadow:1},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(x,{variant:"h6",children:"ðŸ“‹ Roles Table"}),e.jsx(c,{size:"small",placeholder:"Search role",value:M,onChange:t=>U(t.target.value),InputProps:{endAdornment:e.jsx(ee,{position:"end",children:e.jsx(oe,{})})}})]}),e.jsx(ce,{component:te,children:e.jsxs(de,{children:[e.jsx(he,{sx:{backgroundColor:"#f9fafb"},children:e.jsxs(W,{children:[e.jsx(n,{children:"Sl#"}),e.jsx(n,{children:"Role Name"}),e.jsx(n,{children:"Modules"}),e.jsx(n,{children:"Created At"}),e.jsx(n,{children:"Action"})]})}),e.jsx(ue,{children:d.filter(t=>t.roleName.toLowerCase().includes(M.toLowerCase())).map((t,a)=>e.jsxs(W,{children:[e.jsx(n,{children:a+1}),e.jsx(n,{children:t.roleName}),e.jsx(n,{children:t.modules}),e.jsx(n,{children:t.createdAt}),e.jsxs(n,{children:[e.jsx(V,{color:"primary",onClick:()=>Y(t),children:e.jsx(ae,{})}),e.jsx(V,{color:"error",onClick:()=>X(t.id),children:e.jsx(se,{})})]})]},t.id))})]})})]}),e.jsx(le,{open:J,autoHideDuration:3e3,onClose:L,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(ne,{onClose:L,severity:"info",sx:{backgroundColor:"#1976d2",color:"white"},children:"Role updated successfully!"})})]})};export{je as default};
