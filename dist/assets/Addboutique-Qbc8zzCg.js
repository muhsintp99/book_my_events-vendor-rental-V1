import{a8 as Lt,v as $t,w as Nt,r as j,R as ve,j as e,B as n,S as v,t as ge,T as l,b as K,aa as Se,a4 as me,x as at,am as z,q as f,G as g,g as N,a as M,a1 as p,bn as Gt,ae as ke,ac as ie,F as mt,ab as bt,U as ne,a3 as we,D as Fe,az as _t,f as ot,ag as nt,n as st,ah as Vt,at as qt,ai as Ut,C as yt,K as Ht,aj as Jt,h as q,I as Qt}from"./index-s0QLBFc1.js";import{E as lt}from"./EventAvailable-DGOLxNbh.js";import{L as ct}from"./LocalMall-By0yYwQQ.js";import{C as re}from"./Close-BAWo_bOw.js";import{A as dt}from"./Add-CaxTzTke.js";import{L as Yt}from"./LocalOffer-BfsjtOOW.js";import{I as ut}from"./Inventory-C3oP7R0e.js";import{L as Kt}from"./LocalShipping-BtuIbSlq.js";import{E as Xt}from"./Event-CY-q8oLw.js";import{P as pt}from"./Palette-CJqa17oG.js";import{C as ae}from"./Category-DMjoJfWl.js";import{S as Zt}from"./Search-DJBru7CE.js";import{I as ei}from"./Info-CJSpaAsH.js";import{T as ti}from"./TableContainer-DDgnYc8M.js";import{T as ii,a as xt,b as U,c as ri}from"./TableRow-CB0N1NYI.js";import{T as ai}from"./TableHead-sL7Y86j8.js";import{A as ht}from"./Autocomplete-CMfk4F3-.js";const a={primary:"#9C27B0",secondary:"#E91E63",dark:"#1A1A2E",gradient:"linear-gradient(135deg, #9C27B0 0%, #E91E63 100%)"},D="https://api.bookmyevent.ae",Ie="68e5fd7b8164d482d281c37f",gt=({children:R,...A})=>e.jsx(N,{...A,sx:{background:a.gradient,color:"white",borderRadius:"12px",textTransform:"none",fontWeight:700,letterSpacing:"0.5px",px:4,py:1.5,boxShadow:"0 4px 20px rgba(156, 39, 176, 0.3)",transition:"all 0.3s ease","&:hover":{background:a.gradient,boxShadow:"0 6px 25px rgba(156, 39, 176, 0.5)",transform:"translateY(-2px)"},"&:disabled":{opacity:.7},...A.sx},children:R}),oi=({label:R,color:A})=>e.jsx(n,{sx:{display:"inline-flex",px:1.5,py:.5,borderRadius:"8px",fontSize:"10px",fontWeight:800,textTransform:"uppercase",letterSpacing:"0.5px",bgcolor:p(A,.1),color:A,border:`1px solid ${p(A,.2)}`},children:R}),H=({icon:R,title:A,subtitle:G,color:O=a.primary})=>e.jsx(n,{sx:{mb:3},children:e.jsxs(v,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[e.jsx(n,{sx:{p:1.5,borderRadius:"12px",background:p(O,.1),color:O,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(R,{})}),e.jsxs(n,{children:[e.jsx(l,{variant:"h6",fontWeight:700,sx:{color:a.dark,letterSpacing:"-0.5px"},children:A}),G&&e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:G})]})]})}),oe=({value:R,onChange:A,options:G=[],label:O="",placeholder:X="Select an option",disabled:W=!1,icon:J=null,color:S=a.primary,helperText:Z="",required:Q=!1,fullWidth:se=!0,withSearch:le=!0,multiple:T=!1})=>{const[ce,I]=j.useState(!1),[b,ee]=j.useState(""),P=G.filter(y=>(y.label||y.title||y.name||y).toLowerCase().includes(b.toLowerCase()));return e.jsxs(mt,{fullWidth:se,disabled:W,children:[O&&e.jsxs(Qt,{shrink:!0,sx:{"&.Mui-focused":{color:S},backgroundColor:"white",px:1,fontWeight:600,letterSpacing:"0.3px",textTransform:"uppercase",fontSize:"0.75rem"},children:[O," ",Q&&e.jsx("span",{style:{color:"#F44336"},children:"*"})]}),e.jsxs(bt,{multiple:T,value:R,onChange:A,onOpen:()=>I(!0),onClose:()=>{I(!1),ee("")},displayEmpty:!0,open:ce,disabled:W,MenuProps:{PaperProps:{sx:{maxHeight:400,borderRadius:"16px",boxShadow:`0 20px 60px ${p(S,.3)}`,backgroundColor:"#FFFFFF",mt:1,"& .MuiMenuItem-root":{borderRadius:"10px",mx:1,my:.8,transition:"all 0.2s ease","&:hover":{backgroundColor:p(S,.12),transform:"translateX(8px)",paddingLeft:"24px"},"&.Mui-selected":{backgroundColor:p(S,.15),fontWeight:700,borderLeft:`3px solid ${S}`,paddingLeft:"21px","&:hover":{backgroundColor:p(S,.22)}}}}}},renderValue:y=>{if(T)return Array.isArray(y)&&y.length===0?e.jsx("span",{style:{color:"#9CA3AF"},children:X}):Array.isArray(y)?y.map(k=>{const B=G.find(be=>be.value===k);return(B==null?void 0:B.label)||k}).join(", "):"";if(!y)return e.jsx("span",{style:{color:"#9CA3AF"},children:X});const i=G.find(F=>F.value===y);return(i==null?void 0:i.label)||y},sx:{borderRadius:"16px",backgroundColor:W?"#F3F4F6":"white",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{boxShadow:W?"none":`0 8px 24px ${p(S,.15)}`,borderColor:S},"&.Mui-focused":{boxShadow:`0 0 0 4px ${p(S,.12)}, 0 8px 24px ${p(S,.2)}`,borderColor:S},"& .MuiSelect-select":{py:2,px:2,fontWeight:600,fontSize:"0.95rem",display:"flex",alignItems:"center",gap:1},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(0, 0, 0, 0.12)",borderWidth:"2px",transition:"all 0.3s ease"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:S},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:S,borderWidth:"2px"},"& .MuiSvgIcon-root":{transition:"all 0.3s ease",color:S}},children:[!T&&e.jsx(ne,{value:"",sx:{display:"none"},children:e.jsx("em",{children:X})}),le&&e.jsx(ne,{disabled:!0,sx:{backgroundColor:"#F8FAFC",borderBottom:`2px solid ${p(S,.1)}`,p:0,height:"auto","&.Mui-disabled":{opacity:1}},children:e.jsx(f,{autoFocus:!0,size:"small",placeholder:"Search...",onClick:y=>y.stopPropagation(),onChange:y=>ee(y.target.value),value:b,fullWidth:!0,InputProps:{startAdornment:e.jsx(M,{position:"start",children:e.jsx(Zt,{sx:{fontSize:18,color:S}})})},sx:{m:1,width:"auto","& .MuiInputBase-input":{py:1,px:1,fontSize:"0.9rem",fontWeight:500}}})}),P.length===0?e.jsx(ne,{disabled:!0,sx:{justifyContent:"center",color:"#9CA3AF"},children:"No results found"}):P.map((y,i)=>{const F=y.label||y.title||y.name||y,k=y.value!==void 0?y.value:y._id||y;return e.jsx(ne,{value:k,children:e.jsxs(v,{direction:"row",spacing:1.5,alignItems:"center",width:"100%",children:[J&&e.jsx(n,{sx:{width:32,height:32,borderRadius:"8px",background:p(S,.1),display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(J,{sx:{fontSize:16,color:S}})}),T&&e.jsx(yt,{checked:Array.isArray(R)&&R.includes(k),sx:{color:S,"&.Mui-checked":{color:S}}}),e.jsx(l,{sx:{fontWeight:500,flex:1},children:F}),!T&&R===k&&e.jsx(me,{sx:{fontSize:18,color:S,ml:"auto"}})]})},`${k}-${i}`)})]}),Z&&e.jsx(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:Z})]})},Si=()=>{var ze,De,Oe;const{id:R}=Lt(),[A]=$t(),G=A.get("id"),O=R||G,X=Nt(),W=!!O,J=t=>{if(!t)return null;if(t.startsWith("http"))return t;const o=t.startsWith("/")?t.slice(1):t;return`${D}/${o}`},[S,Z]=j.useState(!0),[Q,se]=j.useState(!1),[le,T]=j.useState(""),[ce,I]=j.useState(""),[b,ee]=j.useState(null),[P,y]=j.useState([]),[i,F]=j.useState({productName:"",description:"",category:"",subcategory:"",availableSizes:[],material:"",thumbnailImage:null,galleryImages:[],existingGallery:[],availabilityMode:"Available For Purchase",availableForPurchase:!0,availableForRental:!1,unitPrice:"",discountType:"None",tax:"",totalPrice:"",pricePerDay:"",minimumDays:"",lateCharges:"",rentalTotalPrice:"",advanceForBooking:"",securityDeposit:"",damagePolicy:"",stockQuantity:"",lowStockAlert:"",freeShipping:!1,flatRateShipping:!1,shippingPrice:"",minimumShippingDays:"",takeaway:!1,takeawayAddress:"",pickupLatitude:"",pickupLongitude:"",selectedOccasions:[],collections:[],tags:[],careInstructions:"",sizeGuideImage:null,existingSizeGuideImage:"",availableColors:[],customColorInput:"",allowBoutiqueChat:!0,returnPolicy:"",cancellationPolicy:"",isTopPick:!1,isActive:!0}),[k,B]=j.useState([{heading:"",points:[""]}]),[be,ft]=j.useState([]),[jt,te]=j.useState([]),ye=ve.useRef(null),[L,Pe]=j.useState("product"),[de,Y]=j.useState([]),[Ct,$]=j.useState([]),[fe,ue]=j.useState(!1),[_,je]=j.useState(null),[Ee,pe]=j.useState([]),[vt,xe]=j.useState(!1),[Ce,Re]=j.useState(!1),St=ve.useRef(null),kt=ve.useRef(null),wt="AIzaSyAfLUm1kPmeMkHh1Hr5nbgNpQJOsNa7B78",Ft=["Percentage","Fixed Amount","None"],It=["Wedding","Valentine","Festive","Daily Wear","Casual Outings","Anniversary","Engagement","Birthday","Party Wear","Office Wear"],Pt=["For Men","For Women","For Bride","For Groom"],Et=["XS","S","M","L","XL","XXL","Free Size"],Rt=["Red","Blue","Green","Black","White","Pink","Purple","Gold","Silver","Beige","Navy","Maroon","Teal","Lavender","Peach","Rose Gold"],At=["Cotton","Silk","Polyester","Linen","Wool","Blend","Satin","Chiffon","Georgette","Crepe","Velvet","Organza","Denim","Leather","Suede","Rayon","Viscose","Muslin","Jersey","Lycra","Spandex","Net","Tulle"],d=(t,o)=>{if(F(r=>{const s={...r,[t]:o};return t==="availableForPurchase"&&o===!0&&(s.availableForRental=!1),t==="availableForRental"&&o===!0&&(s.availableForPurchase=!1),s}),t==="unitPrice"||t==="tax"||t==="discountType"||t==="discountValue"){const r=Number(t==="unitPrice"?o:i.unitPrice),s=Number(t==="tax"?o:i.tax),u=t==="discountType"?o:i.discountType,x=Number(t==="discountValue"?o:i.discountValue);if(!r||r<=0){F(V=>({...V,totalPrice:""}));return}let h=0;u==="Percentage"?h=r*x/100:u==="Fixed Amount"&&(h=x);const m=Math.max(r-h,0),C=s?m*s/100:0,w=m+C;F(V=>({...V,totalPrice:w.toFixed(2)}))}if(t==="category"){const r=o;F(s=>({...s,category:r,subcategory:""})),r?q.get(`${D}/api/categories/parents/${r}/subcategories`).then(s=>{s.data&&s.data.success?te(s.data.data):te([])}).catch(s=>{console.error("Error fetching subcategories:",s),te([])}):te([]);return}if(t==="pricePerDay"||t==="minimumDays"){const r=t==="pricePerDay"?o:i.pricePerDay,s=t==="minimumDays"?o:i.minimumDays;if(r&&s){const u=parseFloat(r)*parseFloat(s);F(x=>({...x,rentalTotalPrice:u.toFixed(2)}))}}},Ae=(t,o,r)=>{const s=[...P];s[t][o]=r,y(s)},Wt=(t,o)=>{const r=[...P];r[t].image=o,y(r)},We=()=>{var r;const t=(r=i.customColorInput)==null?void 0:r.trim();if(!t)return;i.availableColors.some(s=>s.toLowerCase()===t.toLowerCase())||d("availableColors",[...i.availableColors,t]),d("customColorInput","")},Be=async()=>{var t;try{xe(!0),je(null);const o=localStorage.getItem("token"),r=(b==null?void 0:b._id)||(b==null?void 0:b.id);let s="";if(L==="product"){if(!r){console.error("Provider ID missing");return}s=`${D}/api/boutiques?provider=${r}`}else s=`${D}/api/categories/parents/${Ie}`;const x=((t=(await q.get(s,{headers:{Authorization:`Bearer ${o}`}})).data)==null?void 0:t.data)||[];pe(x),$(h=>{const m=[...h];return x.forEach(C=>{const w=m.findIndex(V=>V._id===C._id);w!==-1&&(m[w]=C)}),m})}catch(o){console.error("Failed to load related items",o),pe([])}finally{xe(!1)}},Bt=async t=>{var o;try{xe(!0),je(t);const r=localStorage.getItem("token"),u=((o=(await q.get(`${D}/api/boutiques?category=${t._id}&limit=100`,{headers:{Authorization:`Bearer ${r}`}})).data)==null?void 0:o.data)||[];pe(u),$(x=>{const h=[...x];return u.forEach(m=>{const C=h.findIndex(w=>w._id===m._id);C!==-1&&(h[C]=m)}),h})}catch(r){console.error("Failed to load ornaments for category",r),pe([])}finally{xe(!1)}},Mt=()=>{je(null),Be()},zt=t=>{const o=t.target.files[0];if(o){if(o.size>5*1024*1024){I("Image size should be less than 5MB");return}d("thumbnailImage",o)}},Dt=t=>{const o=Array.from(t.target.files);if(i.galleryImages.length+i.existingGallery.length+o.length>10){I("Maximum 10 images allowed in gallery");return}const s=o.filter(u=>u.size<=5*1024*1024);s.length<o.length&&I("Some images exceeded 5MB size limit"),d("galleryImages",[...i.galleryImages,...s])};j.useEffect(()=>{(()=>{try{const o=localStorage.getItem("vendor")||localStorage.getItem("user")||localStorage.getItem("vendorData");if(o)ee(JSON.parse(o));else{const r=localStorage.getItem("vendorId")||localStorage.getItem("userId");r&&ee({_id:r,id:r})}}catch(o){console.error("Vendor load error:",o),I("Failed to load vendor information")}})()},[]),j.useEffect(()=>{var o;if((o=window.google)!=null&&o.maps){Re(!0);return}const t=document.createElement("script");t.src=`https://maps.googleapis.com/maps/api/js?key=${wt}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>Re(!0),document.head.appendChild(t)},[]),j.useEffect(()=>{(async()=>{try{const o=await q.get(`${D}/api/categories/parents/${Ie}`);o.data&&o.data.success&&ft(o.data.data)}catch(o){console.error("Error fetching boutique categories:",o)}})()},[]),j.useEffect(()=>{let t=[];const o=i.availableSizes||[],r=i.availableColors||[];o.length>0&&r.length>0?o.forEach(s=>{r.forEach(u=>{const x=`${u} - ${s}`,h=P.find(m=>{var C,w;return m.name===x||((C=m.attributeValues)==null?void 0:C.includes(s))&&((w=m.attributeValues)==null?void 0:w.includes(u))});t.push(h||{name:x,attributeValues:[u,s],price:i.unitPrice||"",stockQuantity:"",image:null})})}):o.length>0?t=o.map(s=>P.find(x=>{var h;return x.name===s||((h=x.attributeValues)==null?void 0:h.length)===1&&x.attributeValues[0]===s})||{name:s,attributeValues:[s],price:i.unitPrice||"",stockQuantity:"",image:null}):r.length>0&&(t=r.map(s=>P.find(x=>{var h;return x.name===s||((h=x.attributeValues)==null?void 0:h.length)===1&&x.attributeValues[0]===s})||{name:s,attributeValues:[s],price:i.unitPrice||"",stockQuantity:"",image:null})),y(t)},[i.availableSizes,i.availableColors,i.unitPrice]),j.useEffect(()=>{if(!W){Z(!1);return}(async()=>{var o,r,s,u,x,h,m,C,w,V,Te,Le,$e,Ne,Ge,_e,Ve,qe,Ue,He,Je,Qe,Ye,Ke,Xe,Ze,et,tt,it;try{const{data:he}=await q.get(`${D}/api/boutiques/${O}`),c=he.data||he;if(F({productName:c.name||"",description:c.description||"",category:((o=c.category)==null?void 0:o._id)||c.category||"",subcategory:((r=c.subCategory)==null?void 0:r._id)||c.subCategory||"",availableSizes:c.availableSizes||[],material:c.material||"",thumbnailImage:Array.isArray(c.thumbnail)?c.thumbnail[0]:c.thumbnail||null,galleryImages:[],existingGallery:c.galleryImages||[],availabilityMode:c.availabilityMode==="rental"?"Available For Rental":"Available For Purchase",availableForPurchase:c.availabilityMode==="purchase",availableForRental:c.availabilityMode==="rental",unitPrice:((s=c.buyPricing)==null?void 0:s.unitPrice)||"",discountType:((u=c.buyPricing)==null?void 0:u.discountType)==="none"?"None":((x=c.buyPricing)==null?void 0:x.discountType)==="percentage"?"Percentage":"Fixed Amount",discountValue:((h=c.buyPricing)==null?void 0:h.discountValue)||"",tax:((m=c.buyPricing)==null?void 0:m.tax)||"",totalPrice:((C=c.buyPricing)==null?void 0:C.totalPrice)||"",pricePerDay:((w=c.rentalPricing)==null?void 0:w.pricePerDay)||"",minimumDays:((V=c.rentalPricing)==null?void 0:V.minimumDays)||"",lateCharges:((Te=c.rentalPricing)==null?void 0:Te.lateCharges)||"",rentalTotalPrice:((Le=c.rentalPricing)==null?void 0:Le.totalPrice)||"",advanceForBooking:(($e=c.rentalPricing)==null?void 0:$e.advanceForBooking)||"",securityDeposit:((Ne=c.rentalPricing)==null?void 0:Ne.securityDeposit)||"",damagePolicy:((Ge=c.rentalPricing)==null?void 0:Ge.damagePolicy)||"",stockQuantity:((_e=c.stock)==null?void 0:_e.quantity)||"",lowStockAlert:((Ve=c.stock)==null?void 0:Ve.lowStockAlert)||"",freeShipping:((qe=c.shipping)==null?void 0:qe.free)||!1,flatRateShipping:((Ue=c.shipping)==null?void 0:Ue.flatRate)||!1,shippingPrice:((He=c.shipping)==null?void 0:He.price)||"",minimumShippingDays:((Je=c.shipping)==null?void 0:Je.minimumShippingDays)||"",selectedOccasions:c.occasions||[],collections:c.collections||[],selectedFeatures:((Qe=c.features)==null?void 0:Qe.basicFeatures)||[],suitableFor:((Ye=c.features)==null?void 0:Ye.suitableFor)||[],styleFeatures:((Xe=(Ke=c.features)==null?void 0:Ke.style)==null?void 0:Xe[0])||"",tags:c.tags||[],careInstructions:c.careInstructions||"",existingSizeGuideImage:c.sizeGuideImage||"",availableColors:c.availableColors||[],returnPolicy:c.returnPolicy||"",cancellationPolicy:c.cancellationPolicy||"",isTopPick:c.isTopPick||!1,isActive:c.isActive!==void 0?c.isActive:!0}),(Ze=c.variations)!=null&&Ze.length&&y(c.variations.map(E=>({name:E.name,attributeValues:E.attributeValues||[],price:E.price,stockQuantity:E.stockQuantity,image:E.image}))),c.relatedItems&&(Pe(c.relatedItems.linkBy||"product"),Y(((et=c.relatedItems.items)==null?void 0:et.map(E=>E._id||E))||[]),$(c.relatedItems.items||[])),c.termsAndConditions)try{B(typeof c.termsAndConditions=="string"?JSON.parse(c.termsAndConditions):c.termsAndConditions)}catch(E){console.error("Error parsing terms:",E),B([{heading:"",points:[""]}])}const rt=((tt=c.category)==null?void 0:tt._id)||c.category;if(rt){const E=await q.get(`${D}/api/categories/parents/${rt}/subcategories`);(it=E.data)!=null&&it.success&&te(E.data.data)}}catch(he){console.error("Load Error:",he),I("Failed to load product data")}finally{Z(!1)}})()},[W,O]),j.useEffect(()=>{fe&&Be()},[fe,L]);const Ot=()=>!(b!=null&&b._id)&&!(b!=null&&b.id)?"Vendor not authenticated. Please login again.":i.productName.trim()?i.category?i.availableForPurchase&&(!i.unitPrice||parseFloat(i.unitPrice)<=0)?"Valid unit price is required":i.description.trim()?i.availableForRental&&(!i.pricePerDay||parseFloat(i.pricePerDay)<=0)?"Valid price per day is required for rental":i.availableForRental&&(!i.minimumDays||parseInt(i.minimumDays)<=0)?"Minimum rental days is required":!i.availableForPurchase&&!i.availableForRental?"Please select at least one availability option (Purchase or Rental)":null:"Product description is required":"Please select a category":"Product name is required",Tt=()=>{if(!window.google||!Ce)return;const t={lat:Number(i.pickupLatitude)||11.6854,lng:Number(i.pickupLongitude)||75.9115},o=new window.google.maps.Map(document.getElementById("pickup-map"),{center:t,zoom:14}),r=new window.google.maps.Marker({position:t,map:o,draggable:!0});if(r.addListener("dragend",s=>{F(u=>({...u,pickupLatitude:s.latLng.lat().toString(),pickupLongitude:s.latLng.lng().toString()}))}),o.addListener("click",s=>{r.setPosition(s.latLng),F(u=>({...u,pickupLatitude:s.latLng.lat().toString(),pickupLongitude:s.latLng.lng().toString()}))}),ye.current){const s=new window.google.maps.places.Autocomplete(ye.current,{componentRestrictions:{country:"in"},fields:["formatted_address","geometry"]});s.addListener("place_changed",()=>{const u=s.getPlace();if(!u.geometry)return;const x=u.geometry.location;o.setCenter(x),o.setZoom(16),r.setPosition(x),F(h=>({...h,takeawayAddress:u.formatted_address,pickupLatitude:x.lat().toString(),pickupLongitude:x.lng().toString()}))})}St.current=o,kt.current=r};j.useEffect(()=>{Ce&&i.takeaway&&setTimeout(Tt,300)},[Ce,i.takeaway]);const Me=async()=>{var x,h;const t=Ot();if(t){I(t),window.scrollTo({top:0,behavior:"smooth"});return}const o=(b==null?void 0:b._id)||(b==null?void 0:b.id);if(!o){I("Vendor not authenticated");return}const r=new FormData;let s=i.availableForRental?"rental":"purchase";r.append("name",i.productName),r.append("description",i.description),r.append("category",i.category),r.append("subCategory",i.subcategory),r.append("availableSizes",JSON.stringify(i.availableSizes)),r.append("availableColors",JSON.stringify(i.availableColors)),r.append("material",i.material),r.append("availabilityMode",s),r.append("isActive",i.isActive),r.append("isTopPick",i.isTopPick),r.append("returnPolicy",i.returnPolicy),r.append("cancellationPolicy",i.cancellationPolicy),r.append("allowBoutiqueChat",i.allowBoutiqueChat),r.append("provider",o),r.append("module",Ie);const u=[];if(i.availableSizes.length>0&&u.push({name:"Size",values:i.availableSizes}),i.availableColors.length>0&&u.push({name:"Color",values:i.availableColors}),r.append("attributes",JSON.stringify(u)),i.thumbnailImage instanceof File)r.append("thumbnail",i.thumbnailImage);else if(typeof i.thumbnailImage=="string"){const m=Array.isArray(i.thumbnailImage)?i.thumbnailImage[0]:i.thumbnailImage;r.append("thumbnail",m)}if(P.length>0){const m=P.map((C,w)=>({name:C.name,attributeValues:C.attributeValues,price:Number(C.price),stockQuantity:Number(C.stockQuantity),image:C.image instanceof File?`VAR_FILE_${w}`:C.image}));r.append("variations",JSON.stringify(m)),P.forEach((C,w)=>{C.image instanceof File&&r.append("variationImages",C.image)})}i.galleryImages.forEach(m=>{m instanceof File&&r.append("galleryImages",m)}),W&&r.append("existingGalleryImages",JSON.stringify(i.existingGallery)),r.append("buyPricing",JSON.stringify({unitPrice:i.unitPrice,discountType:i.discountType.toLowerCase()==="none"?"none":i.discountType.toLowerCase()==="percentage"?"percentage":"flat",discountValue:i.discountValue||0,tax:i.tax,totalPrice:i.totalPrice})),r.append("rentalPricing",JSON.stringify({pricePerDay:i.pricePerDay,minimumDays:i.minimumDays,lateCharges:i.lateCharges,totalPrice:i.rentalTotalPrice,advanceForBooking:i.advanceForBooking,securityDeposit:i.securityDeposit,damagePolicy:i.damagePolicy})),r.append("stock",JSON.stringify({quantity:i.stockQuantity,lowStockAlert:i.lowStockAlert})),r.append("shipping",JSON.stringify({free:i.freeShipping,flatRate:i.flatRateShipping,minimumShippingDays:i.minimumShippingDays,takeaway:i.takeaway,takeawayLocation:i.takeawayAddress,pickupLatitude:i.pickupLatitude,pickupLongitude:i.pickupLongitude,price:i.shippingPrice})),r.append("tags",JSON.stringify(i.tags)),r.append("occasions",JSON.stringify(i.selectedOccasions)),r.append("collections",JSON.stringify(i.collections)),r.append("termsAndConditions",JSON.stringify(k)),r.append("relatedItems",JSON.stringify({linkBy:L,items:de}));try{se(!0),I(""),T("");const C={headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}};W?(await q.put(`${D}/api/boutiques/${O}`,r,C),T("Product updated successfully!")):(await q.post(`${D}/api/boutiques`,r,C),T("Product created successfully!"),setTimeout(()=>{X("/boutique/packagelist")},1500))}catch(m){console.error("Submit error:",m),I(((h=(x=m.response)==null?void 0:x.data)==null?void 0:h.message)||m.message||"Error saving product")}finally{se(!1),window.scrollTo({top:0,behavior:"smooth"})}};return S?e.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:e.jsxs(v,{alignItems:"center",spacing:2,children:[e.jsx(ge,{size:60,sx:{color:a.primary}}),e.jsx(l,{color:"text.secondary",children:"Loading product data..."})]})}):e.jsxs(n,{sx:{background:"#F4F7FE",minHeight:"100vh",pb:8},children:[e.jsx(n,{sx:{background:"rgba(255, 255, 255, 0.95)",borderBottom:"1px solid #E0E4EC",p:2,px:{xs:2,md:4},mb:3,boxShadow:"0 2px 10px rgba(0, 0, 0, 0.05)"},children:e.jsxs(n,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},justifyContent:"space-between",gap:2},children:[e.jsxs(v,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(K,{onClick:()=>X(-1),sx:{background:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",color:a.dark,"&:hover":{background:a.gradient,color:"white"}},children:e.jsx(Se,{})}),e.jsxs(n,{children:[e.jsxs(l,{variant:"h5",fontWeight:800,sx:{color:"#1B254B",letterSpacing:"-0.5px",fontSize:{xs:"1.2rem",md:"1.5rem"}},children:[W?"Edit":"Add"," Boutique Product"]}),b&&e.jsxs(l,{variant:"caption",sx:{color:"#A3AED0",fontWeight:600},children:["VENDOR PANEL • ",((ze=b==null?void 0:b.firstName)==null?void 0:ze.toUpperCase())||((De=b==null?void 0:b.email)==null?void 0:De.split("@")[0].toUpperCase())||"VENDOR"]})]})]}),e.jsx(gt,{onClick:Me,disabled:Q||!b,startIcon:Q?null:e.jsx(me,{}),sx:{width:{xs:"100%",sm:"auto"}},children:Q?e.jsx(ge,{size:24,color:"inherit"}):W?"Update":"Publish"})]})}),e.jsxs(n,{sx:{px:{xs:2,md:6},pt:3},children:[le&&e.jsx(at,{severity:"success",variant:"filled",icon:e.jsx(me,{fontSize:"inherit"}),onClose:()=>T(""),sx:{mb:3,borderRadius:"12px",boxShadow:"0 4px 20px rgba(76, 175, 80, 0.2)"},children:le}),ce&&e.jsx(at,{severity:"error",variant:"filled",onClose:()=>I(""),sx:{mb:3,borderRadius:"12px",boxShadow:"0 4px 20px rgba(244, 67, 54, 0.2)"},children:ce})]}),e.jsx(n,{sx:{px:{xs:2,md:6},width:"100%",maxWidth:"100%",margin:0},children:e.jsxs(v,{spacing:4,children:[e.jsxs(z,{sx:{borderRadius:"20px",p:4,background:"linear-gradient(to bottom, #ffffff 0%, #f8f9ff 100%)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",border:"1px solid rgba(102, 126, 234, 0.1)"},children:[e.jsx(H,{icon:ae,title:"General Information",subtitle:"Provide essential details about your boutique item"}),e.jsxs(v,{spacing:3.5,children:[e.jsx(f,{fullWidth:!0,label:"Product Name *",placeholder:"e.g. Designer Lehenga, Bridal Gown",value:i.productName,onChange:t=>d("productName",t.target.value),variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"14px",backgroundColor:"white",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 12px rgba(102, 126, 234, 0.15)"},"&.Mui-focused":{boxShadow:"0 4px 16px rgba(102, 126, 234, 0.25)"}},"& .MuiInputLabel-root.Mui-focused":{color:"#667eea"}}}),e.jsxs(g,{container:!0,spacing:2.5,children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(oe,{fullWidth:!0,label:"Category",placeholder:"Select Category",value:i.category,onChange:t=>d("category",t.target.value),options:be.map(t=>({value:t._id,label:t.title})),icon:ae,color:a.primary,required:!0,withSearch:!0})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(oe,{fullWidth:!0,label:"Subcategory",placeholder:"Select Subcategory",value:i.subcategory,onChange:t=>d("subcategory",t.target.value),disabled:!i.category,options:jt.map(t=>({value:t._id,label:t.title})),icon:ae,color:a.primary,withSearch:!0,helperText:i.category?"":"Select category first"})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(oe,{fullWidth:!0,label:"Fabric / Material",placeholder:"Select Fabric",value:i.material,onChange:t=>d("material",t.target.value),options:At,icon:pt,color:a.primary,withSearch:!0})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(oe,{fullWidth:!0,label:"Available Sizes",placeholder:"Select Sizes",value:i.availableSizes||[],onChange:t=>d("availableSizes",t.target.value),options:Et,icon:ut,color:a.primary,multiple:!0,withSearch:!0})}),e.jsxs(g,{item:!0,xs:12,md:4,children:[e.jsx(oe,{fullWidth:!0,label:"Available Colors",placeholder:"Select Colors",value:i.availableColors||[],onChange:t=>d("availableColors",t.target.value),options:Rt,icon:pt,color:a.secondary,multiple:!0,withSearch:!0}),e.jsx(n,{sx:{mt:2},children:e.jsxs(v,{direction:"row",spacing:1,children:[e.jsx(f,{fullWidth:!0,size:"small",label:"Add Custom Color",placeholder:"Enter color name",value:i.customColorInput||"",onChange:t=>d("customColorInput",t.target.value),onKeyPress:t=>{t.key==="Enter"&&(t.preventDefault(),We())},sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:"white"}}}),e.jsx(N,{variant:"contained",onClick:We,disabled:!((Oe=i.customColorInput)!=null&&Oe.trim()),sx:{borderRadius:"12px",background:a.gradient,minWidth:"80px",textTransform:"none",fontWeight:600,"&:hover":{background:a.gradient,opacity:.9},"&:disabled":{background:"#E5E7EB",color:"#9CA3AF"}},children:"Add"})]})})]})]}),e.jsx(f,{fullWidth:!0,label:"Description *",multiline:!0,rows:4,placeholder:"Describe the boutique item's quality, craftsmanship, design details, fabric, and unique features...",value:i.description,onChange:t=>d("description",t.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"14px",backgroundColor:"white",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 12px rgba(102, 126, 234, 0.15)"},"&.Mui-focused":{boxShadow:"0 4px 16px rgba(102, 126, 234, 0.25)"}},"& .MuiInputLabel-root.Mui-focused":{color:"#667eea"}}}),e.jsx(f,{fullWidth:!0,label:"Care Instructions",multiline:!0,rows:2,placeholder:"e.g. Dry clean only, Hand wash separately...",value:i.careInstructions,onChange:t=>d("careInstructions",t.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"14px",backgroundColor:"white",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 12px rgba(102, 126, 234, 0.15)"},"&.Mui-focused":{boxShadow:"0 4px 16px rgba(102, 126, 234, 0.25)"}},"& .MuiInputLabel-root.Mui-focused":{color:"#667eea"}}})]})]}),e.jsxs(z,{sx:{borderRadius:"24px",p:4,background:"white",boxShadow:"0 12px 48px rgba(0,0,0,0.1)",border:"1px solid #E5E7EB",mb:4},children:[e.jsxs(n,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",fontWeight:800,sx:{color:"#1B254B"},children:"Product Variations"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Add attributes like Size, Color to generate price and stock variations"})]}),P.length>0&&e.jsx(ti,{component:z,elevation:0,sx:{borderRadius:"16px",border:"1px solid #E5E7EB"},children:e.jsxs(ii,{children:[e.jsx(ai,{sx:{bgcolor:"#F8F9FA"},children:e.jsxs(xt,{children:[e.jsx(U,{sx:{fontWeight:700},children:"Variation"}),e.jsx(U,{sx:{fontWeight:700},children:"Price"}),e.jsx(U,{sx:{fontWeight:700},children:"Stock"}),e.jsx(U,{sx:{fontWeight:700},children:"Image"})]})}),e.jsx(ri,{children:P.map((t,o)=>e.jsxs(xt,{children:[e.jsx(U,{sx:{fontWeight:700},children:t.name}),e.jsx(U,{children:e.jsx(f,{size:"small",type:"number",value:t.price,onChange:r=>Ae(o,"price",r.target.value),InputProps:{startAdornment:e.jsx(M,{position:"start",children:"₹"})},sx:{width:120}})}),e.jsx(U,{children:e.jsx(f,{size:"small",type:"number",value:t.stockQuantity,onChange:r=>Ae(o,"stockQuantity",r.target.value),sx:{width:100}})}),e.jsx(U,{children:e.jsxs(v,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(K,{component:"label",sx:{bgcolor:p(a.primary,.1),color:a.primary,"&:hover":{bgcolor:a.primary,color:"white"}},children:[e.jsx(Gt,{fontSize:"small"}),e.jsx("input",{type:"file",hidden:!0,onChange:r=>Wt(o,r.target.files[0])})]}),t.image&&e.jsx(n,{sx:{width:40,height:40,borderRadius:1,overflow:"hidden",border:"1px solid #eee"},children:e.jsx("img",{src:t.image instanceof File?URL.createObjectURL(t.image):J(t.image),alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})})]})})]},o))})]})})]}),e.jsxs(z,{sx:{borderRadius:"16px",p:4,background:"white",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)"},children:[e.jsx(H,{icon:ke,title:"Media Collection",subtitle:"Upload images to showcase your product"}),e.jsxs(v,{spacing:4,children:[e.jsxs(n,{children:[e.jsx(l,{variant:"subtitle2",sx:{mb:1.5,color:"#4D5E80",fontWeight:600},children:"Cover Photo"}),e.jsxs(n,{onClick:()=>document.getElementById("thumbnail-input").click(),sx:{border:"2px dashed #CBD5E0",borderRadius:"16px",p:3,textAlign:"center",cursor:"pointer",minHeight:200,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",bgcolor:"#F8FAFC",transition:"0.2s","&:hover":{borderColor:a.primary,bgcolor:"#F5F0F7"}},children:[e.jsx("input",{id:"thumbnail-input",type:"file",hidden:!0,accept:"image/*",onChange:zt}),i.thumbnailImage?e.jsxs(n,{sx:{width:"100%",height:"100%",maxWidth:300},children:[e.jsx("img",{src:typeof i.thumbnailImage=="string"?J(i.thumbnailImage):URL.createObjectURL(i.thumbnailImage),alt:"Thumbnail",style:{width:"100%",height:"auto",maxHeight:200,objectFit:"contain",borderRadius:"12px"}}),e.jsx(K,{onClick:t=>{t.stopPropagation(),d("thumbnailImage",null)},sx:{position:"absolute",top:8,right:8,bgcolor:"rgba(255,255,255,0.9)","&:hover":{bgcolor:"white"}},children:e.jsx(re,{fontSize:"small"})})]}):e.jsxs(v,{spacing:1,alignItems:"center",children:[e.jsx(ke,{sx:{fontSize:48,color:"#A3AED0"}}),e.jsx(l,{variant:"body2",fontWeight:"600",color:"#1B254B",children:"Upload Thumbnail"}),e.jsx(l,{variant:"caption",color:"#A3AED0",children:"High resolution JPG, PNG"})]})]})]}),e.jsxs(n,{children:[e.jsx(l,{variant:"subtitle2",sx:{mb:1.5,color:"#4D5E80",fontWeight:600},children:"Product Gallery (Max 10 Images)"}),e.jsxs(n,{onClick:()=>document.getElementById("gallery-input").click(),sx:{border:"2px dashed #CBD5E0",borderRadius:"16px",p:3,textAlign:"center",cursor:"pointer",minHeight:120,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#F8FAFC",transition:"0.2s","&:hover":{borderColor:a.primary,bgcolor:"#F5F0F7"},mb:2},children:[e.jsx("input",{id:"gallery-input",type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:Dt}),e.jsxs(v,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(dt,{sx:{color:a.primary}}),e.jsx(l,{variant:"body2",fontWeight:"600",color:"#1B254B",children:"Add Gallery Images"})]})]}),e.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[i.existingGallery.map((t,o)=>e.jsxs(n,{sx:{position:"relative",width:100,height:100},children:[e.jsx("img",{src:J(t),alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px",border:"1px solid #E0E4EC"}}),e.jsx(K,{size:"small",onClick:()=>{const r=[...i.existingGallery];r.splice(o,1),d("existingGallery",r)},sx:{position:"absolute",top:-8,right:-8,bgcolor:"white",border:"1px solid #E0E4EC"},children:e.jsx(re,{sx:{fontSize:14}})})]},`ex-${o}`)),i.galleryImages.map((t,o)=>e.jsxs(n,{sx:{position:"relative",width:100,height:100},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px",border:"1px solid #E0E4EC"}}),e.jsx(K,{size:"small",onClick:()=>{const r=[...i.galleryImages];r.splice(o,1),d("galleryImages",r)},sx:{position:"absolute",top:-8,right:-8,bgcolor:"white",border:"1px solid #E0E4EC"},children:e.jsx(re,{sx:{fontSize:14}})})]},`new-${o}`))]})]}),e.jsxs(n,{children:[e.jsx(l,{variant:"subtitle2",sx:{mb:1.5,color:"#4D5E80",fontWeight:600},children:"Size Guide Image"}),e.jsxs(n,{onClick:()=>document.getElementById("sizeguide-input").click(),sx:{border:"2px dashed #CBD5E0",borderRadius:"16px",p:3,textAlign:"center",cursor:"pointer",minHeight:120,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",bgcolor:"#F8FAFC",transition:"0.2s","&:hover":{borderColor:a.primary,bgcolor:"#F5F0F7"}},children:[e.jsx("input",{id:"sizeguide-input",type:"file",hidden:!0,accept:"image/*",onChange:t=>d("sizeGuideImage",t.target.files[0])}),i.sizeGuideImage||i.existingSizeGuideImage?e.jsxs(n,{sx:{width:"100%",height:"100%",maxWidth:200},children:[e.jsx("img",{src:i.sizeGuideImage instanceof File?URL.createObjectURL(i.sizeGuideImage):J(i.existingSizeGuideImage||i.sizeGuideImage),alt:"Size Guide",style:{width:"100%",height:"auto",maxHeight:100,objectFit:"contain",borderRadius:"8px"}}),e.jsx(K,{onClick:t=>{t.stopPropagation(),d("sizeGuideImage",null),d("existingSizeGuideImage","")},sx:{position:"absolute",top:4,right:4,bgcolor:"rgba(255,255,255,0.9)"},children:e.jsx(re,{fontSize:"small"})})]}):e.jsxs(v,{spacing:1,alignItems:"center",children:[e.jsx(ke,{sx:{fontSize:32,color:"#A3AED0"}}),e.jsx(l,{variant:"caption",fontWeight:"600",children:"Upload Size Guide"})]})]})]})]})]}),e.jsxs(z,{sx:{borderRadius:"24px",p:0,background:"white",boxShadow:"0 12px 48px rgba(0,0,0,0.1)",overflow:"hidden",border:"1px solid #E5E7EB"},children:[e.jsxs(n,{sx:{background:a.gradient,p:4,position:"relative",overflow:"hidden"},children:[e.jsx(n,{sx:{position:"absolute",top:-50,right:-50,width:200,height:200,borderRadius:"50%",background:"rgba(255,255,255,0.1)",filter:"blur(40px)"}}),e.jsxs(v,{direction:"row",justifyContent:"space-between",alignItems:"center",position:"relative",children:[e.jsxs(n,{children:[e.jsx(l,{variant:"h5",fontWeight:800,color:"white",mb:.5,children:"Pricing & Availability"}),e.jsx(l,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)"},children:"Configure your product pricing details"})]}),e.jsx(Yt,{sx:{fontSize:48,color:"rgba(255,255,255,0.3)"}})]})]}),e.jsx(n,{sx:{p:3,background:"linear-gradient(to right, #F8F9FF, #FFF5F8)",borderBottom:"2px solid #F0F0F0"},children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(n,{sx:{p:2.5,borderRadius:"16px",background:"white",border:i.availableForPurchase?`2px solid ${a.primary}`:"2px solid #E5E7EB",boxShadow:i.availableForPurchase?"0 8px 24px rgba(156,39,176,0.15)":"none",transition:"all 0.3s ease",cursor:"pointer"},onClick:()=>d("availableForPurchase",!i.availableForPurchase),children:e.jsxs(v,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(v,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(n,{sx:{width:48,height:48,borderRadius:"12px",background:i.availableForPurchase?a.gradient:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ct,{sx:{color:i.availableForPurchase?"white":"#9CA3AF"}})}),e.jsxs(n,{children:[e.jsx(l,{fontWeight:700,fontSize:"1rem",children:"Available For Purchase"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Sell this product directly"})]})]}),e.jsx(ie,{checked:i.availableForPurchase,onChange:t=>d("availableForPurchase",t.target.checked),onClick:t=>t.stopPropagation()})]})})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(n,{sx:{p:2.5,borderRadius:"16px",background:"white",border:i.availableForRental?`2px solid ${a.secondary}`:"2px solid #E5E7EB",boxShadow:i.availableForRental?"0 8px 24px rgba(233,30,99,0.15)":"none",transition:"all 0.3s ease",cursor:"pointer"},onClick:()=>d("availableForRental",!i.availableForRental),children:e.jsxs(v,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(v,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(n,{sx:{width:48,height:48,borderRadius:"12px",background:i.availableForRental?"linear-gradient(135deg, #E91E63, #F06292)":"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(lt,{sx:{color:i.availableForRental?"white":"#9CA3AF"}})}),e.jsxs(n,{children:[e.jsx(l,{fontWeight:700,fontSize:"1rem",children:"Available For Rental"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Rent out this product"})]})]}),e.jsx(ie,{checked:i.availableForRental,onChange:t=>d("availableForRental",t.target.checked),onClick:t=>t.stopPropagation()})]})})})]})}),e.jsx(n,{sx:{p:4},children:e.jsxs(v,{spacing:4,children:[i.availableForPurchase&&e.jsxs(n,{children:[e.jsx(n,{sx:{mb:3,pb:2,borderBottom:"2px solid #F0F0F0"},children:e.jsxs(v,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(n,{sx:{width:40,height:40,borderRadius:"10px",background:p(a.primary,.1),display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ct,{sx:{color:a.primary,fontSize:20}})}),e.jsxs(n,{children:[e.jsx(l,{fontWeight:700,fontSize:"1.1rem",children:"Purchase Invoice"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Set your selling price and applicable taxes"})]})]})}),e.jsxs(n,{sx:{border:"2px solid #E5E7EB",borderRadius:"20px",overflow:"hidden",boxShadow:"0 4px 16px rgba(0,0,0,0.06)"},children:[e.jsx(n,{sx:{p:3.5,background:"linear-gradient(135deg, #FAFBFC 0%, #F5F3FF 100%)",borderBottom:"2px solid #E5E7EB"},children:e.jsxs(g,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(g,{item:!0,xs:12,md:4,children:e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(l,{variant:"caption",fontWeight:700,sx:{mb:1,display:"block",color:a.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Unit Price *"}),e.jsx(f,{fullWidth:!0,placeholder:"0.00",type:"number",value:i.unitPrice,onChange:t=>d("unitPrice",t.target.value),InputProps:{startAdornment:e.jsx(M,{position:"start",children:e.jsx(n,{sx:{width:36,height:36,borderRadius:"10px",background:a.gradient,display:"flex",alignItems:"center",justifyContent:"center",mr:1},children:e.jsx(l,{fontWeight:800,color:"white",fontSize:"1.1rem",children:"₹"})})})},sx:{"& .MuiOutlinedInput-root":{background:"white",borderRadius:"14px",fontWeight:700,fontSize:"1.2rem",border:"2px solid #E5E7EB","&:hover":{borderColor:a.primary},"&.Mui-focused":{borderColor:a.primary,boxShadow:`0 0 0 3px ${p(a.primary,.1)}`}},"& .MuiOutlinedInput-input":{py:2}}})]})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(l,{variant:"caption",fontWeight:700,sx:{mb:1,display:"block",color:a.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Discount Type"}),e.jsx(mt,{fullWidth:!0,children:e.jsx(bt,{value:i.discountType,onChange:t=>d("discountType",t.target.value),displayEmpty:!0,sx:{background:"white",borderRadius:"14px",fontWeight:700,border:"2px solid #E5E7EB","& .MuiSelect-select":{py:2},"&:hover":{borderColor:a.primary},"&.Mui-focused":{borderColor:a.primary,boxShadow:`0 0 0 3px ${p(a.primary,.1)}`}},children:Ft.map(t=>e.jsx(ne,{value:t,sx:{fontWeight:600},children:t},t))})})]})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(l,{variant:"caption",fontWeight:700,sx:{mb:1,display:"block",color:a.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Discount Value"}),e.jsx(f,{fullWidth:!0,placeholder:"0",type:"number",disabled:i.discountType==="None",value:i.discountValue,onChange:t=>d("discountValue",t.target.value),InputProps:{endAdornment:e.jsx(M,{position:"end",children:e.jsx(l,{fontWeight:700,color:"text.secondary",children:i.discountType==="Percentage"?"%":"$"})})},sx:{"& .MuiOutlinedInput-root":{background:i.discountType==="None"?"#F3F4F6":"white",borderRadius:"14px",fontWeight:700,border:"2px solid #E5E7EB","&:hover":{borderColor:a.primary}},"& .MuiOutlinedInput-input":{py:2}}})]})})]})}),e.jsx(n,{sx:{p:3.5,background:"white",borderBottom:"2px solid #E5E7EB"},children:e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(l,{variant:"caption",fontWeight:700,sx:{mb:1,display:"block",color:a.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Tax (GST)"}),e.jsx(f,{fullWidth:!0,placeholder:"0",type:"number",value:i.tax,onChange:t=>d("tax",t.target.value),InputProps:{endAdornment:e.jsx(M,{position:"end",children:e.jsx(n,{sx:{width:36,height:36,borderRadius:"10px",background:p(a.primary,.1),display:"flex",alignItems:"center",justifyContent:"center",ml:1},children:e.jsx(l,{fontWeight:800,color:a.primary,fontSize:"1rem",children:"%"})})})},sx:{"& .MuiOutlinedInput-root":{background:"#FAFBFC",borderRadius:"14px",fontWeight:700,fontSize:"1.1rem",border:"2px solid #E5E7EB","&:hover":{borderColor:a.primary,background:"white"},"&.Mui-focused":{borderColor:a.primary,background:"white",boxShadow:`0 0 0 3px ${p(a.primary,.1)}`}},"& .MuiOutlinedInput-input":{py:2}}})]})}),e.jsx(n,{sx:{p:3,background:"linear-gradient(135deg, #F3E5F5, #E1BEE7)"},children:e.jsxs(v,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(l,{fontWeight:700,fontSize:"1.1rem",color:a.primary,children:"Total Amount"}),e.jsx(n,{sx:{px:3,py:1.5,borderRadius:"12px",background:"white",minWidth:150,textAlign:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:e.jsxs(l,{fontWeight:800,fontSize:"1.5rem",color:a.primary,children:["₹",i.totalPrice||"0.00"]})})]})})]})]}),i.availableForRental&&e.jsxs(n,{children:[e.jsx(n,{sx:{mb:3,pb:2,borderBottom:"2px solid #F0F0F0"},children:e.jsxs(v,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(n,{sx:{width:40,height:40,borderRadius:"10px",background:p(a.secondary,.1),display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(lt,{sx:{color:a.secondary,fontSize:20}})}),e.jsxs(n,{children:[e.jsx(l,{fontWeight:700,fontSize:"1.1rem",children:"Rental Invoice"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Configure rental pricing and policies"})]})]})}),e.jsxs(n,{sx:{border:"2px solid #FCE4EC",borderRadius:"20px",overflow:"hidden",boxShadow:"0 4px 16px rgba(233,30,99,0.1)"},children:[e.jsx(n,{sx:{p:3.5,background:"linear-gradient(135deg, #FFF5F7 0%, #FCE4EC 100%)",borderBottom:"2px solid #FCE4EC"},children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(l,{variant:"caption",fontWeight:700,sx:{mb:1,display:"block",color:a.secondary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Price Per Day *"}),e.jsx(f,{fullWidth:!0,placeholder:"0.00",type:"number",value:i.pricePerDay,onChange:t=>d("pricePerDay",t.target.value),InputProps:{startAdornment:e.jsx(M,{position:"start",children:e.jsx(n,{sx:{width:36,height:36,borderRadius:"10px",background:"linear-gradient(135deg, #E91E63, #F06292)",display:"flex",alignItems:"center",justifyContent:"center",mr:1},children:e.jsx(l,{fontWeight:800,color:"white",fontSize:"1.1rem",children:"₹"})})})},sx:{"& .MuiOutlinedInput-root":{background:"white",borderRadius:"14px",fontWeight:700,fontSize:"1.2rem",border:"2px solid #FCE4EC","&:hover":{borderColor:a.secondary},"&.Mui-focused":{borderColor:a.secondary,boxShadow:`0 0 0 3px ${p(a.secondary,.1)}`}},"& .MuiOutlinedInput-input":{py:2}}})]})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(l,{variant:"caption",fontWeight:700,sx:{mb:1,display:"block",color:a.secondary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Minimum Days *"}),e.jsx(f,{fullWidth:!0,placeholder:"0",type:"number",value:i.minimumDays,onChange:t=>d("minimumDays",t.target.value),InputProps:{endAdornment:e.jsx(M,{position:"end",children:e.jsx(n,{sx:{px:2,py:1,borderRadius:"8px",background:p(a.secondary,.1),ml:1},children:e.jsx(l,{fontWeight:700,color:a.secondary,fontSize:"0.85rem",children:"DAYS"})})})},sx:{"& .MuiOutlinedInput-root":{background:"white",borderRadius:"14px",fontWeight:700,fontSize:"1.2rem",border:"2px solid #FCE4EC","&:hover":{borderColor:a.secondary},"&.Mui-focused":{borderColor:a.secondary,boxShadow:`0 0 0 3px ${p(a.secondary,.1)}`}},"& .MuiOutlinedInput-input":{py:2}}})]})})]})}),e.jsx(n,{sx:{p:3.5,background:"white",borderBottom:"2px solid #FCE4EC"},children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(l,{variant:"caption",fontWeight:700,sx:{mb:1,display:"block",color:a.secondary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Advance Booking"}),e.jsx(f,{fullWidth:!0,placeholder:"0.00",type:"number",value:i.advanceForBooking,onChange:t=>d("advanceForBooking",t.target.value),InputProps:{startAdornment:e.jsx(M,{position:"start",children:e.jsx(l,{fontWeight:800,color:a.secondary,fontSize:"1rem",children:"₹"})})},sx:{"& .MuiOutlinedInput-root":{background:"#FAFBFC",borderRadius:"14px",fontWeight:600,fontSize:"1rem",border:"2px solid #F5F5F5","&:hover":{borderColor:a.secondary,background:"white"},"&.Mui-focused":{borderColor:a.secondary,background:"white",boxShadow:`0 0 0 3px ${p(a.secondary,.1)}`}},"& .MuiOutlinedInput-input":{py:1.8}}})]})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(l,{variant:"caption",fontWeight:700,sx:{mb:1,display:"block",color:a.secondary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Late Charges / Day"}),e.jsx(f,{fullWidth:!0,placeholder:"0.00",type:"number",value:i.lateCharges,onChange:t=>d("lateCharges",t.target.value),InputProps:{startAdornment:e.jsx(M,{position:"start",children:e.jsx(l,{fontWeight:800,color:a.secondary,fontSize:"1rem",children:"₹"})})},sx:{"& .MuiOutlinedInput-root":{background:"#FAFBFC",borderRadius:"14px",fontWeight:600,fontSize:"1rem",border:"2px solid #F5F5F5","&:hover":{borderColor:a.secondary,background:"white"},"&.Mui-focused":{borderColor:a.secondary,background:"white",boxShadow:`0 0 0 3px ${p(a.secondary,.1)}`}},"& .MuiOutlinedInput-input":{py:1.8}}})]})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(l,{variant:"caption",fontWeight:700,sx:{mb:1,display:"block",color:a.secondary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Damage Policy"}),e.jsx(f,{fullWidth:!0,placeholder:"Enter policy details",value:i.damagePolicy,onChange:t=>d("damagePolicy",t.target.value),sx:{"& .MuiOutlinedInput-root":{background:"#FAFBFC",borderRadius:"14px",fontWeight:600,fontSize:"1rem",border:"2px solid #F5F5F5","&:hover":{borderColor:a.secondary,background:"white"},"&.Mui-focused":{borderColor:a.secondary,background:"white",boxShadow:`0 0 0 3px ${p(a.secondary,.1)}`}},"& .MuiOutlinedInput-input":{py:1.8}}})]})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(l,{variant:"caption",fontWeight:700,sx:{mb:1,display:"block",color:a.secondary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Security Deposit"}),e.jsx(f,{fullWidth:!0,placeholder:"0.00",type:"number",value:i.securityDeposit,onChange:t=>d("securityDeposit",t.target.value),InputProps:{startAdornment:e.jsx(M,{position:"start",children:e.jsx(l,{fontWeight:800,color:a.secondary,fontSize:"1rem",children:"₹"})})},sx:{"& .MuiOutlinedInput-root":{background:"#FAFBFC",borderRadius:"14px",fontWeight:600,fontSize:"1rem",border:"2px solid #F5F5F5","&:hover":{borderColor:a.secondary,background:"white"},"&.Mui-focused":{borderColor:a.secondary,background:"white",boxShadow:`0 0 0 3px ${p(a.secondary,.1)}`}},"& .MuiOutlinedInput-input":{py:1.8}}})]})})]})}),e.jsx(n,{sx:{p:3,background:"linear-gradient(135deg, #FCE4EC, #F8BBD0)"},children:e.jsxs(v,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(l,{fontWeight:700,fontSize:"1.1rem",color:a.secondary,children:"Rental Total (Min Period)"}),e.jsx(n,{sx:{px:3,py:1.5,borderRadius:"12px",background:"white",minWidth:150,textAlign:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:e.jsxs(l,{fontWeight:800,fontSize:"1.5rem",color:a.secondary,children:["₹",i.rentalTotalPrice||"0.00"]})})]})})]})]})]})})]}),e.jsxs(z,{sx:{borderRadius:"16px",p:4,background:"white",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)"},children:[e.jsx(H,{icon:ut,title:"Inventory Status",subtitle:"Manage your stock levels"}),e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(f,{fullWidth:!0,label:"Available Stock",type:"number",value:i.stockQuantity,onChange:t=>d("stockQuantity",t.target.value),placeholder:"Number of units in stock",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(f,{fullWidth:!0,label:"Low Stock Warning",type:"number",value:i.lowStockAlert,onChange:t=>d("lowStockAlert",t.target.value),helperText:"System will notify you when stock reaches this level",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})})]})]}),e.jsxs(z,{sx:{borderRadius:"16px",p:4,background:"white",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)"},children:[e.jsx(H,{icon:Kt,title:"Shipping",subtitle:"Configure shipping preferences"}),e.jsxs(v,{spacing:3,children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"#F8FAFC",borderRadius:"12px"},children:[e.jsxs(n,{children:[e.jsx(l,{variant:"body1",fontWeight:"600",color:"#4D5E80",children:"Free Shipping"}),e.jsx(l,{variant:"caption",color:"#64748B",children:"Offer free shipping to customers"})]}),e.jsx(ie,{checked:i.freeShipping,onChange:t=>{d("freeShipping",t.target.checked),t.target.checked&&d("flatRateShipping",!1)},color:"success"})]}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"#F8FAFC",borderRadius:"12px"},children:[e.jsxs(n,{children:[e.jsx(l,{variant:"body1",fontWeight:"600",color:"#4D5E80",children:"Flat Rate Shipping"}),e.jsx(l,{variant:"caption",color:"#64748B",children:"Set a fixed shipping price"})]}),e.jsx(ie,{checked:i.flatRateShipping,onChange:t=>{d("flatRateShipping",t.target.checked),t.target.checked&&d("freeShipping",!1)},color:"primary"})]}),i.flatRateShipping&&e.jsx(f,{fullWidth:!0,label:"Shipping Price",type:"number",value:i.shippingPrice,onChange:t=>d("shippingPrice",t.target.value),InputProps:{startAdornment:e.jsx(M,{position:"start",children:"$"})},sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}),e.jsxs(n,{sx:{mt:2,p:2,borderRadius:"14px",background:"linear-gradient(135deg, #F0F9FF, #E0F2FE)",border:"1.5px solid #38BDF8",boxShadow:"0 6px 20px rgba(56, 189, 248, 0.15)"},children:[e.jsxs(n,{sx:{mb:1},children:[e.jsx(l,{fontWeight:700,color:"#0369A1",children:"Minimum Shipping Days"}),e.jsx(l,{variant:"caption",color:"#475569",children:"Minimum number of days required to dispatch the product"})]}),e.jsx(f,{fullWidth:!0,type:"number",placeholder:"e.g. 3",value:i.minimumShippingDays,onChange:t=>d("minimumShippingDays",t.target.value),InputProps:{endAdornment:e.jsx(M,{position:"end",children:e.jsx(n,{sx:{px:1.5,py:.5,borderRadius:"8px",background:"#38BDF8",color:"white",fontWeight:700,fontSize:"0.75rem"},children:"DAYS"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:"white"}}})]}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"#F8FAFC",borderRadius:"12px"},children:[e.jsxs(n,{children:[e.jsx(l,{fontWeight:600,children:"Takeaway (Pickup)"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Customers can pick up from location"})]}),e.jsx(ie,{checked:i.takeaway,onChange:t=>d("takeaway",t.target.checked)})]}),i.takeaway&&e.jsxs(n,{sx:{mt:3},children:[e.jsx(f,{fullWidth:!0,label:"Pickup Address",inputRef:ye,placeholder:"Search pickup location",value:i.takeawayAddress,onChange:t=>d("takeawayAddress",t.target.value)}),e.jsx(n,{id:"pickup-map",sx:{width:"100%",height:320,borderRadius:"12px",border:"1px solid #E5E7EB"}}),e.jsxs(g,{container:!0,spacing:2,sx:{mt:2},children:[e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(f,{fullWidth:!0,label:"Latitude",value:i.pickupLatitude,InputProps:{readOnly:!0}})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(f,{fullWidth:!0,label:"Longitude",value:i.pickupLongitude,InputProps:{readOnly:!0}})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(f,{fullWidth:!0,label:"Final Pickup Address",value:i.takeawayAddress,InputProps:{readOnly:!0},placeholder:"Pin on map or search location"})})]})]})]})]}),e.jsxs(z,{sx:{borderRadius:"16px",p:4,background:"white",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)"},children:[e.jsx(H,{icon:Xt,title:"Suitable Occasions",subtitle:"Select the events where this boutique item fits best"}),e.jsx(ht,{multiple:!0,options:It,value:i.selectedOccasions,onChange:(t,o)=>d("selectedOccasions",o),renderInput:t=>e.jsx(f,{...t,placeholder:"Select suitable occasions",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}),renderTags:(t,o)=>t.map((r,s)=>e.jsx(we,{label:r,...o({index:s}),size:"medium",sx:{background:p(a.primary,.1),color:a.primary,fontWeight:500,borderRadius:"8px",height:32}},r))})]}),e.jsxs(z,{sx:{borderRadius:"16px",p:4,background:"white",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)"},children:[e.jsx(H,{icon:ae,title:"Collections",subtitle:"Categorize this item for specific customer groups"}),e.jsx(ht,{multiple:!0,options:Pt,value:i.collections,onChange:(t,o)=>d("collections",o),renderInput:t=>e.jsx(f,{...t,placeholder:"Select collections (e.g., For Men, For Bride)",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}),renderTags:(t,o)=>t.map((r,s)=>e.jsx(we,{label:r,...o({index:s}),size:"medium",sx:{background:p(a.secondary,.1),color:a.secondary,fontWeight:500,borderRadius:"8px",height:32}},r))})]}),e.jsxs(z,{sx:{borderRadius:"24px",p:4,background:"white",boxShadow:"0 12px 48px rgba(0,0,0,0.1)",border:"1px solid #E5E7EB"},children:[e.jsx(H,{icon:ei,title:"Policies & Status",subtitle:"Manage return policies and item visibility"}),e.jsxs(v,{spacing:3,children:[e.jsx(f,{fullWidth:!0,label:"Return Policy",multiline:!0,rows:3,placeholder:"e.g. 7 days return policy, items must be in original condition...",value:i.returnPolicy,onChange:t=>d("returnPolicy",t.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"14px",backgroundColor:"#F9FAFB"}}}),e.jsx(f,{fullWidth:!0,label:"Cancellation Policy",multiline:!0,rows:3,placeholder:"e.g. Cancel within 24 hours for full refund...",value:i.cancellationPolicy,onChange:t=>d("cancellationPolicy",t.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"14px",backgroundColor:"#F9FAFB"}}}),e.jsx(Fe,{})]})]}),e.jsxs(z,{sx:{borderRadius:"16px",p:4,background:"white",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)"},children:[e.jsx(H,{icon:ae,title:"Frequently Bought Together",subtitle:"Link related boutique items or categories"}),e.jsxs(n,{sx:{mb:4},children:[e.jsx(l,{variant:"subtitle2",fontWeight:700,sx:{mb:2,color:"#4A5568"},children:"LINKING METHOD"}),e.jsxs(_t,{row:!0,value:L,onChange:t=>{Pe(t.target.value),Y([]),$([])},children:[e.jsx(ot,{value:"product",control:e.jsx(nt,{color:"primary"}),label:e.jsx(l,{fontWeight:600,children:"Specific Products"})}),e.jsx(ot,{value:"category",control:e.jsx(nt,{color:"primary"}),label:e.jsx(l,{fontWeight:600,children:"Whole Categories"})})]})]}),e.jsx(Fe,{sx:{mb:4,borderStyle:"dashed"}}),e.jsxs(n,{children:[e.jsxs(l,{variant:"subtitle2",fontWeight:700,sx:{mb:2,color:"#4A5568"},children:["SELECTED ",L==="product"?"BOUTIQUE ITEMS":"CATEGORIES"]}),e.jsxs(g,{container:!0,spacing:2,children:[Ct.map(t=>e.jsx(g,{item:!0,children:e.jsx(we,{label:t.productName||t.name||t.title,onDelete:()=>{Y(o=>o.filter(r=>r!==t._id)),$(o=>o.filter(r=>r._id!==t._id))},sx:{height:"45px",borderRadius:"12px",fontWeight:700,bgcolor:p(a.primary,.08),color:a.primary,border:`1px solid ${p(a.primary,.2)}`,"& .MuiChip-deleteIcon":{color:a.primary,"&:hover":{color:a.secondary}}}})},t._id)),e.jsx(g,{item:!0,children:e.jsxs(N,{variant:"outlined",startIcon:e.jsx(dt,{}),onClick:()=>ue(!0),sx:{height:"45px",borderRadius:"12px",borderStyle:"dashed",borderWidth:"2px",px:3,fontWeight:700,color:a.primary,borderColor:a.primary,"&:hover":{borderWidth:"2px",bgcolor:p(a.primary,.05)}},children:["Add ",L==="product"?"Boutique Item":"Category"]})})]})]})]}),e.jsx(n,{sx:{mb:4},children:e.jsxs(st,{sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, #ffffff, #fafafa)",border:"1px solid #eee"},children:[e.jsx(l,{variant:"h6",fontWeight:600,sx:{mb:.5},children:"Terms & Conditions"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Define rules & policies shown to customers during booking"}),k.map((t,o)=>e.jsxs(n,{sx:{mb:3,p:2,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(f,{fullWidth:!0,label:"Section Heading",placeholder:"e.g. Booking & Confirmation",value:t.heading,onChange:r=>{const s=[...k];s[o].heading=r.target.value,B(s)}}),k.length>1&&e.jsx(N,{onClick:()=>B(r=>r.filter((s,u)=>u!==o)),sx:{ml:1,color:"error.main"},children:"✕"})]}),t.points.map((r,s)=>e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(f,{fullWidth:!0,label:`Point ${s+1}`,placeholder:"Enter policy detail",value:r,onChange:u=>{const x=[...k];x[o].points[s]=u.target.value,B(x)}}),t.points.length>1&&e.jsx(N,{onClick:()=>{const u=[...k];u[o].points.splice(s,1),B(u)},sx:{ml:1,color:"error.main"},children:"✕"})]},s)),e.jsx(N,{size:"small",onClick:()=>{const r=[...k];r[o].points.push(""),B(r)},sx:{mt:1,color:a.primary},children:"+ Add Point"})]},o)),e.jsx(N,{variant:"outlined",onClick:()=>B([...k,{heading:"",points:[""]}]),sx:{mt:2,borderRadius:2,borderColor:a.primary,color:a.primary},children:"+ Add Section"})]})}),e.jsx(gt,{fullWidth:!0,size:"large",onClick:Me,disabled:Q||!b,sx:{borderRadius:"16px",py:2,fontSize:"1.1rem"},children:Q?e.jsx(ge,{size:24,color:"inherit"}):W?"Update Product":"Publish Product"})]})}),e.jsx(n,{sx:{textAlign:"center",mt:6,px:2},children:e.jsx(l,{variant:"caption",color:"text.secondary",children:"Need help? Contact support@bookmyevent.ae"})}),e.jsxs(Vt,{open:fe,onClose:()=>ue(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:"28px",p:1,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"}},children:[e.jsx(qt,{sx:{p:4},children:e.jsxs(v,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(n,{children:[e.jsxs(l,{variant:"h5",fontWeight:900,sx:{color:"#1B254B",letterSpacing:"-0.5px"},children:["Select ",L==="product"?"Boutique Items":"Categories"]}),e.jsx(l,{variant:"body2",color:"text.secondary",fontWeight:500,children:_?`Showing products in ${_.title}`:`Browse available ${L}s to link`})]}),e.jsx(K,{onClick:()=>ue(!1),sx:{bgcolor:"#F4F7FE","&:hover":{bgcolor:p(a.primary,.1),color:a.primary}},children:e.jsx(re,{})})]})}),e.jsx(Fe,{}),e.jsx(Ut,{sx:{minHeight:"450px",p:4,bgcolor:"#F8FAFC"},children:vt?e.jsxs(n,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"300px",gap:2},children:[e.jsx(ge,{size:40,thickness:4}),e.jsx(l,{fontWeight:600,color:"text.secondary",children:"Fetching details..."})]}):e.jsxs(e.Fragment,{children:[_&&e.jsxs(v,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[e.jsx(N,{startIcon:e.jsx(Se,{}),onClick:Mt,variant:"outlined",sx:{borderRadius:"12px",fontWeight:700,textTransform:"none",borderColor:"#E2E8F0",color:"#4A5568","&:hover":{borderColor:a.primary,color:a.primary}},children:"Back to Categories"}),L==="category"&&e.jsxs(n,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"space-between",p:1.5,px:3,bgcolor:p(a.primary,.05),borderRadius:"16px",border:`1px solid ${p(a.primary,.1)}`},children:[e.jsxs(l,{fontWeight:800,color:a.primary,children:["Select Entire Category: ",_.title]}),e.jsx(yt,{checked:de.includes(_._id),onChange:t=>{const o=_._id;t.target.checked?(Y(r=>[...r,o]),$(r=>[...r,_])):(Y(r=>r.filter(s=>s!==o)),$(r=>r.filter(s=>s._id!==o)))},sx:{color:a.primary,"&.Mui-checked":{color:a.primary}}})]})]}),Ee.length===0?e.jsxs(n,{sx:{py:10,textAlign:"center"},children:[e.jsx(l,{variant:"h6",fontWeight:700,color:"text.secondary",children:"No items found"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Try different selection criteria"})]}):e.jsx(g,{container:!0,spacing:2.5,children:Ee.map(t=>{var x;const o=t._id,r=de.includes(o),s=!t.productName&&t.title,u=s&&!_;return e.jsx(g,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(st,{onClick:()=>{u?Bt(t):r?(Y(h=>h.filter(m=>m!==o)),$(h=>h.filter(m=>m._id!==o))):(Y(h=>[...h,o]),$(h=>[...h,t]))},sx:{cursor:"pointer",borderRadius:"20px",border:r?`2px solid ${a.primary}`:"2.5px solid white",bgcolor:r?p(a.primary,.02):"white",boxShadow:r?`0 12px 24px ${p(a.primary,.1)}`:"0 4px 12px rgba(0,0,0,0.03)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&:hover":{transform:r?"none":"translateY(-6px)",boxShadow:"0 20px 40px rgba(0,0,0,0.08)",borderColor:r?a.primary:p(a.primary,.3)}},children:[e.jsxs(n,{sx:{position:"relative",pt:"85%",bgcolor:"#f1f1f1"},children:[e.jsx("img",{src:t.thumbnail||(t.image?t.image.startsWith("http")?t.image:`${D}${t.image}`:"/placeholder.jpg"),alt:t.productName||t.title||t.name,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",transition:"0.5s"}}),r&&e.jsx(n,{sx:{position:"absolute",top:12,right:12,bgcolor:a.primary,color:"white",borderRadius:"50%",p:.5,display:"flex",boxShadow:"0 4px 10px rgba(0,0,0,0.2)",zIndex:2},children:e.jsx(me,{fontSize:"small"})}),u&&e.jsx(n,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.7))",p:1.5,display:"flex",justifyContent:"center",opacity:.9},children:e.jsxs(l,{variant:"caption",color:"white",fontWeight:700,sx:{display:"flex",alignItems:"center",gap:.5},children:["CLICK TO VIEW ITEMS ",e.jsx(Se,{sx:{transform:"rotate(180deg)",fontSize:14}})]})})]}),e.jsxs(Ht,{sx:{p:2,textAlign:"center"},children:[e.jsx(oi,{label:s?"Category":((x=t.category)==null?void 0:x.title)||"Ornament",color:s?a.secondary:a.primary}),e.jsx(l,{fontWeight:800,sx:{mt:1,fontSize:"0.95rem",color:"#1B254B",lineHeight:1.2},children:t.productName||t.title||t.name}),!s&&t.buyPricing&&e.jsxs(l,{variant:"body1",sx:{mt:1,fontWeight:900,color:a.primary},children:["₹",t.buyPricing.totalPrice||t.buyPricing.unitPrice]})]})]})},o)})})]})}),e.jsx(Jt,{sx:{p:4,bgcolor:"#ffffff",borderTop:"1px solid #E2E8F0"},children:e.jsxs(N,{fullWidth:!0,variant:"contained",onClick:()=>ue(!1),sx:{borderRadius:"16px",background:a.gradient,py:2,fontWeight:800,fontSize:"1rem",boxShadow:`0 12px 24px ${p(a.primary,.25)}`,"&:hover":{transform:"translateY(-2px)",boxShadow:`0 15px 30px ${p(a.primary,.35)}`}},children:["Confirm Selection (",de.length," selected)"]})})]})]})};export{Si as default};
