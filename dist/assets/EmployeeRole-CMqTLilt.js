import{r as a,j as e,B as n,T as x,a as c,a1 as w,w as y,z as R,b as V,W as ee,k as te,s as W,N as se,E as ae,H as le}from"./index-BWeMUwr8.js";import{S as re}from"./Search-5x2KWxzA.js";import{D as oe}from"./Delete-C3CuYGwx.js";import{T as ne,a as ie}from"./Tabs-BUM-1bW3.js";import{T as ce}from"./TableContainer-6ZRrQqX7.js";import{T as de,a as he,b as I,c as r,d as ue}from"./TableRow-8c1oHfEe.js";const ge=()=>{const[O,F]=a.useState("Role name example"),[i,m]=a.useState({Trip:!1,Vehicle:!1,Driver:!1,Marketing:!1,"Store setup":!1,"My wallet":!1,Profile:!1,Employees:!1,"My shop":!1,Reviews:!1,Chat:!1,Report:!1}),[u,T]=a.useState(0),[p,f]=a.useState(""),[$,E]=a.useState(""),[z,D]=a.useState(""),[H,k]=a.useState(""),[q,N]=a.useState(""),[G,P]=a.useState(""),[J,A]=a.useState(!1),[B,U]=a.useState(""),[d,b]=a.useState(()=>{const t=localStorage.getItem("roles");return t?JSON.parse(t):[{id:1,roleName:"manager",modules:"Vehicle",createdAt:"11-Sep-25"}]}),[_,j]=a.useState(!1),[h,g]=a.useState(null);a.useEffect(()=>{localStorage.setItem("roles",JSON.stringify(d)),window.dispatchEvent(new Event("rolesUpdated"))},[d]);const v=t=>{m({...i,[t.target.name]:t.target.checked})},K=(t,s)=>{T(s)},Q=t=>{if(t.preventDefault(),!p.trim()){alert("Role name is required to submit.");return}const s=Object.entries(i).filter(([l,S])=>S).map(([l])=>l).join(", "),o={id:h?h.id:Date.now(),roleName:p.trim(),modules:s||"None",createdAt:h?h.createdAt:new Date().toLocaleDateString("en-GB")};h?(b(d.map(l=>l.id===h.id?o:l)),j(!1),g(null)):b([...d,o]),console.log({roleName:O,permissions:i}),A(!0),M()},M=()=>{F("Role name example"),m({Trip:!1,Vehicle:!1,Driver:!1,Marketing:!1,"Store setup":!1,"My wallet":!1,Profile:!1,Employees:!1,"My shop":!1,Reviews:!1,Chat:!1,Report:!1}),f(""),E(""),D(""),k(""),N(""),P(""),j(!1),g(null)},L=(t,s)=>{s!=="clickaway"&&A(!1)},X=t=>{b(d.filter(s=>s.id!==t))},Y=t=>{j(!0),g(t),f(t.roleName),T(0);const s={...i};t.modules.split(", ").forEach(o=>{o in s&&(s[o]=!0)}),m(s)};function C(t){const{children:s,value:o,index:l,...S}=t;return e.jsx("div",{role:"tabpanel",hidden:o!==l,id:`simple-tabpanel-${l}`,"aria-labelledby":`simple-tab-${l}`,...S,children:o===l&&e.jsx(n,{sx:{p:3},children:s})})}function Z(t){return{id:`simple-tab-${t}`,"aria-controls":`simple-tabpanel-${t}`}}return e.jsxs(n,{sx:{p:3,width:1200,margin:"auto",backgroundColor:"white"},children:[e.jsxs(x,{variant:"h6",gutterBottom:!0,children:[e.jsx("span",{role:"img","aria-label":"user",children:"ðŸ‘¤"})," Custom Role"]}),e.jsxs(n,{component:"form",sx:{backgroundColor:"#fff",p:2,borderRadius:1,boxShadow:1},children:[e.jsx(x,{variant:"subtitle1",gutterBottom:!0,children:"Role Form"}),e.jsx(n,{sx:{mb:2},children:e.jsx(n,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:e.jsx(ne,{value:u,onChange:K,"aria-label":"language tabs",children:e.jsx(ie,{label:"Default",...Z(0)})})})}),e.jsxs(C,{value:u,index:0,children:[e.jsx(c,{fullWidth:!0,label:"Role name (Default)*",variant:"outlined",value:p,onChange:t=>f(t.target.value),placeholder:"Type role name",sx:{mb:2},required:!0,inputProps:{maxLength:100}}),e.jsx(c,{fullWidth:!0,label:"Short description (Default)",variant:"outlined",multiline:!0,rows:4,value:$,onChange:t=>E(t.target.value),placeholder:"Type short description",inputProps:{maxLength:500}})]}),e.jsxs(C,{value:u,index:1,children:[e.jsx(c,{fullWidth:!0,label:"Role name (English)",variant:"outlined",value:z,onChange:t=>D(t.target.value),placeholder:"Type role name in English",sx:{mb:2},inputProps:{maxLength:100}}),e.jsx(c,{fullWidth:!0,label:"Short description (English)",variant:"outlined",multiline:!0,rows:4,value:H,onChange:t=>k(t.target.value),placeholder:"Type short description in English",inputProps:{maxLength:500}})]}),e.jsxs(C,{value:u,index:2,children:[e.jsx(c,{fullWidth:!0,label:"Role name (Arabic)",variant:"outlined",value:q,onChange:t=>N(t.target.value),placeholder:"Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",sx:{mb:2},dir:"rtl",inputProps:{style:{textAlign:"right"},maxLength:100}}),e.jsx(c,{fullWidth:!0,label:"Short description (Arabic)",variant:"outlined",multiline:!0,rows:4,value:G,onChange:t=>P(t.target.value),placeholder:"Ø§ÙƒØªØ¨ ÙˆØµÙÙ‹Ø§ Ù‚ØµÙŠØ±Ù‹Ø§ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",dir:"rtl",inputProps:{style:{textAlign:"right"},maxLength:500}})]}),e.jsx(x,{variant:"subtitle1",gutterBottom:!0,children:"Module Permission :"}),e.jsx(w,{row:!0,sx:{justifyContent:"space-between",mb:2},children:["Trip","Vehicle","Driver","Marketing"].map(t=>e.jsx(y,{control:e.jsx(R,{checked:i[t],onChange:v,name:t}),label:t},t))}),e.jsx(w,{row:!0,sx:{justifyContent:"space-between",mb:2},children:["Store setup","My wallet","Profile","Employees"].map(t=>e.jsx(y,{control:e.jsx(R,{checked:i[t],onChange:v,name:t}),label:t},t))}),e.jsx(w,{row:!0,sx:{justifyContent:"space-between",mb:2},children:["My shop","Reviews","Chat","Report"].map(t=>e.jsx(y,{control:e.jsx(R,{checked:i[t],onChange:v,name:t}),label:t},t))}),e.jsxs(n,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(V,{variant:"outlined",color:"#E15B65",onClick:M,sx:{color:"#E15B65"},children:"Reset"}),e.jsx(V,{variant:"contained",color:"primary",onClick:Q,sx:{color:"white",bgcolor:"#E15B65"},children:"Submit"})]})]}),!_&&e.jsxs(n,{sx:{mt:5,backgroundColor:"#fff",p:2,borderRadius:1,boxShadow:1},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(x,{variant:"h6",children:"ðŸ“‹ Roles Table"}),e.jsx(c,{size:"small",placeholder:"Search role",value:B,onChange:t=>U(t.target.value),InputProps:{endAdornment:e.jsx(ee,{position:"end",children:e.jsx(re,{})})}})]}),e.jsx(ce,{component:te,children:e.jsxs(de,{children:[e.jsx(he,{sx:{backgroundColor:"#f9fafb"},children:e.jsxs(I,{children:[e.jsx(r,{children:"Sl#"}),e.jsx(r,{children:"Role Name"}),e.jsx(r,{children:"Modules"}),e.jsx(r,{children:"Created At"}),e.jsx(r,{children:"Action"})]})}),e.jsx(ue,{children:d.filter(t=>t.roleName.toLowerCase().includes(B.toLowerCase())).map((t,s)=>e.jsxs(I,{children:[e.jsx(r,{children:s+1}),e.jsx(r,{children:t.roleName}),e.jsx(r,{children:t.modules}),e.jsx(r,{children:t.createdAt}),e.jsxs(r,{children:[e.jsx(W,{color:"primary",onClick:()=>Y(t),children:e.jsx(se,{})}),e.jsx(W,{color:"error",onClick:()=>X(t.id),children:e.jsx(oe,{})})]})]},t.id))})]})})]}),e.jsx(ae,{open:J,autoHideDuration:3e3,onClose:L,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(le,{onClose:L,severity:"info",sx:{backgroundColor:"#1976d2",color:"white"},children:"Role updated successfully!"})})]})};export{ge as default};
