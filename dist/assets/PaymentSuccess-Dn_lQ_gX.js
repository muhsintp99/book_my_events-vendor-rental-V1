import{v as p,r as n,j as e,B as u,t as d,w as f,T as o,h as x}from"./index-DQsvxoBn.js";const g="https://api.bookmyevent.ae";function v(){const[y]=p(),s=y.get("orderId"),[i,t]=n.useState("verifying"),[c,r]=n.useState("Verifying payment...");return n.useEffect(()=>{if(!s){t("error"),r("Invalid payment reference.");return}(async()=>{var l;try{const a=await x.post(`${g}/api/payment/verify-subscription-payment`,{orderId:s});if(a.data.success&&((l=a.data.subscription)==null?void 0:l.status)==="active"){t("success"),r("ðŸŽ‰ Subscription activated successfully!"),setTimeout(()=>{window.location.replace("/login")},2e3);return}if(a.data.status==="pending"){t("verifying"),r("Payment is being processed. Please wait...");return}t("error"),r(a.data.message||"Payment failed")}catch{t("error"),r("Unable to verify payment. Please contact support.")}})()},[s]),e.jsxs(u,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:3,p:3,bgcolor:"#f9fafc"},children:[i==="verifying"&&e.jsx(d,{size:60,sx:{color:"#c62828"}}),i==="success"&&e.jsx(u,{sx:{fontSize:80},children:"âœ…"}),i==="error"&&e.jsx(f,{severity:"error",sx:{maxWidth:600},children:c}),e.jsx(o,{variant:"h5",fontWeight:600,textAlign:"center",children:c}),i==="verifying"&&e.jsx(o,{variant:"body2",color:"text.secondary",textAlign:"center",children:"Please do not close this page. This usually takes a few seconds..."}),s&&e.jsxs(o,{variant:"caption",color:"text.secondary",sx:{mt:2,opacity:.6},children:["Order ID: ",s]})]})}export{v as default};
