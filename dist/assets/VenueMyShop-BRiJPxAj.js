import{r as n,w as M,j as e,B as s,q as C,T as h,g as x,G as g,ad as y,b as N,t as T,ab as $,ac as V,s as d,$ as p,al as z}from"./index-KspT4AX9.js";import{E as G}from"./Edit-D6FQf1RZ.js";import{S as H}from"./Settings-BeUrtb88.js";import{D as L}from"./DialogTitle-CWD_MCHV.js";import{D as _}from"./DialogActions-WNO7PzMg.js";const Q=()=>{const[S,m]=n.useState(!1),[b,k]=n.useState({coverPhoto:"https://images.unsplash.com/photo-1560472355-536de3962603?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2326&q=80"}),[a,w]=n.useState(b),[i,I]=n.useState(null),[l,P]=n.useState(null),[u,A]=n.useState(null),[D,f]=n.useState(!0),E=M(),j="https://api.bookmyevent.ae/api";n.useEffect(()=>{const o=localStorage.getItem("user");if(console.log("Stored user from localStorage:",o),o){const t=JSON.parse(o);console.log("Parsed user:",t),I(t),B(t._id||t.id),R(t._id||t.id)}else console.log("No user found in localStorage"),f(!1)},[]);const B=async o=>{try{console.log("Fetching user data for ID:",o);const r=await(await fetch(`${j}/users/${o}`)).json();console.log("User API Response:",r),r.user?(P(r.user),console.log("User data set:",r.user)):console.error("Failed to fetch user data:",r.message)}catch(t){console.error("Error fetching user data:",t)}},R=async o=>{try{f(!0),console.log("Fetching vendor data for ID:",o);const r=await(await fetch(`${j}/vendorprofiles/${o}`)).json();console.log("Vendor API Response:",r),r.success&&r.data?(A(r.data),console.log("Vendor data set:",r.data)):console.error("Failed to fetch vendor data:",r.message)}catch(t){console.error("Error fetching vendor data:",t)}finally{f(!1)}},v=()=>{m(!1)},W=()=>{k(a),m(!1)},c=o=>t=>{w({...a,[o]:t.target.value})},U=()=>{E("/business/editpro")},F=o=>{if(!o)return"Not provided";if(typeof o=="string")return o;const t=[o.street,o.city,o.state,o.zipCode].filter(Boolean);return t.length>0?t.join(", "):o.fullAddress||"Not provided"};return e.jsxs(s,{sx:{p:3,backgroundColor:"#f5f5f5",minHeight:"100vh"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(C,{sx:{backgroundColor:"#db5762ff"}}),e.jsx(h,{variant:"h5",fontWeight:"600",color:"#333",children:"My Info"})]}),e.jsx(x,{variant:"contained",startIcon:e.jsx(G,{}),onClick:U,sx:{backgroundColor:"#db6e77ff","&:hover":{backgroundColor:"#db5762ff"},textTransform:"none",px:3,py:1,borderRadius:2},children:"Edit Provider Information"})]}),e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,md:8,children:e.jsxs(y,{sx:{position:"relative",height:400,backgroundImage:`url(${b.coverPhoto})`,backgroundSize:"cover",backgroundPosition:"center",borderRadius:2,overflow:"hidden"},children:[e.jsx(N,{sx:{position:"absolute",top:16,right:16,backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:e.jsx(H,{})}),e.jsx(s,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0, 0, 0, 0.8))",p:3,color:"white"}})]})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsxs(y,{sx:{p:3,height:400,width:500,borderRadius:2},children:[e.jsx(s,{sx:{display:"flex",justifyContent:"center",mb:3},children:e.jsx(s,{sx:{width:80,height:80,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(C,{sx:{width:80,height:80,bgcolor:"#db5762ff",color:"white",fontSize:32,fontWeight:600},children:i!=null&&i.email?i.email.charAt(0).toUpperCase():"U"})})}),D?e.jsx(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:e.jsx(T,{})}):e.jsxs(s,{sx:{gap:2},children:[e.jsx(s,{sx:{mb:2},children:e.jsxs(h,{variant:"body2",color:"black",gutterBottom:!0,children:["Email: ",(l==null?void 0:l.email)||(i==null?void 0:i.email)||"example@email.com"]})}),e.jsx(s,{sx:{mb:2},children:e.jsxs(h,{variant:"body2",color:"black",gutterBottom:!0,children:["Phone: ",(l==null?void 0:l.phone)||"Not provided"]})}),e.jsx(s,{sx:{mb:2},children:e.jsxs(h,{variant:"body2",color:"black",gutterBottom:!0,children:["Address: ",u!=null&&u.storeAddress?F(u.storeAddress):"Not provided"]})})]})]})})]}),e.jsxs($,{open:S,onClose:v,maxWidth:"sm",fullWidth:!0,children:[e.jsx(L,{children:"Edit Provider Information "}),e.jsx(V,{sx:{pt:2},children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(d,{label:"email",value:a.email,onChange:c("email"),fullWidth:!0,variant:"outlined"}),e.jsx(d,{label:"Phone",value:a.phone,onChange:c("phone"),fullWidth:!0,variant:"outlined"}),e.jsx(d,{label:"Address",value:a.address,onChange:c("address"),fullWidth:!0,variant:"outlined"}),e.jsxs(d,{label:"Business Plan",value:a.businessPlan,onChange:c("businessPlan"),select:!0,fullWidth:!0,variant:"outlined",children:[e.jsx(p,{value:"Commission",children:"Commission"}),e.jsx(p,{value:"Subscription",children:"Subscription"}),e.jsx(p,{value:"Flat Rate",children:"Flat Rate"})]}),e.jsx(d,{label:"Admin Commission",value:a.adminCommission,onChange:c("adminCommission"),fullWidth:!0,variant:"outlined"})]})}),e.jsxs(_,{sx:{p:3},children:[e.jsx(x,{onClick:v,color:"inherit",children:"Cancel"}),e.jsx(x,{onClick:W,variant:"contained",sx:{backgroundColor:"#00897b","&:hover":{backgroundColor:"#00695c"}},children:"Save Changes"})]})]}),e.jsxs(s,{sx:{mt:5,mb:3,p:2,borderLeft:"4px solid #b2434cff",backgroundColor:"#fff",borderRadius:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(h,{variant:"subtitle1",color:"#b2434cff",fontWeight:"600",children:["Announcement ",e.jsx("span",{style:{fontSize:"0.75rem",color:"#757575"},children:"i"})]}),e.jsx(s,{children:e.jsx(z,{defaultChecked:!0,color:"primary"})})]}),e.jsx(d,{placeholder:"Ex: ABC Company",fullWidth:!0,variant:"outlined",sx:{mt:1,"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(x,{variant:"contained",sx:{backgroundColor:"#db5762ff","&:hover":{backgroundColor:"#f17681ff"},textTransform:"none",mt:3,paddingLeft:20,px:2,py:.5,borderRadius:2},children:"Publish"})]})]})};export{Q as default};
