import{ad as I,j as e,r as n,B as o,Q as a,U as S,Y as p,a as w,Z as W,s as l,T as s,w as j,b as C,e as E,c as A,G as r,$ as R,A as z,ah as D,al as L,a0 as P,o as k,V as B,f as T}from"./index-CWJg_lwt.js";import{S as N}from"./Search-WfmjaGyn.js";import{R as $}from"./Refresh-CuNzXV9H.js";const M=I(e.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"})),H=()=>{const[c,b]=n.useState(""),[x,F]=n.useState([]),[y,g]=n.useState(!0),[m,u]=n.useState(null),f=async()=>{g(!0);try{const d=((await T.get("https://api.bookmyevent.ae/api/bookings")).data.bookings||[]).filter(v=>(v.paymentStatus||"").toLowerCase()==="failed");F(d),u(null)}catch(t){console.error("Error fetching failed payments",t),u("Failed to load payment records")}finally{g(!1)}};n.useEffect(()=>{f()},[]);const h=n.useMemo(()=>{if(!c.trim())return x;const t=c.toLowerCase();return x.filter(i=>(i._id||"").toLowerCase().includes(t)||(i.fullName||"").toLowerCase().includes(t)||(i.emailAddress||"").toLowerCase().includes(t))},[c,x]);return e.jsxs(o,{sx:{bgcolor:"#F8F9FA",minHeight:"100vh",pt:4,pb:10},children:[e.jsx(o,{sx:{position:"absolute",top:0,left:0,right:0,height:"200px",background:`linear-gradient(135deg, ${a("#F56565",.15)} 0%, ${a("#F56565",.05)} 100%)`,zIndex:0,borderBottomLeftRadius:"40px",borderBottomRightRadius:"40px"}}),e.jsxs(S,{maxWidth:"lg",sx:{position:"relative",zIndex:1},children:[e.jsx(p,{elevation:0,sx:{p:1,borderRadius:"24px",border:"1px solid #E2E8F0",mb:6,bgcolor:"white",boxShadow:"0 4px 20px rgba(0,0,0,0.03)"},children:e.jsx(w,{fullWidth:!0,placeholder:"Search by ID, Name or Email...",value:c,onChange:t=>b(t.target.value),InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx(N,{sx:{color:"#F56565",ml:1}})}),sx:{borderRadius:"20px","& fieldset":{border:"none"},fontWeight:600}}})}),e.jsxs(l,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:"center",sx:{mb:4},children:[e.jsxs(o,{children:[e.jsxs(l,{direction:"row",alignItems:"center",spacing:2,sx:{mb:1},children:[e.jsx(s,{variant:"h3",sx:{fontWeight:900,color:"#2D3748",letterSpacing:"-1.5px"},children:"Payment Issues"}),e.jsx(j,{label:`${h.length} Failed`,color:"error",size:"small",sx:{fontWeight:800,borderRadius:"8px"}})]}),e.jsx(s,{variant:"body1",sx:{color:"#718096",fontWeight:500},children:"Action required for these transactions."})]}),e.jsx(C,{variant:"outlined",startIcon:e.jsx($,{}),onClick:f,sx:{borderRadius:"16px",borderColor:"#F56565",color:"#F56565",fontWeight:800,borderWidth:2,px:3,"&:hover":{borderWidth:2,bgcolor:a("#F56565",.05)}},children:"Refresh List"})]}),m&&e.jsx(E,{severity:"error",sx:{mb:4,borderRadius:"16px",fontWeight:700},children:m}),y?e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:15},children:[e.jsx(A,{size:64,thickness:4,sx:{color:"#F56565"}}),e.jsx(s,{variant:"h6",sx:{mt:3,fontWeight:700,color:"#718096"},children:"Scanning Payments..."})]}):h.length===0?e.jsx(p,{sx:{textAlign:"center",py:12,borderRadius:"48px",border:"3px dashed #E2E8F0",bgcolor:"transparent"},children:e.jsx(s,{variant:"h5",sx:{fontWeight:800,color:"#CBD5E0"},children:"No Payment Issues Found"})}):e.jsx(r,{container:!0,spacing:3,children:h.map((t,i)=>{var d;return e.jsx(r,{item:!0,xs:12,children:e.jsx(R,{in:!0,style:{transitionDelay:`${i*50}ms`},children:e.jsxs(p,{elevation:0,sx:{p:3,borderRadius:"24px",border:"1px solid #E2E8F0",bgcolor:"white",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(0,0,0,0.08)",borderColor:a("#F56565",.3)}},children:[e.jsx(o,{sx:{position:"absolute",left:0,top:0,bottom:0,width:6,bgcolor:"#F56565"}}),e.jsxs(r,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(l,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(z,{sx:{width:56,height:56,bgcolor:a("#F56565",.1),color:"#F56565",fontWeight:900,fontSize:"1.2rem",border:`2px solid ${a("#F56565",.2)}`},children:e.jsx(M,{})}),e.jsxs(o,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:800,color:"#2D3748",lineHeight:1.2},children:t.fullName}),e.jsxs(s,{variant:"caption",sx:{color:"#A0AEC0",fontWeight:600,display:"flex",alignItems:"center",gap:.5,mt:.5},children:[e.jsx(D,{style:{fontSize:14}})," ",t.emailAddress]})]})]})}),e.jsx(r,{item:!0,xs:12,md:5,children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:6,children:e.jsxs(o,{sx:{p:1.5,borderRadius:"12px",bgcolor:"#FFF5F5"},children:[e.jsx(s,{variant:"caption",sx:{color:"#F56565",fontWeight:800,textTransform:"uppercase",fontSize:"0.7rem"},children:"Booking Date"}),e.jsxs(s,{variant:"subtitle2",sx:{fontWeight:700,color:"#C53030",display:"flex",alignItems:"center",gap:.5},children:[e.jsx(L,{style:{fontSize:16}}),t.bookingDate?new Date(t.bookingDate).toLocaleDateString():"N/A"]})]})}),e.jsx(r,{item:!0,xs:6,children:e.jsxs(o,{sx:{p:1.5,borderRadius:"12px",bgcolor:"#FFF5F5"},children:[e.jsx(s,{variant:"caption",sx:{color:"#F56565",fontWeight:800,textTransform:"uppercase",fontSize:"0.7rem"},children:"Failed Amount"}),e.jsxs(s,{variant:"subtitle2",sx:{fontWeight:900,color:"#C53030"},children:["â‚¹",(d=t.finalPrice)==null?void 0:d.toLocaleString()]})]})})]})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsxs(l,{direction:"row",justifyContent:{xs:"flex-start",md:"flex-end"},alignItems:"center",spacing:2,children:[e.jsx(j,{label:"PAYMENT FAILED",size:"small",sx:{bgcolor:"#FFF5F5",color:"#C53030",fontWeight:900,borderRadius:"8px",letterSpacing:.5}}),e.jsx(l,{direction:"row",spacing:1,children:e.jsx(P,{title:"View Details",children:e.jsx(k,{size:"small",sx:{bgcolor:"#EDF2F7","&:hover":{bgcolor:"#E2E8F0"}},children:e.jsx(B,{fontSize:"small",sx:{color:"#4A5568"}})})})})]})})]})]})})},t._id)})})]})]})};export{H as default};
