import{r as n,j as e,B as a,t as D,T as t,a5 as F,G as h,p,K as j,af as b,D as y,S as C,g as d,ai as B,h as S}from"./index-D6ZxiBOA.js";import{C as E}from"./CheckCircle-BRp8tfpt.js";import{W as H}from"./WorkspacePremium-leXB9C4_.js";const L=120,P=3;function M(){const[v,k]=n.useState([]),[R,W]=n.useState(!0),[m,u]=n.useState(null),[_,w]=n.useState(null),[I,A]=n.useState(null),[f,c]=n.useState({open:!1,message:""}),o=localStorage.getItem("moduleId"),x=JSON.parse(localStorage.getItem("user")),g=x==null?void 0:x._id;n.useEffect(()=>{o&&(async()=>{try{const r=await S.get(`https://api.bookmyevent.ae/api/subscription/plan/module/${o}`);k(r.data.plans||[])}catch{c({open:!0,message:"Failed to load plans"})}finally{W(!1)}})()},[o]);const U=async s=>{var r,i;if(!g||!o){c({open:!0,message:"User or module missing"});return}try{u(s);const l=await S.post("https://api.bookmyevent.ae/api/payment/create-subscription-payment",{userId:g,moduleId:o,planId:s});if((i=(r=l.data)==null?void 0:r.payment_links)!=null&&i.web)window.location.href=l.data.payment_links.web;else throw new Error("Payment link missing")}catch{c({open:!0,message:"Payment initiation failed"}),u(null)}};return R?e.jsx(a,{sx:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(D,{sx:{color:"#c62828"}})}):e.jsxs(a,{sx:{minHeight:"100vh",bgcolor:"#f9fafc",py:6},children:[e.jsxs(a,{maxWidth:"md",mx:"auto",children:[e.jsx(t,{variant:"h4",fontWeight:800,textAlign:"center",children:"Upgrade Your Plan"}),e.jsx(t,{textAlign:"center",color:"text.secondary",mb:3,children:"Choose the best plan for your business"}),e.jsxs(F,{severity:"success",sx:{mb:4,border:"1px solid #c62828",color:"#c62828"},children:["Current Plan: ",e.jsx("b",{children:"FREE"})]}),e.jsxs(h,{container:!0,spacing:3,justifyContent:"center",children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(p,{sx:{height:"100%",borderRadius:4,border:"2px solid #c62828"},children:e.jsxs(j,{children:[e.jsx(b,{label:"CURRENT PLAN",sx:{bgcolor:"#c62828",color:"#fff",mb:2}}),e.jsx(t,{variant:"h6",fontWeight:800,children:"FREE"}),e.jsx(t,{color:"text.secondary",children:"Basic access to get started on the platform"}),e.jsx(t,{variant:"h4",fontWeight:900,color:"#c62828",mt:2,children:"â‚¹0"}),e.jsx(y,{sx:{my:2}}),e.jsx(C,{spacing:1,children:["Limited listings","Basic visibility","Standard support"].map(s=>e.jsxs(a,{display:"flex",alignItems:"center",children:[e.jsx(E,{sx:{color:"#c62828",mr:1}}),e.jsx(t,{variant:"body2",children:s})]},s))}),e.jsx(d,{fullWidth:!0,disabled:!0,sx:{mt:3,bgcolor:"#e57373",color:"#fff",fontWeight:700},children:"Current Plan"})]})})}),v.map(s=>{const r=_===s._id,i=I===s._id;return e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(p,{sx:{height:"100%",borderRadius:4,border:"2px solid #c62828"},children:e.jsxs(j,{children:[e.jsx(b,{icon:e.jsx(H,{}),label:"BEST VALUE",sx:{bgcolor:"#c62828",color:"#fff",mb:2}}),e.jsx(t,{variant:"h6",fontWeight:800,children:s.name}),e.jsxs(t,{color:"text.secondary",children:[r?s.description:`${s.description.slice(0,L)}...`,e.jsx(d,{size:"small",onClick:()=>w(r?null:s._id),sx:{textTransform:"none",fontWeight:600,color:"#c62828"},children:r?"Read less":"Read more"})]}),e.jsxs(t,{variant:"h4",fontWeight:900,color:"#c62828",mt:2,children:["â‚¹",s.price," ",e.jsx("span",{style:{fontSize:14},children:"/ year"})]}),e.jsx(y,{sx:{my:2}}),e.jsx(C,{spacing:1,children:(i?s.features:s.features.slice(0,P)).map((l,T)=>e.jsxs(a,{display:"flex",alignItems:"center",children:[e.jsx(E,{sx:{color:"#c62828",mr:1}}),e.jsx(t,{variant:"body2",children:l})]},T))}),s.features.length>P&&e.jsx(d,{size:"small",onClick:()=>A(i?null:s._id),sx:{mt:1,textTransform:"none",fontWeight:600,color:"#c62828"},children:i?"Show less":"Read more"}),e.jsx(d,{fullWidth:!0,disabled:m===s._id,onClick:()=>U(s._id),sx:{mt:3,bgcolor:"#c62828",color:"#fff",fontWeight:800,borderRadius:3,"&:hover":{bgcolor:"#b71c1c"}},children:m===s._id?"Redirecting...":"Upgrade To Premium"})]})})},s._id)})]})]}),e.jsx(B,{open:f.open,autoHideDuration:4e3,onClose:()=>c({open:!1,message:""}),message:f.message})]})}export{M as default};
