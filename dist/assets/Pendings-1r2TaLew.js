import{r as x,j as e,B as l,T as i,t as S,a5 as w,S as u,aa as B,D as P,g as j,h as p}from"./index-Woi9LiD1.js";const R=()=>{const[c,r]=x.useState([]),[m,k]=x.useState(!0),[g,y]=x.useState(null);x.useEffect(()=>{(async()=>{try{const o=((await p.get("https://api.bookmyevent.ae/api/bookings")).data.bookings||[]).filter(d=>{var h,f;return((h=d.status)==null?void 0:h.toLowerCase())==="pending"||((f=d.paymentStatus)==null?void 0:f.toLowerCase())==="pending"});r(o)}catch(n){console.error("Error fetching pending bookings:",n)}finally{k(!1)}})()},[]);const b=t=>{y(g===t?null:t)},v=async(t,n)=>{n.stopPropagation();try{await p.patch(`https://api.bookmyevent.ae/api/bookings/${t}/accept`),r(s=>s.filter(o=>o._id!==t)),alert("Booking Confirmed")}catch(s){console.error(s),alert("Failed to confirm booking")}},C=async(t,n)=>{var s;n.stopPropagation(),t=t.trim();try{await p.patch(`https://api.bookmyevent.ae/api/bookings/${t}/reject`),r(o=>o.filter(d=>d._id!==t)),alert("Booking Rejected")}catch(o){console.error(((s=o==null?void 0:o.response)==null?void 0:s.data)||o),alert("Failed to reject")}};return e.jsx(l,{p:2,sx:{background:"#f4f7fb",minHeight:"100vh"},children:e.jsxs(l,{sx:{maxWidth:"850px",margin:"0 auto"},children:[e.jsx(i,{variant:"h4",fontWeight:600,mb:3,children:"Pending Bookings"}),m?e.jsx(l,{display:"flex",justifyContent:"center",mt:4,children:e.jsx(S,{})}):c.length===0?e.jsx(i,{children:"No Pending Bookings Found"}):c.map(t=>e.jsxs(w,{elevation:2,sx:{p:2.5,mt:2,borderRadius:"16px",cursor:"pointer",transition:"0.2s",background:"#fff","&:hover":{boxShadow:"0px 4px 20px rgba(0,0,0,0.08)",transform:"translateY(-2px)"}},onClick:()=>b(t._id),children:[e.jsxs(u,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(l,{children:[e.jsxs(i,{fontWeight:700,fontSize:16,children:["Booking ID:"," ",e.jsxs("span",{style:{color:"#1976d2"},children:["#",t._id.slice(-6)]})]}),e.jsx(i,{color:"gray",fontSize:14,children:t.eventType||"Corporate Conference"}),e.jsx(i,{color:"gray",fontSize:13,mt:.5,children:new Date(t.bookingDate).toDateString()})]}),e.jsxs(i,{fontWeight:700,sx:{color:"#16a34a",fontSize:"18px"},children:["â‚¹",t.finalPrice]})]}),e.jsxs(B,{in:g===t._id,children:[e.jsx(P,{sx:{my:2}}),e.jsxs(l,{sx:{background:"#f9fafb",p:2,borderRadius:"12px",border:"1px solid #e5e7eb"},children:[e.jsx(a,{label:"Customer",value:t.fullName}),e.jsx(a,{label:"Guests",value:t.numberOfGuests}),e.jsx(a,{label:"Email",value:t.emailAddress}),e.jsx(a,{label:"Setup",value:t.setupTime||"9:00 AM - 10:00 AM"}),e.jsx(a,{label:"Event",value:t.eventTime||"10:00 AM - 6:00 PM"}),e.jsx(a,{label:"Capacity",value:t.capacity||"500 guests"}),e.jsx(a,{label:"Catering",value:t.catering||"External"})]}),e.jsxs(u,{direction:"row",spacing:2,mt:2,justifyContent:"center",children:[e.jsx(j,{variant:"outlined",sx:{width:"130px",borderRadius:"30px",color:"#e11d48",borderColor:"#e11d48","&:hover":{background:"#ffe4e6"}},onClick:n=>C(t._id,n),children:"Reject"}),e.jsx(j,{variant:"contained",sx:{width:"130px",borderRadius:"30px",bgcolor:"#16a34a","&:hover":{bgcolor:"#15803d"}},onClick:n=>v(t._id,n),children:"Confirm"})]})]})]},t._id))]})})},a=({label:c,value:r})=>e.jsxs(i,{fontSize:14,sx:{mb:.5},children:[e.jsxs("strong",{children:[c,":"]})," ",r]});export{R as default};
