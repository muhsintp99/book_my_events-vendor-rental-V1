import{d as de,r as c,j as e,B as o,aj as xe,S as m,T as r,b as u,C as I,E as Y,a as he,$ as pe,c as ge,G as p,K as x,v as E,V as fe,y as z,Y as G,J as ue,n as J,o as K,p as Q,A as je,ak as me,al as be,am as ve,an as ye,s as q,U as we,e as Ce}from"./index-h_u9Mcwm.js";import{A as X}from"./Add-SRpeMNfL.js";import{S as Se}from"./Search-4PDc1ceL.js";import{I as D}from"./Image-CpiPHm2z.js";import{C as Z}from"./CardMedia-BqcQI3q_.js";import{E as ee,P as ke}from"./Palette-BfbrVVuQ.js";import{E as Ie}from"./Edit-CDvMAPj_.js";import{C as Ee}from"./Close-X7QIWrh1.js";import{C as Pe}from"./Category-D4e0DCUn.js";import{S as Ae}from"./Schedule-C6oaJQ4s.js";import{C as te}from"./CheckCircle-DH09m0bN.js";import{I as Be}from"./Info-Dv0iij0j.js";import{A as se}from"./AttachMoney-Do5qZMMU.js";import{L as Te}from"./LocalOffer-EKA7C8B3.js";import{P as We}from"./Policy-ChDtRlYi.js";import{S as ze,L as De}from"./Spa-BAz_W_cG.js";import{D as Me}from"./DirectionsCar-CY5dupVW.js";import{A as Le,a as $e,E as Ne,b as Fe}from"./ExpandMore-DVOk_uTI.js";import{L as Ve}from"./ListItem-TeWEBIPJ.js";const M="https://api.bookmyevent.ae/api/makeup-packages";function at(){var R,O,H,U;const w=de(),[g,P]=c.useState([]),[L,A]=c.useState(!0),[C,f]=c.useState({open:!1,message:"",severity:"success"}),[j,oe]=c.useState(""),[ie,b]=c.useState(!1),[re,S]=c.useState(!1),[s,ae]=c.useState(null),[$,N]=c.useState(null),[k,F]=c.useState(0),v=localStorage.getItem("token"),B=JSON.parse(localStorage.getItem("user")||"{}"),T=B==null?void 0:B._id,W=t=>t?`https://api.bookmyevent.ae/${t.startsWith("/")?t.slice(1):t}`:null,y=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(t||0),V=c.useCallback(async()=>{if(!T||!v){f({open:!0,message:"Please login again",severity:"error"}),A(!1);return}A(!0);try{const t=await fetch(`${M}/provider/${T}`,{headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to load packages");const i=await t.json();i.success&&P(i.data||[])}catch(t){f({open:!0,message:t.message,severity:"error"})}finally{A(!1)}},[T,v]);c.useEffect(()=>{V()},[V]);const ne=t=>{ae(t),F(0),b(!0)},le=async(t,i)=>{try{(await(await fetch(`${M}/${t}/toggle-active`,{method:"PATCH",headers:{Authorization:`Bearer ${v}`}})).json()).success&&(P(l=>l.map(h=>h._id===t?{...h,isActive:!i}:h)),f({open:!0,message:"Status updated",severity:"success"}))}catch{f({open:!0,message:"Failed to update status",severity:"error"})}},ce=async()=>{try{(await(await fetch(`${M}/${$}`,{method:"DELETE",headers:{Authorization:`Bearer ${v}`}})).json()).success&&(P(a=>a.filter(n=>n._id!==$)),f({open:!0,message:"Package deleted",severity:"success"}))}catch{f({open:!0,message:"Delete failed",severity:"error"})}finally{S(!1),N(null)}},_=c.useMemo(()=>g.filter(t=>{var a,n,l;return!j||((a=t.packageTitle)==null?void 0:a.toLowerCase().includes(j.toLowerCase()))||((n=t.makeupType)==null?void 0:n.toLowerCase().includes(j.toLowerCase()))||((l=t.description)==null?void 0:l.toLowerCase().includes(j.toLowerCase()))}),[g,j]),d=({icon:t,label:i,value:a,chip:n,success:l,error:h})=>e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",gap:2,py:1.5,borderBottom:"1px solid #f0f0f0"},children:[e.jsx(o,{sx:{color:"#E15B65",mt:.5},children:t}),e.jsxs(o,{sx:{flex:1},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:500},children:i}),n?e.jsx(x,{label:a,size:"small",color:l?"success":h?"error":"default",sx:{mt:.5}}):e.jsx(r,{variant:"body2",sx:{fontWeight:500,mt:.3},children:a||"Not specified"})]})]});return e.jsxs(o,{sx:{bgcolor:"#f5f7fa",minHeight:"100vh",pb:4},children:[e.jsx(o,{sx:{background:"linear-gradient(135deg, #E15B65 0%, #c14a54 100%)",color:"white",py:4,px:3,borderRadius:"0 0 24px 24px",boxShadow:"0 4px 20px rgba(225, 91, 101, 0.3)"},children:e.jsx(xe,{maxWidth:"xl",children:e.jsxs(m,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(o,{children:[e.jsx(r,{variant:"h4",sx:{fontWeight:700,mb:.5},children:"My Makeup Packages"}),e.jsxs(r,{variant:"body2",sx:{opacity:.9},children:[g.length," total packages â€¢ ",g.filter(t=>t.isActive).length," active"]})]}),e.jsx(u,{variant:"contained",size:"large",startIcon:e.jsx(X,{}),onClick:()=>w("/makeupartist/addpackage"),sx:{bgcolor:"white",color:"#E15B65",fontWeight:600,px:3,"&:hover":{bgcolor:"#f5f5f5",transform:"translateY(-2px)"},transition:"all 0.3s",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:"Add New Package"})]})})}),e.jsxs(o,{sx:{width:"100%",px:2,mt:4},children:[e.jsx(I,{sx:{mb:3,borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",overflow:"visible"},children:e.jsx(Y,{children:e.jsx(he,{fullWidth:!0,size:"medium",placeholder:"Search by package name, type, or description...",value:j,onChange:t=>oe(t.target.value),InputProps:{startAdornment:e.jsx(pe,{position:"start",children:e.jsx(Se,{sx:{color:"#E15B65",fontSize:28}})}),sx:{borderRadius:2,fontSize:"1.1rem","& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#E15B65"},"&.Mui-focused fieldset":{borderColor:"#E15B65"}}}})})}),L&&e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(ge,{size:60,sx:{color:"#E15B65"}})}),!L&&_.length===0&&e.jsxs(I,{sx:{borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",textAlign:"center",py:8},children:[e.jsx(D,{sx:{fontSize:80,color:"#ddd",mb:2}}),e.jsx(r,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:g.length===0?"No packages yet":"No packages match your search"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:g.length===0?"Create your first makeup package to get started":"Try adjusting your search terms"}),g.length===0&&e.jsx(u,{variant:"contained",size:"large",startIcon:e.jsx(X,{}),sx:{bgcolor:"#E15B65","&:hover":{bgcolor:"#c14a54"}},onClick:()=>w("/makeupartist/addpackage"),children:"Create Your First Package"})]}),e.jsx(p,{container:!0,spacing:3,children:_.map(t=>{var i,a,n;return e.jsx(p,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2.4,children:e.jsxs(I,{sx:{height:"100%",borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",transition:"all 0.3s","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 24px rgba(225, 91, 101, 0.2)"},minWidth:280},children:[e.jsxs(o,{sx:{position:"relative",paddingTop:"75%",bgcolor:"#f5f5f5"},children:[(i=t.gallery)!=null&&i[0]?e.jsx(Z,{component:"img",image:W(t.gallery[0]),alt:t.packageTitle,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(o,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#f0f0f0"},children:e.jsx(D,{sx:{fontSize:60,color:"#ccc"}})}),e.jsx(o,{sx:{position:"absolute",top:12,right:12},children:e.jsx(x,{label:t.isActive?"Active":"Inactive",size:"small",sx:{bgcolor:t.isActive?"#4caf50":"#757575",color:"white",fontWeight:600,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}})}),t.isTopPick&&e.jsx(o,{sx:{position:"absolute",top:12,left:12},children:e.jsx(x,{icon:e.jsx(ee,{sx:{color:"white !important"}}),label:"Top Pick",size:"small",sx:{bgcolor:"#ff9800",color:"white",fontWeight:600,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}})})]}),e.jsxs(Y,{sx:{p:2.5},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:700,mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#2c3e50"},children:t.packageTitle}),e.jsxs(m,{direction:"row",spacing:.5,flexWrap:"wrap",sx:{mb:2,minHeight:28},children:[(a=t.categories)==null?void 0:a.slice(0,2).map((l,h)=>e.jsx(x,{label:typeof l=="string"?"Category":l.title,size:"small",sx:{bgcolor:"#E15B6510",color:"#E15B65",fontWeight:500,height:24,fontSize:"0.75rem"}},l._id||h)),((n=t.categories)==null?void 0:n.length)>2&&e.jsx(x,{label:`+${t.categories.length-2}`,size:"small",sx:{bgcolor:"#E15B6510",color:"#E15B65",fontWeight:500,height:24,fontSize:"0.75rem"}})]}),e.jsx(E,{sx:{my:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(r,{variant:"h5",sx:{fontWeight:700,color:"#E15B65",mb:.5},children:y(t.finalPrice)}),t.basePrice>t.finalPrice&&e.jsxs(m,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through"},children:y(t.basePrice)}),e.jsx(x,{label:`${Math.round((t.basePrice-t.finalPrice)/t.basePrice*100)}% OFF`,size:"small",sx:{bgcolor:"#4caf50",color:"white",fontWeight:600,height:20,fontSize:"0.7rem"}})]})]}),e.jsxs(m,{direction:"row",spacing:1,children:[e.jsx(u,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(fe,{}),onClick:()=>ne(t),sx:{borderColor:"#E15B65",color:"#E15B65","&:hover":{borderColor:"#c14a54",bgcolor:"#E15B6505"}},children:"View"}),e.jsx(z,{color:"primary",onClick:()=>w(`/makeupartist/edit/${t._id}`),sx:{border:"1px solid #e0e0e0","&:hover":{bgcolor:"#f5f5f5"}},children:e.jsx(Ie,{})}),e.jsx(z,{color:"error",onClick:()=>{N(t._id),S(!0)},sx:{border:"1px solid #e0e0e0","&:hover":{bgcolor:"#ffebee"}},children:e.jsx(G,{})})]}),e.jsxs(o,{sx:{mt:2,pt:2,borderTop:"1px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(r,{variant:"body2",fontWeight:500,children:"Package Status"}),e.jsx(ue,{checked:t.isActive,onChange:()=>le(t._id,t.isActive),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4caf50"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4caf50"}}})]})]})]})},t._id)})})]}),e.jsxs(J,{open:ie,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,scroll:"paper",children:[e.jsxs(K,{sx:{bgcolor:"#E15B65",color:"white",pr:6},children:[e.jsx(r,{variant:"h6",children:s==null?void 0:s.packageTitle}),e.jsx(z,{sx:{position:"absolute",right:8,top:8,color:"white"},onClick:()=>b(!1),children:e.jsx(Ee,{})})]}),e.jsx(Q,{dividers:!0,sx:{p:0},children:s&&e.jsxs(o,{children:[e.jsxs(o,{sx:{bgcolor:"#1a1a1a",p:2},children:[e.jsx(o,{sx:{display:"flex",justifyContent:"center",mb:2},children:(R=s.gallery)!=null&&R[k]?e.jsx(I,{elevation:3,sx:{maxWidth:500},children:e.jsx(Z,{component:"img",height:"300",image:W(s.gallery[k]),alt:s.packageTitle,sx:{objectFit:"cover"}})}):e.jsx(o,{sx:{height:300,width:"100%",maxWidth:500,bgcolor:"#333",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:2},children:e.jsx(D,{sx:{fontSize:80,color:"#666"}})})}),((O=s.gallery)==null?void 0:O.length)>1&&e.jsx(o,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:s.gallery.map((t,i)=>e.jsx(je,{variant:"rounded",src:W(t),onClick:()=>F(i),sx:{width:60,height:60,cursor:"pointer",border:k===i?"3px solid #E15B65":"3px solid transparent",opacity:k===i?1:.7,"&:hover":{opacity:1}}},i))})]}),e.jsx(o,{sx:{p:3},children:e.jsxs(p,{container:!0,spacing:3,children:[e.jsxs(p,{item:!0,xs:12,md:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Basic Information"}),e.jsx(d,{icon:e.jsx(Pe,{}),label:"Categories",value:((H=s.categories)==null?void 0:H.map(t=>t.title).join(", "))||"None"}),e.jsx(d,{icon:e.jsx(ke,{}),label:"Makeup Type",value:s.makeupType}),e.jsx(d,{icon:e.jsx(Ae,{}),label:"Duration",value:s.duration}),e.jsx(d,{icon:e.jsx(te,{}),label:"Status",value:s.isActive?"Active":"Inactive",chip:!0,success:s.isActive,error:!s.isActive}),e.jsx(d,{icon:e.jsx(Be,{}),label:"Description",value:s.description})]}),e.jsxs(p,{item:!0,xs:12,md:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Pricing & Policies"}),e.jsx(d,{icon:e.jsx(se,{}),label:"Base Price",value:y(s.basePrice)}),e.jsx(d,{icon:e.jsx(Te,{}),label:"Offer Discount",value:s.offerPrice?y(s.offerPrice):"No offer"}),e.jsx(d,{icon:e.jsx(se,{}),label:"Final Price",value:e.jsx(r,{sx:{color:"#E15B65",fontWeight:"bold"},children:y(s.finalPrice)})}),e.jsx(d,{icon:e.jsx(me,{}),label:"Advance Booking Amount",value:s.advanceBookingAmount?`AED ${s.advanceBookingAmount}`:"Not specified"}),e.jsx(d,{icon:e.jsx(We,{}),label:"Cancellation Policy",value:s.cancellationPolicy})]}),e.jsxs(p,{item:!0,xs:12,children:[e.jsx(E,{sx:{my:2}}),e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Additional Features"}),e.jsxs(m,{direction:"row",spacing:2,flexWrap:"wrap",useFlexGap:!0,children:[e.jsx(x,{icon:e.jsx(ze,{}),label:s.trialMakeupIncluded?"Trial Makeup Included":"No Trial Makeup",color:s.trialMakeupIncluded?"success":"default",variant:s.trialMakeupIncluded?"filled":"outlined"}),e.jsx(x,{icon:e.jsx(Me,{}),label:s.travelToVenue?"Travel to Venue Included":"No Travel to Venue",color:s.travelToVenue?"success":"default",variant:s.travelToVenue?"filled":"outlined"}),e.jsx(x,{icon:e.jsx(ee,{}),label:s.isTopPick?"Top Pick":"Not a Top Pick",color:s.isTopPick?"warning":"default",variant:s.isTopPick?"filled":"outlined"})]})]}),((U=s.includedServices)==null?void 0:U.length)>0&&e.jsxs(p,{item:!0,xs:12,children:[e.jsx(E,{sx:{my:2}}),e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Included Services"}),s.includedServices.map((t,i)=>{var a,n;return e.jsxs(Le,{defaultExpanded:i===0,sx:{mb:1,"&:before":{display:"none"},boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx($e,{expandIcon:e.jsx(Ne,{}),sx:{bgcolor:"#f8f9fa"},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(De,{sx:{color:"#E15B65"}}),e.jsx(r,{fontWeight:500,children:t.title}),e.jsx(x,{label:`${((a=t.items)==null?void 0:a.length)||0} items`,size:"small",sx:{ml:1}})]})}),e.jsx(Fe,{children:e.jsx(be,{dense:!0,children:(n=t.items)==null?void 0:n.map((l,h)=>e.jsxs(Ve,{children:[e.jsx(ve,{sx:{minWidth:32},children:e.jsx(te,{sx:{fontSize:18,color:"success.main"}})}),e.jsx(ye,{primary:l})]},h))})})]},i)})]}),e.jsxs(p,{item:!0,xs:12,children:[e.jsx(E,{sx:{my:2}}),e.jsxs(m,{direction:"row",spacing:4,sx:{color:"text.secondary"},children:[e.jsxs(r,{variant:"caption",children:["Created: ",new Date(s.createdAt).toLocaleString()]}),e.jsxs(r,{variant:"caption",children:["Updated: ",new Date(s.updatedAt).toLocaleString()]})]})]})]})})]})}),e.jsxs(q,{sx:{p:2},children:[e.jsx(u,{onClick:()=>{b(!1),w(`/makeupartist/edit/${s._id}`)},variant:"outlined",sx:{borderColor:"#E15B65",color:"#E15B65"},children:"Edit Package"}),e.jsx(u,{variant:"contained",sx:{bgcolor:"#E15B65","&:hover":{bgcolor:"#c14a54"}},onClick:()=>b(!1),children:"Close"})]})]}),e.jsxs(J,{open:re,onClose:()=>S(!1),maxWidth:"xs",fullWidth:!0,children:[e.jsx(K,{sx:{fontWeight:600},children:"Delete Package?"}),e.jsx(Q,{children:e.jsxs(o,{sx:{textAlign:"center",py:2},children:[e.jsx(G,{sx:{fontSize:60,color:"#f44336",mb:2}}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"This action cannot be undone. This package will be permanently deleted from your account."})]})}),e.jsxs(q,{sx:{p:2,gap:1},children:[e.jsx(u,{onClick:()=>S(!1),variant:"outlined",fullWidth:!0,sx:{borderColor:"#e0e0e0",color:"text.secondary"},children:"Cancel"}),e.jsx(u,{color:"error",variant:"contained",onClick:ce,fullWidth:!0,sx:{fontWeight:600},children:"Delete Permanently"})]})]}),e.jsx(we,{open:C.open,autoHideDuration:4e3,onClose:()=>f({...C,open:!1}),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(Ce,{severity:C.severity,variant:"filled",sx:{minWidth:300,boxShadow:"0 4px 12px rgba(0,0,0,0.15)","& .MuiAlert-icon":{fontSize:24}},children:C.message})})]})}export{at as default};
