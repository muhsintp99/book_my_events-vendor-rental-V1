import{d as Y,g as U,r as l,j as e,B as r,Q as y,U as _,s as u,T as i,W as R,X as q,Y as z,b as m,G as c,a as J,Z,F as L,S as N,M as d,c as K,_ as Q,$ as X,C as ee,a0 as E,A as D,V as se,a1 as te,z as re,w as ie,q as ae,a2 as oe,v as ne,a3 as le,H as ce,a4 as de,J as xe,K as he,N as ue,e as pe}from"./index-DQO8S-Hd.js";import{S as ge}from"./Storefront-DE-3GSuh.js";import{C as me}from"./Cancel-Btmoi_JX.js";import{A as fe}from"./Add-CEbyJWRs.js";import{S as je}from"./Search-BNCytBKg.js";import{R as ve}from"./Refresh-DRp5ESu7.js";import{C as be}from"./CardMedia-lAcO_rAT.js";import{L as ye}from"./LocationOn-DsxLFNHL.js";import{G as Ce}from"./Group-CYyDkpoG.js";import{S as we}from"./EventSeat-DBPJhm8S.js";const a="#E15B65",Ae="#c14a54";function Ve(){const f=Y();U();const C="https://api.bookmyevent.ae/api",B="https://api.bookmyevent.ae",[x,w]=l.useState([]),[O,$]=l.useState(!1),[o,A]=l.useState({seatingArrangement:"",status:"all",search:""}),[P,j]=l.useState(!1),[S,F]=l.useState(null),[I,n]=l.useState({open:!1,message:"",severity:"success"}),p=localStorage.getItem("token"),W=JSON.parse(localStorage.getItem("user")||"{}")._id,M=s=>{if(!s)return null;if(s.startsWith("http"))return s;const t=s.split("/").pop();return`${B}/uploads/venues/${t}`},k=l.useCallback(async()=>{if(!W||!p){n({open:!0,message:"Authentication required",severity:"error"});return}$(!0);try{const t=await(await fetch(`${C}/venues/provider/${W}`,{headers:{Authorization:`Bearer ${p}`}})).json();t.success?w(t.data||[]):n({open:!0,message:t.message||"Failed to fetch venues",severity:"error"})}catch{n({open:!0,message:"Error loading venues",severity:"error"})}finally{$(!1)}},[W,p]);l.useEffect(()=>{k()},[k]);const G=async(s,t)=>{try{(await(await fetch(`${C}/venues/${s}/toggle-active`,{method:"PATCH",headers:{Authorization:`Bearer ${p}`}})).json()).success?(w(b=>b.map(h=>h._id===s?{...h,isActive:!t}:h)),n({open:!0,message:"Status updated successfully",severity:"success"})):n({open:!0,message:"Failed to update status",severity:"error"})}catch{n({open:!0,message:"Error updating status",severity:"error"})}},H=async()=>{if(S)try{const t=await(await fetch(`${C}/venues/${S}`,{method:"DELETE",headers:{Authorization:`Bearer ${p}`}})).json();t.success?(w(g=>g.filter(v=>v._id!==S)),n({open:!0,message:"Venue deleted successfully",severity:"success"})):n({open:!0,message:t.message||"Failed to delete venue",severity:"error"})}catch{n({open:!0,message:"Error deleting venue",severity:"error"})}finally{j(!1),F(null)}},V=l.useMemo(()=>x.filter(s=>{var b,h;const t=!o.search||((b=s.venueName)==null?void 0:b.toLowerCase().includes(o.search.toLowerCase()))||((h=s.venueAddress)==null?void 0:h.toLowerCase().includes(o.search.toLowerCase())),g=!o.seatingArrangement||s.seatingArrangement===o.seatingArrangement,v=o.status==="all"||o.status==="active"&&s.isActive||o.status==="inactive"&&!s.isActive;return t&&g&&v}),[x,o]),T=l.useMemo(()=>({total:x.length,active:x.filter(s=>s.isActive).length,inactive:x.filter(s=>!s.isActive).length}),[x]);return e.jsxs(r,{sx:{bgcolor:"#F7FAFC",minHeight:"100vh",pb:8},children:[e.jsx(r,{sx:{background:`linear-gradient(135deg, ${a} 0%, #a44c7a 100%)`,color:"white",pt:6,pb:12,px:4,position:"relative",boxShadow:`0 10px 30px ${y(a,.3)}`},children:e.jsx(_,{maxWidth:"xl",children:e.jsxs(u,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},spacing:3,children:[e.jsxs(r,{children:[e.jsxs(i,{variant:"h4",sx:{fontWeight:900,mb:1,letterSpacing:"-1px",color:"white",display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(R,{sx:{fontSize:36}})," Venue Management"]}),e.jsx(u,{direction:"row",spacing:2,sx:{mt:2.5},children:[{label:"Total Venues",value:T.total,icon:e.jsx(ge,{sx:{fontSize:20}})},{label:"Active",value:T.active,icon:e.jsx(q,{sx:{fontSize:20}})},{label:"Inactive",value:T.inactive,icon:e.jsx(me,{sx:{fontSize:20}})}].map((s,t)=>e.jsx(z,{elevation:0,sx:{bgcolor:"rgba(255,255,255,0.12)",px:3,py:1.5,borderRadius:3,backdropFilter:"blur(8px)",color:"white",border:"1px solid rgba(255,255,255,0.2)",transition:"all 0.3s ease","&:hover":{bgcolor:"rgba(255,255,255,0.2)"}},children:e.jsxs(u,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsx(r,{sx:{color:"white",display:"flex"},children:s.icon}),e.jsxs(r,{children:[e.jsx(i,{variant:"h5",sx:{fontWeight:900,lineHeight:1,color:"white"},children:s.value}),e.jsx(i,{variant:"caption",sx:{fontWeight:700,opacity:.95,color:"white",textTransform:"uppercase",letterSpacing:"0.5px"},children:s.label})]})]})},t))})]}),e.jsx(m,{variant:"contained",size:"large",startIcon:e.jsx(fe,{}),onClick:()=>f("/venue-setup/new"),sx:{bgcolor:"white",color:a,fontWeight:800,px:5,py:2,borderRadius:"20px",textTransform:"none",boxShadow:"0 15px 35px rgba(0,0,0,0.15)","&:hover":{bgcolor:"#f8f9ff",transform:"translateY(-5px)",boxShadow:"0 20px 45px rgba(0,0,0,0.2)"},transition:"all 0.3s"},children:"Add New Venue"})]})})}),e.jsxs(_,{maxWidth:"xl",sx:{mt:-6,position:"relative",zIndex:1},children:[e.jsx(z,{elevation:10,sx:{borderRadius:4,p:2,mb:4,bgcolor:"white"},children:e.jsxs(c,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(c,{item:!0,xs:12,md:4,children:e.jsx(J,{fullWidth:!0,placeholder:"Search venues...",value:o.search,onChange:s=>A(t=>({...t,search:s.target.value})),InputProps:{startAdornment:e.jsx(Z,{position:"start",children:e.jsx(je,{sx:{color:a}})}),sx:{borderRadius:3,bgcolor:"#f8fafc"}}})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(L,{fullWidth:!0,variant:"outlined",children:e.jsxs(N,{value:o.seatingArrangement,onChange:s=>A(t=>({...t,seatingArrangement:s.target.value})),displayEmpty:!0,sx:{borderRadius:3,bgcolor:"#f8fafc"},children:[e.jsx(d,{value:"",children:"Any Seating Arrangement"}),e.jsx(d,{value:"Amphitheater",children:"Amphitheater"}),e.jsx(d,{value:"Balcony auditorium",children:"Balcony auditorium"}),e.jsx(d,{value:"Flat floor auditorium",children:"Flat floor auditorium"})]})})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(L,{fullWidth:!0,variant:"outlined",children:e.jsxs(N,{value:o.status,onChange:s=>A(t=>({...t,status:s.target.value})),sx:{borderRadius:3,bgcolor:"#f8fafc"},children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"active",children:"Active Only"}),e.jsx(d,{value:"inactive",children:"Inactive Only"})]})})}),e.jsx(c,{item:!0,xs:12,md:2,children:e.jsx(m,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(ve,{}),onClick:k,sx:{borderRadius:3,py:1.5,color:a,borderColor:a,"&:hover":{borderColor:Ae,bgcolor:y(a,.05)}},children:"Refresh"})})]})}),O?e.jsx(r,{sx:{display:"flex",justifyContent:"center",py:10},children:e.jsx(K,{size:60,thickness:4,sx:{color:a}})}):V.length===0?e.jsx(Q,{in:!0,children:e.jsxs(z,{sx:{textAlign:"center",py:10,borderRadius:6,border:"2px dashed #e2e8f0"},children:[e.jsx(R,{sx:{fontSize:80,color:"#cbd5e0",mb:2}}),e.jsx(i,{variant:"h5",sx:{fontWeight:700,color:"#4a5568"},children:"No Venues Found"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Try adjusting your filters or add a new venue to your collection."})]})}):e.jsx(c,{container:!0,spacing:4,children:V.map((s,t)=>e.jsx(c,{item:!0,xs:12,sm:6,md:4,children:e.jsx(X,{in:!0,style:{transitionDelay:`${t*50}ms`},children:e.jsxs(ee,{sx:{height:"100%",borderRadius:6,overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.05)",transition:"all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)","&:hover":{transform:"translateY(-10px)",boxShadow:`0 20px 40px ${y(a,.1)}`,"& .media-overlay":{opacity:1}}},children:[e.jsxs(r,{sx:{position:"relative",pt:"60%",bgcolor:"#f7fafc"},children:[s.thumbnail?e.jsx(be,{component:"img",image:M(s.thumbnail),alt:s.venueName,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(r,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(R,{sx:{fontSize:60,color:"#e2e8f0"}})}),e.jsxs(r,{className:"media-overlay",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:y(a,.4),display:"flex",alignItems:"center",justifyContent:"center",gap:2,opacity:0,transition:"0.3s",backdropFilter:"blur(4px)"},children:[e.jsx(E,{title:"View Details",children:e.jsx(D,{sx:{bgcolor:"white",color:a,cursor:"pointer"},onClick:()=>f(`/venue-setup/listview/${s._id}`),children:e.jsx(se,{})})}),e.jsx(E,{title:"Edit Venue",children:e.jsx(D,{sx:{bgcolor:"white",color:"#2b6cb0",cursor:"pointer"},onClick:()=>f(`/venue-setup/new/${s._id}`),children:e.jsx(te,{})})}),e.jsx(E,{title:"Delete Permanently",children:e.jsx(D,{sx:{bgcolor:"white",color:"#c53030",cursor:"pointer"},onClick:()=>{F(s._id),j(!0)},children:e.jsx(re,{})})})]}),e.jsx(r,{sx:{position:"absolute",top:15,left:15},children:e.jsx(ie,{label:s.isActive?"ACTIVE":"INACTIVE",size:"small",sx:{bgcolor:s.isActive?"#48bb78":"#a0aec0",color:"white",fontWeight:900,borderRadius:2}})})]}),e.jsxs(ae,{sx:{p:3},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:800,mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.venueName}),e.jsxs(u,{spacing:1.5,children:[e.jsxs(r,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[e.jsx(ye,{sx:{fontSize:18,color:a,mt:.3}}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:s.venueAddress||"No address provided"})]}),e.jsx(oe,{sx:{borderStyle:"dashed"}}),e.jsxs(c,{container:!0,spacing:1,children:[e.jsxs(c,{item:!0,xs:6,children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,display:"block"},children:"CAPACITY"}),e.jsxs(u,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(Ce,{sx:{fontSize:16,color:"#718096"}}),e.jsx(i,{variant:"body2",sx:{fontWeight:700},children:s.maxGuestsSeated||"-"})]})]}),e.jsxs(c,{item:!0,xs:6,children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,display:"block"},children:"SEATING"}),e.jsxs(u,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(we,{sx:{fontSize:16,color:"#718096"}}),e.jsx(i,{variant:"body2",sx:{fontWeight:700},children:s.seatingArrangement||"N/A"})]})]})]})]}),e.jsxs(r,{sx:{mt:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"STATUS"}),e.jsx(ne,{checked:s.isActive,onChange:()=>G(s._id,s.isActive),size:"small",color:"success"})]}),e.jsx(m,{size:"small",endIcon:e.jsx(le,{}),onClick:()=>f(`/venue-setup/listview/${s._id}`),sx:{textTransform:"none",fontWeight:700,color:a},children:"Details"})]})]})]})})},s._id))})]}),e.jsxs(ce,{open:P,onClose:()=>j(!1),PaperProps:{sx:{borderRadius:5,p:1}},children:[e.jsx(de,{sx:{fontWeight:900,textAlign:"center"},children:"Permanently Delete?"}),e.jsx(xe,{sx:{textAlign:"center"},children:e.jsx(i,{color:"text.secondary",children:"Are you sure you want to delete this venue? This action cannot be undone and will remove all related data."})}),e.jsxs(he,{sx:{justifyContent:"center",pb:3,gap:2},children:[e.jsx(m,{onClick:()=>j(!1),sx:{borderRadius:3,fontWeight:700},children:"Cancel"}),e.jsx(m,{onClick:H,variant:"contained",sx:{bgcolor:"#c53030",borderRadius:3,fontWeight:700,"&:hover":{bgcolor:"#9b2c2c"}},children:"Yes, Delete"})]})]}),e.jsx(ue,{open:I.open,autoHideDuration:4e3,onClose:()=>n(s=>({...s,open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(pe,{severity:I.severity,variant:"filled",sx:{borderRadius:4,fontWeight:700},children:I.message})})]})}export{Ve as default};
