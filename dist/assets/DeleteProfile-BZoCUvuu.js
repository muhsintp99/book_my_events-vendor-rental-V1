import{r as s,j as e,B as c,C as p,A as m,P as b,T as l,a as f,b as y,c as j}from"./index-BaH8rYCR.js";const v=({onCancel:u})=>{const[n,i]=s.useState(!1),[o,h]=s.useState(""),[r,x]=s.useState(localStorage.getItem("userEmail")||""),g=async()=>{if(!r||!o){alert("Email and password are required.");return}i(!0);try{const t=localStorage.getItem("token"),d=await fetch("https://api.bookmyevent.ae/api/delete-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({email:r,password:o})}),a=await d.json();d.ok?(alert("Profile deleted successfully!"),localStorage.clear(),window.location.href="/"):alert((a==null?void 0:a.message)||"Failed to delete profile.")}catch(t){console.error("Error deleting profile:",t),alert("Something went wrong. Please try again later.")}finally{i(!1)}};return e.jsx(c,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9ff"},children:e.jsxs(p,{sx:{height:500,width:400,borderRadius:4,boxShadow:"0px 4px 20px rgba(0,0,0,0.1)",textAlign:"center",p:3,backgroundColor:"#fff"},children:[e.jsx(m,{sx:{bgcolor:"#E15B65",width:70,height:70,mx:"auto",mb:2},children:e.jsx(b,{sx:{fontSize:40,color:"#fff"}})}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"#2f2f46",mb:1,paddingBottom:3},children:"Delete profile?"}),e.jsx(l,{variant:"body2",sx:{fontSize:16,color:"#6b6b8a",mb:3,px:3,lineHeight:1.5,paddingBottom:2},children:"Are you sure you want to delete your profile? This action cannot be undone."}),e.jsx(f,{fullWidth:!0,label:"Email",value:r,onChange:t=>x(t.target.value),disabled:!!localStorage.getItem("userEmail"),sx:{mb:2},variant:"outlined"}),e.jsx(f,{fullWidth:!0,label:"Password",type:"password",value:o,onChange:t=>h(t.target.value),sx:{mb:3},variant:"outlined"}),e.jsxs(c,{children:[e.jsx(y,{variant:"contained",color:"error",fullWidth:!0,sx:{borderRadius:2,textTransform:"none",fontWeight:600,mb:1.5,height:45,bgcolor:"#E15B65",color:"#fff"},onClick:g,disabled:n||!r||!o,children:n?e.jsx(j,{size:24,sx:{color:"#fff"}}):"Delete"}),e.jsx(l,{variant:"body2",sx:{color:"#2f2f46",cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:u,children:"Cancel"})]})]})})};export{v as default};
