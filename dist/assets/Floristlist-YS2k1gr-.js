import{d as ce,r as a,j as e,B as o,U as de,s as b,T as r,b as h,C as y,q as _,a as xe,Z as he,c as ge,az as B,G as c,w as g,a2 as M,V as pe,o as E,a1 as H,z as O,v as fe,H as V,a4 as Y,J as U,A as G,aC as be,X as je,Y as q,K as J,N as me,e as ue}from"./index-DQO8S-Hd.js";import{A as Q}from"./Add-CEbyJWRs.js";import{S as ve}from"./Search-BNCytBKg.js";import{C as K}from"./CardMedia-lAcO_rAT.js";import{E as ye}from"./EventAvailable-jFc8lYTP.js";import{C as X}from"./Close-DxdnvH5I.js";import{I as Se}from"./Info-BZoeNYJo.js";import{L as we}from"./LocalOffer-ySdHPgCu.js";import{C as Ce}from"./Category-Bo9R6iVI.js";import{S as ke}from"./Spa-DC-b_8y7.js";import{S as Ie}from"./Schedule-DwxG0xsZ.js";const A="https://api.bookmyevent.ae/api/mehandi";function $e(){var T,L,N,$;const j=ce(),[d,S]=a.useState([]),[z,w]=a.useState(!0),[m,x]=a.useState({open:!1,message:"",severity:"success"}),[u,Z]=a.useState(""),[ee,p]=a.useState(!1),[te,v]=a.useState(!1),[s,se]=a.useState(null),[oe,P]=a.useState(null),[We,re]=a.useState(0),f=localStorage.getItem("token"),C=JSON.parse(localStorage.getItem("user")||"{}"),k=C==null?void 0:C._id,F=t=>t?`https://api.bookmyevent.ae/${t.startsWith("/")?t.slice(1):t}`:null,ie=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(t||0),R=a.useCallback(async()=>{if(!k||!f){x({open:!0,message:"Please login again",severity:"error"}),w(!1);return}w(!0);try{const t=await fetch(`${A}/vendor/${k}`,{headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to load packages");const i=await t.json();i.success&&S(i.data||[])}catch(t){x({open:!0,message:t.message,severity:"error"})}finally{w(!1)}},[k,f]);a.useEffect(()=>{R()},[R]);const ae=t=>{se(t),re(0),p(!0)},ne=async(t,i)=>{try{(await(await fetch(`${A}/${t}/toggle-active`,{method:"PATCH",headers:{Authorization:`Bearer ${f}`}})).json()).success&&(S(I=>I.map(W=>W._id===t?{...W,isActive:!i}:W)),x({open:!0,message:"Status updated",severity:"success"}))}catch{x({open:!0,message:"Failed to update status",severity:"error"})}},le=async()=>{try{(await(await fetch(`${A}/${oe}`,{method:"DELETE",headers:{Authorization:`Bearer ${f}`}})).json()).success&&(S(l=>l.filter(n=>n._id!==floristToDelete)),x({open:!0,message:"Package deleted",severity:"success"}))}catch{x({open:!0,message:"Delete failed",severity:"error"})}finally{v(!1),P(null)}},D=a.useMemo(()=>d.filter(t=>{var l,n;if(!u)return!0;const i=u.toLowerCase();return((l=t.packageName)==null?void 0:l.toLowerCase().includes(i))||((n=t.description)==null?void 0:n.toLowerCase().includes(i))}),[d,u]);return e.jsxs(o,{sx:{bgcolor:"#f5f7fa",minHeight:"100vh",pb:4},children:[e.jsx(o,{sx:{background:"linear-gradient(135deg, #E15B65 0%, #c14a54 100%)",color:"white",py:4,px:3,borderRadius:"0 0 24px 24px",boxShadow:"0 4px 20px rgba(225, 91, 101, 0.3)"},children:e.jsx(de,{maxWidth:"xl",children:e.jsxs(b,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(o,{children:[e.jsx(r,{variant:"h4",sx:{fontWeight:700,mb:.5},children:"Florist Packages"}),e.jsxs(r,{variant:"body2",sx:{opacity:.9},children:[d.length," total packages • ",d.filter(t=>t.isActive).length," active"]})]}),e.jsx(h,{variant:"contained",size:"large",startIcon:e.jsx(Q,{}),onClick:()=>j("/makeupartist/addpackage"),sx:{bgcolor:"white",color:"#E15B65",fontWeight:600,px:3,"&:hover":{bgcolor:"#f5f5f5",transform:"translateY(-2px)"},transition:"all 0.3s",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:"Add New Package"})]})})}),e.jsxs(o,{sx:{width:"100%",px:2,mt:4},children:[e.jsx(y,{sx:{mb:3,borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",overflow:"visible"},children:e.jsx(_,{children:e.jsx(xe,{fullWidth:!0,size:"medium",placeholder:"Search by package name, type, or description...",value:u,onChange:t=>Z(t.target.value),InputProps:{startAdornment:e.jsx(he,{position:"start",children:e.jsx(ve,{sx:{color:"#E15B65",fontSize:28}})}),sx:{borderRadius:2,fontSize:"1.1rem","& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#E15B65"},"&.Mui-focused fieldset":{borderColor:"#E15B65"}}}})})}),z&&e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(ge,{size:60,sx:{color:"#E15B65"}})}),!z&&D.length===0&&e.jsxs(y,{sx:{borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",textAlign:"center",py:8},children:[e.jsx(B,{sx:{fontSize:80,color:"#ddd",mb:2}}),e.jsx(r,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:d.length===0?"No packages yet":"No packages match your search"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:d.length===0?"Create your first florist package to get started":"Try adjusting your search terms"}),d.length===0&&e.jsx(h,{variant:"contained",size:"large",startIcon:e.jsx(Q,{}),sx:{bgcolor:"#E15B65","&:hover":{bgcolor:"#c14a54"}},onClick:()=>j("/florist/addpackage"),children:"Create Your First Package"})]}),e.jsx(c,{container:!0,spacing:3,children:D.map(t=>{var i,l;return e.jsx(c,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2.4,children:e.jsxs(y,{sx:{height:"100%",borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",transition:"all 0.3s","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 24px rgba(225, 91, 101, 0.2)"},minWidth:280},children:[e.jsxs(o,{sx:{position:"relative",paddingTop:"75%",bgcolor:"#f5f5f5"},children:[t.image?e.jsx(K,{component:"img",image:F(t.image),alt:t.packageName,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(o,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#f0f0f0"},children:e.jsx(B,{sx:{fontSize:60,color:"#ccc"}})}),e.jsx(o,{sx:{position:"absolute",top:12,right:12},children:e.jsx(g,{label:t.isActive?"Active":"Inactive",size:"small",sx:{bgcolor:t.isActive?"#4caf50":"#757575",color:"white",fontWeight:600,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}})}),t.isTopPick&&e.jsx(o,{sx:{position:"absolute",top:12,left:12},children:e.jsx(g,{icon:e.jsx(ye,{sx:{color:"white !important"}}),label:"Top Pick",size:"small",sx:{bgcolor:"#ff9800",color:"white",fontWeight:600,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}})})]}),e.jsxs(_,{sx:{p:2.5},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:700,mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#2c3e50"},children:t.packageName}),e.jsxs(b,{direction:"row",spacing:.5,flexWrap:"wrap",sx:{mb:2,minHeight:28},children:[(i=t.categories)==null?void 0:i.slice(0,2).map((n,I)=>e.jsx(g,{label:typeof n=="string"?"Category":n.title,size:"small",sx:{bgcolor:"#E15B6510",color:"#E15B65",fontWeight:500,height:24,fontSize:"0.75rem"}},n._id||I)),((l=t.categories)==null?void 0:l.length)>2&&e.jsx(g,{label:`+${t.categories.length-2}`,size:"small",sx:{bgcolor:"#E15B6510",color:"#E15B65",fontWeight:500,height:24,fontSize:"0.75rem"}})]}),e.jsx(M,{sx:{my:2}}),e.jsx(o,{sx:{mb:2},children:e.jsx(r,{variant:"h5",sx:{fontWeight:700,color:"#E15B65",mb:.5},children:ie(t.packagePrice)})}),e.jsxs(b,{direction:"row",spacing:1,children:[e.jsx(h,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(pe,{}),onClick:()=>ae(t),sx:{borderColor:"#E15B65",color:"#E15B65","&:hover":{borderColor:"#c14a54",bgcolor:"#E15B6505"}},children:"View"}),e.jsx(E,{color:"primary",onClick:()=>j(`/florist/edit/${t._id}`),sx:{border:"1px solid #e0e0e0","&:hover":{bgcolor:"#f5f5f5"}},children:e.jsx(H,{})}),e.jsx(E,{color:"error",onClick:()=>{P(t._id),v(!0)},sx:{border:"1px solid #e0e0e0","&:hover":{bgcolor:"#ffebee"}},children:e.jsx(O,{})})]}),e.jsxs(o,{sx:{mt:2,pt:2,borderTop:"1px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(r,{variant:"body2",fontWeight:500,children:"Package Status"}),e.jsx(fe,{checked:t.isActive,onChange:()=>ne(t._id,t.isActive),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4caf50"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4caf50"}}})]})]})]})},t._id)})})]}),e.jsxs(V,{open:ee,onClose:()=>p(!1),maxWidth:"md",fullWidth:!0,scroll:"paper",PaperProps:{sx:{borderRadius:"24px",overflow:"hidden",boxShadow:"0 24px 80px rgba(0,0,0,0.15)",bgcolor:"#ffffff"}},children:[e.jsx(Y,{sx:{p:0,position:"relative",background:"linear-gradient(135deg, #E15B65 0%, #c14a54 100%)",color:"white"},children:e.jsxs(o,{sx:{p:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(o,{children:[e.jsx(r,{variant:"h5",sx:{fontWeight:800,letterSpacing:"-0.02em",mb:.5},children:s==null?void 0:s.packageName}),e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(g,{label:"Premium Package",size:"small",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontWeight:600,fontSize:"0.65rem",backdropFilter:"blur(4px)"}}),e.jsxs(r,{variant:"caption",sx:{opacity:.8},children:["ID: ",s==null?void 0:s.packageId]})]})]}),e.jsx(E,{onClick:()=>p(!1),sx:{color:"white",bgcolor:"rgba(255,255,255,0.1)","&:hover":{bgcolor:"rgba(255,255,255,0.2)"}},children:e.jsx(X,{})})]})}),e.jsx(U,{sx:{p:0,overflowY:"auto"},children:s&&e.jsxs(c,{container:!0,children:[e.jsx(c,{item:!0,xs:12,md:5,sx:{borderRight:{md:"1px solid #f0f0f0"}},children:e.jsxs(o,{sx:{position:"sticky",top:0},children:[e.jsx(o,{sx:{position:"relative",p:1.5},children:e.jsxs(y,{elevation:0,sx:{borderRadius:"20px",overflow:"hidden",position:"relative",boxShadow:"0 10px 30px rgba(0,0,0,0.08)",aspectRatio:"16/9",maxHeight:"280px"},children:[s.image?e.jsx(K,{component:"img",image:F(s.image),alt:s.packageName,sx:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(o,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#f8f9fa"},children:e.jsx(B,{sx:{fontSize:80,color:"#dee2e6"}})}),e.jsx(o,{sx:{position:"absolute",bottom:16,left:16,bgcolor:"rgba(255,255,255,0.9)",backdropFilter:"blur(8px)",px:2,py:1,borderRadius:"12px",display:"flex",alignItems:"center",gap:1,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:e.jsxs(r,{sx:{fontWeight:800,color:"#E15B65",fontSize:"1.2rem"},children:["₹",(T=s.packagePrice)==null?void 0:T.toLocaleString()]})})]})}),e.jsxs(o,{sx:{px:3,pb:2},children:[e.jsx(r,{variant:"overline",sx:{color:"text.secondary",fontWeight:700,letterSpacing:"0.1em"},children:"Quick Setup"}),e.jsxs(b,{spacing:2,sx:{mt:1},children:[e.jsxs(o,{sx:{display:"flex",gap:2,p:2,bgcolor:"#FDF6EE",borderRadius:"16px"},children:[e.jsx(G,{sx:{bgcolor:"#C4572A",width:40,height:40},children:e.jsx(be,{fontSize:"small"})}),e.jsxs(o,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Advance Payment"}),e.jsxs(r,{variant:"body2",sx:{fontWeight:700},children:["₹",(L=s.advanceBookingAmount)==null?void 0:L.toLocaleString()]})]})]}),e.jsxs(o,{sx:{display:"flex",gap:2,p:2,bgcolor:s.isActive?"#E8F5E9":"#F5F5F5",borderRadius:"16px"},children:[e.jsx(G,{sx:{bgcolor:s.isActive?"#4CAF50":"#757575",width:40,height:40},children:s.isActive?e.jsx(je,{fontSize:"small"}):e.jsx(X,{fontSize:"small"})}),e.jsxs(o,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Current Status"}),e.jsx(r,{variant:"body2",sx:{fontWeight:700},children:s.isActive?"Live on Platform":"Currently Hidden"})]})]})]})]})]})}),e.jsx(c,{item:!0,xs:12,md:7,children:e.jsxs(o,{sx:{p:4},children:[e.jsxs("section",{style:{marginBottom:"32px"},children:[e.jsxs(r,{variant:"h6",sx:{fontWeight:800,display:"flex",alignItems:"center",gap:1,mb:1.5},children:[e.jsx(Se,{sx:{color:"#E15B65"}})," Package Overview"]}),e.jsx(r,{variant:"body1",sx:{color:"text.secondary",lineHeight:1.7,fontSize:"0.95rem"},children:s.description||"No detailed description provided for this package."})]}),e.jsx(M,{sx:{my:4,borderStyle:"dashed"}}),e.jsxs("section",{style:{marginBottom:"32px"},children:[e.jsxs(r,{variant:"h6",sx:{fontWeight:800,display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(we,{sx:{color:"#E15B65"}})," Pricing Details"]}),e.jsxs(c,{container:!0,spacing:2,children:[e.jsx(c,{item:!0,xs:6,children:e.jsxs(q,{elevation:0,sx:{p:2,bgcolor:"#f8f9fa",borderRadius:"16px",border:"1px solid #eee"},children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Full Price"}),e.jsxs(r,{variant:"h6",sx:{fontWeight:800,color:"#2c3e50"},children:["₹",(N=s.packagePrice)==null?void 0:N.toLocaleString()]})]})}),e.jsx(c,{item:!0,xs:6,children:e.jsxs(q,{elevation:0,sx:{p:2,bgcolor:"#f8f9fa",borderRadius:"16px",border:"1px solid #eee"},children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Booking Fee"}),e.jsxs(r,{variant:"h6",sx:{fontWeight:800,color:"#C4572A"},children:["₹",($=s.advanceBookingAmount)==null?void 0:$.toLocaleString()]})]})})]})]}),e.jsxs("section",{children:[e.jsxs(r,{variant:"h6",sx:{fontWeight:800,display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(Ce,{sx:{color:"#E15B65"}})," Service Info"]}),e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[s.module&&e.jsx(g,{icon:e.jsx(ke,{fontSize:"small"}),label:`Module: ${s.module.title}`,sx:{borderRadius:"8px",fontWeight:600,py:2.5}}),e.jsx(g,{icon:e.jsx(Ie,{fontSize:"small"}),label:`Updated: ${new Date(s.updatedAt).toLocaleDateString()}`,sx:{borderRadius:"8px",fontWeight:600,py:2.5}})]})]})]})})]})}),e.jsxs(J,{sx:{p:3,bgcolor:"#f8f9fa",borderTop:"1px solid #eee"},children:[e.jsx(h,{onClick:()=>p(!1),sx:{px:4,borderRadius:"12px",color:"text.secondary",fontWeight:700},children:"Go Back"}),e.jsx(h,{variant:"contained",disableElevation:!0,startIcon:e.jsx(H,{}),onClick:()=>{s!=null&&s._id&&(p(!1),j(`/florist/edit/${s._id}`))},sx:{px:4,py:1.5,borderRadius:"12px",bgcolor:"#E15B65",fontWeight:700,"&:hover":{bgcolor:"#c14a54"}},children:"Edit Package"})]})]}),e.jsxs(V,{open:te,onClose:()=>v(!1),maxWidth:"xs",fullWidth:!0,children:[e.jsx(Y,{sx:{fontWeight:600},children:"Delete Package?"}),e.jsx(U,{children:e.jsxs(o,{sx:{textAlign:"center",py:2},children:[e.jsx(O,{sx:{fontSize:60,color:"#f44336",mb:2}}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"This action cannot be undone. This package will be permanently deleted from your account."})]})}),e.jsxs(J,{sx:{p:2,gap:1},children:[e.jsx(h,{onClick:()=>v(!1),variant:"outlined",fullWidth:!0,sx:{borderColor:"#e0e0e0",color:"text.secondary"},children:"Cancel"}),e.jsx(h,{color:"error",variant:"contained",onClick:le,fullWidth:!0,sx:{fontWeight:600},children:"Delete Permanently"})]})]}),e.jsx(me,{open:m.open,autoHideDuration:4e3,onClose:()=>x({...m,open:!1}),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(ue,{severity:m.severity,variant:"filled",sx:{minWidth:300,boxShadow:"0 4px 12px rgba(0,0,0,0.15)","& .MuiAlert-icon":{fontSize:24}},children:m.message})})]})}export{$e as default};
