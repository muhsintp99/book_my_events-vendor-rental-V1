import{w as je,u as ve,r as n,j as e,B as r,a3 as h,a7 as te,S as g,T as i,a8 as v,g as j,s as ye,a as se,b as O,t as we,ar as Ce,G as d,as as Se,p as Ie,ba as We,a4 as u,al as Ae,at as $,q as y,V as Fe,an as re,M as ke,D as De,a9 as ie,aa as oe,ab as ae,ad as ne,ap as Pe,x as Re}from"./index-BVtIu8_J.js";import{A as ze}from"./Add-DGM6OT_L.js";import{C as le}from"./Close-BJ34mYn2.js";import{S as Te}from"./Search-DAILlQXv.js";import{D as Ee}from"./Diamond-f4bJK5JM.js";import{C as Oe}from"./CardMedia-DVP5ik8f.js";import{E as ce}from"./Edit-jGLstZ14.js";import{P as de}from"./Palette-0_cAgTPR.js";import{C as xe}from"./Category-DoRifbv4.js";import{I as $e}from"./Info-CvohRP69.js";import{I as Be}from"./Inventory-BJ1Sb0vo.js";const B="https://api.bookmyevent.ae/api/ornaments",o="#E15B65",he="#c14a54";function Je(){var Y,G,H,K,q,J,Q,X,Z,ee;const C=je();ve();const[p,P]=n.useState([]),[pe,R]=n.useState(!0),[S,m]=n.useState({open:!1,message:"",severity:"success"}),[b,L]=n.useState(""),[ge,I]=n.useState(!1),[ue,W]=n.useState(!1),[s,me]=n.useState(null),[N,V]=n.useState(null),[A,z]=n.useState(0),w=localStorage.getItem("token"),T=JSON.parse(localStorage.getItem("user")||"{}"),E=T==null?void 0:T._id,F=t=>t?t.startsWith("http")?t:`https://api.bookmyevent.ae/${t.startsWith("/")?t.slice(1):t}`:null,k=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(t||0),_=n.useCallback(async()=>{if(!E||!w){m({open:!0,message:"Please login again",severity:"error"}),R(!1);return}R(!0);try{const t=await fetch(`${B}?provider=${E}`,{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to load ornaments");const a=await t.json();a.success&&P(a.data||[])}catch(t){m({open:!0,message:t.message,severity:"error"})}finally{R(!1)}},[E,w]);n.useEffect(()=>{_()},[_]);const M=t=>{me(t),z(0),I(!0)},be=async(t,a)=>{try{(await(await fetch(`${B}/${t}/toggle-active`,{method:"PATCH",headers:{Authorization:`Bearer ${w}`}})).json()).success&&(P(x=>x.map(f=>f._id===t?{...f,isActive:!a}:f)),m({open:!0,message:"Status updated successfully",severity:"success"}))}catch{m({open:!0,message:"Failed to update status",severity:"error"})}},fe=async()=>{try{(await(await fetch(`${B}/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${w}`}})).json()).success&&(P(l=>l.filter(c=>c._id!==N)),m({open:!0,message:"Ornament deleted successfully",severity:"success"}))}catch{m({open:!0,message:"Delete failed",severity:"error"})}finally{W(!1),V(null)}},U=n.useMemo(()=>p.filter(t=>{var l,c,x;return!b||((l=t.name)==null?void 0:l.toLowerCase().includes(b.toLowerCase()))||((c=t.material)==null?void 0:c.toLowerCase().includes(b.toLowerCase()))||((x=t.description)==null?void 0:x.toLowerCase().includes(b.toLowerCase()))}),[p,b]),D=({icon:t,label:a,value:l,chip:c,success:x,error:f})=>e.jsxs(r,{sx:{display:"flex",alignItems:"flex-start",gap:2,py:1.5,borderBottom:"1px solid #f0f0f0","&:hover":{bgcolor:h(o,.02)},transition:"0.2s"},children:[e.jsx(r,{sx:{color:o,mt:.5,display:"flex"},children:t}),e.jsxs(r,{sx:{flex:1},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",letterSpacing:.5},children:a}),c?e.jsx(r,{sx:{mt:.5},children:e.jsx(u,{label:l,size:"small",color:x?"success":f?"error":"default",sx:{fontWeight:700}})}):e.jsx(i,{variant:"body2",sx:{fontWeight:600,mt:.3,color:"#2D3748"},children:l||"Not specified"})]})]});return e.jsxs(r,{sx:{bgcolor:"#F7FAFC",minHeight:"100vh",pb:8},children:[e.jsx(r,{sx:{background:"linear-gradient(135deg, #ece6f5 0%, #a44c7a 100%)",color:"white",pt:6,pb:12,px:4,position:"relative",overflow:"hidden",boxShadow:`0 10px 30px ${h(o,.3)}`,"&::after":{content:'""',position:"absolute",top:"-20%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%)",borderRadius:"50%"}},children:e.jsx(te,{maxWidth:"xl",children:e.jsxs(g,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},spacing:3,children:[e.jsxs(r,{children:[e.jsx(i,{variant:"h3",sx:{fontWeight:900,mb:1,letterSpacing:"-1.5px",textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"ðŸ’Ž Royal Ornament Gallery"}),e.jsx(g,{direction:"row",spacing:2,sx:{mt:2},children:[{label:"Total Items",value:p.length,color:"rgba(255,255,255,0.2)"},{label:"Active",value:p.filter(t=>t.isActive).length,color:"rgba(76, 175, 80, 0.3)"},{label:"Inactive",value:p.filter(t=>!t.isActive).length,color:"rgba(255,255,255,0.1)"}].map((t,a)=>e.jsxs(v,{elevation:0,sx:{bgcolor:t.color,px:3,py:1,borderRadius:3,backdropFilter:"blur(10px)",color:"white",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:900},children:t.value}),e.jsx(i,{variant:"caption",sx:{opacity:.9,fontWeight:600},children:t.label})]},a))})]}),e.jsx(j,{variant:"contained",size:"large",startIcon:e.jsx(ze,{sx:{fontSize:24}}),onClick:()=>C("/ornaments/addpackage"),sx:{bgcolor:"white",color:o,fontWeight:800,fontSize:"1.1rem",px:5,py:2,borderRadius:"20px",textTransform:"none",boxShadow:"0 15px 35px rgba(0,0,0,0.15)","&:hover":{bgcolor:"#F8F9FF",transform:"translateY(-5px)",boxShadow:"0 20px 45px rgba(0,0,0,0.2)"},transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},children:"Add New Collection Item"})]})})}),e.jsxs(te,{maxWidth:"xl",sx:{mt:-6,position:"relative",zIndex:10},children:[e.jsx(v,{elevation:10,sx:{borderRadius:4,overflow:"hidden",p:1,bgcolor:"white",boxShadow:"0 10px 40px rgba(0,0,0,0.06)",mb:6},children:e.jsx(ye,{fullWidth:!0,variant:"standard",placeholder:"Search by name, material, or luxury details...",value:b,onChange:t=>L(t.target.value),InputProps:{disableUnderline:!0,startAdornment:e.jsx(se,{position:"start",sx:{pl:3},children:e.jsx(Te,{sx:{color:o,fontSize:32}})}),endAdornment:b&&e.jsx(se,{position:"end",sx:{pr:1},children:e.jsx(O,{onClick:()=>L(""),size:"small",children:e.jsx(le,{})})}),sx:{height:80,fontSize:"1.2rem",fontWeight:600,color:"#2d3748"}}})}),pe?e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:15},children:[e.jsx(we,{size:80,thickness:4,sx:{color:o}}),e.jsx(i,{variant:"h6",sx:{mt:3,fontWeight:700,color:"text.secondary"},children:"Curating your collection..."})]}):U.length===0?e.jsx(Ce,{in:!0,children:e.jsxs(v,{sx:{borderRadius:6,boxShadow:"0 4px 20px rgba(0,0,0,0.05)",textAlign:"center",py:15,px:4,border:"2px dashed #E2E8F0"},children:[e.jsx(r,{sx:{mb:4},children:e.jsx(Ee,{sx:{fontSize:100,color:"#CBD5E0"}})}),e.jsx(i,{variant:"h4",sx:{fontWeight:900,color:"#2D3748",mb:2},children:p.length===0?"Begin Your Legacy":"No Matches Found"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:5,maxWidth:500,mx:"auto",fontSize:"1.1rem"},children:p.length===0?"Craft your first masterpiece to display it in your professional showroom.":"We couldn't find any ornaments matching your search criteria. Try a different term."}),p.length===0&&e.jsx(j,{variant:"contained",onClick:()=>C("/ornaments/addpackage"),sx:{bgcolor:o,px:6,py:2,borderRadius:4,fontWeight:800,"&:hover":{bgcolor:he}},children:"Create First Ornament"})]})}):e.jsx(d,{container:!0,spacing:4,children:U.map((t,a)=>{var l,c,x;return e.jsx(d,{item:!0,xs:12,sm:6,md:6,lg:4,xl:4,children:e.jsx(Se,{in:!0,style:{transitionDelay:`${a*50}ms`},children:e.jsxs(Ie,{sx:{height:"100%",borderRadius:6,overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)",border:"1px solid #edf2f7",position:"relative","&:hover":{transform:"translateY(-15px)",boxShadow:`0 30px 60px ${h(o,.15)}`,borderColor:o,"& .card-image":{transform:"scale(1.1)"},"& .actions-overlay":{opacity:1}}},children:[e.jsxs(r,{sx:{position:"relative",paddingTop:"80%",background:"#F7FAFC",overflow:"hidden"},children:[t.thumbnail?e.jsx(Oe,{className:"card-image",component:"img",image:F(t.thumbnail),alt:t.name,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.8s ease"}}):e.jsx(r,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(We,{sx:{fontSize:80,color:"#E2E8F0"}})}),e.jsx(r,{sx:{position:"absolute",top:20,left:20,zIndex:5},children:e.jsx(u,{label:t.isActive?"IN STOCK":"OUT OF STOCK",size:"small",sx:{bgcolor:t.isActive?"#48BB78":"#A0AEC0",color:"white",fontWeight:900,fontSize:"0.7rem",letterSpacing:1,px:1,borderRadius:2}})}),e.jsx(r,{sx:{position:"absolute",top:20,right:20,zIndex:5},children:e.jsx(O,{size:"small",sx:{bgcolor:"rgba(255,255,255,0.9)","&:hover":{bgcolor:"white"},boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},onClick:()=>be(t._id,t.isActive),children:e.jsx(Ae,{checked:t.isActive,size:"small",color:"success",onClick:f=>f.stopPropagation()})})}),e.jsxs(r,{className:"actions-overlay",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:h(o,.4),display:"flex",alignItems:"center",justifyContent:"center",gap:2,opacity:0,transition:"0.3s",backdropFilter:"blur(3px)"},children:[e.jsx($,{title:"View Details",children:e.jsx(y,{sx:{bgcolor:"white",color:o,cursor:"pointer","&:hover":{transform:"scale(1.1)"}},onClick:()=>M(t),children:e.jsx(Fe,{})})}),e.jsx($,{title:"Edit Ornament",children:e.jsx(y,{sx:{bgcolor:"white",color:"#2B6CB0",cursor:"pointer","&:hover":{transform:"scale(1.1)"}},onClick:()=>C(`/ornaments/edit/${t._id}`),children:e.jsx(ce,{})})}),e.jsx($,{title:"Delete Permanently",children:e.jsx(y,{sx:{bgcolor:"white",color:"#C53030",cursor:"pointer","&:hover":{transform:"scale(1.1)"}},onClick:()=>{V(t._id),W(!0)},children:e.jsx(re,{})})})]})]}),e.jsxs(ke,{sx:{p:3},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:900,color:"#2D3748",mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),e.jsxs(g,{direction:"row",spacing:1,sx:{mb:2.5},children:[e.jsx(u,{icon:e.jsx(de,{sx:{fontSize:"14px !important"}}),label:t.material||"Premium Gold",size:"small",variant:"outlined",sx:{borderRadius:2,fontWeight:700,borderColor:"#E2E8F0",color:"#4A5568"}}),e.jsx(u,{icon:e.jsx(xe,{sx:{fontSize:"14px !important"}}),label:((l=t.category)==null?void 0:l.title)||"Jewelry",size:"small",sx:{borderRadius:2,fontWeight:700,bgcolor:h(o,.1),color:o}})]}),e.jsx(De,{sx:{mb:3,borderStyle:"dashed"}}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[e.jsxs(r,{children:[e.jsx(i,{variant:"caption",sx:{color:"#718096",fontWeight:700,textTransform:"uppercase",letterSpacing:1},children:"Purchase Value"}),e.jsx(i,{variant:"h4",sx:{fontWeight:900,color:o},children:k((c=t.buyPricing)==null?void 0:c.totalPrice)})]}),e.jsxs(r,{sx:{textAlign:"right"},children:[e.jsx(i,{variant:"caption",sx:{color:"#718096",fontWeight:700,textTransform:"uppercase",letterSpacing:1},children:"Rental / Day"}),e.jsx(i,{variant:"h5",sx:{fontWeight:800,color:"#48BB78"},children:k((x=t.rentalPricing)==null?void 0:x.pricePerDay)})]})]})]}),e.jsx(r,{sx:{px:3,pb:2},children:e.jsx(j,{fullWidth:!0,variant:"soft",onClick:()=>M(t),sx:{bgcolor:h(o,.05),color:o,fontWeight:800,borderRadius:3,py:1,"&:hover":{bgcolor:h(o,.1)}},children:"Manage Details"})})]})})},t._id)})})]}),e.jsxs(ie,{open:ge,onClose:()=>I(!1),maxWidth:"lg",fullWidth:!0,scroll:"body",PaperProps:{sx:{borderRadius:6,overflow:"hidden"}},children:[e.jsx(oe,{sx:{background:`linear-gradient(135deg, ${o} 0%, ${he} 100%)`,color:"white",p:4,position:"relative"},children:e.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(r,{children:[e.jsx(i,{variant:"h4",sx:{fontWeight:900},children:s==null?void 0:s.name}),e.jsx(i,{variant:"subtitle1",sx:{opacity:.9,fontWeight:600},children:(s==null?void 0:s.ornamentId)||"SKU-PRIVATE-COLLECTION"})]}),e.jsx(O,{onClick:()=>I(!1),sx:{color:"white",bgcolor:"rgba(255,255,255,0.2)","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},children:e.jsx(le,{})})]})}),e.jsx(ae,{sx:{p:0},children:s&&e.jsxs(d,{container:!0,children:[e.jsxs(d,{item:!0,xs:12,lg:6,sx:{bgcolor:"#1A202C",p:4},children:[e.jsx(r,{sx:{position:"relative",mb:3},children:e.jsx(v,{elevation:24,sx:{borderRadius:6,overflow:"hidden",height:450},children:e.jsx("img",{src:F(A===0?s.thumbnail:s.galleryImages[A-1]),style:{width:"100%",height:"100%",objectFit:"contain",background:"#000"},alt:"Product Showcase"})})}),e.jsxs(g,{direction:"row",spacing:1.5,sx:{overflowX:"auto",pb:1,"&::-webkit-scrollbar":{height:6},"&::-webkit-scrollbar-thumb":{bgcolor:"rgba(255,255,255,0.2)",borderRadius:10}},children:[e.jsx(y,{variant:"rounded",src:F(s.thumbnail),onClick:()=>z(0),sx:{width:80,height:80,cursor:"pointer",border:A===0?`3px solid ${o}`:"3px solid transparent",transition:"0.2s","&:hover":{transform:"scale(1.05)"}}}),(Y=s.galleryImages)==null?void 0:Y.map((t,a)=>e.jsx(y,{variant:"rounded",src:F(t),onClick:()=>z(a+1),sx:{width:80,height:80,cursor:"pointer",border:A===a+1?`3px solid ${o}`:"3px solid transparent",transition:"0.2s","&:hover":{transform:"scale(1.05)"}}},a))]})]}),e.jsxs(d,{item:!0,xs:12,lg:6,sx:{p:4,bgcolor:"white"},children:[e.jsxs(r,{sx:{mb:4},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:900,mb:2,color:"#2D3748"},children:"Collection Details"}),e.jsxs(d,{container:!0,spacing:1,children:[e.jsx(d,{item:!0,xs:6,children:e.jsx(D,{icon:e.jsx(xe,{}),label:"Department",value:(G=s.category)==null?void 0:G.title})}),e.jsx(d,{item:!0,xs:6,children:e.jsx(D,{icon:e.jsx(de,{}),label:"Primary Material",value:s.material})}),e.jsx(d,{item:!0,xs:6,children:e.jsx(D,{icon:e.jsx($e,{}),label:"Weight Specs",value:`${s.weight||0} ${s.unit||"gms"}`})}),e.jsx(d,{item:!0,xs:6,children:e.jsx(D,{icon:e.jsx(Be,{}),label:"Stock Available",value:(H=s.stock)==null?void 0:H.quantity})})]})]}),e.jsxs(r,{sx:{mb:4},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:900,mb:2,color:"#2D3748"},children:"Investment Value"}),e.jsx(v,{variant:"outlined",sx:{p:2,borderRadius:4,mb:2,bgcolor:h(o,.02)},children:e.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(r,{children:[e.jsx(i,{variant:"caption",sx:{fontWeight:800,color:"text.secondary"},children:"BUYOUT PRICE"}),e.jsx(i,{variant:"h4",sx:{fontWeight:900,color:o},children:k((K=s.buyPricing)==null?void 0:K.totalPrice)})]}),((q=s.buyPricing)==null?void 0:q.discountValue)>0&&e.jsx(u,{label:`- ${s.buyPricing.discountValue}${s.buyPricing.discountType==="percentage"?"%":" OFF"}`,color:"error",sx:{fontWeight:900}})]})}),e.jsx(v,{variant:"outlined",sx:{p:2,borderRadius:4,bgcolor:"#F0FFF4"},children:e.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(r,{children:[e.jsx(i,{variant:"caption",sx:{fontWeight:800,color:"text.secondary"},children:"DAILY RENTAL RATE"}),e.jsx(i,{variant:"h4",sx:{fontWeight:900,color:"#2F855A"},children:k((J=s.rentalPricing)==null?void 0:J.pricePerDay)})]}),e.jsx(u,{label:`Min ${((Q=s.rentalPricing)==null?void 0:Q.minimumDays)||1} Days`,variant:"outlined",sx:{fontWeight:700,borderColor:"#2F855A",color:"#2F855A"}})]})})]}),e.jsxs(r,{sx:{mb:4},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:900,mb:2,color:"#2D3748"},children:"Story & Craftsmanship"}),e.jsx(i,{variant:"body1",sx:{color:"#4A5568",lineHeight:1.8},children:s.description||"A masterfully crafted piece from our exclusive collection, designed to be passed down through generations. Every detail reflects superior quality and timeless elegance."})]}),e.jsxs(r,{children:[e.jsx(i,{variant:"h6",sx:{fontWeight:800,mb:2},children:"Occasions & Tags"}),e.jsxs(g,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:[(X=s.occasions)==null?void 0:X.map((t,a)=>e.jsx(u,{label:t,size:"small",sx:{fontWeight:700,px:1}},a)),(ee=(Z=s.features)==null?void 0:Z.basicFeatures)==null?void 0:ee.map((t,a)=>e.jsx(u,{label:t,size:"small",color:"primary",sx:{fontWeight:700,px:1}},a))]})]})]})]})}),e.jsxs(ne,{sx:{p:4,bgcolor:"#F7FAFC"},children:[e.jsx(j,{variant:"contained",size:"large",startIcon:e.jsx(ce,{}),onClick:()=>C(`/ornaments/edit/${s._id}`),sx:{bgcolor:"#2B6CB0",px:4,borderRadius:3,fontWeight:800},children:"Edit This Piece"}),e.jsx(j,{variant:"outlined",size:"large",onClick:()=>I(!1),sx:{px:4,borderRadius:3,fontWeight:800},children:"Close Viewer"})]})]}),e.jsxs(ie,{open:ue,onClose:()=>W(!1),PaperProps:{sx:{borderRadius:6,p:2}},children:[e.jsx(oe,{sx:{fontWeight:900,fontSize:"1.5rem",textAlign:"center"},children:"Permanently Remove?"}),e.jsxs(ae,{sx:{textAlign:"center"},children:[e.jsx(y,{sx:{width:100,height:100,bgcolor:h("#C53030",.1),color:"#C53030",mx:"auto",mb:3},children:e.jsx(re,{sx:{fontSize:50}})}),e.jsxs(i,{variant:"body1",sx:{color:"#4A5568",fontSize:"1.1rem"},children:["This will permanently remove ",e.jsx("b",{children:"this ornament"})," from your digital catalog. This action cannot be undone."]})]}),e.jsxs(ne,{sx:{justifyContent:"center",pb:3,gap:2},children:[e.jsx(j,{onClick:()=>W(!1),variant:"outlined",sx:{borderRadius:3,px:3,fontWeight:700},children:"Keep It"}),e.jsx(j,{onClick:fe,variant:"contained",sx:{bgcolor:"#C53030",borderRadius:3,px:3,fontWeight:700,"&:hover":{bgcolor:"#9B2C2C"}},children:"Yes, Delete"})]})]}),e.jsx(Pe,{open:S.open,autoHideDuration:4e3,onClose:()=>m({...S,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(Re,{severity:S.severity,variant:"filled",sx:{borderRadius:4,fontWeight:700,boxShadow:"0 10px 30px rgba(0,0,0,0.1)"},children:S.message})})]})}export{Je as default};
