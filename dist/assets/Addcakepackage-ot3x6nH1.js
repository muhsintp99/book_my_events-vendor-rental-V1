import{a0 as Je,j as e,d as ss,r as c,B as i,c as ue,S as C,y as R,z as Ge,T as n,e as yt,_ as v,G as j,F as ae,M as y,Q as H,an as Ke,K as M,ay as p,b as J,Y as Ct,a as vt,v as os,J as Ue,n as rs,o as is,p as ns,s as as,f as z,l as ls,q as cs,aJ as ds}from"./index-DWTflIjY.js";import{S as St}from"./Star-BBuqfZZZ.js";import{C as Ve}from"./CloudUpload-Drc_1ONf.js";import{C as fe}from"./Close-DZIuQxaz.js";import{S as xs}from"./Settings-D8oGVLM1.js";import{T as ps,a as wt,b as X,c as hs}from"./TableRow-DkkU-GE-.js";import{T as gs}from"./TableHead-gjmr51IC.js";import{L as us}from"./LocalShipping-CBkQOHsb.js";import{I as fs}from"./Info-BPpS0Bl8.js";import{T as ms}from"./TableContainer-Dg3fSJwV.js";const bs=Je(e.jsx("path",{d:"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12z"})),js=Je(e.jsx("path",{d:"M19 14V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2m-9-1c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m13-6v11c0 1.1-.9 2-2 2H4v-2h17V7z"})),ys=Je(e.jsx("path",{d:"m21.9 8.89-1.05-4.37c-.22-.9-1-1.52-1.91-1.52H5.05c-.9 0-1.69.63-1.9 1.52L2.1 8.89c-.24 1.02-.02 2.06.62 2.88.08.11.19.19.28.29V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6.94c.09-.09.2-.18.28-.28.64-.82.87-1.87.62-2.89m-2.99-3.9 1.05 4.37c.1.42.01.84-.25 1.17-.14.18-.44.47-.94.47-.61 0-1.14-.49-1.21-1.14L16.98 5zM13 5h1.96l.54 4.52c.05.39-.07.78-.33 1.07-.22.26-.54.41-.95.41-.67 0-1.22-.59-1.22-1.31zM8.49 9.52 9.04 5H11v4.69c0 .72-.55 1.31-1.29 1.31-.34 0-.65-.15-.89-.41-.25-.29-.37-.68-.33-1.07m-4.45-.16L5.05 5h1.97l-.58 4.86c-.08.65-.6 1.14-1.21 1.14-.49 0-.8-.29-.93-.47-.27-.32-.36-.75-.26-1.17M5 19v-6.03c.08.01.15.03.23.03.87 0 1.66-.36 2.24-.95.6.6 1.4.95 2.31.95.87 0 1.65-.36 2.23-.93.59.57 1.39.93 2.29.93.84 0 1.64-.35 2.24-.95.58.59 1.37.95 2.24.95.08 0 .15-.02.23-.03V19z"})),o="#E91E63",E="https://api.bookmyevent.ae",He="68e5fc09651cc12c1fc0f9c9",Y=v(ls)(({theme:b})=>({borderRadius:"24px",padding:"40px",marginBottom:"40px",border:"1px solid rgba(0, 0, 0, 0.06)",boxShadow:"0px 15px 50px rgba(0, 0, 0, 0.02)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:"#ffffff","&:hover":{boxShadow:"0px 25px 70px rgba(0, 0, 0, 0.05)"}}));v(i)(({theme:b})=>({width:80,height:80,borderRadius:"12px",overflow:"hidden",position:"relative",border:"1px solid #E5E7EB",backgroundColor:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.06)",transition:"0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 18px rgba(0,0,0,0.12)"}}));const q=v(n)(({theme:b})=>({fontSize:"26px",fontWeight:900,color:"#111827",marginBottom:"10px",letterSpacing:"-1px"})),Q=v(n)(({theme:b})=>({fontSize:"15px",color:"#6B7280",marginBottom:"40px",fontWeight:500,lineHeight:1.6})),k=v(vt)(({theme:b})=>({width:"100%","& .MuiOutlinedInput-root":{borderRadius:"16px",backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","& fieldset":{borderColor:"transparent"},"&:hover":{backgroundColor:"#f3f4f6",borderColor:"#D1D5DB"},"&.Mui-focused":{backgroundColor:"#ffffff",borderColor:o,boxShadow:`0px 0px 0px 4px ${p(o,.1)}`,"& fieldset":{borderColor:o,borderWidth:"2px"}}},"& .MuiInputBase-input":{padding:"18px 20px",fontSize:"15px",fontWeight:600,color:"#1F2937"}})),Z=v(cs)(({theme:b})=>({width:"100%",borderRadius:"16px",backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"&:hover":{backgroundColor:"#f3f4f6",borderColor:"#D1D5DB"},"&.Mui-focused":{backgroundColor:"#ffffff",borderColor:o,boxShadow:`0px 0px 0px 4px ${p(o,.1)}`,"& .MuiOutlinedInput-notchedOutline":{borderColor:o,borderWidth:"2px"}},"& .MuiSelect-select":{padding:"18px 20px",fontSize:"15px",fontWeight:600,color:"#1F2937"}})),Ss=v(i)(({theme:b,hasImage:w})=>({width:"100%",height:"250px",borderRadius:"28px",border:w?"none":`3px dashed ${p(o,.15)}`,backgroundColor:w?"transparent":"#FAFAFA",backgroundImage:w?"none":`linear-gradient(180deg, rgba(255,255,255,0) 0%, ${p(o,.02)} 100%)`,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",boxShadow:w?"0 20px 40px rgba(0,0,0,0.1)":"none","&:hover":{borderColor:o,backgroundColor:p(o,.03),transform:"translateY(-4px)",boxShadow:"0 12px 28px rgba(233, 30, 99, 0.15)"}})),Cs=v(i)(({theme:b})=>({width:"100%",minHeight:"200px",borderRadius:"24px",border:`2px dashed ${p(o,.3)}`,backgroundColor:"#FAFAFA",backgroundImage:`linear-gradient(135deg, ${p(o,.01)} 0%, rgba(255,255,255,1) 100%)`,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease","&:hover":{borderColor:o,backgroundColor:p(o,.04),boxShadow:`0 10px 40px ${p(o,.1)}`}}));v(i)(({theme:b})=>({width:"100%",aspectRatio:"1/1",borderRadius:"20px",overflow:"hidden",position:"relative",boxShadow:"0 8px 20px rgba(0,0,0,0.08)",transition:"all 0.3s ease",group:"slot","&:hover":{transform:"translateY(-4px)",boxShadow:"0 15px 30px rgba(0,0,0,0.12)"}}));const vs=v(i)(({theme:b})=>({padding:"20px",borderRadius:"24px",backgroundColor:"#FFFFFF",border:"1px solid rgba(0, 0, 0, 0.06)",position:"relative",transition:"all 0.3s ease",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start","&:hover":{borderColor:o,boxShadow:"0px 10px 30px rgba(233, 30, 99, 0.05)"}}));v(i)(({theme:b})=>({position:"absolute",top:"20px",right:"25px",fontSize:"48px",fontWeight:900,opacity:.06,color:o,pointerEvents:"none"}));v(M)(({theme:b,selected:w})=>({borderRadius:"14px",fontWeight:800,fontSize:"14px",height:"46px",padding:"0 10px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:w?o:"#F3F4F6",color:w?"#ffffff":"#4B5563",border:`2px solid ${w?o:"transparent"}`,"&:hover":{backgroundColor:w?"#D81B60":"#E5E7EB",transform:"translateY(-2px)"}}));const ws=v(ms)(({theme:b})=>({borderRadius:"24px",border:"1px solid rgba(0, 0, 0, 0.05)",backgroundColor:"#ffffff",marginTop:"32px",overflow:"hidden",boxShadow:"0px 10px 40px rgba(0,0,0,0.03)"})),ks=({variation:b,onChange:w,onImageUpload:T,onDelete:ee})=>e.jsxs(wt,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(X,{sx:{py:3,pl:4},children:e.jsx(n,{sx:{fontWeight:800,color:"#1F2937",fontSize:"15px"},children:b.name})}),e.jsx(X,{sx:{py:3},children:e.jsx(k,{size:"small",placeholder:"0.00",value:b.price,onChange:te=>w("price",te.target.value),sx:{maxWidth:"180px"},InputProps:{startAdornment:e.jsx(n,{sx:{mr:1,fontWeight:700,color:"#9CA3AF"},children:"₹"})}})}),e.jsx(X,{sx:{py:3,pr:4},children:e.jsxs(C,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(R,{onClick:()=>document.getElementById(`var-img-${b.id}`).click(),sx:{bgcolor:p(o,.05),color:o,"&:hover":{bgcolor:o,color:"white"}},children:e.jsx(ds,{fontSize:"small"})}),e.jsx("input",{id:`var-img-${b.id}`,type:"file",hidden:!0,onChange:te=>T(te.target.files[0])}),b.image&&e.jsx(i,{sx:{position:"relative",width:45,height:45,borderRadius:"10px",overflow:"hidden",border:`2px solid ${o}`},children:e.jsx("img",{src:typeof b.image=="string"?b.image:URL.createObjectURL(b.image),alt:"variant",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx(R,{onClick:ee,sx:{bgcolor:p("#EF4444",.1),color:"#EF4444","&:hover":{bgcolor:"#EF4444",color:"#fff"}},children:e.jsx(Ct,{fontSize:"small"})})]})})]}),Ms=()=>{const b=ss(),T=new URLSearchParams(window.location.search).get("id"),ee=!!T,te=["Marriage","Engagement","Birthday","Anniversary","Promotion","Other"],me=["Weight","Ingredient"],Ye={Weight:["0.5Kg","1 Kg","2 Kg","3 Kg","5 Kg+"],Ingredient:["Egg","Eggless"]},kt=["0.5Kg","1 Kg","2 Kg","3 Kg","5 Kg+"],[Ft,Wt]=c.useState(!0),[qe,Qe]=c.useState(!1),[Ze,Et]=c.useState(""),[Xe,be]=c.useState(""),[It,At]=c.useState([]),[et,Rt]=c.useState([]),[g,Bt]=c.useState(null),[O,zt]=c.useState("product"),[se,oe]=c.useState([]),[Fs,N]=c.useState([]),[Tt,je]=c.useState(!1),[F,le]=c.useState(null),ye=c.useRef(null),G=c.useRef(null),Se=c.useRef(null),[Ce,tt]=c.useState(!1),[Ws,$t]=c.useState(null),Dt="AIzaSyAfLUm1kPmeMkHh1Hr5nbgNpQJOsNa7B78",[W,re]=c.useState({latitude:"",longitude:"",address:""}),[ve,we]=c.useState(""),[st,ke]=c.useState(""),[$,Fe]=c.useState(""),[We,Ee]=c.useState([]),[Ie,Ae]=c.useState([]),[Pt,ot]=c.useState("Eggless"),[rt,Re]=c.useState(""),[Lt,Es]=c.useState(""),[it,Be]=c.useState("Kg"),[nt,ze]=c.useState(""),[at,Te]=c.useState(!1),[lt,ce]=c.useState([]),[_t,de]=c.useState(!1),[ct,dt]=c.useState(""),[xt,pt]=c.useState(Ye.Weight),[ie,Mt]=c.useState(""),[D,Ot]=c.useState("no_discount"),[$e,Nt]=c.useState(""),[S,xe]=c.useState({Weight:[],Ingredient:[]}),[De,I]=c.useState([]),[pe,Gt]=c.useState(["Weight","Ingredient"]),[ht,Pe]=c.useState([]),[u,B]=c.useState({free:!1,flatRate:!1,takeaway:!1,takeawayLocation:"",price:""}),[P,Le]=c.useState(null),[he,gt]=c.useState(""),[L,_e]=c.useState([]),[K,ut]=c.useState([]),[ft,Kt]=c.useState([]);c.useEffect(()=>{(async()=>{var s,r,a,h,x,d,l,f,_,ge,bt;try{const Oe=localStorage.getItem("vendor")||localStorage.getItem("user");Oe&&Bt(JSON.parse(Oe));const jt=localStorage.getItem("token"),ts=await z.get(`${E}/api/categories/parents/${He}`,{headers:{Authorization:`Bearer ${jt}`}});if(At(((s=ts.data)==null?void 0:s.data)||[]),ee&&T){const m=(r=(await z.get(`${E}/api/cakes/${T}`,{headers:{Authorization:`Bearer ${jt}`}})).data)==null?void 0:r.data;if(m&&(we(m.name||""),ke(m.shortDescription||""),Fe(((a=m.category)==null?void 0:a._id)||m.category||""),Ee((m.subCategories||[]).map(A=>A._id||A)),Ae(m.occasions||[]),ot(m.itemType||"Eggless"),Re((m.searchTags||[]).join(", ")),gt(m.thumbnail||""),ut(m.images||[]),B({free:((h=m.shipping)==null?void 0:h.free)||!1,flatRate:((x=m.shipping)==null?void 0:x.flatRate)||!1,takeaway:((d=m.shipping)==null?void 0:d.takeaway)||!1,takeawayLocation:((l=m.shipping)==null?void 0:l.takeawayLocation)||"",price:((f=m.shipping)==null?void 0:f.price)||""}),(_=m.variations)!=null&&_.length&&I(m.variations.map((A,Ne)=>({id:A._id||`old-${Ne}`,name:A.name,price:A.price,image:A.image}))),Pe(m.addons||[]),Be(m.unit||"Kg"),ze(m.weight||""),(bt=(ge=m.relatedItems)==null?void 0:ge.items)!=null&&bt.length)){const A=m.relatedItems.items.map(ne=>ne._id||ne);oe(A);const Ne=m.relatedItems.items.filter(ne=>typeof ne=="object"&&ne!==null);N(Ne),zt(m.relatedItems.linkBy||"product")}}}catch{be("Failed to load initial data")}finally{Wt(!1)}})()},[T,ee]),c.useEffect(()=>{var s;if((s=window.google)!=null&&s.maps){tt(!0);return}const t=document.createElement("script");return t.src=`https://maps.googleapis.com/maps/api/js?key=${Dt}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>tt(!0),document.head.appendChild(t),()=>{if(document.head.contains(t))try{document.head.removeChild(t)}catch{console.error("Error removing map script")}}},[]),c.useEffect(()=>{var t;Ce&&u.takeaway&&((t=window.google)!=null&&t.maps)&&Ut()},[Ce,u.takeaway]);const Ut=c.useCallback(()=>{if(!window.google||!ye.current)return;const t={lat:W.latitude?parseFloat(W.latitude):25.2048,lng:W.longitude?parseFloat(W.longitude):55.2708},s=new window.google.maps.Map(ye.current,{zoom:12,center:t,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]});if(s.addListener("click",r=>{const a=r.latLng.lat(),h=r.latLng.lng();re(d=>({...d,latitude:a.toString(),longitude:h.toString()})),G.current&&G.current.setMap(null),G.current=new window.google.maps.Marker({position:{lat:a,lng:h},map:s,animation:window.google.maps.Animation.DROP}),new window.google.maps.Geocoder().geocode({location:{lat:a,lng:h}},(d,l)=>{l==="OK"&&d[0]&&(re(f=>({...f,address:d[0].formatted_address})),B(f=>({...f,takeawayLocation:d[0].formatted_address})))})}),$t(s),Se.current){const r=new window.google.maps.places.Autocomplete(Se.current,{fields:["geometry","formatted_address"]});r.addListener("place_changed",()=>{var x;const a=r.getPlace();if(!((x=a.geometry)!=null&&x.location))return;const h=a.geometry.location;G.current&&G.current.setMap(null),G.current=new window.google.maps.Marker({position:h,map:s,animation:window.google.maps.Animation.DROP}),re({latitude:h.lat().toString(),longitude:h.lng().toString(),address:a.formatted_address}),B(d=>({...d,takeawayLocation:a.formatted_address})),s.setCenter(h),s.setZoom(17)})}},[W.latitude,W.longitude,u.takeaway]);c.useEffect(()=>{(async()=>{const s=(g==null?void 0:g._id)||(g==null?void 0:g.id);if(s)try{const r=localStorage.getItem("token"),a=await z.get(`${E}/api/cake-addons/provider/${s}`,{headers:{Authorization:`Bearer ${r}`}});a.data.success&&Kt(a.data.data||[])}catch(r){console.error("Error fetching addons:",r)}})()},[g]),c.useEffect(()=>{(async()=>{var s;if($)try{const r=localStorage.getItem("token"),a=await z.get(`${E}/api/categories/parents/${$}/subcategories`,{headers:{Authorization:`Bearer ${r}`}});Rt(((s=a.data)==null?void 0:s.data)||[])}catch(r){console.error(r)}})()},[$]);const Me=(t,s)=>{const r={...S,[t]:s};xe(r);const a=me.filter(x=>{var d;return((d=r[x])==null?void 0:d.length)>0});if(!a.length){I([]);return}const h=a.reduce((x,d)=>x.length===0?r[d].map(l=>[l]):x.flatMap(l=>r[d].map(f=>[...l,f])),[]);I(h.map((x,d)=>({id:`new-${d}`,name:x.join(" - "),price:ie||"",image:null,attributeValues:x})))},Vt=async()=>{var t;try{de(!0),le(null);const s=localStorage.getItem("token"),r=(g==null?void 0:g._id)||(g==null?void 0:g.id);let a="";if(O==="product"){if(!r){console.error("Provider ID missing");return}a=`${E}/api/cakes/provider/${r}`}else a=`${E}/api/categories/parents/${He}`;const x=((t=(await z.get(a,{headers:{Authorization:`Bearer ${s}`}})).data)==null?void 0:t.data)||[];ce(x),N(d=>{const l=[...d];return x.forEach(f=>{const _=l.findIndex(ge=>ge._id===f._id);_!==-1&&(l[_]=f)}),l})}catch(s){console.error("Failed to load related items",s),ce([])}finally{de(!1)}},Ht=async t=>{var s;try{de(!0),le(t);const r=localStorage.getItem("token"),h=((s=(await z.get(`${E}/api/cakes/category/${t._id}?limit=100`,{headers:{Authorization:`Bearer ${r}`}})).data)==null?void 0:s.data)||[];ce(h),N(x=>{const d=[...x];return h.forEach(l=>{const f=d.findIndex(_=>_._id===l._id);f!==-1&&(d[f]=l)}),d})}catch(r){console.error("Failed to load cakes for category",r),ce([])}finally{de(!1)}},Jt=()=>{le(null),Vt()},Yt=t=>{pt(s=>s.filter(r=>r!==t)),xe(s=>{const r={...s,Weight:s.Weight.filter(x=>x!==t)},a=me.filter(x=>{var d;return((d=r[x])==null?void 0:d.length)>0});if(!a.length)return I([]),r;const h=a.reduce((x,d)=>x.length===0?r[d].map(l=>[l]):x.flatMap(l=>r[d].map(f=>[...l,f])),[]);return I(h.map((x,d)=>({id:`new-${d}`,name:x.join(" - "),price:ie||"",image:null}))),r})},U=Number(ie||0),mt=Number($e||0);let V=U;D==="percentage"&&(V=U-U*mt/100),D==="flat"&&(V=U-mt),V=Math.max(V,0);const qt=t=>{Pe(s=>s.find(a=>a.addonId===t)?s.filter(a=>a.addonId!==t):[...s,{addonId:t,selectedItems:[]}])},Qt=(t,s)=>{Pe(r=>{const a=r.find(d=>d.addonId===t);if(!a)return[...r,{addonId:t,selectedItems:[s]}];let h;const x=a.selectedItems||[];return x.length===0?h=[s]:x.includes(s)?h=x.filter(d=>d!==s):h=[...x,s],r.map(d=>d.addonId===t?{...d,selectedItems:h}:d)})},Zt=()=>{we(""),ke(""),Fe(""),Ee([]),Ae([]),Be("Kg"),ze(""),ot("Eggless"),Re(""),Le(null),_e([]),I([]),xe({Weight:[],Ingredient:[]}),oe([]),N([]),le(null),window.scrollTo({top:0,behavior:"smooth"})},Xt=async()=>{var x,d;const t=(g==null?void 0:g._id)||(g==null?void 0:g.id);if(!t||!ve||!$||!P&&!he){be("Missing required fields");return}const s=new FormData;s.append("name",ve),s.append("shortDescription",st),s.append("category",$),s.append("module",He),s.append("uom",it),s.append("weight",nt),s.append("itemType",Pt),s.append("provider",t),s.append("subCategories",JSON.stringify(We)),s.append("occasions",JSON.stringify(Ie)),s.append("searchTags",JSON.stringify(rt.split(",").map(l=>l.trim()).filter(Boolean))),s.append("addons",JSON.stringify(ht)),s.append("shipping",JSON.stringify({...u,pickupLatitude:W.latitude,pickupLongitude:W.longitude})),s.append("prepTime",Lt),s.append("basePrice",ie||0),s.append("discountType",D),s.append("discountValue",$e||0);const r=Object.keys(S).filter(l=>S[l]&&S[l].length>0).map(l=>({name:l,values:S[l]}));s.append("attributes",JSON.stringify(r)),s.append("relatedItems",JSON.stringify({linkBy:O,items:se,linkByRef:O==="product"?"Cake":"Category"}));let a=0;const h=De.filter(l=>l.price).map(l=>{const f={name:l.name,price:Number(l.price),attributeValues:l.attributeValues||[]};return l.image&&(typeof l.image=="string"?f.image=l.image:l.image instanceof File&&(f.image=`VAR_FILE_${a}`,s.append("variationImages",l.image),a++)),f});h.length&&s.append("variations",JSON.stringify(h)),P&&s.append("thumbnail",P),L.forEach(l=>s.append("images",l));try{Qe(!0);const l=localStorage.getItem("token");(ee?await z.put(`${E}/api/cakes/${T}`,s,{headers:{Authorization:`Bearer ${l}`}}):await z.post(`${E}/api/cakes`,s,{headers:{Authorization:`Bearer ${l}`}})).data.success&&(Et("Saved successfully!"),setTimeout(()=>b("/cake/packagelist"),2e3))}catch(l){be(((d=(x=l.response)==null?void 0:x.data)==null?void 0:d.message)||"Error saving cake")}finally{Qe(!1),window.scrollTo({top:0,behavior:"smooth"})}},es=t=>{let s=u.takeawayLocation;if(t&&!s&&g){const r=g.storeAddress||g.address;r&&(typeof r=="string"?s=r:s=r.fullAddress||`${r.street?r.street+", ":""}${r.city?r.city+", ":""}${r.state||""}`.trim().replace(/, *$/,""))}B({...u,takeaway:t,takeawayLocation:s})};return Ft?e.jsx(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:e.jsx(ue,{color:"inherit",sx:{color:o}})}):e.jsxs(i,{sx:{bgcolor:"#FDFDFF",minHeight:"100vh",pb:10},children:[e.jsx(i,{sx:{bgcolor:"#ffffff",borderRadius:"16px",px:{xs:2,md:4},py:3,mb:4,border:"1px solid #E5E7EB"},children:e.jsxs(C,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(R,{onClick:()=>b(-1),sx:{bgcolor:"#F3F4F6","&:hover":{bgcolor:"#E5E7EB"}},children:e.jsx(Ge,{})}),e.jsxs(i,{children:[e.jsx(n,{sx:{fontSize:"20px",fontWeight:900,color:"#111827"},children:"Add Cake Package"}),e.jsxs(n,{sx:{fontSize:"14px",color:"#6B7280",fontWeight:600,mt:.5},children:["Creating as: ",(g==null?void 0:g.firstName)||(g==null?void 0:g.name)||"Vendor"]})]})]})}),e.jsx(i,{children:e.jsx(i,{sx:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"}})}),e.jsxs(i,{sx:{width:"100%",margin:"48px auto",px:{xs:2,md:4}},children:[Ze&&e.jsx(yt,{severity:"success",sx:{mb:4,borderRadius:"20px",fontWeight:800,border:"none",boxShadow:"0px 10px 30px rgba(76, 175, 80, 0.1)"},children:Ze}),Xe&&e.jsx(yt,{severity:"error",sx:{mb:4,borderRadius:"20px",fontWeight:800,border:"none",boxShadow:"0px 10px 30px rgba(244, 67, 54, 0.1)"},children:Xe}),e.jsxs(Y,{children:[e.jsx(q,{children:"General Information"}),e.jsx(Q,{children:"Define the fundamental details that describe your cake creation."}),e.jsxs(C,{spacing:4,children:[e.jsxs(i,{children:[e.jsx(n,{variant:"body2",sx:{mb:1.5,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"12px",letterSpacing:"1px"},children:"Product Name"}),e.jsx(k,{fullWidth:!0,placeholder:"e.g. Midnight Chocolate Ganache Cake",value:ve,onChange:t=>we(t.target.value)})]}),e.jsxs(i,{children:[e.jsx(n,{variant:"body2",sx:{mb:1.5,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"12px",letterSpacing:"1px"},children:"Full Description"}),e.jsx(k,{fullWidth:!0,multiline:!0,rows:4,placeholder:"Describe the rich textures, premium ingredients, and the flavor experience...",value:st,onChange:t=>ke(t.target.value)})]}),e.jsx(i,{sx:{width:"100%"},children:e.jsxs(j,{container:!0,spacing:3,children:[e.jsxs(j,{item:!0,xs:12,md:3,children:[e.jsx(n,{variant:"body2",sx:{mb:1.5,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"11px",letterSpacing:"1px"},children:"Parent Category"}),e.jsx(ae,{fullWidth:!0,children:e.jsxs(Z,{fullWidth:!0,value:$,onChange:t=>Fe(t.target.value),displayEmpty:!0,children:[e.jsx(y,{disabled:!0,value:"",children:"Select the primary category"}),It.map(t=>e.jsx(y,{value:t._id,children:t.title},t._id))]})})]}),e.jsxs(j,{item:!0,xs:12,md:4,children:[e.jsx(n,{variant:"body2",sx:{mb:1.5,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"11px",letterSpacing:"1px"},children:"Subcategories"}),e.jsx(ae,{fullWidth:!0,disabled:!$,children:e.jsxs(Z,{fullWidth:!0,multiple:!0,value:We,onChange:t=>Ee(t.target.value),renderValue:t=>t.length===0?e.jsx(n,{sx:{color:"#9CA3AF",fontWeight:600,fontSize:"15px"},children:"Choose related tags"}):e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:t.map(s=>{var r;return e.jsx(M,{label:((r=et.find(a=>a._id===s))==null?void 0:r.title)||s,size:"small",sx:{borderRadius:"10px",fontWeight:800,bgcolor:"white",border:"1px solid #E5E7EB",color:o}},s)})}),displayEmpty:!0,children:[e.jsx(y,{disabled:!0,value:"",children:"Choose related tags"}),et.map(t=>e.jsxs(y,{value:t._id,children:[e.jsx(H,{checked:We.includes(t._id),size:"small",sx:{color:o,"&.Mui-checked":{color:o}}}),e.jsx(Ke,{primary:t.title,primaryTypographyProps:{fontSize:"14px",fontWeight:700}})]},t._id))]})})]}),e.jsxs(j,{item:!0,xs:12,md:3,children:[e.jsx(n,{variant:"body2",sx:{mb:1.5,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"11px",letterSpacing:"1px"},children:"Select Unit"}),e.jsx(ae,{fullWidth:!0,children:e.jsxs(Z,{fullWidth:!0,value:it,onChange:t=>Be(t.target.value),displayEmpty:!0,renderValue:t=>t||e.jsx(n,{sx:{color:"#9CA3AF",fontWeight:600},children:"Select unit"}),children:[e.jsx(y,{disabled:!0,value:"",children:"Select unit"}),e.jsx(y,{value:"Kg",children:"Kg"}),e.jsx(y,{value:"Gm",children:"Gm"}),e.jsx(y,{value:"Piece",children:"Piece"}),e.jsx(y,{value:"Litre",children:"Litre"})]})})]}),e.jsxs(j,{item:!0,xs:12,md:4,children:[e.jsx(n,{variant:"body2",sx:{mb:1.5,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"11px",letterSpacing:"1px"},children:"Weight"}),e.jsx(k,{fullWidth:!0,placeholder:"e.g. 1.5",value:nt,onChange:t=>ze(t.target.value)})]})]})}),e.jsxs(i,{children:[e.jsx(n,{variant:"body2",sx:{mb:1.5,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"12px",letterSpacing:"1px"},children:"Perfect for Occasions"}),e.jsx(ae,{fullWidth:!0,children:e.jsxs(Z,{multiple:!0,value:Ie,onChange:t=>Ae(t.target.value),displayEmpty:!0,renderValue:t=>t.length===0?e.jsx(n,{sx:{color:"#9CA3AF",fontWeight:600,fontSize:"15px"},children:"Select one or many occasions"}):e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:t.map(s=>e.jsx(M,{label:s,size:"small",sx:{borderRadius:"10px",fontWeight:800,bgcolor:p(o,.05),color:o,border:`1px solid ${p(o,.1)}`}},s))}),children:[e.jsx(y,{disabled:!0,value:"",children:"Select one or many occasions"}),te.map(t=>e.jsxs(y,{value:t,children:[e.jsx(H,{checked:Ie.includes(t),size:"small",sx:{color:o,"&.Mui-checked":{color:o}}}),e.jsx(Ke,{primary:t,primaryTypographyProps:{fontSize:"14px",fontWeight:700}})]},t))]})})]})]})]}),e.jsxs(Y,{children:[e.jsx(q,{children:"Gallery "}),e.jsx(Q,{children:"High-resolution captures significantly increase conversion rates."}),e.jsxs(C,{spacing:5,children:[e.jsxs(i,{children:[e.jsxs(n,{variant:"body2",sx:{mb:2,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"12px",letterSpacing:"1px",display:"flex",alignItems:"center",gap:1},children:[e.jsx(St,{sx:{fontSize:16,color:"#F59E0B"}})," Thumbnail"]}),e.jsxs(Ss,{hasImage:P||he,onClick:()=>document.getElementById("thumb-in").click(),children:[e.jsx("input",{id:"thumb-in",type:"file",hidden:!0,onChange:t=>Le(t.target.files[0])}),P||he?e.jsxs(i,{sx:{position:"relative",width:"100%",height:"100%"},children:[e.jsx("img",{src:P?URL.createObjectURL(P):he,alt:"Main Cover",style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsxs(i,{sx:{position:"absolute",inset:0,bgcolor:"rgba(0,0,0,0.3)",opacity:0,transition:"0.3s",display:"flex",alignItems:"center",justifyContent:"center",gap:2,".MuiBox-root:hover &":{opacity:1}},children:[e.jsx(J,{variant:"contained",sx:{bgcolor:"white",color:"black","&:hover":{bgcolor:"#f0f0f0"}},children:"Change Cover"}),e.jsx(R,{onClick:t=>{t.stopPropagation(),Le(null),gt("")},sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white","&:hover":{bgcolor:"#ef4444"}},children:e.jsx(Ct,{})})]})]}):e.jsxs(C,{alignItems:"center",spacing:3,children:[e.jsx(i,{sx:{width:80,height:80,borderRadius:"50%",bgcolor:"white",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.06)"},children:e.jsx(Ve,{sx:{color:o,fontSize:36}})}),e.jsxs(i,{textAlign:"center",children:[e.jsx(n,{variant:"h5",sx:{fontWeight:800,color:"#111827",mb:.5},children:"Drop your main image here"}),e.jsx(n,{variant:"body2",sx:{color:"#6B7280",maxWidth:"300px"},children:"Supports JPG, PNG, WEBP. High resolution (1600x1200) recommended for best results."})]}),e.jsx(J,{variant:"outlined",sx:{borderColor:"#E5E7EB",color:"#374151",borderRadius:"12px",textTransform:"none",fontWeight:700,"&:hover":{borderColor:o,color:o,bgcolor:"transparent"}},children:"Browse Files"})]})]})]}),e.jsx(i,{children:e.jsxs(i,{sx:{mt:2},children:[e.jsx(n,{variant:"body2",sx:{mb:2.5,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"12px",letterSpacing:"1px"},children:"Gallery Collection (Max 10)"}),e.jsxs(Cs,{onClick:t=>{document.getElementById("gall-in").click()},sx:{p:3,alignItems:K.length+L.length>0?"flex-start":"center",justifyContent:K.length+L.length>0?"flex-start":"center"},children:[e.jsx("input",{id:"gall-in",type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:t=>{const s=Array.from(t.target.files);if(K.length+L.length+s.length>10){alert("You can only upload a maximum of 10 images.");return}_e(a=>[...a,...s]),t.target.value=null}}),K.length===0&&L.length===0?e.jsxs(e.Fragment,{children:[e.jsx(i,{sx:{width:70,height:70,borderRadius:"50%",bgcolor:"#E3F2FD",display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:e.jsx(Ve,{sx:{color:"#2196F3",fontSize:36}})}),e.jsx(n,{variant:"h6",sx:{color:o,fontWeight:800},children:"Click to Upload Images"}),e.jsx(n,{variant:"caption",sx:{color:"#9CA3AF",fontWeight:600,mt:1},children:"Supported: JPG, PNG, WEBP"})]}):e.jsxs(i,{sx:{display:"flex",flexWrap:"wrap",gap:2},onClick:t=>t.stopPropagation(),children:[K.map((t,s)=>e.jsxs(i,{sx:{width:80,height:80,borderRadius:"12px",overflow:"hidden",position:"relative",border:"1px solid #E5E7EB"},children:[e.jsx("img",{src:t,alt:`gallery-${s}`,style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsx(R,{size:"small",onClick:()=>ut(r=>r.filter((a,h)=>h!==s)),sx:{position:"absolute",top:2,right:2,bgcolor:"rgba(0,0,0,0.6)",color:"white",p:.5,"&:hover":{bgcolor:"#ef4444"}},children:e.jsx(fe,{sx:{fontSize:14}})})]},`exist-${s}`)),L.map((t,s)=>e.jsxs(i,{sx:{width:80,height:80,borderRadius:"12px",overflow:"hidden",position:"relative",border:"1px solid #E5E7EB"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`preview-${s}`,style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsx(R,{size:"small",onClick:()=>_e(r=>r.filter((a,h)=>h!==s)),sx:{position:"absolute",top:2,right:2,bgcolor:"rgba(0,0,0,0.6)",color:"white",p:.5,"&:hover":{bgcolor:"#ef4444"}},children:e.jsx(fe,{sx:{fontSize:14}})})]},`new-${s}`)),K.length+L.length<10&&e.jsx(i,{onClick:()=>document.getElementById("gall-in").click(),sx:{width:80,height:80,borderRadius:"12px",border:`2px dashed ${p(o,.3)}`,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(Ve,{sx:{color:o}})})]})]})]})})]})]}),e.jsxs(Y,{children:[e.jsx(q,{children:"Pricing & Intelligent Variations"}),e.jsx(Q,{children:"Configure smart pricing tiers based on user-selected preferences."}),e.jsxs(i,{sx:{mb:5,p:5,borderRadius:"32px",bgcolor:p(o,.01),border:`2.5px solid ${p(o,.05)}`,position:"relative",overflow:"hidden"},children:[e.jsx(i,{sx:{position:"absolute",top:0,right:0,width:"200px",height:"100%",background:`linear-gradient(to left, ${p(o,.03)}, transparent)`,pointerEvents:"none"}}),e.jsxs(n,{variant:"h6",sx:{mb:4,fontWeight:900,color:"#111827",display:"flex",alignItems:"center",justifyContent:"center",gap:2,fontSize:"20px",textAlign:"center"},children:[e.jsx(xs,{sx:{color:o}}),"Variant Configuration"]}),e.jsxs(i,{sx:{p:4,borderRadius:2,border:"1px solid #E5E7EB",bgcolor:"#FFFFFF"},children:[e.jsx(n,{sx:{fontWeight:700,fontSize:18,mb:1},children:"Variant Details"}),e.jsx(n,{sx:{color:"#6B7280",fontSize:14,mb:3},children:"Choose the Attributes & Input Values Of Each Attribute"}),e.jsx(ae,{fullWidth:!0,children:e.jsx(Z,{multiple:!0,value:pe,onChange:t=>{const s=t.target.value;Gt(s),xe(r=>({Weight:s.includes("Weight")?r.Weight:[],Ingredient:s.includes("Ingredient")?r.Ingredient:[]}))},renderValue:t=>e.jsx(i,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:t.map(s=>e.jsx(M,{label:s,sx:{fontWeight:700}},s))}),children:me.map(t=>e.jsxs(y,{value:t,children:[e.jsx(H,{checked:pe.includes(t)}),e.jsx(Ke,{primary:t})]},t))})}),e.jsxs(i,{sx:{mt:4},children:[e.jsx(n,{sx:{fontWeight:600,mb:2},children:"Values of Each Attribute"}),pe.includes("Weight")&&e.jsxs(i,{sx:{display:"flex",alignItems:"flex-start",border:"1px solid #E5E7EB",borderRadius:2,mb:2,overflow:"hidden"},children:[e.jsx(i,{sx:{px:2.5,py:2,bgcolor:"#E5E7EB",fontWeight:700,minWidth:160},children:"Select Weight"}),e.jsxs(i,{sx:{p:2,flex:1},children:[e.jsxs(i,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[xt.map(t=>{const s=S.Weight.includes(t),r=!kt.includes(t);return e.jsx(M,{label:t,onClick:()=>Me("Weight",s?S.Weight.filter(a=>a!==t):[...S.Weight,t]),onDelete:r?()=>Yt(t):void 0,variant:s?"filled":"outlined",sx:{fontWeight:700,bgcolor:s?p(o,.15):void 0,color:s?o:void 0,borderColor:s?o:void 0}},t)}),!at&&e.jsx(M,{label:"+ Add Weight",onClick:()=>Te(!0),sx:{fontWeight:800,color:o,border:`2px dashed ${p(o,.4)}`,bgcolor:p(o,.05),cursor:"pointer"}})]}),at&&e.jsxs(i,{sx:{mt:2,p:2,borderRadius:2,border:`1.5px solid ${p(o,.3)}`,background:`linear-gradient(135deg, ${p(o,.05)}, #fff)`,display:"flex",alignItems:"center",gap:1.5,maxWidth:320},children:[e.jsx(vt,{size:"small",autoFocus:!0,placeholder:"e.g. 6 Kg",value:ct,onChange:t=>dt(t.target.value),sx:{flex:1}}),e.jsx(J,{variant:"contained",sx:{bgcolor:o,fontWeight:800},onClick:()=>{const t=ct.trim();!t||xt.includes(t)||(pt(s=>[...s,t]),Me("Weight",[...S.Weight,t]),dt(""),Te(!1))},children:"Add"}),e.jsx(R,{onClick:()=>Te(!1),children:e.jsx(fe,{})})]})]})]}),pe.includes("Ingredient")&&e.jsxs(i,{sx:{display:"flex",alignItems:"center",border:"1px solid #E5E7EB",borderRadius:1,overflow:"hidden"},children:[e.jsx(i,{sx:{px:2.5,py:1.5,bgcolor:"#E5E7EB",fontWeight:600,minWidth:160},children:"Select Ingredient"}),e.jsx(i,{sx:{p:1.5,display:"flex",gap:1,flexWrap:"wrap"},children:Ye.Ingredient.map(t=>e.jsx(M,{label:t,onClick:()=>Me("Ingredient",S.Ingredient.includes(t)?S.Ingredient.filter(s=>s!==t):[...S.Ingredient,t]),variant:S.Ingredient.includes(t)?"filled":"outlined",sx:{fontWeight:600}},t))})]})]})]})]}),e.jsxs(i,{sx:{mb:6,p:5,borderRadius:"32px",background:`linear-gradient(180deg, #ffffff, ${p(o,.04)})`,border:`1.5px solid ${p(o,.15)}`,boxShadow:"0 20px 60px rgba(0,0,0,0.04)"},children:[e.jsxs(j,{container:!0,spacing:4,children:[e.jsxs(j,{item:!0,xs:12,md:4,children:[e.jsx(n,{sx:{mb:1.5,fontWeight:800,fontSize:"13px",textTransform:"uppercase",color:"#374151"},children:"Base Price"}),e.jsx(k,{fullWidth:!0,placeholder:"0.00",value:ie,onChange:t=>Mt(t.target.value),InputProps:{startAdornment:e.jsx(n,{sx:{mr:1,fontWeight:900,color:"#9CA3AF"},children:"₹"})}})]}),e.jsxs(j,{item:!0,xs:12,md:4,children:[e.jsx(n,{sx:{mb:1.5,fontWeight:800,fontSize:"13px",textTransform:"uppercase",color:"#374151"},children:"Discount Type"}),e.jsxs(Z,{fullWidth:!0,value:D,onChange:t=>Ot(t.target.value),children:[e.jsx(y,{value:"no_discount",children:"No Discount"}),e.jsx(y,{value:"percentage",children:"Percentage (%)"}),e.jsx(y,{value:"flat",children:"Flat Amount (₹)"})]})]}),e.jsxs(j,{item:!0,xs:12,md:4,children:[e.jsx(n,{sx:{mb:1.5,fontWeight:800,fontSize:"13px",textTransform:"uppercase",color:"#374151"},children:"Discount Value"}),e.jsx(k,{fullWidth:!0,placeholder:D==="percentage"?"e.g. 10%":"e.g. 50",value:$e,onChange:t=>Nt(t.target.value)})]})]}),e.jsx(os,{sx:{my:5}}),e.jsxs(i,{sx:{p:4,borderRadius:"24px",bgcolor:"#ffffff",border:`2px dashed ${p(o,.3)}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(i,{children:[e.jsx(n,{sx:{fontWeight:900,fontSize:"18px",color:"#111827"},children:"Billing Summary"}),e.jsx(n,{sx:{mt:.5,fontSize:"14px",color:"#6B7280"},children:"Final amount after discount"})]}),e.jsxs(i,{textAlign:"right",children:[D!=="no_discount"&&e.jsxs(n,{sx:{fontSize:"14px",fontWeight:700,color:"#6B7280",textDecoration:"line-through"},children:["₹ ",U.toFixed(2)]}),e.jsxs(n,{sx:{fontSize:"32px",fontWeight:900,color:o,lineHeight:1.1},children:["₹ ",V.toFixed(2)]}),D!=="no_discount"&&e.jsxs(n,{sx:{fontSize:"13px",fontWeight:700,color:"#16A34A"},children:["You save ₹ ",(U-V).toFixed(2)]})]})]})]}),De.length>0&&e.jsx(ws,{children:e.jsxs(ps,{children:[e.jsx(gs,{children:e.jsxs(wt,{sx:{bgcolor:p(o,.02)},children:[e.jsx(X,{sx:{fontWeight:900,color:"#111827",fontSize:"14px",py:3,pl:4},children:"Variation Details"}),e.jsx(X,{sx:{fontWeight:900,color:"#111827",fontSize:"14px",py:3},children:"Market Listing Price"}),e.jsx(X,{sx:{fontWeight:900,color:"#111827",fontSize:"14px",py:3,pr:4},children:"Display Media"})]})}),e.jsx(hs,{children:De.map(t=>e.jsx(ks,{variation:t,onChange:(s,r)=>I(a=>a.map(h=>h.id===t.id?{...h,[s]:r}:h)),onImageUpload:s=>I(r=>r.map(a=>a.id===t.id?{...a,image:s}:a)),onDelete:()=>I(s=>s.filter(r=>r.id!==t.id))},t.id))})]})})]}),e.jsxs(Y,{children:[e.jsxs(i,{sx:{mb:6,textAlign:"center"},children:[e.jsx(q,{sx:{fontSize:28},children:"Curated Boosters & Add-ons"}),e.jsx(Q,{sx:{maxWidth:720,mx:"auto",mt:1},children:"Group related extras to enhance the customer's celebration experience"})]}),ft.length===0?e.jsxs(i,{sx:{textAlign:"center",p:4,bgcolor:"#F9FAFB",borderRadius:"20px",border:"1px dashed #E5E7EB"},children:[e.jsx(n,{variant:"h6",sx:{color:"#6B7280",fontWeight:700},children:"No Add-ons Available"}),e.jsx(n,{variant:"body2",sx:{color:"#9CA3AF",mt:1},children:'Create add-ons in the "Add-ons" management section to see them here.'})]}):e.jsx(j,{container:!0,spacing:4,children:ft.map(t=>{const s=ht.find(x=>x.addonId===t._id),r=!!s,a=(s==null?void 0:s.selectedItems)||[],h=r&&a.length===0;return e.jsx(j,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(vs,{sx:{height:"100%",borderRadius:"24px",p:3,background:r?`linear-gradient(135deg, ${p(o,.05)}, #ffffff)`:"#FFFFFF",boxShadow:r?`0 8px 24px ${p(o,.25)}`:"0 12px 32px rgba(17,24,39,0.06)",border:r?`1.5px solid ${o}`:"1px solid #F1F5F9",position:"relative",transition:"all 0.25s ease","&:hover":{transform:"translateY(-2px)",boxShadow:`0 10px 26px ${p(o,.18)}`}},children:[e.jsxs(C,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[e.jsx(n,{sx:{fontWeight:900,fontSize:"16px",color:r?"#111827":"#374151"},children:t.title}),e.jsx(H,{checked:r,onClick:()=>qt(t._id),disableRipple:!0,sx:{p:0,color:"#CBD5E1","&.Mui-checked":{color:o}}})]}),e.jsxs(n,{variant:"caption",sx:{color:"#6B7280",display:"block",mb:2},children:[t.description&&t.description.substring(0,50),t.description&&t.description.length>50?"...":""]}),t.priceList&&t.priceList.length>0&&e.jsx(C,{spacing:1,sx:{mb:3},children:t.priceList.map(x=>{const d=h||a.includes(x._id);return e.jsxs(i,{onClick:l=>{l.stopPropagation(),Qt(t._id,x._id)},sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1.5,borderRadius:"12px",cursor:"pointer",bgcolor:d?p(o,.1):"#FFFFFF",border:"1px solid",borderColor:d?o:"#E5E7EB",transition:"all 0.2s","&:hover":{borderColor:o,bgcolor:p(o,.05)}},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(H,{size:"small",checked:d,disableRipple:!0,sx:{p:0,color:"#CBD5E1","&.Mui-checked":{color:o}}}),e.jsx(n,{variant:"body2",sx:{fontWeight:700,color:"#374151",fontSize:"13px"},children:x.name})]}),e.jsxs(n,{variant:"caption",sx:{fontWeight:800,color:d?"#FFF":o,bgcolor:d?o:"#FFF",px:1.5,py:.5,borderRadius:"8px",border:`1px solid ${o}`},children:["₹",x.price]})]},x._id)})}),e.jsx(i,{sx:{width:32,height:32,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:r?p(o,.15):"#F9FAFB",color:r?o:"#9CA3AF",mt:"auto"},children:t.icon?e.jsx("img",{src:t.icon,alt:"",style:{width:"20px",height:"20px",objectFit:"contain"}}):e.jsx(St,{sx:{fontSize:18}})})]})},t._id)})})]}),e.jsxs(Y,{children:[e.jsx(q,{children:"Shipping"}),e.jsx(Q,{children:"Ensure your cake arrives safely with precise delivery controls."}),e.jsxs(j,{container:!0,spacing:4,children:[e.jsxs(j,{item:!0,xs:12,children:[e.jsxs(i,{sx:{p:3.5,borderRadius:"24px",border:`2px solid ${u.free?o:"#F3F4F6"}`,display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.3s ease","&:hover":{borderColor:o,bgcolor:p(o,.01)}},children:[e.jsxs(C,{direction:"row",spacing:2.5,alignItems:"center",children:[e.jsx(i,{sx:{bgcolor:p(o,.1),p:1.5,borderRadius:"14px"},children:e.jsx(us,{sx:{color:o}})}),e.jsxs(i,{children:[e.jsx(n,{sx:{fontWeight:900,fontSize:"15px"},children:"Home Delivery"}),e.jsx(n,{variant:"caption",sx:{color:"#6B7280"},children:u.free?u.flatRate?"Paid Delivery Enabled":"Complimentary Delivery Enabled":"Enable Doorstep Delivery"})]})]}),e.jsx(Ue,{checked:u.free,onChange:t=>B({...u,free:t.target.checked})})]}),u.free&&e.jsxs(C,{spacing:3,sx:{mt:3},children:[e.jsxs(i,{sx:{p:3,borderRadius:"22px",border:`2px solid ${u.flatRate?o:"#F3F4F6"}`,display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:u.flatRate?p(o,.02):"#fff"},children:[e.jsxs(C,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(js,{sx:{color:o,fontSize:20}}),e.jsxs(i,{children:[e.jsx(n,{sx:{fontWeight:800,fontSize:"14px"},children:"Standard Flat Rate"}),e.jsx(n,{variant:"caption",children:"Charge customer for delivery"})]})]}),e.jsx(Ue,{size:"small",checked:u.flatRate,onChange:t=>B({...u,flatRate:t.target.checked,price:t.target.checked?u.price:0})})]}),u.flatRate&&e.jsx(k,{fullWidth:!0,label:"Flat Rate amount",placeholder:"0.00",value:u.price,onChange:t=>B({...u,price:t.target.value}),InputProps:{startAdornment:e.jsx(n,{sx:{mr:1,fontWeight:700,color:"#9CA3AF"},children:"₹"})}})]})]}),e.jsx(j,{item:!0,xs:12,children:e.jsxs(i,{sx:{p:3.5,borderRadius:"24px",border:`2px solid ${u.takeaway?o:"#F3F4F6"}`,display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.3s ease","&:hover":{borderColor:o,bgcolor:p(o,.01)}},children:[e.jsxs(C,{direction:"row",spacing:2.5,alignItems:"center",children:[e.jsx(i,{sx:{bgcolor:p(o,.1),p:1.5,borderRadius:"14px"},children:e.jsx(ys,{sx:{color:o}})}),e.jsxs(i,{children:[e.jsx(n,{sx:{fontWeight:900,fontSize:"15px"},children:"Takeaway / Pickup"}),e.jsx(n,{variant:"caption",sx:{color:"#6B7280"},children:"Allow customer to collect from store"})]})]}),e.jsx(Ue,{checked:u.takeaway,onChange:t=>es(t.target.checked)})]})}),u.takeaway&&e.jsx(j,{item:!0,xs:12,children:e.jsx(i,{sx:{mt:3,p:{xs:2,md:4},borderRadius:"24px",bgcolor:"#FFFFFF",border:"1px solid #E5E7EB",boxShadow:"0 10px 40px rgba(0,0,0,0.03)"},children:e.jsxs(C,{spacing:3,children:[e.jsxs(i,{children:[e.jsx(n,{sx:{mb:1.5,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"11px",letterSpacing:"1px"},children:"Search Pickup Location"}),e.jsx(k,{fullWidth:!0,inputRef:Se,placeholder:"Search for your store location or landmark..."})]}),e.jsxs(n,{variant:"body2",sx:{color:"#6B7280",fontWeight:600,display:"flex",alignItems:"center",gap:1},children:[e.jsx(fs,{fontSize:"small",sx:{color:o}}),"Click on the map to pin the exact pickup location for customers"]}),Ce?e.jsx(i,{ref:ye,sx:{height:400,width:"100%",borderRadius:"20px",border:"1px solid #E5E7EB",overflow:"hidden",boxShadow:"inset 0 2px 10px rgba(0,0,0,0.05)"}}):e.jsxs(i,{sx:{height:400,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"1px solid #E5E7EB",borderRadius:"20px",bgcolor:"#F9FAFB"},children:[e.jsx(ue,{sx:{color:o,mb:2}}),e.jsx(n,{sx:{fontWeight:700,color:"#6B7280"},children:"Initializing Map Engine..."})]}),e.jsxs(j,{container:!0,spacing:3,children:[e.jsx(j,{item:!0,xs:12,children:e.jsxs(C,{direction:"row",spacing:2,children:[e.jsxs(i,{sx:{flex:1},children:[e.jsx(n,{sx:{mb:1,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"11px"},children:"Latitude"}),e.jsx(k,{value:W.latitude,onChange:t=>re(s=>({...s,latitude:t.target.value})),placeholder:"0.0000",disabled:!0})]}),e.jsxs(i,{sx:{flex:1},children:[e.jsx(n,{sx:{mb:1,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"11px"},children:"Longitude"}),e.jsx(k,{value:W.longitude,onChange:t=>re(s=>({...s,longitude:t.target.value})),placeholder:"0.0000",disabled:!0})]})]})}),e.jsxs(j,{item:!0,xs:12,children:[e.jsx(n,{sx:{mb:1,fontWeight:800,color:"#374151",textTransform:"uppercase",fontSize:"11px",letterSpacing:"1px"},children:"Final Pickup Address"}),e.jsx(k,{multiline:!0,rows:2,value:u.takeawayLocation,onChange:t=>B({...u,takeawayLocation:t.target.value}),placeholder:"Pin on map or type full address here..."})]})]})]})})})]})]}),e.jsxs(Y,{children:[e.jsx(q,{children:"Tags"}),e.jsx(Q,{children:"Boost discoverability with targeted keywords and meta-tags."}),e.jsxs(i,{children:[e.jsxs(n,{variant:"body2",sx:{mb:2,fontWeight:800,display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(bs,{sx:{color:o}})," Dynamic Search Tags (Use comma as separator)"]}),e.jsx(k,{fullWidth:!0,placeholder:"e.g. Birthday, Luxury Cake, Eggless, Anniversary Surprise",value:rt,onChange:t=>Re(t.target.value)})]})]}),e.jsxs(i,{sx:{mt:6,pt:4,borderTop:"1px solid #E5E7EB",display:"flex",justifyContent:"flex-end",gap:2.5},children:[e.jsx(J,{variant:"outlined",onClick:Zt,sx:{px:6,py:1.8,borderRadius:"18px",textTransform:"none",fontWeight:900,fontSize:"15px",color:"#374151",borderColor:"#D1D5DB","&:hover":{borderColor:o,color:o,bgcolor:p(o,.04)}},children:"Reset Form"}),e.jsx(J,{variant:"contained",onClick:Xt,disabled:qe,sx:{bgcolor:o,borderRadius:"18px",px:7,py:1.9,textTransform:"none",fontWeight:900,fontSize:"16px",boxShadow:`0px 18px 40px ${p(o,.4)}`,"&:hover":{bgcolor:"#D81B60",boxShadow:`0px 22px 50px ${p(o,.5)}`}},children:qe?e.jsx(ue,{size:24,color:"inherit"}):"Publish Package"})]})]}),e.jsxs(rs,{open:Tt,onClose:()=>je(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsxs(is,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[F&&e.jsx(R,{size:"small",onClick:Jt,sx:{mr:1},children:e.jsx(Ge,{})}),e.jsx(n,{variant:"h6",sx:{fontWeight:800},children:F?`Packages in ${F.title}`:`Select ${O==="product"?"Products":"Categories"}`})]}),e.jsx(R,{onClick:()=>je(!1),size:"small",children:e.jsx(fe,{})})]}),e.jsx(ns,{dividers:!0,children:_t?e.jsx(i,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(ue,{color:"inherit",sx:{color:o}})}):e.jsxs(e.Fragment,{children:[F&&e.jsxs(i,{sx:{mb:3,p:2,borderRadius:"16px",bgcolor:p(o,.03),border:`1px dashed ${o}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(i,{children:[e.jsx(n,{sx:{fontWeight:800,color:"#111827"},children:"Link Entire Category"}),e.jsxs(n,{variant:"caption",sx:{color:"#6B7280"},children:['Add "',F.title,'" to related items']})]}),e.jsx(H,{checked:se.includes(F._id),onChange:()=>oe(t=>t.includes(F._id)?t.filter(s=>s!==F._id):[...t,F._id]),sx:{color:o,"&.Mui-checked":{color:o}}})]}),lt.length===0?e.jsx(i,{sx:{py:4,textAlign:"center"},children:e.jsx(n,{sx:{color:"#6B7280",fontWeight:600},children:F?"No packages found in this category":`No ${O}s found`})}):e.jsx(j,{container:!0,spacing:2,children:lt.map(t=>{var h,x;const s=t._id,r=O==="category"&&!F,a=se.includes(s);return e.jsx(j,{item:!0,xs:12,children:e.jsxs(i,{onClick:()=>{r?Ht(t):se.includes(s)?(oe(l=>l.filter(f=>f!==s)),N(l=>l.filter(f=>f._id!==s))):(oe(l=>[...l,s]),N(l=>[...l,t]))},sx:{display:"flex",gap:2,p:2,borderRadius:"14px",cursor:"pointer",border:a?`2px solid ${o}`:"1px solid #E5E7EB",bgcolor:a?p(o,.06):"#FFFFFF",transition:"all 0.25s ease","&:hover":{borderColor:o,boxShadow:`0 4px 12px ${p(o,.1)}`}},children:[e.jsx(i,{sx:{width:60,height:60,borderRadius:"10px",overflow:"hidden",flexShrink:0,bgcolor:"#F3F4F6"},children:e.jsx("img",{src:r?t.image?`${E}${t.image}`:"/placeholder.png":t.thumbnail||"/placeholder.png",alt:t.title||t.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsxs(i,{sx:{flex:1,minWidth:0},children:[e.jsx(n,{noWrap:!0,sx:{fontWeight:800,fontSize:"14px",color:"#111827",mb:.5},children:t.title||t.name}),e.jsx(n,{noWrap:!0,sx:{fontSize:"12px",color:"#6B7280"},children:r?((h=t.module)==null?void 0:h.title)||"Category":((x=t.category)==null?void 0:x.title)||"Package"})]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.price&&e.jsxs(n,{sx:{fontWeight:900,color:o,mr:1},children:["₹",t.price]}),r?e.jsx(Ge,{sx:{transform:"rotate(180deg)",color:"#CBD5E1",fontSize:20}}):e.jsx(i,{sx:{width:22,height:22,borderRadius:"6px",border:`2px solid ${a?o:"#D1D5DB"}`,bgcolor:a?o:"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:14},children:a&&"✓"})]})]})},s)})})]})}),e.jsx(as,{sx:{p:2,bgcolor:"#F9FAFB"},children:e.jsxs(J,{fullWidth:!0,variant:"contained",onClick:()=>je(!1),sx:{bgcolor:o,color:"#fff",borderRadius:"14px",py:1.5,fontWeight:900,textTransform:"none",boxShadow:`0 8px 20px ${p(o,.3)}`,"&:hover":{bgcolor:"#D81B60",boxShadow:`0 10px 25px ${p(o,.4)}`}},children:["Confirm Selection (",se.length,")"]})})]})]})};export{Ms as default};
