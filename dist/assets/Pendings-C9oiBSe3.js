import{r as i,u as D,i as v,j as e,B as P,T as g,a5 as L,S as u,s as E,g as o,a6 as b,a7 as A,a8 as N,h as z}from"./index-LQ_t7Zg_.js";import{T as I}from"./TableContainer-oNv9x7Ui.js";import{T as W,a as _,b as r,c as s,d as F}from"./TableRow-Du3qBz6b.js";import{D as G}from"./DialogActions-rwXZdKOg.js";const V=()=>{const[m,p]=i.useState(!1),[a,f]=i.useState(""),[w,k]=i.useState([]),[l,S]=i.useState(!0),C=D(),T=v(C.breakpoints.down("sm"));i.useEffect(()=>{(async()=>{try{const B=((await z.get("http://localhost:5000/api/bookings")).data.bookings||[]).filter(h=>{var x,j;return((x=h.status)==null?void 0:x.toLowerCase())==="pending"||((j=h.paymentStatus)==null?void 0:j.toLowerCase())==="pending"});k(B)}catch(t){console.error("Error fetching pending bookings:",t)}finally{S(!1)}})()},[]);const c=()=>p(!1),y=n=>f(n.target.value),d=w.filter(n=>n._id.includes(a)||(n.fullName||"").toLowerCase().includes(a.toLowerCase())||(n.emailAddress||"").toLowerCase().includes(a.toLowerCase()));return e.jsxs(P,{p:2,children:[e.jsx(g,{variant:"h4",gutterBottom:!0,children:"Pending Bookings"}),e.jsxs(L,{sx:{mt:2,width:"100%"},children:[e.jsxs(u,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},p:2,children:[e.jsx(E,{label:"Search by Booking ID, Customer Name, Email",variant:"outlined",size:"small",value:a,onChange:y,sx:{maxWidth:{sm:300}}}),e.jsx(o,{variant:"contained",color:"primary",children:"Export"})]}),e.jsx(I,{sx:{width:"100%",overflowX:"auto"},children:e.jsxs(W,{stickyHeader:!0,children:[e.jsx(_,{children:e.jsxs(r,{children:[e.jsx(s,{children:"S#"}),e.jsx(s,{children:"Booking ID"}),e.jsx(s,{children:"Name"}),e.jsx(s,{children:"Email"}),e.jsx(s,{children:"Guests"}),e.jsx(s,{children:"Booking Date"}),e.jsx(s,{children:"Amount"}),e.jsx(s,{children:"Status"}),e.jsx(s,{children:"Payment Status"}),e.jsx(s,{children:"Action"})]})}),e.jsxs(F,{children:[l&&e.jsx(r,{children:e.jsx(s,{colSpan:10,align:"center",children:"Loading..."})}),!l&&d.map((n,t)=>e.jsxs(r,{children:[e.jsx(s,{children:t+1}),e.jsx(s,{children:n._id}),e.jsx(s,{children:n.fullName}),e.jsx(s,{children:n.emailAddress}),e.jsx(s,{children:n.numberOfGuests}),e.jsx(s,{children:new Date(n.bookingDate).toLocaleDateString()}),e.jsx(s,{children:n.finalPrice}),e.jsx(s,{children:n.status}),e.jsx(s,{children:n.paymentStatus}),e.jsx(s,{children:e.jsxs(u,{direction:"row",spacing:1,children:[e.jsx(o,{variant:"outlined",size:"small",children:"View"}),e.jsx(o,{variant:"outlined",size:"small",children:"Download"})]})})]},n._id)),!l&&d.length===0&&e.jsx(r,{children:e.jsx(s,{colSpan:10,align:"center",children:"No Pending Bookings Found"})})]})]})})]}),e.jsxs(b,{open:m,onClose:c,maxWidth:"sm",fullWidth:!0,fullScreen:T,children:[e.jsx(A,{children:"Add New Pending Trip"}),e.jsx(N,{dividers:!0,children:e.jsx(g,{children:"This form is optional. You can remove it."})}),e.jsx(G,{children:e.jsx(o,{onClick:c,children:"Close"})})]})]})};export{V as default};
