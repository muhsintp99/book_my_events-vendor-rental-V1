import{r as i,j as e,B as y,T as w,a7 as S,S as h,s as T,g as o,h as k}from"./index-BPSP5w62.js";import{T as C}from"./TableContainer-B8LL10aK.js";import{T as v,a as B,b as l,c as s,d as L}from"./TableRow-DXQbfUQz.js";const D=()=>{const[t,x]=i.useState(""),[m,j]=i.useState([]),[r,u]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const f=((await k.get("https://api.bookmyevent.ae/api/bookings")).data.bookings||[]).filter(g=>{var d;return((d=g.paymentStatus)==null?void 0:d.toLowerCase())==="failed"});j(f)}catch(n){console.error("Error fetching failed payments",n)}finally{u(!1)}})()},[]);const p=a=>x(a.target.value),c=m.filter(a=>a._id.includes(t)||(a.fullName||"").toLowerCase().includes(t.toLowerCase())||(a.emailAddress||"").toLowerCase().includes(t.toLowerCase()));return e.jsxs(y,{p:2,children:[e.jsx(w,{variant:"h4",gutterBottom:!0,children:"Failed Payments"}),e.jsxs(S,{sx:{mt:2,width:"100%"},children:[e.jsxs(h,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},p:2,children:[e.jsx(T,{label:"Search by Booking ID, Name, Email",variant:"outlined",size:"small",value:t,onChange:p,sx:{maxWidth:{sm:300}}}),e.jsx(o,{variant:"contained",color:"primary",children:"Export"})]}),e.jsx(C,{sx:{width:"100%",overflowX:"auto"},children:e.jsxs(v,{stickyHeader:!0,children:[e.jsx(B,{children:e.jsxs(l,{children:[e.jsx(s,{children:"S#"}),e.jsx(s,{children:"Booking ID"}),e.jsx(s,{children:"Full Name"}),e.jsx(s,{children:"Email"}),e.jsx(s,{children:"Amount"}),e.jsx(s,{children:"Booking Date"}),e.jsx(s,{children:"Payment Status"}),e.jsx(s,{children:"Action"})]})}),e.jsxs(L,{children:[r&&e.jsx(l,{children:e.jsx(s,{colSpan:8,align:"center",children:"Loading..."})}),!r&&c.map((a,n)=>e.jsxs(l,{children:[e.jsx(s,{children:n+1}),e.jsx(s,{children:a._id}),e.jsx(s,{children:a.fullName}),e.jsx(s,{children:a.emailAddress}),e.jsx(s,{children:a.finalPrice}),e.jsx(s,{children:new Date(a.bookingDate).toLocaleDateString()}),e.jsx(s,{children:a.paymentStatus}),e.jsx(s,{children:e.jsxs(h,{direction:"row",spacing:1,children:[e.jsx(o,{variant:"outlined",size:"small",children:"Retry"}),e.jsx(o,{variant:"outlined",size:"small",children:"View"})]})})]},a._id)),!r&&c.length===0&&e.jsx(l,{children:e.jsx(s,{colSpan:8,align:"center",children:"No failed payments found"})})]})]})})]})]})};export{D as default};
