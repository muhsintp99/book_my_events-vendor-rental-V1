import{ae as w,j as e,r as o,d as B,aE as T,aF as P,aG as W,B as i,G as r,T as a,b as x,Y as L,a as $,Z as R,w as C,c as N,_ as H,C as M,a0 as f,o as u,V,q as G,a2 as _,s as k,a1 as q,z as O,H as U,a4 as Y,J,K,N as Z,e as Q}from"./index-BPglAkNh.js";import{A as X}from"./Add-B9A6LlPI.js";import{S as ee}from"./Search-DVD7zTLh.js";import{A as se}from"./AutoAwesome-YupV5UH4.js";import{C as te}from"./CardMedia-xGjrba8F.js";const ae=w(e.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"})),oe=w(e.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92"})),b={},ie=P({palette:{primary:{main:"#E15B65",dark:"#C2444E",light:"#F09898",contrastText:"#fff"},secondary:{main:"#D4A017"},background:{default:"#FDF6EE",paper:"#fff"},text:{primary:"#1A0A00",secondary:"#7A5C4A"}},typography:{fontFamily:"'DM Sans', sans-serif",h4:{fontFamily:"'Playfair Display', serif"}},shape:{borderRadius:14}});function xe(){const[I,j]=o.useState([]),[A,y]=o.useState(!0),[v,D]=o.useState(""),[h,n]=o.useState(null),[p,l]=o.useState({open:!1,msg:"",severity:"success"}),S=B(),c=(b==null?void 0:b.VITE_API_BASE_URL)||"https://api.bookmyevent.ae",E=async()=>{try{y(!0);const s=localStorage.getItem("moduleId"),t=localStorage.getItem("token");if(!s)return;const d=await(await fetch(`${c}/api/invitation/list?moduleId=${s}`,{headers:t?{Authorization:`Bearer ${t}`}:{}})).json();d.success&&j(d.data||[])}catch(s){console.error(s),l({open:!0,msg:"Failed to fetch packages",severity:"error"})}finally{y(!1)}};o.useEffect(()=>{E()},[c]);const z=async()=>{try{const s=localStorage.getItem("token"),g=await(await fetch(`${c}/api/invitation/${h}`,{method:"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}})).json();if(g.success)l({open:!0,msg:"Package removed successfully",severity:"success"}),j(d=>d.filter(F=>F._id!==h));else throw new Error(g.message)}catch(s){l({open:!0,msg:s.message,severity:"error"})}finally{n(null)}},m=I.filter(s=>{var t;return(t=s.packageName)==null?void 0:t.toLowerCase().includes(v.toLowerCase())});return e.jsxs(T,{theme:ie,children:[e.jsx(W,{}),e.jsxs(i,{sx:{width:"100%",bgcolor:"#FDF6EE",minHeight:"100vh",p:{xs:2.5,sm:4}},children:[e.jsxs(r,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:3,sx:{mb:5},children:[e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsxs(a,{variant:"h4",fontWeight:800,sx:{fontSize:{xs:"1.75rem",sm:"2.2rem"}},children:["My"," ",e.jsx(i,{component:"span",sx:{color:"primary.main",fontStyle:"italic"},children:"Invitation"})," ","Gallery"]}),e.jsx(a,{variant:"body2",color:"text.secondary",mt:.5,fontSize:"14px",children:"Manage and showcase your exquisite invitation collections."})]}),e.jsx(r,{item:!0,xs:12,sm:6,textAlign:{xs:"left",sm:"right"},children:e.jsx(x,{variant:"contained",size:"large",startIcon:e.jsx(X,{}),onClick:()=>S("/invitation/add-package"),sx:{px:3.5,py:1.5,boxShadow:"0 8px 16px rgba(225, 91, 101, 0.25)",background:"linear-gradient(135deg, #E15B65 0%, #C2444E 100%)","&:hover":{boxShadow:"0 12px 20px rgba(225, 91, 101, 0.35)"}},children:"Add New Design"})})]}),e.jsxs(L,{elevation:0,sx:{mb:4,p:2,borderRadius:4,bgcolor:"#fff",border:"1px solid rgba(225, 91, 101, 0.08)",display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx($,{placeholder:"Search designs...",size:"small",value:v,onChange:s=>D(s.target.value),sx:{flex:1,minWidth:"200px"},InputProps:{startAdornment:e.jsx(R,{position:"start",children:e.jsx(ee,{color:"primary"})})}}),e.jsx(C,{icon:e.jsx(se,{sx:{fontSize:"16px !important"}}),label:`${m.length} Packages Total`,sx:{bgcolor:"#FFFBF7",color:"#E15B65",fontWeight:700,border:"1px solid rgba(225, 91, 101, 0.1)"}})]}),A?e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px",children:e.jsx(N,{color:"primary"})}):m.length===0?e.jsxs(i,{textAlign:"center",py:10,sx:{borderRadius:6,bgcolor:"#fff",border:"2px dashed rgba(225, 91, 101, 0.15)"},children:[e.jsx(ae,{sx:{fontSize:60,color:"primary.light",mb:2,opacity:.5}}),e.jsx(a,{variant:"h6",color:"text.primary",fontWeight:600,children:"No Designs Found"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Start by adding your first invitation package."})]}):e.jsx(r,{container:!0,spacing:3.5,children:m.map((s,t)=>e.jsx(r,{item:!0,xs:12,sm:6,md:4,children:e.jsx(H,{in:!0,timeout:400+t*100,children:e.jsxs(M,{sx:{borderRadius:4,overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.05)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 30px rgba(225, 91, 101, 0.12)"}},children:[e.jsxs(i,{sx:{position:"relative"},children:[e.jsx(te,{component:"img",height:"240",image:s.thumbnail?`${c}${s.thumbnail.startsWith("/")?"":"/"}${s.thumbnail}`:"https://placehold.co/600x400?text=No+Image",alt:s.packageName,sx:{objectFit:"cover"}}),e.jsx(i,{sx:{position:"absolute",top:12,right:12,display:"flex",gap:1},children:e.jsx(f,{title:"View Details",children:e.jsx(u,{size:"small",sx:{bgcolor:"rgba(255,255,255,0.9)",backdropFilter:"blur(4px)"},children:e.jsx(V,{fontSize:"small"})})})}),e.jsx(C,{label:`â‚¹${s.packagePrice}`,sx:{position:"absolute",bottom:12,left:12,bgcolor:"#1A0A00",color:"#fff",fontWeight:700,px:1}})]}),e.jsxs(G,{sx:{p:2.5},children:[e.jsx(a,{variant:"h6",fontWeight:700,noWrap:!0,sx:{mb:1,fontFamily:"'Playfair Display', serif"},children:s.packageName}),e.jsx(a,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",height:"40px",lineHeight:1.4,mb:2.5},children:s.description}),e.jsx(_,{sx:{mb:2,opacity:.5}}),e.jsxs(k,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(k,{direction:"row",spacing:1,children:[e.jsx(f,{title:"Edit Design",children:e.jsx(u,{size:"small",onClick:()=>S(`/invitation/edit-package/${s._id}`),sx:{color:"primary.main",bgcolor:"rgba(225, 91, 101, 0.08)"},children:e.jsx(q,{fontSize:"small"})})}),e.jsx(f,{title:"Delete Design",children:e.jsx(u,{size:"small",onClick:()=>n(s._id),sx:{color:"#666",bgcolor:"#f5f5f5"},children:e.jsx(O,{fontSize:"small"})})})]}),e.jsx(x,{variant:"text",endIcon:e.jsx(oe,{fontSize:"small"}),sx:{textTransform:"none",color:"text.secondary",fontWeight:600},children:"Share"})]})]})]})})},s._id))}),e.jsxs(U,{open:!!h,onClose:()=>n(null),PaperProps:{sx:{borderRadius:4,px:1,py:1.5}},children:[e.jsx(Y,{sx:{fontWeight:700},children:"Confirm Removal?"}),e.jsx(J,{children:e.jsx(a,{variant:"body2",color:"text.secondary",children:"This will permanently delete this invitation design from your gallery. This action cannot be undone."})}),e.jsxs(K,{sx:{px:3,pb:2},children:[e.jsx(x,{onClick:()=>n(null),sx:{color:"text.secondary"},children:"Cancel"}),e.jsx(x,{onClick:z,variant:"contained",sx:{bgcolor:"#dc2626","&:hover":{bgcolor:"#b91c1c"}},children:"Remove Design"})]})]}),e.jsx(Z,{open:p.open,autoHideDuration:3e3,onClose:()=>l(s=>({...s,open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(Q,{severity:p.severity,variant:"filled",sx:{borderRadius:3},children:p.msg})})]})]})}export{xe as default};
