import{u as da,i as ca,aj as ua,w as pa,ai as ha,r,h as W,j as e,B as o,b as ht,ak as ga,T as n,t as Wt,p as k,W as _,s as m,am as xa,S as gt,F as V,I as K,ag as Q,$ as S,at as ma,f as ne,an as oe,al as xt,g as _t,ao as ba,x as fa}from"./index-WcA1ekzu.js";import{D as ya}from"./DirectionsCar-Cd0JI71l.js";import{C as zt}from"./CloudUpload-CVYVQxnQ.js";const Lt=xa(o)(({theme:l})=>({border:"2px dashed #e0e0e0",borderRadius:l.shape.borderRadius,padding:l.spacing(3),textAlign:"center",backgroundColor:l.palette.grey[50],cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"150px","&:hover":{borderColor:l.palette.primary.main},'& input[type="file"]':{display:"none"}})),Wa=()=>{const l=da(),z=ca(l.breakpoints.down("md")),U=ua(),Ee=pa(),{id:Y}=ha(),Ie=r.useRef(null),y=r.useRef(null),Pe=r.useRef(null),[mt,Rt]=r.useState(""),[Me,Ft]=r.useState(""),w="https://api.bookmyevent.ae/api",Te="AIzaSyAfLUm1kPmeMkHh1Hr5nbgNpQJOsNa7B78",q=localStorage.getItem("moduleId");r.useMemo(()=>{var t;return(t=U.state)==null?void 0:t.vehicle},[U.state]);const bt=r.useMemo(()=>{var t,a;return(a=(t=U.state)==null?void 0:t.vehicle)==null?void 0:a._id},[U.state]),X=r.useMemo(()=>{var t,a;return Y||((a=(t=U.state)==null?void 0:t.vehicle)==null?void 0:a._id)||""},[Y,bt]),$t=r.useMemo(()=>X?"edit":"create",[X]),[De,We]=r.useState($t),[ie,_e]=r.useState(""),[ft,ze]=r.useState(""),[H,Le]=r.useState(null),[M,le]=r.useState([]),[de,Re]=r.useState(""),[ce,Fe]=r.useState(""),[Vt,yt]=r.useState(""),[ue,$e]=r.useState(""),[ee,Ve]=r.useState(""),[pe,He]=r.useState(""),[Oe,Ne]=r.useState("yes"),[te,Ue]=r.useState(""),[jt,qe]=r.useState(""),[u,L]=r.useState("hourly"),[he,Ze]=r.useState(""),[ge,Ge]=r.useState(""),[xe,Je]=r.useState(""),[me,Ke]=r.useState(""),[T,ae]=r.useState({driverIncluded:!1,sunroof:!1,decorationAvailable:!1}),[Qe,vt]=r.useState(""),[Ye,be]=r.useState([]),[fe,Xe]=r.useState(""),[Ht,f]=r.useState(!1),[Ot,j]=r.useState(""),[Ct,v]=r.useState("success"),[et,tt]=r.useState([]),[at,St]=r.useState([]),[Nt,Ut]=r.useState([]),[rt,qt]=r.useState({}),[ja,va]=r.useState(""),[Ca,Sa]=r.useState(""),[wa,ka]=r.useState(""),[Ba,Aa]=r.useState(""),[Ea,Ia]=r.useState(""),[ye,wt]=r.useState(""),[Pa,Zt]=r.useState({}),[Gt,st]=r.useState([]),[Jt,re]=r.useState([]),[se,kt]=r.useState(""),[je,nt]=r.useState(""),[O,ot]=r.useState([]),[it,Bt]=r.useState(!1),[ve,I]=r.useState(!1),[Ce,lt]=r.useState(""),[N,dt]=r.useState([]),[Se,Z]=r.useState(""),[B,G]=r.useState(""),[A,J]=r.useState(""),[we,ct]=r.useState(""),[D,At]=r.useState(!1),[b,Et]=r.useState(null);r.useEffect(()=>{if(window.google&&window.google.maps){At(!0);return}const t=document.createElement("script");return t.src=`https://maps.googleapis.com/maps/api/js?key=${Te}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{At(!0)},document.head.appendChild(t),()=>{document.head.contains(t)&&document.head.removeChild(t)}},[Te]),r.useEffect(()=>{D&&window.google&&window.google.maps&&Kt()},[D]);const Kt=r.useCallback(()=>{if(!window.google||!Ie.current||!D)return;const t=B&&A?parseFloat(B):20.5937,a=B&&A?parseFloat(A):78.9629,i={lat:t,lng:a},s=new window.google.maps.Map(Ie.current,{zoom:12,center:i});s.addListener("click",p=>{const h=p.latLng.lat(),d=p.latLng.lng();G(h.toString()),J(d.toString()),y.current&&y.current.setMap(null),y.current=new window.google.maps.Marker({position:{lat:h,lng:d},map:s}),new window.google.maps.Geocoder().geocode({location:{lat:h,lng:d}},(E,P)=>{P==="OK"&&E[0]?(Z(E[0].formatted_address),j("Location set and address auto-filled!"),v("success"),f(!0)):(j("Location set, but could not determine address."),v("info"),f(!0))})}),Et(s)},[D,B,A]);r.useEffect(()=>{if(!D||!b||!Pe.current||!window.google)return;const t=new window.google.maps.places.Autocomplete(Pe.current,{fields:["place_id","geometry","name","formatted_address"]}),a=t.addListener("place_changed",()=>{const i=t.getPlace();if(!i.geometry||!i.geometry.location)return;const s=i.geometry.location;i.geometry.viewport?b.fitBounds(i.geometry.viewport):(b.setCenter(s),b.setZoom(17)),y.current&&y.current.setMap(null),y.current=new window.google.maps.Marker({position:s,map:b}),G(s.lat().toString()),J(s.lng().toString()),Z(i.formatted_address||i.name),j("Location selected!"),v("success"),f(!0)});return()=>{window.google&&window.google.maps.event&&window.google.maps.event.removeListener(a)}},[D,b]),r.useEffect(()=>{if(!b||!B||!A)return;const t={lat:parseFloat(B),lng:parseFloat(A)};b.setCenter(t),b.setZoom(12),y.current?y.current.setPosition(t):y.current=new window.google.maps.Marker({position:t,map:b})},[B,A,b]),r.useEffect(()=>{if(!ee||!D||!window.google||!window.google.maps)return;new window.google.maps.Geocoder().geocode({address:ee},(a,i)=>{if(i==="OK"&&a[0]){const s=a[0].geometry.location,p=s.lat().toString(),h=s.lng().toString();G(p),J(h),Z(a[0].formatted_address),b&&(b.setCenter({lat:s.lat(),lng:s.lng()}),b.setZoom(12),y.current&&y.current.setMap(null),y.current=new window.google.maps.Marker({position:{lat:s.lat(),lng:s.lng()},map:b})),j(`Location set for ${ee}!`),v("success"),f(!0)}else j(`Could not find location for ${ee}`),v("warning"),f(!0)})},[ee,D,b]);const ke=r.useCallback(t=>{var p,h,d,C,E,P,R,F,$,c,x,Ae,Mt,Tt,Dt;if(console.log("Setting vehicle data:",t),t.brand&&t.brand._id&&!et.some(g=>g._id===t.brand._id)&&tt(g=>[...g,{_id:t.brand._id,title:t.brand.title||t.brand.name||"Unknown Brand"}]),wt(((p=t.advanceBookingAmount)==null?void 0:p.toString())||""),(d=(h=t.category)==null?void 0:h.parentCategory)!=null&&d._id){const g=t.category.parentCategory._id;kt(g),nt(t.category._id),W.get(`${w}/categories/parents/${g}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(la=>re(la.data.data||[])).catch(()=>re([]))}let a="";Array.isArray(t.category)&&t.category.length>0?(a=t.category[0]._id,at.some(g=>g._id===a)||St(g=>[...g,{_id:a,title:t.category[0].title||"Unknown Category"}])):t.category&&typeof t.category=="object"&&t.category._id?(a=t.category._id,at.some(g=>g._id===a)||St(g=>[...g,{_id:a,title:t.category.title||"Unknown Category"}])):typeof t.category=="string"&&(a=t.category),t.zone&&t.zone._id&&!O.some(g=>g._id===t.zone._id)&&ot(g=>[...g,{_id:t.zone._id,name:t.zone.name||"Unknown Zone"}]),_e(t.name||""),ze(t.description||""),Re(((C=t.brand)==null?void 0:C._id)||""),yt(a),console.log("Category ID being set:",a);const i=((E=t.zone)==null?void 0:E._id)||"";$e(i);const s=O.find(g=>g._id===i)||t.zone&&{name:t.zone.name};Ve(s?s.name:""),Fe(t.model||""),He(((P=t.seatingCapacity)==null?void 0:P.toString())||""),Ne(t.airCondition?"yes":"no"),Ue(t.licensePlateNumber||""),be(t.searchTags||[]),Z(t.venueAddress||""),G(((R=t.latitude)==null?void 0:R.toString())||""),J(((F=t.longitude)==null?void 0:F.toString())||""),ct(t.operatingHours||""),console.log("Operating hours being set:",t.operatingHours),t.pricing&&(L(t.pricing.type||"hourly"),Ze((($=t.pricing.hourly)==null?void 0:$.toString())||""),Ge(((c=t.pricing.perDay)==null?void 0:c.toString())||""),Je(((x=t.pricing.distanceWise)==null?void 0:x.toString())||"")),Ke(((Ae=t.discount)==null?void 0:Ae.toString())||""),ae({driverIncluded:((Mt=t.features)==null?void 0:Mt.driverIncluded)??!1,sunroof:((Tt=t.features)==null?void 0:Tt.sunroof)??!1,decorationAvailable:((Dt=t.features)==null?void 0:Dt.decorationAvailable)??!1})},[et,at,O]);r.useEffect(()=>()=>{M.forEach(t=>URL.revokeObjectURL(t))},[M]),r.useEffect(()=>{(async()=>{var a,i,s,p,h;try{if(!q)throw new Error("Module ID is not defined. Please log in or set moduleId in localStorage.");const d=localStorage.getItem("token"),[C,E,P]=await Promise.all([W.get(`${w}/brands/module/${q}`,{headers:{Authorization:`Bearer ${d}`}}),W.get(`${w}/categories/parents/${q}`,{headers:{Authorization:`Bearer ${d}`}}),W.get(`${w}/zones`,{headers:{Authorization:`Bearer ${d}`,Accept:"application/json"}})]);st(((a=E.data)==null?void 0:a.data)||[]);const R=Array.isArray(C.data)?C.data:C.data.data||[];tt(R);const F=((i=E.data)==null?void 0:i.data)||[];st(F);const $=P.data.data||P.data||[],c=Array.isArray($)?$.filter(x=>x.isActive).map(x=>({_id:x._id,name:x.name})):[];ot(c),console.log("Module ID:",q),console.log("Brands:",R),console.log("Parent Categories:",F),console.log("Zones:",c),Bt(!0)}catch(d){console.error("Error fetching brands/categories/zones:",((s=d.response)==null?void 0:s.data)||d),tt([]),st([]),ot([]),Bt(!0),j(((h=(p=d.response)==null?void 0:p.data)==null?void 0:h.message)||"Failed to fetch brands, categories, or zones"),v("error"),f(!0)}})()},[q,w]),r.useEffect(()=>{(async()=>{var a;try{const p=(((a=(await W.get(`${w}/vehicle-attributes`)).data)==null?void 0:a.data)||[]).filter(d=>d.status),h={};p.forEach(d=>{h[d.title.toLowerCase()]=d.values||[]}),Ut(p),Zt(h),console.log("✅ Vehicle Attributes Loaded:",p)}catch(i){console.error("❌ Failed to load vehicle attributes",i)}})()},[w]),r.useEffect(()=>{var a;if(!it)return;const t=(a=U.state)==null?void 0:a.vehicle;t?(ke(t),lt(t.thumbnail||""),dt(t.images||[]),We("edit")):Y&&(async()=>{var s,p,h;I(!0);try{const d=await W.get(`${w}/vehicles/${Y}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),C=d.data.data||d.data;console.log("Vehicle data fetched for edit:",C),ke(C),lt(C.thumbnail||""),dt(C.images||[]),We("edit")}catch(d){j(((p=(s=d.response)==null?void 0:s.data)==null?void 0:p.message)||"Failed to fetch vehicle data"),v("error"),f(!0),console.error("Error fetching vehicle:",((h=d.response)==null?void 0:h.data)||d)}finally{I(!1)}})()},[it,Y,ke]);const Qt=async t=>{const a=t.target.value;if(kt(a),nt(""),re([]),!!a)try{const i=await W.get(`${w}/categories/parents/${a}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});re(i.data.data||[])}catch(i){console.error("Failed to fetch sub categories",i),re([])}},Yt=r.useCallback(t=>{const a=t.target.files[0];a&&Le(a)},[]),It=r.useCallback(t=>{t.preventDefault()},[]),Xt=r.useCallback(t=>{t.preventDefault();const a=t.dataTransfer.files[0];a&&Le(a)},[]),ea=r.useCallback(t=>{const a=Array.from(t.target.files);le(i=>[...i,...a])},[]),ta=r.useCallback(t=>{t.preventDefault();const a=Array.from(t.dataTransfer.files);le(i=>[...i,...a])},[]),aa=r.useCallback(t=>{Xe(t.target.value)},[]),ra=(t,a)=>{qt(i=>({...i,[t]:a}))},sa=r.useCallback(t=>{t.key==="Enter"&&fe.trim()&&(be(a=>[...a,fe.trim()]),Xe(""),t.preventDefault())},[fe]),na=r.useCallback(t=>{be(a=>a.filter(i=>i!==t))},[]),ut=r.useCallback(t=>/^[A-Z0-9]{6,8}$/.test(t)?(qe(""),!0):(qe("License plate must be 6-8 alphanumeric characters"),!1),[]),pt=r.useCallback(()=>{_e(""),ze(""),Z(""),Re(""),Fe(""),yt(""),$e(""),Ve(""),Le(null),le([]),lt(""),dt([]),He(""),Ne("yes"),Ue(""),qe(""),ae({driverIncluded:!1,sunroof:!1,decorationAvailable:!1}),L("hourly"),Ze(""),Ge(""),Je(""),Ke(""),vt(""),be([]),Xe(""),G(""),J(""),ct(""),We("create"),y.current&&(y.current.setMap(null),y.current=null),b&&Et(null)},[]),oa=r.useCallback(async t=>{var h,d,C,E,P,R,F,$;t.preventDefault();const a=De==="edit";if(I(!0),!ie||!de||!ce||!se||!je||!ue||!pe||!te||!u||!Se||!B||!A){j("Please fill all required fields."),v("error"),f(!0),I(!1);return}if(u==="hourly"&&!he||u==="perDay"&&!ge||u==="distanceWise"&&!xe){j(`Please provide a price for ${u} trip type.`),v("error"),f(!0),I(!1);return}if(!H&&!Ce&&!a){j("Please upload a thumbnail image."),v("error"),f(!0),I(!1);return}if(M.length===0&&N.length===0&&!a){j("Please upload at least one vehicle image."),v("error"),f(!0),I(!1);return}if(!ut(te)){j("Invalid license plate number."),v("error"),f(!0),I(!1);return}const i=localStorage.getItem("token");if(!i){j("No authentication token found. Please log in."),v("error"),f(!0),I(!1);return}const s=new FormData;s.append("transmissionType",mt),s.append("enginePower",Me?parseInt(Me):""),s.append("name",ie),s.append("description",ft),s.append("brand",de),s.append("category",se),s.append("subCategories[]",je),s.append("zone",ue),s.append("model",ce),s.append("seatingCapacity",parseInt(pe)),s.append("airCondition",Oe==="yes"),s.append("features[driverIncluded]",T.driverIncluded),s.append("features[sunroof]",T.sunroof),s.append("features[decorationAvailable]",T.decorationAvailable),T.decorationAvailable&&Qe&&s.append("decorationPrice",parseFloat(Qe)),s.append("attributes",JSON.stringify(rt)),s.append("licensePlateNumber",te),s.append("venueAddress",Se),s.append("latitude",parseFloat(B)),s.append("longitude",parseFloat(A)),we&&s.append("operatingHours",we),s.append("pricing[type]",u),s.append("pricing[hourly]",u==="hourly"&&parseFloat(he)||0),s.append("pricing[perDay]",u==="perDay"&&parseFloat(ge)||0),s.append("pricing[distanceWise]",u==="distanceWise"&&parseFloat(xe)||0),me&&s.append("discount",parseFloat(me)),ye&&s.append("advanceBookingAmount",parseFloat(ye)),Ye.forEach(c=>s.append("searchTags[]",c)),H&&s.append("thumbnail",H),M.forEach(c=>s.append("images",c));const p={};for(let[c,x]of s.entries())p[c]=x instanceof File?x.name:x;console.log("FormData:",p);try{let c,x;if(a){if(!X)throw new Error("Invalid vehicle ID for update");c=await W.put(`${w}/vehicles/${X}`,s,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"multipart/form-data"}}),x=c.data.data||c.data}else c=await W.post(`${w}/vehicles`,s,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"multipart/form-data"}}),x=c.data.data||c.data;console.log("API Response:",c.data),j(a?"Vehicle updated successfully!":"Vehicle added successfully!"),v("success"),f(!0),pt(),a&&Ee("/vehicle-setup/lists",{state:{vehicle:x}})}catch(c){console.error("API Error:",{status:(h=c.response)==null?void 0:h.status,statusText:(d=c.response)==null?void 0:d.statusText,data:(C=c.response)==null?void 0:C.data,headers:(E=c.response)==null?void 0:E.headers,message:c.message});let x=((R=(P=c.response)==null?void 0:P.data)==null?void 0:R.message)||"Failed to save vehicle";($=(F=c.response)==null?void 0:F.data)!=null&&$.errors&&(x=c.response.data.errors.map(Ae=>Ae.msg).join(", ")),j(x),v("error"),f(!0)}finally{I(!1)}},[De,X,ie,de,ce,Vt,ue,pe,Oe,T,te,u,he,ge,xe,me,Ye,H,M,Ce,N,ut,pt,Ee,w,q,it,bt,ke,Se,B,A,we,se,je,rt,ye]),Pt=r.useCallback((t,a)=>{a!=="clickaway"&&f(!1)},[]),Be=De==="edit",ia=r.useCallback(t=>{const a=t.target.value;$e(a);const i=O.find(s=>s._id===a);Ve(i?i.name:"")},[O]);return e.jsxs(o,{sx:{p:z?2:3,backgroundColor:l.palette.grey[100],minHeight:"100vh",width:"100%"},children:[e.jsxs(o,{sx:{maxWidth:"lg",margin:"auto",backgroundColor:"white",borderRadius:l.shape.borderRadius,boxShadow:l.shadows[1],p:z?2:3,overflowX:"hidden"},children:[e.jsx(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[Be&&e.jsx(ht,{onClick:()=>Ee("/vehicle-setup/lists"),color:"primary",children:e.jsx(ga,{})}),e.jsx(ya,{sx:{fontSize:24,mr:1}}),e.jsx(n,{variant:"h5",component:"h1",children:Be?"Edit Vehicle":"Add New Vehicle"})]})}),e.jsx(n,{variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Insert the basic information of the vehicle"}),ve&&e.jsx(o,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.jsx(Wt,{})}),e.jsxs(o,{component:"form",onSubmit:oa,children:[e.jsxs(o,{sx:{display:"flex",flexDirection:z?"column":"row",gap:3,mb:4},children:[e.jsx(k,{sx:{flex:z?"auto":2,p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(_,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"General Information"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the basic information of the vehicle"}),e.jsx(m,{fullWidth:!0,label:"Vehicle Name*",variant:"outlined",value:ie,onChange:t=>_e(t.target.value),placeholder:"Type vehicle name",sx:{mb:2},required:!0}),e.jsx(m,{fullWidth:!0,label:"Short Description",variant:"outlined",multiline:!0,rows:4,value:ft,onChange:t=>ze(t.target.value),placeholder:"Type short description",sx:{mb:2}})]})}),e.jsx(k,{sx:{flex:z?"auto":1,p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(_,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Vehicle Thumbnail*"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs(Lt,{onDragOver:It,onDrop:Xt,onClick:()=>document.getElementById("thumbnail-upload").click(),children:[H?e.jsxs(o,{children:[e.jsx("img",{src:URL.createObjectURL(H),alt:"Thumbnail preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:l.spacing(1)}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:H.name})]}):Ce?e.jsxs(o,{children:[e.jsx("img",{src:Ce,alt:"Existing thumbnail",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:l.spacing(1),borderColor:"#E15B65"}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Existing thumbnail. Upload to replace."})]}):e.jsxs(o,{children:[e.jsx(zt,{sx:{fontSize:40,color:"#E15B65",mb:1}}),e.jsx(n,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(n,{variant:"body2",color:"#E15B65",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"thumbnail-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:Yt})]})]})})]}),e.jsx(o,{sx:{mb:4},children:e.jsx(k,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(_,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Images*"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs(Lt,{onDragOver:It,onDrop:ta,onClick:()=>document.getElementById("images-upload").click(),children:[e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:1,justifyContent:"center",width:"100%"},children:[N.length>0&&e.jsx(e.Fragment,{children:N.map((t,a)=>e.jsxs(o,{sx:{position:"relative"},children:[e.jsx("img",{src:t,alt:`Existing vehicle image ${a+1}`,style:{maxWidth:80,maxHeight:80,objectFit:"cover",borderRadius:l.shape.borderRadius}}),e.jsx(n,{variant:"caption",sx:{position:"absolute",top:0,right:0,backgroundColor:"rgba(0,0,0,0.5)",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"Existing"})]},`existing-${a}`))}),M.length>0&&e.jsx(e.Fragment,{children:M.map((t,a)=>e.jsxs(o,{sx:{position:"relative"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`New vehicle image ${a+1}`,style:{maxWidth:80,maxHeight:80,objectFit:"cover",borderRadius:l.shape.borderRadius}}),e.jsx(ht,{size:"small",onClick:()=>le(i=>i.filter((s,p)=>p!==a)),sx:{position:"absolute",top:-4,right:-4,backgroundColor:"white",width:24,height:24},children:e.jsx(n,{sx:{fontSize:14,color:"red"},children:"×"})})]},`new-${a}`))}),N.length===0&&M.length===0&&e.jsxs(e.Fragment,{children:[e.jsx(zt,{sx:{fontSize:40,color:"#E15B65",mb:1}}),e.jsx(n,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium",borderColor:"#E15B65"},children:"Click to upload"}),e.jsx(n,{variant:"body2",color:"#E15B65",children:"Or drag and drop"})]})]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mt:1,width:"100%",textAlign:"center"},children:[N.length+M.length," image(s) ",N.length>0?"(including existing)":"",". Upload to add more."]}),e.jsx("input",{type:"file",id:"images-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",multiple:!0,onChange:ea})]})]})})}),e.jsx(o,{sx:{mb:4},children:e.jsxs(k,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:[e.jsxs(_,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Vehicle Information"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the vehicle's general information"}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:z?"1fr":"repeat(3, 1fr)",gap:l.spacing(3)},children:[e.jsxs(gt,{spacing:2,children:[e.jsxs(V,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(K,{id:"brand-label",children:"Brand*"}),e.jsxs(Q,{labelId:"brand-label",id:"brand-select",value:de,label:"Brand",onChange:t=>Re(t.target.value),children:[e.jsx(S,{value:"",children:"Select vehicle brand"}),et.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]}),e.jsx(V,{fullWidth:!0,variant:"outlined",required:!0,children:e.jsx(m,{id:"seating-capacity-input",label:"Seating Capacity*",variant:"outlined",value:pe,onChange:t=>He(t.target.value),placeholder:"Input how many persons can seat",type:"number",inputProps:{min:1}})})]}),e.jsxs(gt,{spacing:2,children:[e.jsx(m,{fullWidth:!0,label:"Model*",variant:"outlined",value:ce,onChange:t=>Fe(t.target.value),placeholder:"Model Name",required:!0}),e.jsxs(V,{fullWidth:!0,required:!0,children:[e.jsx(K,{children:"Transmission Type"}),e.jsxs(Q,{value:mt,label:"Transmission Type",onChange:t=>Rt(t.target.value),children:[e.jsx(S,{value:"",children:"Select Transmission"}),e.jsx(S,{value:"manual",children:"Manual"}),e.jsx(S,{value:"automatic",children:"Automatic"}),e.jsx(S,{value:"semi-automatic",children:"Semi-Automatic"})]})]}),e.jsx(m,{fullWidth:!0,label:"Engine Power (HP)",variant:"outlined",type:"number",value:Me,onChange:t=>Ft(t.target.value),placeholder:"e.g. 180",inputProps:{min:0}})]}),e.jsxs(gt,{spacing:2,children:[e.jsxs(V,{fullWidth:!0,required:!0,children:[e.jsx(K,{children:"Parent Category"}),e.jsxs(Q,{value:se,label:"Parent Category",onChange:Qt,children:[e.jsx(S,{value:"",children:"Select Parent Category"}),Gt.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]}),e.jsxs(V,{fullWidth:!0,required:!0,disabled:!se,children:[e.jsx(K,{children:"Sub Category"}),e.jsxs(Q,{value:je,label:"Sub Category",onChange:t=>nt(t.target.value),children:[e.jsx(S,{value:"",children:"Select Sub Category"}),Jt.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]})]})]}),e.jsxs(V,{component:"fieldset",fullWidth:!0,children:[e.jsx(n,{variant:"body1",color:"text.secondary",sx:{mb:1},children:"Air Condition"}),e.jsxs(ma,{row:!0,value:Oe,onChange:t=>Ne(t.target.value),children:[e.jsx(ne,{value:"yes",control:e.jsx(oe,{}),label:"Yes"}),e.jsx(ne,{value:"no",control:e.jsx(oe,{}),label:"No"})]})]}),e.jsx(o,{sx:{mt:3},children:e.jsxs(V,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(K,{id:"zone-label",children:"Zone*"}),e.jsxs(Q,{labelId:"zone-label",id:"zone-select",value:ue,label:"Zone",onChange:ia,children:[e.jsx(S,{value:"",children:"Select zone"}),O.length>0?O.map(t=>e.jsx(S,{value:t._id,children:t.name},t._id)):e.jsx(S,{disabled:!0,children:"No zones available"})]})]})}),e.jsx(o,{sx:{mt:3},children:e.jsx(m,{fullWidth:!0,label:"Vihicles Address*",variant:"outlined",value:Se,onChange:t=>Z(t.target.value),placeholder:"Enter venue address",required:!0})}),e.jsxs(o,{sx:{mt:3},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Location and Operating Hours"}),e.jsx(m,{fullWidth:!0,label:"Search Location",inputRef:Pe,variant:"outlined",placeholder:"Enter a location",sx:{mb:2}}),e.jsxs(o,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(m,{sx:{flex:1},label:"Latitude*",variant:"outlined",value:B,onChange:t=>G(t.target.value),placeholder:"e.g., 25.2048",required:!0}),e.jsx(m,{sx:{flex:1},label:"Longitude*",variant:"outlined",value:A,onChange:t=>J(t.target.value),placeholder:"e.g., 55.2708",required:!0})]}),D&&Te?e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Click on the map below to select a location"}),e.jsx(o,{ref:Ie,sx:{height:300,width:"100%",borderRadius:l.shape.borderRadius,border:`1px solid ${l.palette.grey[300]}`,mb:2}})]}):e.jsx(o,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${l.palette.grey[300]}`,borderRadius:l.shape.borderRadius,mb:2},children:e.jsx(n,{variant:"body2",color:"text.secondary",children:"Map loading..."})}),e.jsx(m,{fullWidth:!0,label:"Operating Hours",variant:"outlined",value:we,onChange:t=>ct(t.target.value),placeholder:"e.g., 9:00 AM - 6:00 PM",multiline:!0,rows:2})]})]}),e.jsx(o,{sx:{mb:4},children:e.jsx(k,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(_,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Vehicle Attributes"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Select additional attributes for the vehicle"}),e.jsx(o,{sx:{display:"grid",gridTemplateColumns:z?"1fr":"repeat(3, 1fr)",gap:3},children:Nt.map(t=>e.jsxs(V,{fullWidth:!0,children:[e.jsx(K,{children:t.title}),e.jsxs(Q,{value:rt[t._id]||"",label:t.title,onChange:a=>ra(t._id,a.target.value),children:[e.jsxs(S,{value:"",children:["Select ",t.title]}),t.values.map(a=>e.jsx(S,{value:a,children:a},a))]})]},t._id))})]})})})]})}),e.jsxs(o,{sx:{mt:3,p:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"#fafafa"},children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Vehicle Features"}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},gap:4},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white",minHeight:56},children:[e.jsx(n,{fontSize:14,fontWeight:500,children:"Driver Included"}),e.jsx(xt,{checked:T.driverIncluded,onChange:t=>ae(a=>({...a,driverIncluded:t.target.checked})),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#E15B65"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white",minHeight:56},children:[e.jsx(n,{fontSize:14,fontWeight:500,children:"Sunroof"}),e.jsx(xt,{checked:T.sunroof,onChange:t=>ae(a=>({...a,sunroof:t.target.checked})),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#E15B65"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})]}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:1.5,px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white"},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(n,{fontSize:14,fontWeight:500,children:"Decoration Available"}),e.jsx(xt,{checked:T.decorationAvailable,onChange:t=>ae(a=>({...a,decorationAvailable:t.target.checked})),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#E15B65"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})]}),T.decorationAvailable&&e.jsx(m,{fullWidth:!0,label:"Decoration Price (₹)",type:"number",value:Qe,onChange:t=>vt(t.target.value),inputProps:{min:0},placeholder:"e.g. 5000"})]})]})]}),e.jsx(o,{sx:{mb:4},children:e.jsx(k,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(_,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Vehicle Identity"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the vehicle's license plate number"}),e.jsx(m,{fullWidth:!0,label:"License Plate Number*",variant:"outlined",value:te,onChange:t=>{Ue(t.target.value),ut(t.target.value)},placeholder:"Type license plate number (6-8 alphanumeric)",required:!0,error:!!jt,helperText:jt})]})})}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(k,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(_,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Pricing & Discounts"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert pricing and discount information"}),e.jsxs(o,{sx:{mb:3},children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Trip Type"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Choose the trip type you prefer"}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:z?"1fr":"repeat(3, 1fr)",gap:l.spacing(2)},children:[e.jsxs(k,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:u==="hourly"?"#E15B65":void 0,borderWidth:u==="hourly"?2:1},onClick:()=>L("hourly"),children:[e.jsx(ne,{control:e.jsx(oe,{checked:u==="hourly",onChange:()=>L("hourly"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"Hourly",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Set your hourly rental price"})]}),e.jsxs(k,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:u==="perDay"?"#E15B65":void 0,borderWidth:u==="perDay"?2:1},onClick:()=>L("perDay"),children:[e.jsx(ne,{control:e.jsx(oe,{checked:u==="perDay",onChange:()=>L("perDay"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"Per Day",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Set your per day rental price"})]}),e.jsxs(k,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:u==="distanceWise"?"#E15B65":void 0,borderWidth:u==="distanceWise"?2:1},onClick:()=>L("distanceWise"),children:[e.jsx(ne,{control:e.jsx(oe,{checked:u==="distanceWise",onChange:()=>L("distanceWise"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"DistanceWise",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Set your distance wise rental price"})]})]})]}),u==="hourly"&&e.jsx(o,{sx:{mb:3},children:e.jsx(m,{fullWidth:!0,label:"Hourly Price (₹/per hour)*",variant:"outlined",value:he,onChange:t=>Ze(t.target.value),placeholder:"Ex: 2500.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),u==="perDay"&&e.jsx(o,{sx:{mb:3},children:e.jsx(m,{fullWidth:!0,label:"Per Day Price (₹/per day)*",variant:"outlined",value:ge,onChange:t=>Ge(t.target.value),placeholder:"Ex: 15000.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),u==="distanceWise"&&e.jsx(o,{sx:{mb:3},children:e.jsx(m,{fullWidth:!0,label:"Distance Price (₹/per km)*",variant:"outlined",value:xe,onChange:t=>Je(t.target.value),placeholder:"Ex: 100.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),e.jsxs(o,{children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Discount"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Set a discount amount (e.g., 10 for 10%)"}),e.jsx(m,{fullWidth:!0,label:"Discount (%)",variant:"outlined",value:me,onChange:t=>Ke(t.target.value),placeholder:"Ex: 10",type:"number",inputProps:{step:"any",min:0,max:100}})]})]})}),e.jsx(k,{sx:{mt:3},children:e.jsxs(_,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Advance Booking Amount"}),e.jsx(m,{fullWidth:!0,type:"number",label:"Advance Amount",value:ye,onChange:t=>wt(t.target.value),inputProps:{min:0},helperText:"Flat advance amount payable during booking"})]})})]}),e.jsx(o,{sx:{mb:4},children:e.jsx(k,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(_,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Search Tags"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert tags for appearing in user search results"}),e.jsx(m,{fullWidth:!0,label:"Type and press Enter",variant:"outlined",value:fe,onChange:aa,onKeyPress:sa,placeholder:"Type and press Enter",sx:{mb:2}}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Ye.map((t,a)=>e.jsxs(o,{sx:{display:"flex",alignItems:"center",backgroundColor:l.palette.grey[200],borderRadius:l.shape.borderRadius,px:1,py:.5},children:[e.jsx(n,{variant:"body2",children:t}),e.jsx(ht,{size:"small",onClick:()=>na(t),children:e.jsx(n,{sx:{fontSize:14},children:"×"})})]},a))})]})})}),e.jsxs(o,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(_t,{variant:"outlined",color:"#E15B65",size:"large",onClick:pt,sx:{color:"#E15B65"},children:Be?"Cancel":"Reset"}),e.jsx(_t,{variant:"contained",type:"submit",size:"large",disabled:ve,startIcon:ve?e.jsx(Wt,{size:20,color:"inherit"}):null,sx:{color:"white",bgcolor:"#E15B65"},children:ve?"Submitting...":Be?"Update":"Submit"})]})]})]}),e.jsx(ba,{open:Ht,autoHideDuration:6e3,onClose:Pt,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{"& .MuiSnackbarContent-root":{minWidth:"600px",maxWidth:"600px",width:"auto"}},children:e.jsx(fa,{onClose:Pt,severity:Ct,sx:{width:"100%",backgroundColor:Ct==="success"?"#1976d2":"#d32f2f",color:"white","& .MuiAlert-message":{whiteSpace:"pre-line",wordBreak:"break-word",fontSize:"1rem",lineHeight:1.5}},children:Ot})})]})};export{Wa as default};
