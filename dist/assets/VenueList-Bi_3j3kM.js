import{c as Y,j as e,w as U,u as q,r as l,B as r,a3 as y,a7 as L,S as u,T as i,as as R,a8 as E,g as m,G as c,s as J,a as Z,F as _,ac as B,W as d,t as K,at as Q,ai as X,p as ee,aj as D,q as z,V as se,ap as te,a4 as re,M as ie,D as ae,an as oe,au as ne,a9 as le,aa as ce,ab as de,ad as xe,ar as he,x as ue}from"./index-CxFmThG8.js";import{S as pe}from"./Storefront-CHwAK8Qx.js";import{C as ge}from"./CheckCircle-B8UbmCEa.js";import{C as me}from"./Cancel-PhGTTinZ.js";import{A as fe}from"./Add-CdPu-FBP.js";import{S as je}from"./Search-C5w2DHkN.js";import{R as ve}from"./Refresh-BdZCZ_tr.js";import{C as be}from"./CardMedia-BMtX9KXU.js";import{E as ye}from"./Edit-oajbPDo9.js";import{L as Ce}from"./LocationOn-CtYwmBoh.js";import{S as Se}from"./EventSeat-CJk_98ec.js";const we=Y(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),a="#E15B65",Ae="#c14a54";function _e(){const f=U();q();const C="https://api.bookmyevent.ae/api",N="https://api.bookmyevent.ae",[x,S]=l.useState([]),[O,V]=l.useState(!1),[o,w]=l.useState({seatingArrangement:"",status:"all",search:""}),[P,j]=l.useState(!1),[A,$]=l.useState(null),[I,n]=l.useState({open:!1,message:"",severity:"success"}),p=localStorage.getItem("token"),W=JSON.parse(localStorage.getItem("user")||"{}")._id,M=s=>{if(!s)return null;if(s.startsWith("http"))return s;const t=s.split("/").pop();return`${N}/uploads/venues/${t}`},k=l.useCallback(async()=>{if(!W||!p){n({open:!0,message:"Authentication required",severity:"error"});return}V(!0);try{const t=await(await fetch(`${C}/venues/provider/${W}`,{headers:{Authorization:`Bearer ${p}`}})).json();t.success?S(t.data||[]):n({open:!0,message:t.message||"Failed to fetch venues",severity:"error"})}catch{n({open:!0,message:"Error loading venues",severity:"error"})}finally{V(!1)}},[W,p]);l.useEffect(()=>{k()},[k]);const G=async(s,t)=>{try{(await(await fetch(`${C}/venues/${s}/toggle-active`,{method:"PATCH",headers:{Authorization:`Bearer ${p}`}})).json()).success?(S(b=>b.map(h=>h._id===s?{...h,isActive:!t}:h)),n({open:!0,message:"Status updated successfully",severity:"success"})):n({open:!0,message:"Failed to update status",severity:"error"})}catch{n({open:!0,message:"Error updating status",severity:"error"})}},H=async()=>{if(A)try{const t=await(await fetch(`${C}/venues/${A}`,{method:"DELETE",headers:{Authorization:`Bearer ${p}`}})).json();t.success?(S(g=>g.filter(v=>v._id!==A)),n({open:!0,message:"Venue deleted successfully",severity:"success"})):n({open:!0,message:t.message||"Failed to delete venue",severity:"error"})}catch{n({open:!0,message:"Error deleting venue",severity:"error"})}finally{j(!1),$(null)}},F=l.useMemo(()=>x.filter(s=>{var b,h;const t=!o.search||((b=s.venueName)==null?void 0:b.toLowerCase().includes(o.search.toLowerCase()))||((h=s.venueAddress)==null?void 0:h.toLowerCase().includes(o.search.toLowerCase())),g=!o.seatingArrangement||s.seatingArrangement===o.seatingArrangement,v=o.status==="all"||o.status==="active"&&s.isActive||o.status==="inactive"&&!s.isActive;return t&&g&&v}),[x,o]),T=l.useMemo(()=>({total:x.length,active:x.filter(s=>s.isActive).length,inactive:x.filter(s=>!s.isActive).length}),[x]);return e.jsxs(r,{sx:{bgcolor:"#F7FAFC",minHeight:"100vh",pb:8},children:[e.jsx(r,{sx:{background:`linear-gradient(135deg, ${a} 0%, #a44c7a 100%)`,color:"white",pt:6,pb:12,px:4,position:"relative",boxShadow:`0 10px 30px ${y(a,.3)}`},children:e.jsx(L,{maxWidth:"xl",children:e.jsxs(u,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},spacing:3,children:[e.jsxs(r,{children:[e.jsxs(i,{variant:"h4",sx:{fontWeight:900,mb:1,letterSpacing:"-1px",color:"white",display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(R,{sx:{fontSize:36}})," Venue Management"]}),e.jsx(u,{direction:"row",spacing:2,sx:{mt:2.5},children:[{label:"Total Venues",value:T.total,icon:e.jsx(pe,{sx:{fontSize:20}})},{label:"Active",value:T.active,icon:e.jsx(ge,{sx:{fontSize:20}})},{label:"Inactive",value:T.inactive,icon:e.jsx(me,{sx:{fontSize:20}})}].map((s,t)=>e.jsx(E,{elevation:0,sx:{bgcolor:"rgba(255,255,255,0.12)",px:3,py:1.5,borderRadius:3,backdropFilter:"blur(8px)",color:"white",border:"1px solid rgba(255,255,255,0.2)",transition:"all 0.3s ease","&:hover":{bgcolor:"rgba(255,255,255,0.2)"}},children:e.jsxs(u,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsx(r,{sx:{color:"white",display:"flex"},children:s.icon}),e.jsxs(r,{children:[e.jsx(i,{variant:"h5",sx:{fontWeight:900,lineHeight:1,color:"white"},children:s.value}),e.jsx(i,{variant:"caption",sx:{fontWeight:700,opacity:.95,color:"white",textTransform:"uppercase",letterSpacing:"0.5px"},children:s.label})]})]})},t))})]}),e.jsx(m,{variant:"contained",size:"large",startIcon:e.jsx(fe,{}),onClick:()=>f("/venue-setup/new"),sx:{bgcolor:"white",color:a,fontWeight:800,px:5,py:2,borderRadius:"20px",textTransform:"none",boxShadow:"0 15px 35px rgba(0,0,0,0.15)","&:hover":{bgcolor:"#f8f9ff",transform:"translateY(-5px)",boxShadow:"0 20px 45px rgba(0,0,0,0.2)"},transition:"all 0.3s"},children:"Add New Venue"})]})})}),e.jsxs(L,{maxWidth:"xl",sx:{mt:-6,position:"relative",zIndex:1},children:[e.jsx(E,{elevation:10,sx:{borderRadius:4,p:2,mb:4,bgcolor:"white"},children:e.jsxs(c,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(c,{item:!0,xs:12,md:4,children:e.jsx(J,{fullWidth:!0,placeholder:"Search venues...",value:o.search,onChange:s=>w(t=>({...t,search:s.target.value})),InputProps:{startAdornment:e.jsx(Z,{position:"start",children:e.jsx(je,{sx:{color:a}})}),sx:{borderRadius:3,bgcolor:"#f8fafc"}}})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(_,{fullWidth:!0,variant:"outlined",children:e.jsxs(B,{value:o.seatingArrangement,onChange:s=>w(t=>({...t,seatingArrangement:s.target.value})),displayEmpty:!0,sx:{borderRadius:3,bgcolor:"#f8fafc"},children:[e.jsx(d,{value:"",children:"Any Seating Arrangement"}),e.jsx(d,{value:"Amphitheater",children:"Amphitheater"}),e.jsx(d,{value:"Balcony auditorium",children:"Balcony auditorium"}),e.jsx(d,{value:"Flat floor auditorium",children:"Flat floor auditorium"})]})})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(_,{fullWidth:!0,variant:"outlined",children:e.jsxs(B,{value:o.status,onChange:s=>w(t=>({...t,status:s.target.value})),sx:{borderRadius:3,bgcolor:"#f8fafc"},children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"active",children:"Active Only"}),e.jsx(d,{value:"inactive",children:"Inactive Only"})]})})}),e.jsx(c,{item:!0,xs:12,md:2,children:e.jsx(m,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(ve,{}),onClick:k,sx:{borderRadius:3,py:1.5,color:a,borderColor:a,"&:hover":{borderColor:Ae,bgcolor:y(a,.05)}},children:"Refresh"})})]})}),O?e.jsx(r,{sx:{display:"flex",justifyContent:"center",py:10},children:e.jsx(K,{size:60,thickness:4,sx:{color:a}})}):F.length===0?e.jsx(Q,{in:!0,children:e.jsxs(E,{sx:{textAlign:"center",py:10,borderRadius:6,border:"2px dashed #e2e8f0"},children:[e.jsx(R,{sx:{fontSize:80,color:"#cbd5e0",mb:2}}),e.jsx(i,{variant:"h5",sx:{fontWeight:700,color:"#4a5568"},children:"No Venues Found"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Try adjusting your filters or add a new venue to your collection."})]})}):e.jsx(c,{container:!0,spacing:4,children:F.map((s,t)=>e.jsx(c,{item:!0,xs:12,sm:6,md:4,children:e.jsx(X,{in:!0,style:{transitionDelay:`${t*50}ms`},children:e.jsxs(ee,{sx:{height:"100%",borderRadius:6,overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.05)",transition:"all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)","&:hover":{transform:"translateY(-10px)",boxShadow:`0 20px 40px ${y(a,.1)}`,"& .media-overlay":{opacity:1}}},children:[e.jsxs(r,{sx:{position:"relative",pt:"60%",bgcolor:"#f7fafc"},children:[s.thumbnail?e.jsx(be,{component:"img",image:M(s.thumbnail),alt:s.venueName,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(r,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(R,{sx:{fontSize:60,color:"#e2e8f0"}})}),e.jsxs(r,{className:"media-overlay",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:y(a,.4),display:"flex",alignItems:"center",justifyContent:"center",gap:2,opacity:0,transition:"0.3s",backdropFilter:"blur(4px)"},children:[e.jsx(D,{title:"View Details",children:e.jsx(z,{sx:{bgcolor:"white",color:a,cursor:"pointer"},onClick:()=>f(`/venue-setup/listview/${s._id}`),children:e.jsx(se,{})})}),e.jsx(D,{title:"Edit Venue",children:e.jsx(z,{sx:{bgcolor:"white",color:"#2b6cb0",cursor:"pointer"},onClick:()=>f(`/venue-setup/new/${s._id}`),children:e.jsx(ye,{})})}),e.jsx(D,{title:"Delete Permanently",children:e.jsx(z,{sx:{bgcolor:"white",color:"#c53030",cursor:"pointer"},onClick:()=>{$(s._id),j(!0)},children:e.jsx(te,{})})})]}),e.jsx(r,{sx:{position:"absolute",top:15,left:15},children:e.jsx(re,{label:s.isActive?"ACTIVE":"INACTIVE",size:"small",sx:{bgcolor:s.isActive?"#48bb78":"#a0aec0",color:"white",fontWeight:900,borderRadius:2}})})]}),e.jsxs(ie,{sx:{p:3},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:800,mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.venueName}),e.jsxs(u,{spacing:1.5,children:[e.jsxs(r,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[e.jsx(Ce,{sx:{fontSize:18,color:a,mt:.3}}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:s.venueAddress||"No address provided"})]}),e.jsx(ae,{sx:{borderStyle:"dashed"}}),e.jsxs(c,{container:!0,spacing:1,children:[e.jsxs(c,{item:!0,xs:6,children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,display:"block"},children:"CAPACITY"}),e.jsxs(u,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(we,{sx:{fontSize:16,color:"#718096"}}),e.jsx(i,{variant:"body2",sx:{fontWeight:700},children:s.maxGuestsSeated||"-"})]})]}),e.jsxs(c,{item:!0,xs:6,children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,display:"block"},children:"SEATING"}),e.jsxs(u,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(Se,{sx:{fontSize:16,color:"#718096"}}),e.jsx(i,{variant:"body2",sx:{fontWeight:700},children:s.seatingArrangement||"N/A"})]})]})]})]}),e.jsxs(r,{sx:{mt:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"STATUS"}),e.jsx(oe,{checked:s.isActive,onChange:()=>G(s._id,s.isActive),size:"small",color:"success"})]}),e.jsx(m,{size:"small",endIcon:e.jsx(ne,{}),onClick:()=>f(`/venue-setup/listview/${s._id}`),sx:{textTransform:"none",fontWeight:700,color:a},children:"Details"})]})]})]})})},s._id))})]}),e.jsxs(le,{open:P,onClose:()=>j(!1),PaperProps:{sx:{borderRadius:5,p:1}},children:[e.jsx(ce,{sx:{fontWeight:900,textAlign:"center"},children:"Permanently Delete?"}),e.jsx(de,{sx:{textAlign:"center"},children:e.jsx(i,{color:"text.secondary",children:"Are you sure you want to delete this venue? This action cannot be undone and will remove all related data."})}),e.jsxs(xe,{sx:{justifyContent:"center",pb:3,gap:2},children:[e.jsx(m,{onClick:()=>j(!1),sx:{borderRadius:3,fontWeight:700},children:"Cancel"}),e.jsx(m,{onClick:H,variant:"contained",sx:{bgcolor:"#c53030",borderRadius:3,fontWeight:700,"&:hover":{bgcolor:"#9b2c2c"}},children:"Yes, Delete"})]})]}),e.jsx(he,{open:I.open,autoHideDuration:4e3,onClose:()=>n(s=>({...s,open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(ue,{severity:I.severity,variant:"filled",sx:{borderRadius:4,fontWeight:700},children:I.message})})]})}export{_e as default};
