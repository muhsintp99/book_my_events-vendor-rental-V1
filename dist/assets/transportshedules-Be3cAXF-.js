import{r as c,j as e,B as s,x as R,t as L,b as T,aI as X,T as a,aJ as ze,a5 as Ne,ap as Pe,at as Z,au as ee,aK as te,g as se,aa as Ae,ac as Be,G as l,P as oe,s as f,a as k,aL as re,F as ne,I as ae,ad as ie,X as j,aM as Fe,aN as Re,f as le,C as de,D as Le,aO as Ee,aP as Oe,aQ as $e,aR as Ye,U as _e}from"./index-CRCMV2pT.js";const C="https://api.bookmyevent.ae";function Je(){const[p,xe]=c.useState(new Date),[y,ce]=c.useState(new Date().getDate()),[pe,E]=c.useState(!1),[O,$]=c.useState([]),[W,M]=c.useState([]),[z,ue]=c.useState([]),[fe,Y]=c.useState(!1),[v,x]=c.useState(null),[_,D]=c.useState(!1),[G,H]=c.useState(null),[Ge,V]=c.useState(0),[r,g]=c.useState({fullName:"",contactNumber:"",emailAddress:"",address:"",numberOfGuests:"",additionalNotes:"",moduleId:"",vehicleId:"",tripType:"perDay",days:1,hours:null,distanceKm:null,bookingDate:new Date().toISOString().split("T")[0],timeSlot:[],paymentType:"Cash",bookingType:"Direct"}),m=(()=>{let t=localStorage.getItem("providerId")||localStorage.getItem("userId");if(!t){const o=localStorage.getItem("user");if(o)try{const n=JSON.parse(o);t=n._id||n.id||n.userId}catch(n){console.error("Error parsing user from localStorage:",n)}}return t})();c.useEffect(()=>{m?(U(),ge(),he()):x("Provider ID not found. Please log in again.")},[p,m]),c.useEffect(()=>{z.length===1&&!r.moduleId&&g(t=>({...t,moduleId:z[0]._id}))},[z]);const U=async()=>{if(!m){x("Provider ID is required");return}Y(!0),x(null);try{const o=await(await fetch(`${C}/api/bookings/provider/${m}`)).json();o.success?$(o.data||[]):x(o.message||"Failed to fetch bookings")}catch(t){x("Error connecting to server"),console.error("Fetch error:",t)}finally{Y(!1)}},he=async()=>{try{const o=await(await fetch(`${C}/api/modules`)).json(),i=((o==null?void 0:o.data)||(o==null?void 0:o.modules)||(Array.isArray(o)?o:[])).find(d=>(d.title||"").toLowerCase()==="transport");if(!i){x("Transport module not found in system");return}ue([i]),g(d=>({...d,moduleId:i._id})),console.log("âœ… Transport module fixed:",i._id)}catch(t){console.error("Fetch modules error:",t),x("Failed to fetch modules")}},ge=async()=>{try{const o=await(await fetch(`${C}/api/vehicles/provider/${m}`)).json();o.success?M(o.data||[]):M([])}catch(t){console.error("Fetch vehicles error:",t),M([])}},me=async t=>{if(window.confirm("Are you sure you want to delete this booking?")){H(t),x(null);try{const n=await(await fetch(`${C}/api/bookings/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).json();n.success?($(i=>i.filter(d=>d._id!==t)),alert("Booking deleted successfully!")):x(n.message||"Failed to delete booking")}catch(o){x("Error deleting booking: "+o.message),console.error("Delete error:",o)}finally{H(null)}}},N=new Date,be=N.getDate(),je=N.getMonth(),ye=N.getFullYear(),K=(()=>{const t=p.getFullYear(),o=p.getMonth(),n=new Date(t,o+1,0).getDate(),i={};for(let d=1;d<=n;d++){const h=O.filter(Q=>{const F=new Date(Q.bookingDate);return F.getDate()===d&&F.getMonth()===o&&F.getFullYear()===t&&Q.bookingType==="Direct"});h.length===0?i[d]="free":h.length>=2?i[d]="booked":i[d]="available"}return i})(),b=O.filter(t=>{const o=new Date(t.bookingDate);return o.getDate()===y&&o.getMonth()===p.getMonth()&&o.getFullYear()===p.getFullYear()&&t.bookingType==="Direct"}),Se=t=>{const o=t.getFullYear(),n=t.getMonth(),i=new Date(o,n,1).getDay(),d=new Date(o,n+1,0).getDate();return{firstDay:i,daysInMonth:d}},{firstDay:ke,daysInMonth:Ce}=Se(p),ve=p.toLocaleDateString("en-US",{month:"long",year:"numeric"}),P=t=>{switch(t){case"booked":return"#ef5350";case"available":return"#ffd54f";case"free":return"#66bb6a";default:return"#66bb6a"}},S=t=>{switch(t){case"Accepted":return"#7e57c2";case"Pending":return"#ffd54f";case"Rejected":return"#e57373";default:return"#ef5350"}},J=t=>{xe(new Date(p.getFullYear(),p.getMonth()+t,1))},De=()=>{const t=[];["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(n=>t.push(e.jsx(s,{sx:{textAlign:"center",padding:{xs:"8px 4px",md:"16px"},color:"#777",fontSize:{xs:"11px",md:"14px"},fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px"},children:n},n)));for(let n=0;n<ke;n++)t.push(e.jsx(s,{sx:{display:{xs:"none",md:"block"},backgroundColor:"#f9f9f9",borderRadius:"12px"}},`empty-${n}`));for(let n=1;n<=Ce;n++){const i=K[n]||"free",d=n===be&&p.getMonth()===je&&p.getFullYear()===ye,h=n===y;t.push(e.jsxs(s,{onClick:()=>ce(n),sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:{xs:"50px",md:"100px"},cursor:"pointer",borderRadius:{xs:"8px",md:"16px"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:h?"rgba(239, 83, 80, 0.05)":"#fff",border:h?"1px solid #ef5350":"1px solid #f0f0f0",boxShadow:h?"0 4px 12px rgba(239, 83, 80, 0.15)":"none","&:hover":{transform:{md:"translateY(-4px)"},boxShadow:"0 6px 16px rgba(0,0,0,0.08)",borderColor:"#ef5350",zIndex:1}},children:[e.jsx(s,{sx:{fontSize:{xs:"14px",md:"22px"},fontWeight:d||h?"600":"400",color:d?"#fff":h?"#ef5350":"#333",width:{xs:"28px",md:"48px"},height:{xs:"28px",md:"48px"},display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:d?"#ef5350":"transparent",marginBottom:{xs:"2px",md:"8px"},transition:"all 0.2s"},children:n}),e.jsx(s,{sx:{width:{xs:"6px",md:"10px"},height:{xs:"6px",md:"10px"},borderRadius:"50%",backgroundColor:P(i),boxShadow:`0 0 8px ${P(i)}80`}}),i!=="free"&&e.jsx(a,{sx:{display:{xs:"none",md:"block"},fontSize:"10px",mt:1,color:"#999",fontWeight:500},children:i==="booked"?"FULL":"SLOTS"})]},n))}return t},A=K[y]||"free",Ie=()=>b.length===0?"No bookings - All slots available":A==="booked"?`${b.length} bookings - Fully booked`:A==="available"?`${b.length} booking - Some slots available`:"All slots available",we=()=>new Date(p.getFullYear(),p.getMonth(),y).toLocaleDateString("en-US",{weekday:"short"}),u=t=>{const{name:o,value:n}=t.target;g(i=>({...i,[o]:n}))},q=t=>{g(o=>{const n=o.timeSlot.includes(t)?o.timeSlot.filter(i=>i!==t):[...o.timeSlot,t];return{...o,timeSlot:n}})},Te=async()=>{D(!0),x(null);try{if(!r.bookingDate){x("Please select booking date"),D(!1);return}if(!r.numberOfGuests||Number(r.numberOfGuests)<=0){x("Please enter a valid number of guests"),D(!1);return}const t={moduleId:r.moduleId,bookingType:r.bookingType,bookingDate:r.bookingDate,vehicleId:r.vehicleId,tripType:r.tripType,days:r.tripType==="perDay"?Number(r.days):null,hours:r.tripType==="hourly"?Number(r.hours):null,distanceKm:r.tripType==="distanceWise"?Number(r.distanceKm):null,timeSlot:r.timeSlot,fullName:r.fullName,contactNumber:r.contactNumber,emailAddress:r.emailAddress,address:r.address,paymentType:r.paymentType,numberOfGuests:Number(r.numberOfGuests)};r.packageId&&(t.packageId=r.packageId);const n=await(await fetch(`${C}/api/bookings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();n.success?(alert("Booking created successfully!"),B(),U(),We()):x(n.message||"Failed to create booking")}catch(t){x("Error creating booking: "+t.message),console.error("Submit error:",t)}finally{D(!1)}},We=()=>{g({fullName:"",contactNumber:"",emailAddress:"",address:"",numberOfGuests:"",additionalNotes:"",moduleId:"",vehicleId:"",bookingDate:new Date().toISOString().split("T")[0],timeSlot:[],paymentType:"Cash",bookingType:"Direct"})},Me=()=>{V(0),E(!0)},B=()=>{E(!1),x(null),V(0)},I={display:"flex",alignItems:"center",gap:1,mb:2,color:"#ef5350",fontWeight:600},w={color:"#ef5350",fontSize:24};return e.jsxs(s,{sx:{width:"100%",margin:"0 auto",padding:{xs:"8px",md:"40px"},backgroundColor:"#fafafa",minHeight:"100vh",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[!m&&e.jsx(R,{severity:"warning",sx:{mb:3},children:"Provider ID not found. Please make sure you're logged in. You may need to log out and log in again."}),fe&&e.jsx(s,{display:"flex",justifyContent:"center",mb:3,children:e.jsx(L,{})}),v&&e.jsx(R,{severity:"error",sx:{mb:3},children:v}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:{xs:"16px",md:"32px"},padding:{xs:"0 4px",md:"0 20px"}},children:[e.jsx(T,{onClick:()=>J(-1),sx:{backgroundColor:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"1px solid #f0f0f0","&:hover":{backgroundColor:"#f5f5f5",transform:"scale(1.1)"},transition:"all 0.2s"},children:e.jsx(X,{})}),e.jsx(a,{sx:{fontSize:{xs:"20px",md:"32px"},fontWeight:"600",color:"#333",letterSpacing:"-0.5px"},children:ve}),e.jsx(T,{onClick:()=>J(1),sx:{backgroundColor:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"1px solid #f0f0f0","&:hover":{backgroundColor:"#f5f5f5",transform:"scale(1.1)"},transition:"all 0.2s"},children:e.jsx(ze,{})})]}),e.jsx(s,{sx:{backgroundColor:"#fff",borderRadius:{xs:"12px",md:"16px"},marginBottom:{xs:"16px",md:"32px"},padding:{xs:"8px 4px",md:"32px"},boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:e.jsx(s,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:{xs:"2px",md:"16px"}},children:De()})}),e.jsx(s,{sx:{backgroundColor:"#fff",borderRadius:{xs:"8px",md:"12px"},padding:{xs:"12px 8px",md:"24px"},marginBottom:{xs:"16px",md:"32px"},boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"12px",md:"24px"},flexWrap:"wrap",flexDirection:"row"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(s,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#ef5350"}}),e.jsx(a,{sx:{fontSize:"15px",color:"#666"},children:"Fully Booked"})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(s,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#ffd54f"}}),e.jsx(a,{sx:{fontSize:"15px",color:"#666"},children:"Slots Available"})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(s,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#66bb6a"}}),e.jsx(a,{sx:{fontSize:"15px",color:"#666"},children:"Fully Free"})]})]})}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:{xs:2,md:4},backgroundColor:"#fff",borderRadius:"24px",padding:{xs:"20px",md:"32px"},marginBottom:"32px",boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0"},children:[e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:{xs:"70px",md:"100px"},height:{xs:"70px",md:"100px"},backgroundColor:"#ef5350",borderRadius:"20px",color:"#fff",boxShadow:"0 8px 16px rgba(239, 83, 80, 0.2)"},children:[e.jsx(a,{sx:{fontSize:{xs:"12px",md:"14px"},fontWeight:"600",textTransform:"uppercase",opacity:.9},children:we()}),e.jsx(a,{sx:{fontSize:{xs:"28px",md:"40px"},fontWeight:"700",lineHeight:1},children:y})]}),e.jsxs(s,{sx:{flex:1},children:[e.jsx(a,{sx:{fontSize:{xs:"18px",md:"28px"},fontWeight:"600",color:"#1a1a1a",marginBottom:"4px"},children:"Schedule Details"}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(s,{sx:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:P(A)}}),e.jsx(a,{sx:{fontSize:{xs:"14px",md:"16px"},color:"#666",fontWeight:"500"},children:Ie()})]})]})]}),e.jsxs(s,{sx:{mb:4},children:[e.jsx(a,{sx:{fontSize:{xs:"20px",md:"24px"},fontWeight:"700",color:"#1a1a1a",mb:3,pl:1},children:"Today's Appointments"}),b.length>0?e.jsx(s,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:b.map(t=>{var o,n;return e.jsxs(s,{sx:{backgroundColor:"#fff",borderRadius:"24px",border:"1px solid #f0f0f0",padding:{xs:"20px",md:"32px"},position:"relative",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0,0,0,0.02)",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 30px rgba(0,0,0,0.06)",borderColor:"#ef5350"},"&::before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:"6px",backgroundColor:S(t.status)}},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[e.jsxs(s,{children:[e.jsx(a,{sx:{fontSize:{xs:"12px",md:"13px"},fontWeight:"700",textTransform:"uppercase",color:S(t.status),letterSpacing:"1px",mb:.5},children:(o=t.timeSlot)!=null&&o.length?t.timeSlot.map(i=>`${i.label} (${i.time})`).join(", "):"All Day"}),e.jsx(a,{sx:{fontSize:{xs:"18px",md:"22px"},fontWeight:"700",color:"#1a1a1a"},children:t.fullName})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Ne,{label:t.status,sx:{fontWeight:"600",fontSize:"12px",backgroundColor:`${S(t.status)}15`,color:S(t.status),border:`1px solid ${S(t.status)}30`}}),e.jsx(T,{onClick:()=>me(t._id),disabled:G===t._id,sx:{backgroundColor:"#fff1f1",color:"#ef5350","&:hover":{backgroundColor:"#ef5350",color:"#fff"}},children:G===t._id?e.jsx(L,{size:20,color:"inherit"}):e.jsx(Pe,{fontSize:"small"})})]})]}),e.jsxs(s,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"repeat(3, 1fr)"},gap:3,pt:3,borderTop:"1px solid #f8f8f8"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(s,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(Z,{fontSize:"small"})}),e.jsxs(s,{children:[e.jsx(a,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Contact"}),e.jsx(a,{sx:{fontSize:"14px",fontWeight:"500"},children:t.contactNumber})]})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(s,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(ee,{fontSize:"small"})}),e.jsxs(s,{children:[e.jsx(a,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Email"}),e.jsx(a,{sx:{fontSize:"14px",fontWeight:"500"},children:t.emailAddress||"N/A"})]})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(s,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(te,{fontSize:"small"})}),e.jsxs(s,{children:[e.jsx(a,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Vehicle"}),e.jsx(a,{sx:{fontSize:"14px",fontWeight:"500"},children:((n=t.vehicleId)==null?void 0:n.name)||"Vehicle not specified"})]})]})]})]},t._id)})}):e.jsx(s,{sx:{textAlign:"center",py:8,backgroundColor:"#fff",borderRadius:"24px",border:"2px dashed #eee"},children:e.jsx(a,{sx:{color:"#999",fontSize:"16px"},children:"No appointments scheduled for this date."})})]}),b.length===0&&e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:{xs:"32px 16px",md:"48px"},textAlign:"center",backgroundColor:"#fff",borderRadius:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[e.jsx(s,{sx:{margin:"0 auto 20px",width:"100px",height:"100px"},children:e.jsxs("svg",{width:"100",height:"100",viewBox:"0 0 80 80",fill:"none",children:[e.jsx("rect",{x:"10",y:"15",width:"60",height:"50",rx:"4",stroke:"#ccc",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M25 15 L25 10 M55 15 L55 10",stroke:"#ccc",strokeWidth:"2"}),e.jsx("path",{d:"M20 25 L60 25",stroke:"#ccc",strokeWidth:"2"}),e.jsx("path",{d:"M35 45 L45 45 M35 45 L40 40 M35 45 L40 50",stroke:"#66bb6a",strokeWidth:"2",strokeLinecap:"round"})]})}),e.jsx(a,{variant:"h6",sx:{color:"#333",fontWeight:500,mb:1},children:"No Bookings Today"}),e.jsx(a,{sx:{color:"#666"},children:"All slots are available for booking"})]}),e.jsx(se,{variant:"contained",sx:{position:"fixed",bottom:{xs:"16px",md:"32px"},right:{xs:"16px",md:"32px"},backgroundColor:"#ef5350",color:"#fff",borderRadius:"50%",width:{xs:"56px",md:"64px"},height:{xs:"56px",md:"64px"},minWidth:"unset",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 6px 16px rgba(0,0,0,0.3)","&:hover":{backgroundColor:"#e53935"}},onClick:Me,children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 5v14M5 12h14"})})}),e.jsx(Ae,{fullScreen:!0,open:pe,onClose:B,PaperProps:{sx:{backgroundColor:"#fafafa"}},children:e.jsxs(s,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(s,{sx:{px:{xs:2,md:4},py:2.5,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#fff",borderBottom:"1px solid #f0f0f0",position:"sticky",top:0,zIndex:10},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(T,{onClick:B,sx:{color:"#333"},children:e.jsx(X,{})}),e.jsx(a,{variant:"h5",sx:{fontWeight:800,color:"#1a1a1a",letterSpacing:"-0.5px"},children:"Create New Booking"})]})}),e.jsx(Be,{sx:{flex:1,p:0,backgroundColor:"#f8f9fa"},children:e.jsxs(s,{sx:{maxWidth:"1200px",margin:"0 auto",p:{xs:2,md:4}},children:[v&&e.jsx(R,{severity:"error",sx:{mb:4,borderRadius:"16px",border:"1px solid #ffcdd2",boxShadow:"0 4px 12px rgba(239, 83, 80, 0.1)"},children:v}),e.jsxs(l,{container:!0,spacing:4,children:[e.jsx(l,{item:!0,xs:12,children:e.jsxs(s,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...I,mb:3},children:[e.jsx(oe,{sx:w}),"Client Information"]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(f,{fullWidth:!0,name:"fullName",label:"Full Name",variant:"outlined",value:r.fullName,onChange:u,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(oe,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(f,{fullWidth:!0,name:"contactNumber",label:"Contact Number",variant:"outlined",value:r.contactNumber,onChange:u,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(Z,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(f,{fullWidth:!0,name:"emailAddress",label:"Email Address (Optional)",variant:"outlined",value:r.emailAddress,onChange:u,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(ee,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(f,{fullWidth:!0,name:"address",label:"Pickup/Drop-off Address (Optional)",variant:"outlined",value:r.address,onChange:u,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(te,{sx:{color:"#999",fontSize:20}})})}})})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(s,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...I,mb:3},children:[e.jsx(re,{sx:w}),"Vehicle & Trip Selection"]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(ne,{fullWidth:!0,variant:"outlined",children:[e.jsx(ae,{shrink:!0,children:"Select Vehicle"}),e.jsxs(ie,{name:"vehicleId",value:r.vehicleId,onChange:u,label:"Select Vehicle",displayEmpty:!0,MenuProps:{PaperProps:{sx:{maxHeight:300,borderRadius:2,boxShadow:"0 8px 24px rgba(0,0,0,0.15)",backgroundColor:"#fff",zIndex:9999}},sx:{zIndex:9999},disablePortal:!0},children:[e.jsx(j,{value:"",disabled:!0,children:e.jsx("span",{style:{color:"#999"},children:W.length===0?"No vehicles available":`Select Vehicle (${W.length})`})}),W.map(t=>{const o=t.vehicleName||t.name||t.title||t.brand||"Vehicle";return e.jsx(j,{value:t._id,sx:{color:"#333"},children:o},t._id)})]})]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(ne,{fullWidth:!0,variant:"outlined",children:[e.jsx(ae,{shrink:!0,children:"Trip Type"}),e.jsxs(ie,{name:"tripType",value:r.tripType,onChange:u,label:"Trip Type",displayEmpty:!0,MenuProps:{PaperProps:{sx:{maxHeight:300,borderRadius:2,boxShadow:"0 8px 24px rgba(0,0,0,0.15)"}}},children:[e.jsx(j,{value:"",disabled:!0,children:e.jsx("span",{style:{color:"#999"},children:"Select Trip Type"})}),e.jsx(j,{value:"perDay",children:"Per Day"}),e.jsx(j,{value:"hourly",children:"Hourly"}),e.jsx(j,{value:"distanceWise",children:"Distance Wise"})]})]})}),r.tripType==="perDay"&&e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(f,{fullWidth:!0,name:"days",label:"Number of Days",type:"number",variant:"outlined",value:r.days,onChange:u})}),r.tripType==="hourly"&&e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(f,{fullWidth:!0,name:"hours",label:"Number of Hours",type:"number",variant:"outlined",value:r.hours,onChange:u})}),r.tripType==="distanceWise"&&e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(f,{fullWidth:!0,name:"distanceKm",label:"Distance in KM",type:"number",variant:"outlined",value:r.distanceKm,onChange:u})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(f,{fullWidth:!0,name:"numberOfGuests",label:"Number of Passengers",type:"number",variant:"outlined",value:r.numberOfGuests,onChange:u,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(Fe,{sx:{color:"#999",fontSize:20}})})}})})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(s,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...I,mb:3},children:[e.jsx(Re,{sx:w}),"Scheduling"]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsxs(l,{item:!0,xs:12,md:6,children:[e.jsx(f,{fullWidth:!0,name:"bookingDate",label:"Booking Date",type:"date",variant:"outlined",value:r.bookingDate,onChange:u,InputLabelProps:{shrink:!0},sx:{mb:2}}),e.jsx(a,{variant:"subtitle2",sx:{mb:2,mt:1,fontWeight:700,color:"#555"},children:"Select Time Slots"}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1.5,p:2,backgroundColor:"#fcfcfc",borderRadius:"16px",border:"1px solid #f5f5f5"},children:[e.jsx(le,{control:e.jsx(de,{checked:r.timeSlot.includes("Morning"),onChange:()=>q("Morning"),sx:{color:"#ef5350","&.Mui-checked":{color:"#ef5350"}}}),label:e.jsxs(s,{sx:{ml:1},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:600},children:"Morning Duty"}),e.jsx(a,{variant:"caption",sx:{color:"#999"},children:"9:00 AM - 1:00 PM"})]})}),e.jsx(Le,{sx:{my:1,opacity:.5}}),e.jsx(le,{control:e.jsx(de,{checked:r.timeSlot.includes("Evening"),onChange:()=>q("Evening"),sx:{color:"#ef5350","&.Mui-checked":{color:"#ef5350"}}}),label:e.jsxs(s,{sx:{ml:1},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:600},children:"Evening Duty"}),e.jsx(a,{variant:"caption",sx:{color:"#999"},children:"6:00 PM - 10:00 PM"})]})})]})]}),e.jsxs(l,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"subtitle2",sx:{mb:2,fontWeight:700,color:"#555"},children:"Payment Method"}),e.jsx(l,{container:!0,spacing:2,children:[{id:"Cash",label:"Cash",icon:e.jsx(Ee,{})},{id:"Card",label:"Card",icon:e.jsx(Oe,{})},{id:"UPI",label:"UPI",icon:e.jsx($e,{})},{id:"Bank Transfer",label:"Bank",icon:e.jsx(Ye,{})},{id:"Other",label:"Other",icon:e.jsx(_e,{})}].map(t=>e.jsx(l,{item:!0,xs:6,children:e.jsxs(s,{onClick:()=>g(o=>({...o,paymentType:t.id})),sx:{p:1.5,display:"flex",flexDirection:"column",alignItems:"center",gap:.5,borderRadius:"12px",border:"2px solid",borderColor:r.paymentType===t.id?"#ef5350":"#f0f0f0",backgroundColor:r.paymentType===t.id?"#fff5f5":"#fff",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{borderColor:"#ef5350",transform:"translateY(-2px)"}},children:[e.jsx(s,{sx:{color:r.paymentType===t.id?"#ef5350":"#666",transform:"scale(0.8)"},children:t.icon}),e.jsx(a,{variant:"caption",sx:{fontWeight:700,color:r.paymentType===t.id?"#ef5350":"#666",fontSize:"10px"},children:t.label})]})},t.id))})]})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(s,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...I,mb:3},children:[e.jsx(re,{sx:w}),"Additional Notes"]}),e.jsx(f,{fullWidth:!0,name:"additionalNotes",label:"Special Notes",multiline:!0,rows:10,variant:"outlined",value:r.additionalNotes,onChange:u,placeholder:"E.g. Full day duty, specific routes..."})]})})]})]})}),e.jsx(s,{sx:{p:2.5,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderTop:"1px solid #f0f0f0",display:"flex",justifyContent:"center",zIndex:1e3},children:e.jsx(se,{onClick:Te,disabled:_,variant:"contained",sx:{backgroundColor:"#ef5350",px:8,py:1.8,borderRadius:"16px",fontWeight:700},children:_?e.jsx(L,{size:24,color:"inherit"}):"Confirm & Save Booking"})})]})})]})}export{Je as default};
