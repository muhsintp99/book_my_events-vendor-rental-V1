import{u as Wa,h as Da,ae as La,w as _a,ad as Ma,r as a,g as M,j as e,B as i,b as It,af as za,T as o,s as sa,o as w,N as W,q as p,ah as Fa,S as Bt,F as B,I as z,ab as F,W as l,an as $a,e as re,ai as ne,f as oa,aj as Ra,v as Na}from"./index-CbEYDnWu.js";import{D as Oa}from"./DirectionsCar-CzxTQqHQ.js";import{C as ia}from"./CloudUpload-tDUHx366.js";const la=Fa(i)(({theme:d})=>({border:"2px dashed #e0e0e0",borderRadius:d.shape.borderRadius,padding:d.spacing(3),textAlign:"center",backgroundColor:d.palette.grey[50],cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"150px","&:hover":{borderColor:d.palette.primary.main},'& input[type="file"]':{display:"none"}})),Za=()=>{const d=Wa(),D=Da(d.breakpoints.down("md")),U=La(),We=_a(),{id:Q}=Ma(),De=a.useRef(null),j=a.useRef(null),Le=a.useRef(null),k="http://localhost:5000/api",_e="AIzaSyAfLUm1kPmeMkHh1Hr5nbgNpQJOsNa7B78",Z=localStorage.getItem("moduleId");a.useMemo(()=>{var t;return(t=U.state)==null?void 0:t.vehicle},[U.state]);const At=a.useMemo(()=>{var t,r;return(r=(t=U.state)==null?void 0:t.vehicle)==null?void 0:r._id},[U.state]),Y=a.useMemo(()=>{var t,r;return Q||((r=(t=U.state)==null?void 0:t.vehicle)==null?void 0:r._id)||""},[Q,At]),da=a.useMemo(()=>Y?"edit":"create",[Y]),[Me,ze]=a.useState(da),[se,Fe]=a.useState(""),[Pt,$e]=a.useState(""),[V,Re]=a.useState(null),[L,oe]=a.useState([]),[ie,Ne]=a.useState(""),[le,Oe]=a.useState(""),[ca,Wt]=a.useState(""),[de,Ve]=a.useState(""),[X,He]=a.useState(""),[ce,qe]=a.useState(""),[ue,Ue]=a.useState(""),[pe,Ze]=a.useState(""),[Ge,Je]=a.useState("yes"),[ge,Ke]=a.useState(""),[he,Qe]=a.useState(""),[ee,Ye]=a.useState(""),[Dt,Xe]=a.useState(""),[g,$]=a.useState("hourly"),[xe,et]=a.useState(""),[me,tt]=a.useState(""),[be,at]=a.useState(""),[ye,rt]=a.useState(""),[nt,fe]=a.useState([]),[je,st]=a.useState(""),[ua,f]=a.useState(!1),[pa,v]=a.useState(""),[Lt,C]=a.useState("success"),[ot,it]=a.useState([]),[lt,_t]=a.useState([]),[ga,ha]=a.useState([]),[dt,xa]=a.useState({}),[ct,Mt]=a.useState(""),[ut,zt]=a.useState(""),[ve,Ft]=a.useState(""),[pt,$t]=a.useState(""),[Ce,Rt]=a.useState(""),[Se,Nt]=a.useState(""),[gt,Ot]=a.useState(""),[ht,Vt]=a.useState([]),[xt,Ht]=a.useState([]),[mt,qt]=a.useState([]),[bt,Ut]=a.useState([]),[yt,Zt]=a.useState([]),[Va,ma]=a.useState({}),[ba,ft]=a.useState([]),[ya,te]=a.useState([]),[ae,Gt]=a.useState(""),[we,jt]=a.useState(""),[H,vt]=a.useState([]),[Ct,Jt]=a.useState(!1),[ke,A]=a.useState(!1),[Ee,St]=a.useState(""),[q,wt]=a.useState([]),[Te,G]=a.useState(""),[E,J]=a.useState(""),[T,K]=a.useState(""),[Ie,kt]=a.useState(""),[_,Kt]=a.useState(!1),[y,Qt]=a.useState(null);a.useEffect(()=>{if(window.google&&window.google.maps){Kt(!0);return}const t=document.createElement("script");return t.src=`https://maps.googleapis.com/maps/api/js?key=${_e}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{Kt(!0)},document.head.appendChild(t),()=>{document.head.contains(t)&&document.head.removeChild(t)}},[_e]),a.useEffect(()=>{_&&window.google&&window.google.maps&&fa()},[_]);const fa=a.useCallback(()=>{if(!window.google||!De.current||!_)return;const t=E&&T?parseFloat(E):20.5937,r=E&&T?parseFloat(T):78.9629,s={lat:t,lng:r},n=new window.google.maps.Map(De.current,{zoom:12,center:s});n.addListener("click",h=>{const x=h.latLng.lat(),c=h.latLng.lng();J(x.toString()),K(c.toString()),j.current&&j.current.setMap(null),j.current=new window.google.maps.Marker({position:{lat:x,lng:c},map:n}),new window.google.maps.Geocoder().geocode({location:{lat:x,lng:c}},(I,P)=>{P==="OK"&&I[0]?(G(I[0].formatted_address),v("Location set and address auto-filled!"),C("success"),f(!0)):(v("Location set, but could not determine address."),C("info"),f(!0))})}),Qt(n)},[_,E,T]);a.useEffect(()=>{if(!_||!y||!Le.current||!window.google)return;const t=new window.google.maps.places.Autocomplete(Le.current,{fields:["place_id","geometry","name","formatted_address"]}),r=t.addListener("place_changed",()=>{const s=t.getPlace();if(!s.geometry||!s.geometry.location)return;const n=s.geometry.location;s.geometry.viewport?y.fitBounds(s.geometry.viewport):(y.setCenter(n),y.setZoom(17)),j.current&&j.current.setMap(null),j.current=new window.google.maps.Marker({position:n,map:y}),J(n.lat().toString()),K(n.lng().toString()),G(s.formatted_address||s.name),v("Location selected!"),C("success"),f(!0)});return()=>{window.google&&window.google.maps.event&&window.google.maps.event.removeListener(r)}},[_,y]),a.useEffect(()=>{if(!y||!E||!T)return;const t={lat:parseFloat(E),lng:parseFloat(T)};y.setCenter(t),y.setZoom(12),j.current?j.current.setPosition(t):j.current=new window.google.maps.Marker({position:t,map:y})},[E,T,y]),a.useEffect(()=>{if(!X||!_||!window.google||!window.google.maps)return;new window.google.maps.Geocoder().geocode({address:X},(r,s)=>{if(s==="OK"&&r[0]){const n=r[0].geometry.location,h=n.lat().toString(),x=n.lng().toString();J(h),K(x),G(r[0].formatted_address),y&&(y.setCenter({lat:n.lat(),lng:n.lng()}),y.setZoom(12),j.current&&j.current.setMap(null),j.current=new window.google.maps.Marker({position:{lat:n.lat(),lng:n.lng()},map:y})),v(`Location set for ${X}!`),C("success"),f(!0)}else v(`Could not find location for ${X}`),C("warning"),f(!0)})},[X,_,y]);const Be=a.useCallback(t=>{var h,x,c,S,I,P,R,N,O,u,b,Pe,ea,ta,aa,ra,na;if(console.log("Setting vehicle data:",t),t.brand&&t.brand._id&&!ot.some(m=>m._id===t.brand._id)&&it(m=>[...m,{_id:t.brand._id,title:t.brand.title||t.brand.name||"Unknown Brand"}]),Ot(((h=t.advanceBookingAmount)==null?void 0:h.toString())||""),(c=(x=t.category)==null?void 0:x.parentCategory)!=null&&c._id){const m=t.category.parentCategory._id;Gt(m),jt(t.category._id),M.get(`${k}/categories/parents/${m}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(Pa=>te(Pa.data.data||[])).catch(()=>te([]))}let r="";Array.isArray(t.category)&&t.category.length>0?(r=t.category[0]._id,lt.some(m=>m._id===r)||_t(m=>[...m,{_id:r,title:t.category[0].title||"Unknown Category"}])):t.category&&typeof t.category=="object"&&t.category._id?(r=t.category._id,lt.some(m=>m._id===r)||_t(m=>[...m,{_id:r,title:t.category.title||"Unknown Category"}])):typeof t.category=="string"&&(r=t.category),t.zone&&t.zone._id&&!H.some(m=>m._id===t.zone._id)&&vt(m=>[...m,{_id:t.zone._id,name:t.zone.name||"Unknown Zone"}]),Fe(t.name||""),$e(t.description||""),Ne(((S=t.brand)==null?void 0:S._id)||""),Wt(r),console.log("Category ID being set:",r);const s=((I=t.zone)==null?void 0:I._id)||"";Ve(s);const n=H.find(m=>m._id===s)||t.zone&&{name:t.zone.name};He(n?n.name:""),Oe(t.model||""),qe(((P=t.engineCapacity)==null?void 0:P.toString())||""),Ue(((R=t.enginePower)==null?void 0:R.toString())||""),Ze(((N=t.seatingCapacity)==null?void 0:N.toString())||""),Je(t.airCondition?"yes":"no"),Ke(t.fuelType||""),Qe(t.transmissionType||""),Ye(t.licensePlateNumber||""),fe(t.searchTags||[]),G(t.venueAddress||""),J(((O=t.latitude)==null?void 0:O.toString())||""),K(((u=t.longitude)==null?void 0:u.toString())||""),kt(t.operatingHours||""),console.log("Operating hours being set:",t.operatingHours),t.pricing&&($(t.pricing.type||"hourly"),et(((b=t.pricing.hourly)==null?void 0:b.toString())||""),tt(((Pe=t.pricing.perDay)==null?void 0:Pe.toString())||""),at(((ea=t.pricing.distanceWise)==null?void 0:ea.toString())||"")),rt(((ta=t.discount)==null?void 0:ta.toString())||""),Mt(t.seatType||""),zt(t.audioSystem||""),$t(t.camera||""),Ft(((aa=t.airbags)==null?void 0:aa.toString())||""),Rt(((ra=t.bootSpace)==null?void 0:ra.toString())||""),Nt(((na=t.fuelTank)==null?void 0:na.toString())||""),Vt(t.connectivity||[]),Ht(t.sensors||[]),qt(t.safety||[]),Ut(t.insuranceIncluded||[]),Zt(t.insuranceExcluded||[])},[ot,lt,H]);a.useEffect(()=>()=>{L.forEach(t=>URL.revokeObjectURL(t))},[L]),a.useEffect(()=>{(async()=>{var r,s,n,h,x;try{if(!Z)throw new Error("Module ID is not defined. Please log in or set moduleId in localStorage.");const c=localStorage.getItem("token"),[S,I,P]=await Promise.all([M.get(`${k}/brands/module/${Z}`,{headers:{Authorization:`Bearer ${c}`}}),M.get(`${k}/categories/parents/${Z}`,{headers:{Authorization:`Bearer ${c}`}}),M.get(`${k}/zones`,{headers:{Authorization:`Bearer ${c}`,Accept:"application/json"}})]);ft(((r=I.data)==null?void 0:r.data)||[]);const R=Array.isArray(S.data)?S.data:S.data.data||[];it(R);const N=((s=I.data)==null?void 0:s.data)||[];ft(N);const O=P.data.data||P.data||[],u=Array.isArray(O)?O.filter(b=>b.isActive).map(b=>({_id:b._id,name:b.name})):[];vt(u),console.log("Module ID:",Z),console.log("Brands:",R),console.log("Parent Categories:",N),console.log("Zones:",u),Jt(!0)}catch(c){console.error("Error fetching brands/categories/zones:",((n=c.response)==null?void 0:n.data)||c),it([]),ft([]),vt([]),Jt(!0),v(((x=(h=c.response)==null?void 0:h.data)==null?void 0:x.message)||"Failed to fetch brands, categories, or zones"),C("error"),f(!0)}})()},[Z,k]),a.useEffect(()=>{(async()=>{var r;try{const h=(((r=(await M.get(`${k}/vehicle-attributes`)).data)==null?void 0:r.data)||[]).filter(c=>c.status),x={};h.forEach(c=>{x[c.title.toLowerCase()]=c.values||[]}),ha(h),ma(x),console.log("✅ Vehicle Attributes Loaded:",h)}catch(s){console.error("❌ Failed to load vehicle attributes",s)}})()},[k]),a.useEffect(()=>{var r;if(!Ct)return;const t=(r=U.state)==null?void 0:r.vehicle;t?(Be(t),St(t.thumbnail||""),wt(t.images||[]),ze("edit")):Q&&(async()=>{var n,h,x;A(!0);try{const c=await M.get(`${k}/vehicles/${Q}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),S=c.data.data||c.data;console.log("Vehicle data fetched for edit:",S),Be(S),St(S.thumbnail||""),wt(S.images||[]),ze("edit")}catch(c){v(((h=(n=c.response)==null?void 0:n.data)==null?void 0:h.message)||"Failed to fetch vehicle data"),C("error"),f(!0),console.error("Error fetching vehicle:",((x=c.response)==null?void 0:x.data)||c)}finally{A(!1)}})()},[Ct,Q,Be]);const ja=async t=>{const r=t.target.value;if(Gt(r),jt(""),te([]),!!r)try{const s=await M.get(`${k}/categories/parents/${r}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});te(s.data.data||[])}catch(s){console.error("Failed to fetch sub categories",s),te([])}},va=a.useCallback(t=>{const r=t.target.files[0];r&&Re(r)},[]),Yt=a.useCallback(t=>{t.preventDefault()},[]),Ca=a.useCallback(t=>{t.preventDefault();const r=t.dataTransfer.files[0];r&&Re(r)},[]),Sa=a.useCallback(t=>{const r=Array.from(t.target.files);oe(s=>[...s,...r])},[]),wa=a.useCallback(t=>{t.preventDefault();const r=Array.from(t.dataTransfer.files);oe(s=>[...s,...r])},[]),ka=a.useCallback(t=>{st(t.target.value)},[]),Ea=(t,r)=>{xa(s=>({...s,[t]:r}))},Ta=a.useCallback(t=>{t.key==="Enter"&&je.trim()&&(fe(r=>[...r,je.trim()]),st(""),t.preventDefault())},[je]),Ia=a.useCallback(t=>{fe(r=>r.filter(s=>s!==t))},[]),Et=a.useCallback(t=>/^[A-Z0-9]{6,8}$/.test(t)?(Xe(""),!0):(Xe("License plate must be 6-8 alphanumeric characters"),!1),[]),Tt=a.useCallback(()=>{Fe(""),$e(""),G(""),Re(null),oe([]),Ne(""),Oe(""),Wt(""),Ve(""),He(""),qe(""),Ue(""),Ze(""),Je("yes"),Ke(""),Qe(""),Ye(""),Xe(""),$("hourly"),et(""),tt(""),at(""),rt(""),fe([]),st(""),St(""),wt([]),J(""),K(""),kt(""),ze("create"),j.current&&(j.current.setMap(null),j.current=null),y&&Qt(null)},[]),Ba=a.useCallback(async t=>{var x,c,S,I,P,R,N,O;t.preventDefault();const r=Me==="edit";if(A(!0),!se||!ie||!le||!ae||!we||!de||!ce||!ue||!pe||!ge||!he||!ee||!g||!Te||!E||!T){v("Please fill all required fields."),C("error"),f(!0),A(!1);return}if(g==="hourly"&&!xe||g==="perDay"&&!me||g==="distanceWise"&&!be){v(`Please provide a price for ${g} trip type.`),C("error"),f(!0),A(!1);return}if(!V&&!Ee&&!r){v("Please upload a thumbnail image."),C("error"),f(!0),A(!1);return}if(L.length===0&&q.length===0&&!r){v("Please upload at least one vehicle image."),C("error"),f(!0),A(!1);return}if(!Et(ee)){v("Invalid license plate number."),C("error"),f(!0),A(!1);return}const s=localStorage.getItem("token");if(!s){v("No authentication token found. Please log in."),C("error"),f(!0),A(!1);return}const n=new FormData;n.append("name",se),n.append("description",Pt),n.append("brand",ie),n.append("category",ae),n.append("subCategories[]",we),n.append("zone",de),n.append("model",le),n.append("engineCapacity",parseInt(ce)),n.append("enginePower",parseInt(ue)),n.append("seatingCapacity",parseInt(pe)),n.append("airCondition",Ge==="yes"),n.append("fuelType",ge.toLowerCase()),n.append("attributes",JSON.stringify(dt)),n.append("seatType",ct),n.append("audioSystem",ut),n.append("camera",pt),n.append("advanceBookingAmount",gt||0),ve&&n.append("airbags",ve),Ce&&n.append("bootSpace",Ce),Se&&n.append("fuelTank",Se),n.append("connectivity",JSON.stringify(ht)),n.append("sensors",JSON.stringify(xt)),n.append("safety",JSON.stringify(mt)),n.append("insuranceIncluded",JSON.stringify(bt)),n.append("insuranceExcluded",JSON.stringify(yt)),n.append("transmissionType",he.toLowerCase()),n.append("licensePlateNumber",ee),n.append("venueAddress",Te),n.append("latitude",parseFloat(E)),n.append("longitude",parseFloat(T)),Ie&&n.append("operatingHours",Ie),n.append("pricing[type]",g),n.append("pricing[hourly]",g==="hourly"&&parseFloat(xe)||0),n.append("pricing[perDay]",g==="perDay"&&parseFloat(me)||0),n.append("pricing[distanceWise]",g==="distanceWise"&&parseFloat(be)||0),ye&&n.append("discount",parseFloat(ye)),nt.forEach(u=>n.append("searchTags[]",u)),V&&n.append("thumbnail",V),L.forEach(u=>n.append("images",u));const h={};for(let[u,b]of n.entries())h[u]=b instanceof File?b.name:b;console.log("FormData:",h);try{let u,b;if(r){if(!Y)throw new Error("Invalid vehicle ID for update");u=await M.put(`${k}/vehicles/${Y}`,n,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"multipart/form-data"}}),b=u.data.data||u.data}else u=await M.post(`${k}/vehicles`,n,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"multipart/form-data"}}),b=u.data.data||u.data;console.log("API Response:",u.data),v(r?"Vehicle updated successfully!":"Vehicle added successfully!"),C("success"),f(!0),Tt(),r&&We("/vehicle-setup/lists",{state:{vehicle:b}})}catch(u){console.error("API Error:",{status:(x=u.response)==null?void 0:x.status,statusText:(c=u.response)==null?void 0:c.statusText,data:(S=u.response)==null?void 0:S.data,headers:(I=u.response)==null?void 0:I.headers,message:u.message});let b=((R=(P=u.response)==null?void 0:P.data)==null?void 0:R.message)||"Failed to save vehicle";(O=(N=u.response)==null?void 0:N.data)!=null&&O.errors&&(b=u.response.data.errors.map(Pe=>Pe.msg).join(", ")),v(b),C("error"),f(!0)}finally{A(!1)}},[Me,Y,se,ie,le,ca,de,ce,ue,pe,Ge,ge,he,ee,g,xe,me,be,ye,nt,V,L,Ee,q,Et,Tt,We,k,Z,Ct,At,Be,Te,E,T,Ie,ae,we,dt,ct,ut,pt,gt,ve,Ce,Se,ht,xt,mt,bt,yt]),Xt=a.useCallback((t,r)=>{r!=="clickaway"&&f(!1)},[]),Ae=Me==="edit",Aa=a.useCallback(t=>{const r=t.target.value;Ve(r);const s=H.find(n=>n._id===r);He(s?s.name:"")},[H]);return e.jsxs(i,{sx:{p:D?2:3,backgroundColor:d.palette.grey[100],minHeight:"100vh",width:"100%"},children:[e.jsxs(i,{sx:{maxWidth:"lg",margin:"auto",backgroundColor:"white",borderRadius:d.shape.borderRadius,boxShadow:d.shadows[1],p:D?2:3,overflowX:"hidden"},children:[e.jsx(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[Ae&&e.jsx(It,{onClick:()=>We("/vehicle-setup/lists"),color:"primary",children:e.jsx(za,{})}),e.jsx(Oa,{sx:{fontSize:24,mr:1}}),e.jsx(o,{variant:"h5",component:"h1",children:Ae?"Edit Vehicle":"Add New Vehicle"})]})}),e.jsx(o,{variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Insert the basic information of the vehicle"}),ke&&e.jsx(i,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.jsx(sa,{})}),e.jsxs(i,{component:"form",onSubmit:Ba,children:[e.jsxs(i,{sx:{display:"flex",flexDirection:D?"column":"row",gap:3,mb:4},children:[e.jsx(w,{sx:{flex:D?"auto":2,p:2,boxShadow:"none",border:`1px solid ${d.palette.grey[200]}`},children:e.jsxs(W,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"General Information"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the basic information of the vehicle"}),e.jsx(p,{fullWidth:!0,label:"Vehicle Name*",variant:"outlined",value:se,onChange:t=>Fe(t.target.value),placeholder:"Type vehicle name",sx:{mb:2},required:!0}),e.jsx(p,{fullWidth:!0,label:"Short Description",variant:"outlined",multiline:!0,rows:4,value:Pt,onChange:t=>$e(t.target.value),placeholder:"Type short description",sx:{mb:2}})]})}),e.jsx(w,{sx:{flex:D?"auto":1,p:2,boxShadow:"none",border:`1px solid ${d.palette.grey[200]}`},children:e.jsxs(W,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Thumbnail*"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs(la,{onDragOver:Yt,onDrop:Ca,onClick:()=>document.getElementById("thumbnail-upload").click(),children:[V?e.jsxs(i,{children:[e.jsx("img",{src:URL.createObjectURL(V),alt:"Thumbnail preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:d.spacing(1)}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:V.name})]}):Ee?e.jsxs(i,{children:[e.jsx("img",{src:Ee,alt:"Existing thumbnail",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:d.spacing(1),borderColor:"#E15B65"}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Existing thumbnail. Upload to replace."})]}):e.jsxs(i,{children:[e.jsx(ia,{sx:{fontSize:40,color:"#E15B65",mb:1}}),e.jsx(o,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(o,{variant:"body2",color:"#E15B65",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"thumbnail-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:va})]})]})})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${d.palette.grey[200]}`},children:e.jsxs(W,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Images*"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs(la,{onDragOver:Yt,onDrop:wa,onClick:()=>document.getElementById("images-upload").click(),children:[e.jsxs(i,{sx:{display:"flex",flexWrap:"wrap",gap:1,justifyContent:"center",width:"100%"},children:[q.length>0&&e.jsx(e.Fragment,{children:q.map((t,r)=>e.jsxs(i,{sx:{position:"relative"},children:[e.jsx("img",{src:t,alt:`Existing vehicle image ${r+1}`,style:{maxWidth:80,maxHeight:80,objectFit:"cover",borderRadius:d.shape.borderRadius}}),e.jsx(o,{variant:"caption",sx:{position:"absolute",top:0,right:0,backgroundColor:"rgba(0,0,0,0.5)",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"Existing"})]},`existing-${r}`))}),L.length>0&&e.jsx(e.Fragment,{children:L.map((t,r)=>e.jsxs(i,{sx:{position:"relative"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`New vehicle image ${r+1}`,style:{maxWidth:80,maxHeight:80,objectFit:"cover",borderRadius:d.shape.borderRadius}}),e.jsx(It,{size:"small",onClick:()=>oe(s=>s.filter((n,h)=>h!==r)),sx:{position:"absolute",top:-4,right:-4,backgroundColor:"white",width:24,height:24},children:e.jsx(o,{sx:{fontSize:14,color:"red"},children:"×"})})]},`new-${r}`))}),q.length===0&&L.length===0&&e.jsxs(e.Fragment,{children:[e.jsx(ia,{sx:{fontSize:40,color:"#E15B65",mb:1}}),e.jsx(o,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium",borderColor:"#E15B65"},children:"Click to upload"}),e.jsx(o,{variant:"body2",color:"#E15B65",children:"Or drag and drop"})]})]}),e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{mt:1,width:"100%",textAlign:"center"},children:[q.length+L.length," image(s) ",q.length>0?"(including existing)":"",". Upload to add more."]}),e.jsx("input",{type:"file",id:"images-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",multiple:!0,onChange:Sa})]})]})})}),e.jsx(i,{sx:{mb:4},children:e.jsxs(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${d.palette.grey[200]}`},children:[e.jsxs(W,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Information"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the vehicle's general information"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:D?"1fr":"repeat(3, 1fr)",gap:d.spacing(3)},children:[e.jsxs(Bt,{spacing:2,children:[e.jsxs(B,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(z,{id:"brand-label",children:"Brand*"}),e.jsxs(F,{labelId:"brand-label",id:"brand-select",value:ie,label:"Brand",onChange:t=>Ne(t.target.value),children:[e.jsx(l,{value:"",children:"Select vehicle brand"}),ot.map(t=>e.jsx(l,{value:t._id,children:t.title},t._id))]})]}),e.jsx(B,{fullWidth:!0,variant:"outlined",required:!0,children:e.jsx(p,{id:"seating-capacity-input",label:"Seating Capacity*",variant:"outlined",value:pe,onChange:t=>Ze(t.target.value),placeholder:"Input how many persons can seat",type:"number",inputProps:{min:1}})}),e.jsxs(B,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(z,{id:"transmission-type-label",children:"Transmission Type*"}),e.jsxs(F,{labelId:"transmission-type-label",id:"transmission-type-select",value:he,label:"Transmission Type",onChange:t=>Qe(t.target.value),children:[e.jsx(l,{value:"",children:"Select transmission type"}),e.jsx(l,{value:"automatic",children:"Automatic"}),e.jsx(l,{value:"manual",children:"Manual"})]})]})]}),e.jsxs(Bt,{spacing:2,children:[e.jsx(p,{fullWidth:!0,label:"Model*",variant:"outlined",value:le,onChange:t=>Oe(t.target.value),placeholder:"Model Name",required:!0}),e.jsx(p,{fullWidth:!0,label:"Engine Capacity (cc)*",variant:"outlined",value:ce,onChange:t=>qe(t.target.value),placeholder:"Ex: 2000",type:"number",inputProps:{min:0},required:!0}),e.jsxs(B,{component:"fieldset",fullWidth:!0,children:[e.jsx(o,{variant:"body1",color:"text.secondary",sx:{mb:1},children:"Air Condition"}),e.jsxs($a,{row:!0,value:Ge,onChange:t=>Je(t.target.value),children:[e.jsx(re,{value:"yes",control:e.jsx(ne,{}),label:"Yes"}),e.jsx(re,{value:"no",control:e.jsx(ne,{}),label:"No"})]})]})]}),e.jsxs(Bt,{spacing:2,children:[e.jsxs(B,{fullWidth:!0,required:!0,children:[e.jsx(z,{children:"Parent Category"}),e.jsxs(F,{value:ae,label:"Parent Category",onChange:ja,children:[e.jsx(l,{value:"",children:"Select Parent Category"}),ba.map(t=>e.jsx(l,{value:t._id,children:t.title},t._id))]})]}),e.jsxs(B,{fullWidth:!0,required:!0,disabled:!ae,children:[e.jsx(z,{children:"Sub Category"}),e.jsxs(F,{value:we,label:"Sub Category",onChange:t=>jt(t.target.value),children:[e.jsx(l,{value:"",children:"Select Sub Category"}),ya.map(t=>e.jsx(l,{value:t._id,children:t.title},t._id))]})]}),e.jsx(p,{fullWidth:!0,label:"Engine Power (hp)*",variant:"outlined",value:ue,onChange:t=>Ue(t.target.value),placeholder:"Ex: 150",type:"number",inputProps:{min:0},required:!0}),e.jsxs(B,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(z,{id:"fuel-type-label",children:"Fuel Type*"}),e.jsxs(F,{labelId:"fuel-type-label",id:"fuel-type-select",value:ge,label:"Fuel Type",onChange:t=>Ke(t.target.value),children:[e.jsx(l,{value:"",children:"Select fuel type"}),e.jsx(l,{value:"petrol",children:"Petrol"}),e.jsx(l,{value:"diesel",children:"Diesel"}),e.jsx(l,{value:"electric",children:"Electric"}),e.jsx(l,{value:"hybrid",children:"Hybrid"})]})]})]})]}),e.jsx(i,{sx:{mt:3},children:e.jsxs(B,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(z,{id:"zone-label",children:"Zone*"}),e.jsxs(F,{labelId:"zone-label",id:"zone-select",value:de,label:"Zone",onChange:Aa,children:[e.jsx(l,{value:"",children:"Select zone"}),H.length>0?H.map(t=>e.jsx(l,{value:t._id,children:t.name},t._id)):e.jsx(l,{disabled:!0,children:"No zones available"})]})]})}),e.jsx(i,{sx:{mt:3},children:e.jsx(p,{fullWidth:!0,label:"Venue Address*",variant:"outlined",value:Te,onChange:t=>G(t.target.value),placeholder:"Enter venue address",required:!0})}),e.jsxs(i,{sx:{mt:3},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Location and Operating Hours"}),e.jsx(p,{fullWidth:!0,label:"Search Location",inputRef:Le,variant:"outlined",placeholder:"Enter a location",sx:{mb:2}}),e.jsxs(i,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(p,{sx:{flex:1},label:"Latitude*",variant:"outlined",value:E,onChange:t=>J(t.target.value),placeholder:"e.g., 25.2048",required:!0}),e.jsx(p,{sx:{flex:1},label:"Longitude*",variant:"outlined",value:T,onChange:t=>K(t.target.value),placeholder:"e.g., 55.2708",required:!0})]}),_&&_e?e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Click on the map below to select a location"}),e.jsx(i,{ref:De,sx:{height:300,width:"100%",borderRadius:d.shape.borderRadius,border:`1px solid ${d.palette.grey[300]}`,mb:2}})]}):e.jsx(i,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${d.palette.grey[300]}`,borderRadius:d.shape.borderRadius,mb:2},children:e.jsx(o,{variant:"body2",color:"text.secondary",children:"Map loading..."})}),e.jsx(p,{fullWidth:!0,label:"Operating Hours",variant:"outlined",value:Ie,onChange:t=>kt(t.target.value),placeholder:"e.g., 9:00 AM - 6:00 PM",multiline:!0,rows:2})]})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${d.palette.grey[200]}`},children:e.jsxs(W,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Attributes"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Select additional attributes for the vehicle"}),e.jsx(i,{sx:{display:"grid",gridTemplateColumns:D?"1fr":"repeat(3, 1fr)",gap:3},children:ga.map(t=>e.jsxs(B,{fullWidth:!0,children:[e.jsx(z,{children:t.title}),e.jsxs(F,{value:dt[t._id]||"",label:t.title,onChange:r=>Ea(t._id,r.target.value),children:[e.jsxs(l,{value:"",children:["Select ",t.title]}),t.values.map(r=>e.jsx(l,{value:r,children:r},r))]})]},t._id))})]})})})]})}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${d.palette.grey[200]}`},children:e.jsxs(W,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Additional Vehicle Details"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:D?"1fr":"repeat(3, 1fr)",gap:3},children:[e.jsxs(B,{fullWidth:!0,children:[e.jsx(z,{children:"Seat Type"}),e.jsxs(F,{value:ct,label:"Seat Type",onChange:t=>Mt(t.target.value),children:[e.jsx(l,{value:"",children:"Select Seat Type"}),e.jsx(l,{value:"cloth",children:"Cloth"}),e.jsx(l,{value:"leather",children:"Leather"}),e.jsx(l,{value:"vinyl",children:"Vinyl"}),e.jsx(l,{value:"alcantara",children:"Alcantara"}),e.jsx(l,{value:"other",children:"Other"})]})]}),e.jsx(p,{label:"Audio System",value:ut,onChange:t=>zt(t.target.value)}),e.jsxs(B,{fullWidth:!0,children:[e.jsx(z,{children:"Camera"}),e.jsxs(F,{value:pt,label:"Camera",onChange:t=>$t(t.target.value),children:[e.jsx(l,{value:"",children:"Select Camera"}),e.jsx(l,{value:"none",children:"None"}),e.jsx(l,{value:"rear",children:"Rear"}),e.jsx(l,{value:"front",children:"Front"}),e.jsx(l,{value:"360-degree",children:"360 Degree"}),e.jsx(l,{value:"multiple",children:"Multiple"})]})]}),e.jsx(p,{label:"Airbags",type:"number",value:ve,onChange:t=>Ft(t.target.value)}),e.jsx(p,{label:"Boot Space (Litres)",type:"number",value:Ce,onChange:t=>Rt(t.target.value)}),e.jsx(p,{label:"Fuel Tank Capacity (Litres)",type:"number",value:Se,onChange:t=>Nt(t.target.value)})]}),e.jsxs(i,{sx:{mt:3},children:[e.jsx(p,{fullWidth:!0,label:"Connectivity (comma separated)",placeholder:"Bluetooth, USB",value:ht.join(", "),onChange:t=>Vt(t.target.value.split(",").map(r=>r.trim()))}),e.jsx(p,{fullWidth:!0,label:"Sensors (comma separated)",placeholder:"Parking, Lane",sx:{mt:2},value:xt.join(", "),onChange:t=>Ht(t.target.value.split(",").map(r=>r.trim()))}),e.jsx(p,{fullWidth:!0,label:"Safety Features (comma separated)",placeholder:"ABS, Traction Control",sx:{mt:2},value:mt.join(", "),onChange:t=>qt(t.target.value.split(",").map(r=>r.trim()))}),e.jsx(p,{fullWidth:!0,label:"Insurance Included",placeholder:"Collision, Theft",sx:{mt:2},value:bt.join(", "),onChange:t=>Ut(t.target.value.split(",").map(r=>r.trim()))}),e.jsx(p,{fullWidth:!0,label:"Insurance Excluded",placeholder:"Personal Injury",sx:{mt:2},value:yt.join(", "),onChange:t=>Zt(t.target.value.split(",").map(r=>r.trim()))})]})]})})}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${d.palette.grey[200]}`},children:e.jsxs(W,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Identity"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the vehicle's license plate number"}),e.jsx(p,{fullWidth:!0,label:"License Plate Number*",variant:"outlined",value:ee,onChange:t=>{Ye(t.target.value),Et(t.target.value)},placeholder:"Type license plate number (6-8 alphanumeric)",required:!0,error:!!Dt,helperText:Dt})]})})}),e.jsxs(i,{sx:{mb:4},children:[e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${d.palette.grey[200]}`},children:e.jsxs(W,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Pricing & Discounts"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert pricing and discount information"}),e.jsxs(i,{sx:{mb:3},children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Trip Type"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Choose the trip type you prefer"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:D?"1fr":"repeat(3, 1fr)",gap:d.spacing(2)},children:[e.jsxs(w,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:g==="hourly"?"#E15B65":void 0,borderWidth:g==="hourly"?2:1},onClick:()=>$("hourly"),children:[e.jsx(re,{control:e.jsx(ne,{checked:g==="hourly",onChange:()=>$("hourly"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"Hourly",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Set your hourly rental price"})]}),e.jsxs(w,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:g==="perDay"?"#E15B65":void 0,borderWidth:g==="perDay"?2:1},onClick:()=>$("perDay"),children:[e.jsx(re,{control:e.jsx(ne,{checked:g==="perDay",onChange:()=>$("perDay"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"Per Day",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Set your per day rental price"})]}),e.jsxs(w,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:g==="distanceWise"?"#E15B65":void 0,borderWidth:g==="distanceWise"?2:1},onClick:()=>$("distanceWise"),children:[e.jsx(re,{control:e.jsx(ne,{checked:g==="distanceWise",onChange:()=>$("distanceWise"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"DistanceWise",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Set your distance wise rental price"})]})]})]}),g==="hourly"&&e.jsx(i,{sx:{mb:3},children:e.jsx(p,{fullWidth:!0,label:"Hourly Price (₹/per hour)*",variant:"outlined",value:xe,onChange:t=>et(t.target.value),placeholder:"Ex: 2500.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),g==="perDay"&&e.jsx(i,{sx:{mb:3},children:e.jsx(p,{fullWidth:!0,label:"Per Day Price (₹/per day)*",variant:"outlined",value:me,onChange:t=>tt(t.target.value),placeholder:"Ex: 15000.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),g==="distanceWise"&&e.jsx(i,{sx:{mb:3},children:e.jsx(p,{fullWidth:!0,label:"Distance Price (₹/per km)*",variant:"outlined",value:be,onChange:t=>at(t.target.value),placeholder:"Ex: 100.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),e.jsxs(i,{children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Discount"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Set a discount amount (e.g., 10 for 10%)"}),e.jsx(p,{fullWidth:!0,label:"Discount (%)",variant:"outlined",value:ye,onChange:t=>rt(t.target.value),placeholder:"Ex: 10",type:"number",inputProps:{step:"any",min:0,max:100}})]})]})}),e.jsx(w,{sx:{mt:3},children:e.jsxs(W,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Advance Booking Amount"}),e.jsx(p,{fullWidth:!0,type:"number",label:"Advance Amount",value:gt,onChange:t=>Ot(t.target.value),inputProps:{min:0},helperText:"Flat advance amount payable during booking"})]})})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${d.palette.grey[200]}`},children:e.jsxs(W,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Search Tags"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert tags for appearing in user search results"}),e.jsx(p,{fullWidth:!0,label:"Type and press Enter",variant:"outlined",value:je,onChange:ka,onKeyPress:Ta,placeholder:"Type and press Enter",sx:{mb:2}}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:nt.map((t,r)=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",backgroundColor:d.palette.grey[200],borderRadius:d.shape.borderRadius,px:1,py:.5},children:[e.jsx(o,{variant:"body2",children:t}),e.jsx(It,{size:"small",onClick:()=>Ia(t),children:e.jsx(o,{sx:{fontSize:14},children:"×"})})]},r))})]})})}),e.jsxs(i,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(oa,{variant:"outlined",color:"#E15B65",size:"large",onClick:Tt,sx:{color:"#E15B65"},children:Ae?"Cancel":"Reset"}),e.jsx(oa,{variant:"contained",type:"submit",size:"large",disabled:ke,startIcon:ke?e.jsx(sa,{size:20,color:"inherit"}):null,sx:{color:"white",bgcolor:"#E15B65"},children:ke?"Submitting...":Ae?"Update":"Submit"})]})]})]}),e.jsx(Ra,{open:ua,autoHideDuration:6e3,onClose:Xt,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{"& .MuiSnackbarContent-root":{minWidth:"600px",maxWidth:"600px",width:"auto"}},children:e.jsx(Na,{onClose:Xt,severity:Lt,sx:{width:"100%",backgroundColor:Lt==="success"?"#1976d2":"#d32f2f",color:"white","& .MuiAlert-message":{whiteSpace:"pre-line",wordBreak:"break-word",fontSize:"1rem",lineHeight:1.5}},children:pa})})]})};export{Za as default};
