import{w as Y,u as U,r as l,j as e,B as r,a3 as y,a7 as L,S as u,T as i,ak as R,al as E,g as m,G as c,s as q,a as J,F as _,ab as B,W as d,t as Z,am as K,an as Q,p as X,ao as D,q as z,V as ee,ae as te,a4 as se,M as re,D as ie,ac as ae,ap as oe,ag as ne,aq as le,ah as ce,ai as de,aj as xe,x as he}from"./index-D2YhpxGZ.js";import{S as ue}from"./Storefront-COGt2hz_.js";import{C as pe}from"./CheckCircle-5BE_48Dj.js";import{C as ge}from"./Cancel-e9BBWS2w.js";import{A as me}from"./Add-BcIEwuim.js";import{S as fe}from"./Search-owRyo6yI.js";import{R as je}from"./Refresh-CDJ1FLhB.js";import{C as ve}from"./CardMedia-DItgNm-u.js";import{E as be}from"./Edit-D8VgsimS.js";import{L as ye}from"./LocationOn-CadQztj1.js";import{G as Ce}from"./Group-Bmi41SU7.js";import{S as we}from"./EventSeat-ReCd1h1T.js";const a="#E15B65",Ae="#c14a54";function _e(){const f=Y();U();const C="https://api.bookmyevent.ae/api",N="https://api.bookmyevent.ae",[x,w]=l.useState([]),[O,$]=l.useState(!1),[o,A]=l.useState({seatingArrangement:"",status:"all",search:""}),[P,j]=l.useState(!1),[S,F]=l.useState(null),[I,n]=l.useState({open:!1,message:"",severity:"success"}),p=localStorage.getItem("token"),k=JSON.parse(localStorage.getItem("user")||"{}")._id,M=t=>{if(!t)return null;if(t.startsWith("http"))return t;const s=t.split("/").pop();return`${N}/uploads/venues/${s}`},W=l.useCallback(async()=>{if(!k||!p){n({open:!0,message:"Authentication required",severity:"error"});return}$(!0);try{const s=await(await fetch(`${C}/venues/provider/${k}`,{headers:{Authorization:`Bearer ${p}`}})).json();s.success?w(s.data||[]):n({open:!0,message:s.message||"Failed to fetch venues",severity:"error"})}catch{n({open:!0,message:"Error loading venues",severity:"error"})}finally{$(!1)}},[k,p]);l.useEffect(()=>{W()},[W]);const G=async(t,s)=>{try{(await(await fetch(`${C}/venues/${t}/toggle-active`,{method:"PATCH",headers:{Authorization:`Bearer ${p}`}})).json()).success?(w(b=>b.map(h=>h._id===t?{...h,isActive:!s}:h)),n({open:!0,message:"Status updated successfully",severity:"success"})):n({open:!0,message:"Failed to update status",severity:"error"})}catch{n({open:!0,message:"Error updating status",severity:"error"})}},H=async()=>{if(S)try{const s=await(await fetch(`${C}/venues/${S}`,{method:"DELETE",headers:{Authorization:`Bearer ${p}`}})).json();s.success?(w(g=>g.filter(v=>v._id!==S)),n({open:!0,message:"Venue deleted successfully",severity:"success"})):n({open:!0,message:s.message||"Failed to delete venue",severity:"error"})}catch{n({open:!0,message:"Error deleting venue",severity:"error"})}finally{j(!1),F(null)}},V=l.useMemo(()=>x.filter(t=>{var b,h;const s=!o.search||((b=t.venueName)==null?void 0:b.toLowerCase().includes(o.search.toLowerCase()))||((h=t.venueAddress)==null?void 0:h.toLowerCase().includes(o.search.toLowerCase())),g=!o.seatingArrangement||t.seatingArrangement===o.seatingArrangement,v=o.status==="all"||o.status==="active"&&t.isActive||o.status==="inactive"&&!t.isActive;return s&&g&&v}),[x,o]),T=l.useMemo(()=>({total:x.length,active:x.filter(t=>t.isActive).length,inactive:x.filter(t=>!t.isActive).length}),[x]);return e.jsxs(r,{sx:{bgcolor:"#F7FAFC",minHeight:"100vh",pb:8},children:[e.jsx(r,{sx:{background:`linear-gradient(135deg, ${a} 0%, #a44c7a 100%)`,color:"white",pt:6,pb:12,px:4,position:"relative",boxShadow:`0 10px 30px ${y(a,.3)}`},children:e.jsx(L,{maxWidth:"xl",children:e.jsxs(u,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},spacing:3,children:[e.jsxs(r,{children:[e.jsxs(i,{variant:"h4",sx:{fontWeight:900,mb:1,letterSpacing:"-1px",color:"white",display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(R,{sx:{fontSize:36}})," Venue Management"]}),e.jsx(u,{direction:"row",spacing:2,sx:{mt:2.5},children:[{label:"Total Venues",value:T.total,icon:e.jsx(ue,{sx:{fontSize:20}})},{label:"Active",value:T.active,icon:e.jsx(pe,{sx:{fontSize:20}})},{label:"Inactive",value:T.inactive,icon:e.jsx(ge,{sx:{fontSize:20}})}].map((t,s)=>e.jsx(E,{elevation:0,sx:{bgcolor:"rgba(255,255,255,0.12)",px:3,py:1.5,borderRadius:3,backdropFilter:"blur(8px)",color:"white",border:"1px solid rgba(255,255,255,0.2)",transition:"all 0.3s ease","&:hover":{bgcolor:"rgba(255,255,255,0.2)"}},children:e.jsxs(u,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsx(r,{sx:{color:"white",display:"flex"},children:t.icon}),e.jsxs(r,{children:[e.jsx(i,{variant:"h5",sx:{fontWeight:900,lineHeight:1,color:"white"},children:t.value}),e.jsx(i,{variant:"caption",sx:{fontWeight:700,opacity:.95,color:"white",textTransform:"uppercase",letterSpacing:"0.5px"},children:t.label})]})]})},s))})]}),e.jsx(m,{variant:"contained",size:"large",startIcon:e.jsx(me,{}),onClick:()=>f("/venue-setup/new"),sx:{bgcolor:"white",color:a,fontWeight:800,px:5,py:2,borderRadius:"20px",textTransform:"none",boxShadow:"0 15px 35px rgba(0,0,0,0.15)","&:hover":{bgcolor:"#f8f9ff",transform:"translateY(-5px)",boxShadow:"0 20px 45px rgba(0,0,0,0.2)"},transition:"all 0.3s"},children:"Add New Venue"})]})})}),e.jsxs(L,{maxWidth:"xl",sx:{mt:-6,position:"relative",zIndex:1},children:[e.jsx(E,{elevation:10,sx:{borderRadius:4,p:2,mb:4,bgcolor:"white"},children:e.jsxs(c,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(c,{item:!0,xs:12,md:4,children:e.jsx(q,{fullWidth:!0,placeholder:"Search venues...",value:o.search,onChange:t=>A(s=>({...s,search:t.target.value})),InputProps:{startAdornment:e.jsx(J,{position:"start",children:e.jsx(fe,{sx:{color:a}})}),sx:{borderRadius:3,bgcolor:"#f8fafc"}}})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(_,{fullWidth:!0,variant:"outlined",children:e.jsxs(B,{value:o.seatingArrangement,onChange:t=>A(s=>({...s,seatingArrangement:t.target.value})),displayEmpty:!0,sx:{borderRadius:3,bgcolor:"#f8fafc"},children:[e.jsx(d,{value:"",children:"Any Seating Arrangement"}),e.jsx(d,{value:"Amphitheater",children:"Amphitheater"}),e.jsx(d,{value:"Balcony auditorium",children:"Balcony auditorium"}),e.jsx(d,{value:"Flat floor auditorium",children:"Flat floor auditorium"})]})})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(_,{fullWidth:!0,variant:"outlined",children:e.jsxs(B,{value:o.status,onChange:t=>A(s=>({...s,status:t.target.value})),sx:{borderRadius:3,bgcolor:"#f8fafc"},children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"active",children:"Active Only"}),e.jsx(d,{value:"inactive",children:"Inactive Only"})]})})}),e.jsx(c,{item:!0,xs:12,md:2,children:e.jsx(m,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(je,{}),onClick:W,sx:{borderRadius:3,py:1.5,color:a,borderColor:a,"&:hover":{borderColor:Ae,bgcolor:y(a,.05)}},children:"Refresh"})})]})}),O?e.jsx(r,{sx:{display:"flex",justifyContent:"center",py:10},children:e.jsx(Z,{size:60,thickness:4,sx:{color:a}})}):V.length===0?e.jsx(K,{in:!0,children:e.jsxs(E,{sx:{textAlign:"center",py:10,borderRadius:6,border:"2px dashed #e2e8f0"},children:[e.jsx(R,{sx:{fontSize:80,color:"#cbd5e0",mb:2}}),e.jsx(i,{variant:"h5",sx:{fontWeight:700,color:"#4a5568"},children:"No Venues Found"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Try adjusting your filters or add a new venue to your collection."})]})}):e.jsx(c,{container:!0,spacing:4,children:V.map((t,s)=>e.jsx(c,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Q,{in:!0,style:{transitionDelay:`${s*50}ms`},children:e.jsxs(X,{sx:{height:"100%",borderRadius:6,overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.05)",transition:"all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)","&:hover":{transform:"translateY(-10px)",boxShadow:`0 20px 40px ${y(a,.1)}`,"& .media-overlay":{opacity:1}}},children:[e.jsxs(r,{sx:{position:"relative",pt:"60%",bgcolor:"#f7fafc"},children:[t.thumbnail?e.jsx(ve,{component:"img",image:M(t.thumbnail),alt:t.venueName,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(r,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(R,{sx:{fontSize:60,color:"#e2e8f0"}})}),e.jsxs(r,{className:"media-overlay",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:y(a,.4),display:"flex",alignItems:"center",justifyContent:"center",gap:2,opacity:0,transition:"0.3s",backdropFilter:"blur(4px)"},children:[e.jsx(D,{title:"View Details",children:e.jsx(z,{sx:{bgcolor:"white",color:a,cursor:"pointer"},onClick:()=>f(`/venue-setup/listview/${t._id}`),children:e.jsx(ee,{})})}),e.jsx(D,{title:"Edit Venue",children:e.jsx(z,{sx:{bgcolor:"white",color:"#2b6cb0",cursor:"pointer"},onClick:()=>f(`/venue-setup/new/${t._id}`),children:e.jsx(be,{})})}),e.jsx(D,{title:"Delete Permanently",children:e.jsx(z,{sx:{bgcolor:"white",color:"#c53030",cursor:"pointer"},onClick:()=>{F(t._id),j(!0)},children:e.jsx(te,{})})})]}),e.jsx(r,{sx:{position:"absolute",top:15,left:15},children:e.jsx(se,{label:t.isActive?"ACTIVE":"INACTIVE",size:"small",sx:{bgcolor:t.isActive?"#48bb78":"#a0aec0",color:"white",fontWeight:900,borderRadius:2}})})]}),e.jsxs(re,{sx:{p:3},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:800,mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.venueName}),e.jsxs(u,{spacing:1.5,children:[e.jsxs(r,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[e.jsx(ye,{sx:{fontSize:18,color:a,mt:.3}}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.venueAddress||"No address provided"})]}),e.jsx(ie,{sx:{borderStyle:"dashed"}}),e.jsxs(c,{container:!0,spacing:1,children:[e.jsxs(c,{item:!0,xs:6,children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,display:"block"},children:"CAPACITY"}),e.jsxs(u,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(Ce,{sx:{fontSize:16,color:"#718096"}}),e.jsx(i,{variant:"body2",sx:{fontWeight:700},children:t.maxGuestsSeated||"-"})]})]}),e.jsxs(c,{item:!0,xs:6,children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,display:"block"},children:"SEATING"}),e.jsxs(u,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(we,{sx:{fontSize:16,color:"#718096"}}),e.jsx(i,{variant:"body2",sx:{fontWeight:700},children:t.seatingArrangement||"N/A"})]})]})]})]}),e.jsxs(r,{sx:{mt:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"STATUS"}),e.jsx(ae,{checked:t.isActive,onChange:()=>G(t._id,t.isActive),size:"small",color:"success"})]}),e.jsx(m,{size:"small",endIcon:e.jsx(oe,{}),onClick:()=>f(`/venue-setup/listview/${t._id}`),sx:{textTransform:"none",fontWeight:700,color:a},children:"Details"})]})]})]})})},t._id))})]}),e.jsxs(ne,{open:P,onClose:()=>j(!1),PaperProps:{sx:{borderRadius:5,p:1}},children:[e.jsx(le,{sx:{fontWeight:900,textAlign:"center"},children:"Permanently Delete?"}),e.jsx(ce,{sx:{textAlign:"center"},children:e.jsx(i,{color:"text.secondary",children:"Are you sure you want to delete this venue? This action cannot be undone and will remove all related data."})}),e.jsxs(de,{sx:{justifyContent:"center",pb:3,gap:2},children:[e.jsx(m,{onClick:()=>j(!1),sx:{borderRadius:3,fontWeight:700},children:"Cancel"}),e.jsx(m,{onClick:H,variant:"contained",sx:{bgcolor:"#c53030",borderRadius:3,fontWeight:700,"&:hover":{bgcolor:"#9b2c2c"}},children:"Yes, Delete"})]})]}),e.jsx(xe,{open:I.open,autoHideDuration:4e3,onClose:()=>n(t=>({...t,open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(he,{severity:I.severity,variant:"filled",sx:{borderRadius:4,fontWeight:700},children:I.message})})]})}export{_e as default};
