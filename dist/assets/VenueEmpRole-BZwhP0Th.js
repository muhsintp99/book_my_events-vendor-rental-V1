import{r as s,j as e,B as n,T as m,s as i,aZ as Q,f as X,C as Y,g as k,a as ee,ad as te,b as B,ar as ae,ao as se,x as le}from"./index-NmwXB4G_.js";import{S as re}from"./Search-DrxmEvip.js";import{E as oe}from"./Edit-L4sLCSn8.js";import{T as ne,a as ie}from"./Tabs-D64_0tlh.js";import{T as ce}from"./TableContainer-mgNQFLKL.js";import{T as de,a as ue,b as L,c as r,d as he}from"./TableRow-BnRWK6ul.js";const je=()=>{const[M,V]=s.useState("Role name example"),[u,p]=s.useState({Trip:!1,Vehicle:!1,Driver:!1,Marketing:!1,"Store setup":!1,"My wallet":!1,Profile:!1,Employees:!1,"My shop":!1,Reviews:!1,Chat:!1,Report:!1}),[h,S]=s.useState(0),[x,f]=s.useState(""),[I,y]=s.useState(""),[W,R]=s.useState(""),[O,T]=s.useState(""),[F,w]=s.useState(""),[$,E]=s.useState(""),[q,D]=s.useState(!1),[P,z]=s.useState(""),[c,b]=s.useState(()=>{const t=localStorage.getItem("roles");return t?JSON.parse(t):[{id:1,roleName:"manager",modules:"Vehicle",createdAt:"11-Sep-25"}]}),[G,g]=s.useState(!1),[d,j]=s.useState(null);s.useEffect(()=>{localStorage.setItem("roles",JSON.stringify(c)),window.dispatchEvent(new Event("rolesUpdated"))},[c]);const H=t=>{p({...u,[t.target.name]:t.target.checked})},J=(t,a)=>{S(a)},U=t=>{if(t.preventDefault(),!x.trim()){alert("Role name is required to submit.");return}const a=Object.entries(u).filter(([l,C])=>C).map(([l])=>l).join(", "),o={id:d?d.id:Date.now(),roleName:x.trim(),modules:a||"None",createdAt:d?d.createdAt:new Date().toLocaleDateString("en-GB")};d?(b(c.map(l=>l.id===d.id?o:l)),g(!1),j(null)):b([...c,o]),console.log({roleName:M,permissions:u}),D(!0),A()},A=()=>{V("Role name example"),p({Trip:!1,Vehicle:!1,Driver:!1,Marketing:!1,"Store setup":!1,"My wallet":!1,Profile:!1,Employees:!1,"My shop":!1,Reviews:!1,Chat:!1,Report:!1}),f(""),y(""),R(""),T(""),w(""),E(""),g(!1),j(null)},N=(t,a)=>{a!=="clickaway"&&D(!1)},Z=t=>{b(c.filter(a=>a.id!==t))},_=t=>{g(!0),j(t),f(t.roleName),S(0);const a={...u};t.modules.split(", ").forEach(o=>{o in a&&(a[o]=!0)}),p(a)};function v(t){const{children:a,value:o,index:l,...C}=t;return e.jsx("div",{role:"tabpanel",hidden:o!==l,id:`simple-tabpanel-${l}`,"aria-labelledby":`simple-tab-${l}`,...C,children:o===l&&e.jsx(n,{sx:{p:3},children:a})})}function K(t){return{id:`simple-tab-${t}`,"aria-controls":`simple-tabpanel-${t}`}}return e.jsxs(n,{sx:{p:3,width:1200,margin:"auto",backgroundColor:"white"},children:[e.jsxs(m,{variant:"h6",gutterBottom:!0,children:[e.jsx("span",{role:"img","aria-label":"user",children:"ðŸ‘¤"})," Custom Role"]}),e.jsxs(n,{component:"form",sx:{backgroundColor:"#fff",p:2,borderRadius:1,boxShadow:1},children:[e.jsx(m,{variant:"subtitle1",gutterBottom:!0,children:"Role Form"}),e.jsx(n,{sx:{mb:2},children:e.jsx(n,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:e.jsx(ne,{value:h,onChange:J,"aria-label":"language tabs",children:e.jsx(ie,{label:"Default",...K(0)})})})}),e.jsxs(v,{value:h,index:0,children:[e.jsx(i,{fullWidth:!0,label:"Role name (Default)*",variant:"outlined",value:x,onChange:t=>f(t.target.value),placeholder:"Type role name",sx:{mb:2},required:!0,inputProps:{maxLength:100}}),e.jsx(i,{fullWidth:!0,label:"Short description (Default)",variant:"outlined",multiline:!0,rows:4,value:I,onChange:t=>y(t.target.value),placeholder:"Type short description",inputProps:{maxLength:500}})]}),e.jsxs(v,{value:h,index:1,children:[e.jsx(i,{fullWidth:!0,label:"Role name (English)",variant:"outlined",value:W,onChange:t=>R(t.target.value),placeholder:"Type role name in English",sx:{mb:2},inputProps:{maxLength:100}}),e.jsx(i,{fullWidth:!0,label:"Short description (English)",variant:"outlined",multiline:!0,rows:4,value:O,onChange:t=>T(t.target.value),placeholder:"Type short description in English",inputProps:{maxLength:500}})]}),e.jsxs(v,{value:h,index:2,children:[e.jsx(i,{fullWidth:!0,label:"Role name (Arabic)",variant:"outlined",value:F,onChange:t=>w(t.target.value),placeholder:"Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",sx:{mb:2},dir:"rtl",inputProps:{style:{textAlign:"right"},maxLength:100}}),e.jsx(i,{fullWidth:!0,label:"Short description (Arabic)",variant:"outlined",multiline:!0,rows:4,value:$,onChange:t=>E(t.target.value),placeholder:"Ø§ÙƒØªØ¨ ÙˆØµÙÙ‹Ø§ Ù‚ØµÙŠØ±Ù‹Ø§ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",dir:"rtl",inputProps:{style:{textAlign:"right"},maxLength:500}})]}),e.jsx(m,{variant:"subtitle1",gutterBottom:!0,children:"Module Permission :"}),e.jsx(Q,{row:!0,sx:{justifyContent:"space-between",mb:2},children:["Venue","Profile","Employees","Reviews"].map(t=>e.jsx(X,{control:e.jsx(Y,{checked:u[t],onChange:H,name:t}),label:t},t))}),e.jsxs(n,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(k,{variant:"outlined",color:"#E15B65",onClick:A,sx:{color:"#E15B65"},children:"Reset"}),e.jsx(k,{variant:"contained",color:"primary",onClick:U,sx:{color:"white",bgcolor:"#E15B65"},children:"Submit"})]})]}),!G&&e.jsxs(n,{sx:{mt:5,backgroundColor:"#fff",p:2,borderRadius:1,boxShadow:1},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(m,{variant:"h6",children:"ðŸ“‹ Roles Table"}),e.jsx(i,{size:"small",placeholder:"Search role",value:P,onChange:t=>z(t.target.value),InputProps:{endAdornment:e.jsx(ee,{position:"end",children:e.jsx(re,{})})}})]}),e.jsx(ce,{component:te,children:e.jsxs(de,{children:[e.jsx(ue,{sx:{backgroundColor:"#f9fafb"},children:e.jsxs(L,{children:[e.jsx(r,{children:"Sl#"}),e.jsx(r,{children:"Role Name"}),e.jsx(r,{children:"Modules"}),e.jsx(r,{children:"Created At"}),e.jsx(r,{children:"Action"})]})}),e.jsx(he,{children:c.filter(t=>t.roleName.toLowerCase().includes(P.toLowerCase())).map((t,a)=>e.jsxs(L,{children:[e.jsx(r,{children:a+1}),e.jsx(r,{children:t.roleName}),e.jsx(r,{children:t.modules}),e.jsx(r,{children:t.createdAt}),e.jsxs(r,{children:[e.jsx(B,{color:"primary",onClick:()=>_(t),children:e.jsx(oe,{})}),e.jsx(B,{color:"error",onClick:()=>Z(t.id),children:e.jsx(ae,{})})]})]},t.id))})]})})]}),e.jsx(se,{open:q,autoHideDuration:3e3,onClose:N,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(le,{onClose:N,severity:"info",sx:{backgroundColor:"#1976d2",color:"white"},children:"Role updated successfully!"})})]})};export{je as default};
