import{d as z,r as i,j as e,B as s,T as n,b as u,a as B,Z as E,c as T,G as C,C as W,q as M,w as N,s as R,o as S,a1 as _,z as H,v as L,H as O,a4 as F,K as G,N as K,e as q,f}from"./index-CWJg_lwt.js";import{C as k}from"./Celebration-C8fy2RSX.js";import{A as J}from"./Add-GGc6Xt8k.js";import{S as Y}from"./Search-WfmjaGyn.js";import{C as Z}from"./CardMedia-UFdY_0kj.js";const d="https://api.bookmyevent.ae",t="#C62828",Q="#8E0000";function te(){const m=z(),h=JSON.parse(localStorage.getItem("user")||"{}"),x=h==null?void 0:h._id,p=localStorage.getItem("token"),[w,A]=i.useState([]),[j,I]=i.useState(""),[P,v]=i.useState(!0),[b,c]=i.useState(null),[l,r]=i.useState({open:!1,message:"",severity:"success"}),g=async()=>{var a;try{v(!0);const o=await f.get(`${d}/api/panthal/vendor/${x}`,{headers:{Authorization:`Bearer ${p}`}});A(((a=o.data)==null?void 0:a.data)||[])}catch(o){console.error("Error fetching panthal packages:",o)}finally{v(!1)}};i.useEffect(()=>{x&&g()},[x]);const y=w.filter(a=>(a.packageName||"").toLowerCase().includes(j.toLowerCase())),D=async(a,o)=>{try{await f.put(`${d}/api/panthal/${a}`,{isActive:!o},{headers:{Authorization:`Bearer ${p}`}}),g(),r({open:!0,message:`Package ${o?"deactivated":"activated"}`,severity:"success"})}catch{r({open:!0,message:"Toggle failed",severity:"error"})}},$=async()=>{try{await f.delete(`${d}/api/panthal/${b}`,{headers:{Authorization:`Bearer ${p}`}}),c(null),g(),r({open:!0,message:"Package deleted",severity:"success"})}catch{r({open:!0,message:"Delete failed",severity:"error"})}};return e.jsxs(s,{sx:{p:3,bgcolor:"#fafafa",minHeight:"100vh"},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(k,{sx:{color:t,fontSize:32}}),e.jsx(n,{variant:"h4",sx:{fontWeight:800,color:t},children:"Panthal & Decoration Packages"})]}),e.jsx(u,{variant:"contained",startIcon:e.jsx(J,{}),sx:{bgcolor:t,"&:hover":{bgcolor:Q},borderRadius:2,fontWeight:700,px:3},onClick:()=>m("/panthal/addpackage"),children:"Add Package"})]}),e.jsx(B,{fullWidth:!0,placeholder:"Search panthal & decoration packages...",value:j,onChange:a=>I(a.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(Y,{})})},sx:{mb:3,bgcolor:"#fff",borderRadius:2,"& .MuiOutlinedInput-root":{borderRadius:2}}}),P?e.jsx(s,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(T,{sx:{color:t}})}):y.length===0?e.jsxs(s,{sx:{textAlign:"center",py:8},children:[e.jsx(k,{sx:{fontSize:64,color:"#ccc",mb:2}}),e.jsx(n,{variant:"h6",color:"text.secondary",children:"No packages found"})]}):e.jsx(C,{container:!0,spacing:3,children:y.map(a=>e.jsx(C,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(W,{sx:{borderRadius:3,overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"0.3s","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(0,0,0,0.12)"}},children:[e.jsx(Z,{component:"img",height:"180",image:a.image?`${d}/${a.image}`:"https://via.placeholder.com/300x180?text=Panthal",sx:{objectFit:"cover"}}),e.jsxs(M,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:1},children:[e.jsx(n,{variant:"h6",fontWeight:700,noWrap:!0,sx:{maxWidth:"70%"},children:a.packageName}),e.jsx(N,{label:a.isActive?"Active":"Inactive",size:"small",sx:{bgcolor:a.isActive?"#e8f5e9":"#ffebee",color:a.isActive?"#2e7d32":"#c62828",fontWeight:700}})]}),e.jsxs(n,{variant:"h5",fontWeight:800,color:t,sx:{mb:1},children:["â‚¹",a.packagePrice||0]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:a.description||"No description"}),e.jsxs(R,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[e.jsxs(s,{children:[e.jsx(S,{size:"small",onClick:()=>m(`/panthal/edit/${a._id}`),sx:{color:t},children:e.jsx(_,{fontSize:"small"})}),e.jsx(S,{size:"small",onClick:()=>c(a._id),sx:{color:"#ef5350"},children:e.jsx(H,{fontSize:"small"})})]}),e.jsx(L,{checked:a.isActive,onChange:()=>D(a._id,a.isActive),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:t},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{bgcolor:t}}})]})]})]})},a._id))}),e.jsxs(O,{open:!!b,onClose:()=>c(null),children:[e.jsx(F,{children:"Delete this package?"}),e.jsxs(G,{children:[e.jsx(u,{onClick:()=>c(null),children:"Cancel"}),e.jsx(u,{onClick:$,color:"error",variant:"contained",children:"Delete"})]})]}),e.jsx(K,{open:l.open,autoHideDuration:3e3,onClose:()=>r({...l,open:!1}),children:e.jsx(q,{severity:l.severity,children:l.message})})]})}export{te as default};
