import{c as Ee,j as e,u as is,i as os,aj as ls,w as ds,ai as cs,r as a,h as H,B as n,b as at,ak as us,T as r,t as Sa,p as G,W as xe,s as f,am as gs,S as U,F as C,I as k,ag as A,$ as l,at as fe,f as p,an as B,C as Q,G as $,al as hs,g as pe,ao as xs,x as fs}from"./index-ClBsW6WP.js";import{D as wa}from"./DirectionsCar-BU7XDlSN.js";import{C as aa}from"./CloudUpload-CAUVY-kZ.js";import{S as ka,W as Aa}from"./Wifi-BlDEH7Xg.js";import{S as ps}from"./Settings-Dp_Rue15.js";const Ia=Ee(e.jsx("path",{d:"M4 18v3h3v-3h10v3h3v-6H4zm15-8h3v3h-3zM2 10h3v3H2zm15 3H7V5c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2z"})),ms=Ee(e.jsx("path",{d:"M17 6h-2V3c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v3H7c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2 0 .55.45 1 1 1s1-.45 1-1h6c0 .55.45 1 1 1s1-.45 1-1c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2M9.5 18H8V9h1.5zm3.25 0h-1.5V9h1.5zm.75-12h-3V3.5h3zM16 18h-1.5V9H16z"})),bs=Ee(e.jsx("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3z"})),js=Ee(e.jsx("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.1-.9-2-2-2m0 14H3V5h18z"})),ys=Ee(e.jsx("path",{d:"M3 9v6h4l5 5V4L7 9zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77"})),sa=gs(n)(({theme:h})=>({border:"2px dashed #e0e0e0",borderRadius:h.shape.borderRadius,padding:h.spacing(3),textAlign:"center",backgroundColor:h.palette.grey[50],cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"150px","&:hover":{borderColor:h.palette.primary.main},'& input[type="file"]':{display:"none"}})),Js=()=>{const h=is(),N=os(h.breakpoints.down("md")),re=ls(),st=ds(),{id:me}=cs(),rt=a.useRef(null),I=a.useRef(null),nt=a.useRef(null),[Ea,Pa]=a.useState(""),[be,Pe]=a.useState(""),[Te,it]=a.useState(""),[We,ot]=a.useState(""),[lt,dt]=a.useState(""),[ct,ut]=a.useState(""),[Be,gt]=a.useState(""),[ze,Re]=a.useState("normal"),[Me,Le]=a.useState(""),[ht,xt]=a.useState("no"),[ft,ra]=a.useState("no"),[Cs,Ta]=a.useState(""),[je,pt]=a.useState(""),[mt,bt]=a.useState(""),[jt,yt]=a.useState(""),[Ct,vt]=a.useState(""),[St,wt]=a.useState(""),[ye,kt]=a.useState(""),[Wa,na]=a.useState(""),[At,It]=a.useState(""),[m,ee]=a.useState({leatherSeats:!1,adjustableSeats:!1,armrest:!1,musicSystem:!1,bluetooth:!1,usbAux:!1,airbags:!1,abs:!1,rearCamera:!1,parkingSensors:!1,powerWindows:!1,centralLock:!1,keylessEntry:!1,wifi:!1,chargingPoints:!1}),[b,te]=a.useState({curtains:!1,readingLights:!1,footRest:!1,bottleHolder:!1,musicSystem:!1,microphone:!1,ledDisplay:!1,tvScreen:!1,fireExtinguisher:!1,firstAidKit:!1,ledEmergencyExit:!1,cctv:!1,luggageCarrier:!1,overheadStorage:!1,wifi:!1,chargingPoints:!1}),E="https://api.bookmyevent.ae/api",Et="AIzaSyAfLUm1kPmeMkHh1Hr5nbgNpQJOsNa7B78",Ce=localStorage.getItem("moduleId");a.useMemo(()=>{var t;return(t=re.state)==null?void 0:t.vehicle},[re.state]);const Ba=a.useMemo(()=>{var t,s;return(s=(t=re.state)==null?void 0:t.vehicle)==null?void 0:s._id},[re.state]),ve=a.useMemo(()=>{var t,s;return me||((s=(t=re.state)==null?void 0:t.vehicle)==null?void 0:s._id)||""},[me,Ba]),za=a.useMemo(()=>ve?"edit":"create",[ve]),[Se,Pt]=a.useState(za),[De,Tt]=a.useState(""),[Wt,Bt]=a.useState(""),[ae,zt]=a.useState(null),[q,Fe]=a.useState([]),[_e,Rt]=a.useState(""),[Ve,Mt]=a.useState(""),[vs,Ra]=a.useState(""),[He,Lt]=a.useState(""),[we,Dt]=a.useState(""),[$e,Ft]=a.useState(""),[ne,ie]=a.useState("yes"),[Ne,_t]=a.useState(""),[ia,oa]=a.useState(""),[Ss,Ma]=a.useState("hourly"),[ws,La]=a.useState(""),[ks,Da]=a.useState(""),[As,Fa]=a.useState(""),[Ke,Vt]=a.useState(""),[F,oe]=a.useState({driverIncluded:!1,sunroof:!1,decorationAvailable:!1}),[ke,Ht]=a.useState(""),[z,K]=a.useState([{heading:"",points:[""]}]),[$t,Oe]=a.useState([]),[Ge,Nt]=a.useState(""),[_a,v]=a.useState(!1),[Va,S]=a.useState(""),[la,w]=a.useState("success"),[Kt,Ot]=a.useState([]),[Ha,Is]=a.useState([]),[Es,$a]=a.useState([]),[Ps,Ts]=a.useState({}),[Ws,Bs]=a.useState(""),[zs,Rs]=a.useState(""),[Ms,Ls]=a.useState(""),[Ds,Fs]=a.useState(""),[_s,Vs]=a.useState(""),[Hs,$s]=a.useState(""),[Ns,Na]=a.useState({}),[da,Gt]=a.useState([]),[_,Ut]=a.useState([]),[Ka,se]=a.useState([]),[T,Ue]=a.useState(""),[qe,le]=a.useState(""),qt=!!T,[de,Zt]=a.useState([]),[ca,ua]=a.useState(!1),[Ze,R]=a.useState(!1),[Je,Ye]=a.useState(""),[Ae,Xe]=a.useState([]),[Qe,ce]=a.useState(""),[M,ue]=a.useState(""),[L,ge]=a.useState(""),[Ks,Oa]=a.useState(""),[O,ga]=a.useState(!1),[j,ha]=a.useState(null),W=a.useMemo(()=>{var s;if(!T||!_.length)return!1;const t=_.find(o=>o._id===T);return console.log("Category check (Bus):",t==null?void 0:t.title),(s=t==null?void 0:t.title)==null?void 0:s.toLowerCase().includes("bus")},[T,_]),he=a.useMemo(()=>{var s,o;if(!T||!_.length)return!1;const t=_.find(i=>i._id===T);return console.log("Category check (Car):",t==null?void 0:t.title),((s=t==null?void 0:t.title)==null?void 0:s.toLowerCase().includes("car"))||((o=t==null?void 0:t.title)==null?void 0:o.toLowerCase().includes("vehicle"))},[T,_]),Ga=t=>{const s=Array.from(t.target.files);Gt(o=>[...o,...s])},Ua=t=>{t.preventDefault();const s=Array.from(t.dataTransfer.files);Gt(o=>[...o,...s])};a.useEffect(()=>{if(window.google&&window.google.maps){ga(!0);return}const t=document.createElement("script");return t.src=`https://maps.googleapis.com/maps/api/js?key=${Et}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{ga(!0)},document.head.appendChild(t),()=>{document.head.contains(t)&&document.head.removeChild(t)}},[Et]),a.useEffect(()=>{O&&window.google&&window.google.maps&&qa()},[O]);const qa=a.useCallback(()=>{if(!window.google||!rt.current||!O)return;const t=M&&L?parseFloat(M):20.5937,s=M&&L?parseFloat(L):78.9629,o={lat:t,lng:s},i=new window.google.maps.Map(rt.current,{zoom:12,center:o});i.addListener("click",u=>{const x=u.latLng.lat(),g=u.latLng.lng();ue(x.toString()),ge(g.toString()),I.current&&I.current.setMap(null),I.current=new window.google.maps.Marker({position:{lat:x,lng:g},map:i}),new window.google.maps.Geocoder().geocode({location:{lat:x,lng:g}},(D,V)=>{V==="OK"&&D[0]?(ce(D[0].formatted_address),S("Location set and address auto-filled!"),w("success"),v(!0)):(S("Location set, but could not determine address."),w("info"),v(!0))})}),ha(i)},[O,M,L]);a.useEffect(()=>{if(!O||!j||!nt.current||!window.google)return;const t=new window.google.maps.places.Autocomplete(nt.current,{fields:["place_id","geometry","name","formatted_address"]}),s=t.addListener("place_changed",()=>{const o=t.getPlace();if(!o.geometry||!o.geometry.location)return;const i=o.geometry.location;o.geometry.viewport?j.fitBounds(o.geometry.viewport):(j.setCenter(i),j.setZoom(17)),I.current&&I.current.setMap(null),I.current=new window.google.maps.Marker({position:i,map:j}),ue(i.lat().toString()),ge(i.lng().toString()),ce(o.formatted_address||o.name),S("Location selected!"),w("success"),v(!0)});return()=>{window.google&&window.google.maps.event&&window.google.maps.event.removeListener(s)}},[O,j]),a.useEffect(()=>{if(!j||!M||!L)return;const t={lat:parseFloat(M),lng:parseFloat(L)};j.setCenter(t),j.setZoom(12),I.current?I.current.setPosition(t):I.current=new window.google.maps.Marker({position:t,map:j})},[M,L,j]),a.useEffect(()=>{if(!we||!O||!window.google||!window.google.maps)return;new window.google.maps.Geocoder().geocode({address:we},(s,o)=>{if(o==="OK"&&s[0]){const i=s[0].geometry.location,u=i.lat().toString(),x=i.lng().toString();ue(u),ge(x),ce(s[0].formatted_address),j&&(j.setCenter({lat:i.lat(),lng:i.lng()}),j.setZoom(12),I.current&&I.current.setMap(null),I.current=new window.google.maps.Marker({position:{lat:i.lat(),lng:i.lng()},map:j})),S(`Location set for ${we}!`),w("success"),v(!0)}else S(`Could not find location for ${we}`),w("warning"),v(!0)})},[we,O,j]);const Jt=a.useCallback(t=>{var i,u,x,g,P,D,V,J,Y,X,c,y,tt,ma,ba,ja,ya,Ca,va;console.log("Setting vehicle data:",t),t.brand&&t.brand._id&&!Kt.some(d=>d._id===t.brand._id)&&Ot(d=>[...d,{_id:t.brand._id,title:t.brand.title||t.brand.name||"Unknown Brand"}]),t.featuredImage&&Ye(t.featuredImage),t.galleryImages&&Array.isArray(t.galleryImages)&&Xe(t.galleryImages),(i=t.category)!=null&&i._id&&(Ue(t.category._id),H.get(`${E}/categories/parents/${t.category._id}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(d=>se(d.data.data||[])).catch(()=>se([]))),t.subCategory&&(typeof t.subCategory=="object"&&t.subCategory._id?le(t.subCategory._id):typeof t.subCategory=="string"&&le(t.subCategory)),t.zone&&t.zone._id&&!de.some(d=>d._id===t.zone._id)&&Zt(d=>[...d,{_id:t.zone._id,name:t.zone.name||"Unknown Zone"}]);const s=((u=t.zone)==null?void 0:u._id)||"";Lt(s);const o=de.find(d=>d._id===s)||t.zone&&{name:t.zone.name};Dt(o?o.name:""),Tt(t.name||""),Bt(t.description||""),Rt(((x=t.brand)==null?void 0:x._id)||""),Mt(t.model||""),_t(t.licensePlateNumber||""),t.capacityAndComfort&&(Ft(((g=t.capacityAndComfort.seatingCapacity)==null?void 0:g.toString())||""),xt(t.capacityAndComfort.pushbackSeats?"yes":"no"),ra(t.capacityAndComfort.reclinerSeats?"yes":"no")),t.engineCharacteristics&&(Pe(((P=t.engineCharacteristics.transmissionType)==null?void 0:P.value)||""),it(((D=t.engineCharacteristics.powerBHP)==null?void 0:D.toString())||""),ot(((V=t.engineCharacteristics.engineCapacityCC)==null?void 0:V.toString())||""),dt(t.engineCharacteristics.torque||""),ut(t.engineCharacteristics.mileage||""),Le(t.engineCharacteristics.fuelType||""),ie(t.engineCharacteristics.airConditioning?"yes":"no")),t.location&&(ce(t.location.address||""),ue(((J=t.location.latitude)==null?void 0:J.toString())||""),ge(((Y=t.location.longitude)==null?void 0:Y.toString())||"")),t.availability&&(oe(d=>({...d,driverIncluded:t.availability.driverIncluded??!1,sunroof:t.availability.sunroof??!1})),t.availability.acAvailable!==void 0&&ie(t.availability.acAvailable?"yes":"no")),t.features&&(t.features.interiorFeatures&&te(d=>({...d,curtains:t.features.interiorFeatures.curtains??!1,readingLights:t.features.interiorFeatures.readingLights??!1,footRest:t.features.interiorFeatures.footRest??!1})),t.features.entertainment&&te(d=>({...d,musicSystem:t.features.entertainment.musicSystem??!1,microphone:t.features.entertainment.microphone??!1,ledDisplay:t.features.entertainment.lcdDisplay??!1,tvScreen:t.features.entertainment.tvScreen??!1})),t.features.safetyAndCompliance&&te(d=>({...d,fireExtinguisher:t.features.safetyAndCompliance.fireExtinguisher??!1,firstAidKit:t.features.safetyAndCompliance.firstAidKit??!1,ledEmergencyExit:t.features.safetyAndCompliance.emergencyExit??!1,cctv:t.features.safetyAndCompliance.cctv??!1})),t.features.storage&&te(d=>({...d,luggageCarrier:t.features.storage.luggageCarrier??!1,overheadStorage:t.features.storage.overheadStorage??!1})),t.features.interiorComfort&&ee(d=>({...d,leatherSeats:t.features.interiorComfort.leatherSeats??!1,adjustableSeats:t.features.interiorComfort.adjustableSeats??!1,armrest:t.features.interiorComfort.armrest??!1})),t.features.entertainment&&ee(d=>({...d,musicSystem:t.features.entertainment.musicSystem??!1,bluetooth:t.features.entertainment.bluetooth??!1,usbAux:t.features.entertainment.usbAux??!1})),t.features.safety&&ee(d=>({...d,airbags:t.features.safety.airbags??!1,abs:t.features.safety.abs??!1,rearCamera:t.features.safety.rearCamera??!1,parkingSensors:t.features.safety.parkingSensors??!1})),t.features.convenience&&ee(d=>({...d,powerWindows:t.features.convenience.powerWindows??!1,centralLock:t.features.convenience.centralLock??!1,keylessEntry:t.features.convenience.keylessEntry??!1}))),t.extraAddons&&(((c=(X=t.category)==null?void 0:X.title)==null?void 0:c.toLowerCase().includes("bus"))?te(ta=>({...ta,wifi:t.extraAddons.wifi??!1,chargingPoints:t.extraAddons.chargingPorts??!1})):ee(ta=>({...ta,wifi:t.extraAddons.wifi??!1,chargingPoints:t.extraAddons.chargingPorts??!1})),Re(t.extraAddons.interiorLighting?"premium":"normal")),t.pricing&&(t.pricing.basicPackage&&(pt(((y=t.pricing.basicPackage.price)==null?void 0:y.toString())||""),bt(((tt=t.pricing.basicPackage.includedHours)==null?void 0:tt.toString())||""),yt(((ma=t.pricing.basicPackage.includedKilometers)==null?void 0:ma.toString())||"")),t.pricing.extraKmPrice&&(vt(((ba=t.pricing.extraKmPrice.price)==null?void 0:ba.toString())||""),wt(((ja=t.pricing.extraKmPrice.km)==null?void 0:ja.toString())||"")),t.pricing.discount&&(kt(t.pricing.discount.type==="flat_rate"?"flat":"percentage"),Vt(((ya=t.pricing.discount.value)==null?void 0:ya.toString())||"")),t.pricing.decoration&&(oe(d=>({...d,decorationAvailable:t.pricing.decoration.available??!1})),Ht(((Ca=t.pricing.decoration.price)==null?void 0:Ca.toString())||""))),It(((va=t.advanceBookingAmount)==null?void 0:va.toString())||""),t.vehicleType&&gt(t.vehicleType),t.termsAndConditions&&Array.isArray(t.termsAndConditions)&&t.termsAndConditions.length>0?K(t.termsAndConditions.map(d=>({heading:d.heading||"",points:Array.isArray(d.points)&&d.points.length>0?d.points:[""]}))):typeof t.termsAndConditions=="string"?K([{heading:"Terms & Conditions",points:[t.termsAndConditions]}]):K([{heading:"",points:[""]}]),Oe(t.searchTags||[]),console.log("âœ… Vehicle data populated successfully")},[Kt,Ha,de,E]);a.useEffect(()=>()=>{q.forEach(t=>URL.revokeObjectURL(t))},[q]),a.useEffect(()=>{(async()=>{var s,o,i,u,x;try{if(!Ce)throw new Error("Module ID is not defined. Please log in or set moduleId in localStorage.");const g=localStorage.getItem("token"),[P,D,V]=await Promise.all([H.get(`${E}/brands/module/${Ce}`,{headers:{Authorization:`Bearer ${g}`}}),H.get(`${E}/categories/parents/${Ce}`,{headers:{Authorization:`Bearer ${g}`}}),H.get(`${E}/zones`,{headers:{Authorization:`Bearer ${g}`,Accept:"application/json"}})]);Ut(((s=D.data)==null?void 0:s.data)||[]);const J=Array.isArray(P.data)?P.data:P.data.data||[];Ot(J);const Y=((o=D.data)==null?void 0:o.data)||[];Ut(Y);const X=V.data.data||V.data||[],c=Array.isArray(X)?X.filter(y=>y.isActive).map(y=>({_id:y._id,name:y.name})):[];Zt(c),console.log("Module ID:",Ce),console.log("Brands:",J),console.log("Parent Categories:",Y),console.log("Zones:",c),ua(!0)}catch(g){console.error("Error fetching brands/categories/zones:",((i=g.response)==null?void 0:i.data)||g),Ot([]),Ut([]),Zt([]),ua(!0),S(((x=(u=g.response)==null?void 0:u.data)==null?void 0:x.message)||"Failed to fetch brands, categories, or zones"),w("error"),v(!0)}})()},[Ce,E]),a.useEffect(()=>{if(_.length>0&&!T&&Se==="create"){const t=_[0];Ue(t._id),H.get(`${E}/categories/parents/${t._id}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>{const o=s.data.data||[];se(o),o.length>0&&le(o[0]._id)}).catch(s=>{console.error("Failed to fetch subcategories:",s),se([])})}},[_,T,Se,E]),a.useEffect(()=>{(async()=>{var s;try{const u=(((s=(await H.get(`${E}/vehicle-attributes`)).data)==null?void 0:s.data)||[]).filter(g=>g.status),x={};u.forEach(g=>{x[g.title.toLowerCase()]=g.values||[]}),$a(u),Na(x),console.log("âœ… Vehicle Attributes Loaded:",u)}catch(o){console.error("âŒ Failed to load vehicle attributes",o)}})()},[E]),a.useEffect(()=>{var s;if(!ca)return;const t=(s=re.state)==null?void 0:s.vehicle;t?(Jt(t),Ye(t.thumbnail||""),Xe(t.images||[]),Pt("edit")):me&&(async()=>{var i,u,x;R(!0);try{const g=await H.get(`${E}/vehicles/${me}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),P=g.data.data||g.data;console.log("Vehicle data fetched for edit:",P),Jt(P),Ye(P.thumbnail||""),Xe(P.images||[]),Pt("edit")}catch(g){S(((u=(i=g.response)==null?void 0:i.data)==null?void 0:u.message)||"Failed to fetch vehicle data"),w("error"),v(!0),console.error("Error fetching vehicle:",((x=g.response)==null?void 0:x.data)||g)}finally{R(!1)}})()},[ca,me,Jt]);const Za=async t=>{const s=t.target.value;if(Ue(s),le(""),se([]),!!s)try{const o=await H.get(`${E}/categories/parents/${s}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});se(o.data.data||[])}catch(o){console.error("Failed to fetch sub categories",o),se([])}},Ja=a.useCallback(t=>{const s=t.target.files[0];s&&zt(s)},[]),xa=a.useCallback(t=>{t.preventDefault()},[]),Ya=a.useCallback(t=>{t.preventDefault();const s=t.dataTransfer.files[0];s&&zt(s)},[]),Xa=a.useCallback(t=>{const s=Array.from(t.target.files);Fe(o=>[...o,...s])},[]),Qa=a.useCallback(t=>{t.preventDefault();const s=Array.from(t.dataTransfer.files);Fe(o=>[...o,...s])},[]),es=a.useCallback(t=>{Nt(t.target.value)},[]),ts=a.useCallback(t=>{t.key==="Enter"&&Ge.trim()&&(Oe(s=>[...s,Ge.trim()]),Nt(""),t.preventDefault())},[Ge]),as=a.useCallback(t=>{Oe(s=>s.filter(o=>o!==t))},[]),Yt=()=>(oa(""),!0),Xt=a.useCallback(()=>{Tt(""),Bt(""),ce(""),Rt(""),Mt(""),Ra(""),Lt(""),Dt(""),Ue(""),le(""),zt(null),Fe([]),Ye(""),Xe([]),Ft(""),ie("yes"),_t(""),oa(""),Pe(""),it(""),ot(""),dt(""),ut(""),gt(""),Le(""),xt("no"),Ta(""),oe({driverIncluded:!1,sunroof:!1,decorationAvailable:!1}),ee({leatherSeats:!1,adjustableSeats:!1,armrest:!1,musicSystem:!1,bluetooth:!1,usbAux:!1,airbags:!1,abs:!1,rearCamera:!1,parkingSensors:!1,powerWindows:!1,centralLock:!1,keylessEntry:!1,wifi:!1,chargingPoints:!1}),te({curtains:!1,readingLights:!1,footRest:!1,bottleHolder:!1,musicSystem:!1,microphone:!1,ledDisplay:!1,tvScreen:!1,fireExtinguisher:!1,firstAidKit:!1,ledEmergencyExit:!1,cctv:!1,luggageCarrier:!1,overheadStorage:!1,wifi:!1,chargingPoints:!1}),pt(""),bt(""),yt(""),vt(""),wt(""),kt(""),na(""),It(""),Re("normal"),Ma("hourly"),La(""),Da(""),Fa(""),Vt(""),Ht(""),Oe([]),Nt(""),ue(""),ge(""),Oa(""),Pt("create"),I.current&&(I.current.setMap(null),I.current=null),j&&ha(null)},[j]),ss=a.useCallback(async t=>{var x,g,P,D,V,J,Y,X;t.preventDefault();const s=Se==="edit";if(R(!0),!De||!_e||!Ve||!T||!qe||!He||!$e||!Ne||!Qe||!M||!L){S("Please fill all required fields."),w("error"),v(!0),R(!1);return}if(F.decorationAvailable&&(!ke||parseFloat(ke)<=0)){S("Please provide a valid decoration price when decoration is available."),w("error"),v(!0),R(!1);return}if((W||he)&&!je){S("Please provide a basic package price."),w("error"),v(!0),R(!1);return}if(!ae&&!Je&&!s){S("Please upload a featured image."),w("error"),v(!0),R(!1);return}if(q.length===0&&Ae.length===0&&!s){S("Please upload at least one gallery image."),w("error"),v(!0),R(!1);return}if(Yt(),!z.length||!z[0].heading){S("Please add at least one Terms & Conditions section."),w("error"),v(!0),R(!1);return}const o=localStorage.getItem("token");if(!o){S("No authentication token found. Please log in."),w("error"),v(!0),R(!1);return}const i=new FormData;if(i.append("name",De),i.append("description",Wt),i.append("brand",_e),i.append("category",T),i.append("subCategory",qe),i.append("model",Ve),i.append("capacityAndComfort[seatingCapacity]",parseInt($e)||0),i.append("capacityAndComfort[pushbackSeats]",ht==="yes"),i.append("capacityAndComfort[reclinerSeats]",ft==="yes"),i.append("engineCharacteristics[transmissionType][value]",be||""),i.append("engineCharacteristics[transmissionType][available]",!!be),i.append("engineCharacteristics[powerBHP]",Te?parseInt(Te):0),i.append("engineCharacteristics[engineCapacityCC]",We?parseInt(We):0),i.append("engineCharacteristics[torque]",lt||""),i.append("engineCharacteristics[mileage]",ct||""),i.append("engineCharacteristics[fuelType]",Me||""),i.append("engineCharacteristics[airConditioning]",ne==="yes"),i.append("location[address]",Qe),i.append("location[latitude]",parseFloat(M)||0),i.append("location[longitude]",parseFloat(L)||0),i.append("zone",He),i.append("availability[driverIncluded]",F.driverIncluded||!1),i.append("availability[sunroof]",F.sunroof||!1),i.append("availability[acAvailable]",ne==="yes"),W){const c={interiorFeatures:{curtains:b.curtains||!1,readingLights:b.readingLights||!1,footRest:b.footRest||!1,mirror:!1},entertainment:{musicSystem:b.musicSystem||!1,microphone:b.microphone||!1,lcdDisplay:b.ledDisplay||!1,tvScreen:b.tvScreen||!1},safetyAndCompliance:{fireExtinguisher:b.fireExtinguisher||!1,firstAidKit:b.firstAidKit||!1,emergencyExit:b.ledEmergencyExit||!1,cctv:b.cctv||!1},storage:{luggageCarrier:b.luggageCarrier||!1,overheadStorage:b.overheadStorage||!1}};i.append("features",JSON.stringify(c))}if(he){const c={interiorComfort:{leatherSeats:m.leatherSeats||!1,adjustableSeats:m.adjustableSeats||!1,armrest:m.armrest||!1},entertainment:{musicSystem:m.musicSystem||!1,bluetooth:m.bluetooth||!1,usbAux:m.usbAux||!1},safety:{airbags:m.airbags||!1,abs:m.abs||!1,rearCamera:m.rearCamera||!1,parkingSensors:m.parkingSensors||!1},convenience:{powerWindows:m.powerWindows||!1,centralLock:m.centralLock||!1,keylessEntry:m.keylessEntry||!1}};i.append("features",JSON.stringify(c))}i.append("extraAddons[wifi]",W?b.wifi:m.wifi),i.append("extraAddons[chargingPorts]",W?b.chargingPoints:m.chargingPoints),i.append("extraAddons[interiorLighting]",ze==="premium"),i.append("pricing[basicPackage][price]",parseFloat(je)||0),i.append("pricing[basicPackage][includedKilometers]",parseFloat(jt)||0),i.append("pricing[basicPackage][includedHours]",parseFloat(mt)||0),i.append("pricing[extraKmPrice][km]",parseFloat(St)||0),i.append("pricing[extraKmPrice][price]",parseFloat(Ct)||0),i.append("pricing[discount][type]",ye==="flat"?"flat_rate":"percentage"),i.append("pricing[discount][value]",parseFloat(Ke)||0),i.append("pricing[decoration][available]",F.decorationAvailable||!1),i.append("pricing[decoration][price]",parseFloat(ke)||0),i.append("advanceBookingAmount",parseFloat(At)||0),i.append("licensePlateNumber",Ne),he&&Be&&i.append("vehicleType",Be),i.append("termsAndConditions",JSON.stringify(z)),$t.forEach(c=>i.append("searchTags[]",c)),ae&&i.append("featuredImage",ae),q.forEach(c=>{i.append("galleryImages",c)});const u={};for(let[c,y]of i.entries())u[c]=y instanceof File?y.name:y;console.log("ðŸ“¤ FormData being sent:",u);try{let c,y;if(s){if(!ve)throw new Error("Invalid vehicle ID for update");c=await H.put(`${E}/vehicles/${ve}`,i,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}}),y=c.data.data||c.data}else c=await H.post(`${E}/vehicles`,i,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}}),y=c.data.data||c.data;console.log("âœ… API Response:",c.data),S(s?"Vehicle updated successfully!":"Vehicle added successfully!"),w("success"),v(!0),Xt(),s&&st("/vehicle-setup/lists",{state:{vehicle:y}})}catch(c){console.error("âŒ API Error:",{status:(x=c.response)==null?void 0:x.status,statusText:(g=c.response)==null?void 0:g.statusText,data:(P=c.response)==null?void 0:P.data,headers:(D=c.response)==null?void 0:D.headers,message:c.message});let y=((J=(V=c.response)==null?void 0:V.data)==null?void 0:J.message)||"Failed to save vehicle";(X=(Y=c.response)==null?void 0:Y.data)!=null&&X.errors&&(y=c.response.data.errors.map(tt=>tt.msg).join(", ")),S(y),w("error"),v(!0)}finally{R(!1)}},[Se,ve,De,Wt,_e,Ve,T,qe,He,$e,ne,F,ke,Ne,Qe,M,L,be,Te,We,lt,ct,Be,ze,Me,ht,ft,m,b,je,mt,jt,Ct,St,ye,Ke,At,z,$t,ae,q,Je,Ae,Yt,Xt,st,E,he,W]),fa=a.useCallback((t,s)=>{s!=="clickaway"&&v(!1)},[]),et=Se==="edit",rs=a.useCallback(t=>{const s=t.target.value;Lt(s);const o=de.find(i=>i._id===s);Dt(o?o.name:"")},[de]),Qt=t=>s=>{ee(o=>({...o,[t]:s.target.checked}))},ea=t=>s=>{te(o=>({...o,[t]:s.target.checked}))},Ie=Number(je)||0,pa=Number(Ke)||0;let Z=0;ye==="percentage"&&(Z=Ie*pa/100),ye==="flat"&&(Z=pa),Z>Ie&&(Z=Ie);const ns=Math.max(Ie-Z,0);return e.jsxs(n,{sx:{p:N?2:3,backgroundColor:h.palette.grey[100],minHeight:"100vh",width:"100%"},children:[e.jsxs(n,{sx:{maxWidth:"lg",margin:"auto",backgroundColor:"white",borderRadius:h.shape.borderRadius,boxShadow:h.shadows[1],p:N?2:3,overflowX:"hidden"},children:[e.jsx(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[et&&e.jsx(at,{onClick:()=>st("/vehicle-setup/lists"),color:"primary",children:e.jsx(us,{})}),e.jsx(wa,{sx:{fontSize:24,mr:1}}),e.jsx(r,{variant:"h5",component:"h1",children:et?"Edit Vehicle":"Add New Vehicle"})]})}),e.jsx(r,{variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Insert the basic information of the vehicle"}),Ze&&e.jsx(n,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.jsx(Sa,{})}),e.jsxs(n,{component:"form",onSubmit:ss,children:[e.jsxs(n,{sx:{display:"flex",flexDirection:N?"column":"row",gap:3,mb:4},children:[e.jsx(G,{sx:{flex:N?"auto":2,p:2,boxShadow:"none",border:`1px solid ${h.palette.grey[200]}`},children:e.jsxs(xe,{sx:{"&:last-child":{pb:2}},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"General Information"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the basic information of the vehicle"}),e.jsx(f,{fullWidth:!0,label:"Vehicle Name*",variant:"outlined",value:De,onChange:t=>Tt(t.target.value),placeholder:"Type vehicle name",sx:{mb:2},required:!0}),e.jsx(f,{fullWidth:!0,label:"Short Description",variant:"outlined",multiline:!0,rows:4,value:Wt,onChange:t=>Bt(t.target.value),placeholder:"Type short description",sx:{mb:2}})]})}),e.jsx(G,{sx:{flex:N?"auto":1,p:2,boxShadow:"none",border:`1px solid ${h.palette.grey[200]}`},children:e.jsxs(xe,{sx:{"&:last-child":{pb:2}},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Featured Image*"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs(sa,{onDragOver:xa,onDrop:Ya,onClick:()=>document.getElementById("thumbnail-upload").click(),children:[ae?e.jsxs(n,{children:[e.jsx("img",{src:URL.createObjectURL(ae),alt:"Featured image preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:h.spacing(1)}}),e.jsx(r,{variant:"body2",color:"text.secondary",children:ae.name})]}):Je?e.jsxs(n,{children:[e.jsx("img",{src:Je,alt:"Existing featured image",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:h.spacing(1),borderColor:"#E15B65"}}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Existing featured image. Upload to replace."})]}):e.jsxs(n,{children:[e.jsx(aa,{sx:{fontSize:40,color:"#E15B65",mb:1}}),e.jsx(r,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(r,{variant:"body2",color:"#E15B65",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"thumbnail-upload",name:"featuredImage",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:Ja})]})]})})]}),e.jsx(n,{sx:{mb:4},children:e.jsx(G,{sx:{p:2,boxShadow:"none",border:`1px solid ${h.palette.grey[200]}`},children:e.jsxs(xe,{sx:{"&:last-child":{pb:2}},children:[e.jsxs(r,{variant:"h6",gutterBottom:!0,children:["Gallery Images",e.jsx("span",{style:{color:"#E15B65"},children:"*"})]}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Upload high quality images (JPG, JPEG, PNG â€¢ Max 1MB â€¢ Ratio 2:1)"}),e.jsxs(sa,{onDragOver:xa,onDrop:Qa,onClick:()=>document.getElementById("images-upload").click(),sx:{backgroundColor:"#fafafa",border:"2px dashed #E15B65",borderRadius:2,p:3,transition:"0.3s","&:hover":{backgroundColor:"#fff1f2"}},children:[Ae.length>0||q.length>0?e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(90px, 1fr))",gap:2,width:"100%"},children:[Ae.map((t,s)=>e.jsxs(n,{sx:{position:"relative",borderRadius:1.5,overflow:"hidden",border:"1px solid #e5e7eb"},children:[e.jsx("img",{src:t,alt:`Existing ${s}`,style:{width:"100%",height:90,objectFit:"cover"}}),e.jsx(n,{sx:{position:"absolute",top:6,left:6,backgroundColor:"#000",color:"#fff",fontSize:10,px:.8,py:.2,borderRadius:1,opacity:.75},children:"Existing"})]},`existing-${s}`)),q.map((t,s)=>e.jsxs(n,{sx:{position:"relative",borderRadius:1.5,overflow:"hidden",border:"1px solid #e5e7eb"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`New ${s}`,style:{width:"100%",height:90,objectFit:"cover"}}),e.jsx(at,{size:"small",onClick:()=>Fe(o=>o.filter((i,u)=>u!==s)),sx:{position:"absolute",top:4,right:4,backgroundColor:"#fff",boxShadow:1,"&:hover":{backgroundColor:"#fee2e2"}},children:"âœ•"})]},`new-${s}`))]}):e.jsxs(n,{sx:{textAlign:"center"},children:[e.jsx(aa,{sx:{fontSize:46,color:"#E15B65",mb:1}}),e.jsx(r,{fontWeight:600,color:"#E15B65",children:"Click to upload images"}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"or drag & drop files here"})]}),e.jsxs(r,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block",textAlign:"center"},children:[Ae.length+q.length," image(s) selected"]}),e.jsx("input",{type:"file",id:"images-upload",name:"galleryImages",hidden:!0,accept:"image/jpeg,image/png,image/jpg",multiple:!0,onChange:Xa})]})]})})}),e.jsx(n,{sx:{mb:4},children:e.jsx(G,{sx:{p:2,boxShadow:"none",border:`1px solid ${h.palette.grey[200]}`},children:e.jsxs(xe,{sx:{"&:last-child":{pb:2}},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Vehicle Information"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Insert the vehicle's general information"}),e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:N?"1fr":"repeat(3, 1fr)",gap:h.spacing(3),mb:4},children:[e.jsxs(U,{spacing:2,children:[e.jsx(r,{variant:"subtitle2",sx:{fontWeight:700,mb:1},children:"Basic Info"}),e.jsxs(C,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(k,{id:"brand-label",children:"Select Brand / Manufacturer"}),e.jsxs(A,{labelId:"brand-label",id:"brand-select",value:_e,label:"Select Brand / Manufacturer",onChange:t=>Rt(t.target.value),children:[e.jsx(l,{value:"",children:"Select vehicle brand"}),Kt.map(t=>e.jsx(l,{value:t._id,children:t.title},t._id))]})]}),e.jsx(f,{fullWidth:!0,label:"Enter Model Name",variant:"outlined",value:Ve,onChange:t=>Mt(t.target.value),placeholder:"e.g. Camry, Bus X",required:!0}),!W&&e.jsx(f,{fullWidth:!0,label:"Year of Manufacture",variant:"outlined",placeholder:"e.g. 2023"})]}),e.jsxs(U,{spacing:2,children:[e.jsx(r,{variant:"subtitle2",sx:{fontWeight:700,mb:1},children:"Capacity & Comfort"}),e.jsx(f,{fullWidth:!0,label:"Seating Capacity",variant:"outlined",value:$e,onChange:t=>Ft(t.target.value),placeholder:"Number of seats",type:"number",inputProps:{min:1},required:!0}),W&&e.jsxs(C,{fullWidth:!0,variant:"outlined",children:[e.jsx(k,{id:"legroom-label",children:"Select Legroom Type"}),e.jsxs(A,{labelId:"legroom-label",value:Ea,label:"Select Legroom Type",onChange:t=>Pa(t.target.value),children:[e.jsx(l,{value:"",children:"Select Legroom"}),e.jsx(l,{value:"standard",children:"Standard"}),e.jsx(l,{value:"extra",children:"Extra"}),e.jsx(l,{value:"premium",children:"Premium"})]})]}),W&&e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsxs(n,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Pushback seats"}),e.jsxs(fe,{row:!0,value:ht,onChange:t=>xt(t.target.value),children:[e.jsx(p,{value:"yes",control:e.jsx(B,{size:"small"}),label:e.jsx(r,{variant:"body2",children:"Yes"})}),e.jsx(p,{value:"no",control:e.jsx(B,{size:"small"}),label:e.jsx(r,{variant:"body2",children:"No"})})]})]}),e.jsxs(n,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Recliner Seats"}),e.jsxs(fe,{row:!0,value:ft,onChange:t=>ra(t.target.value),children:[e.jsx(p,{value:"yes",control:e.jsx(B,{size:"small"}),label:e.jsx(r,{variant:"body2",children:"Yes"})}),e.jsx(p,{value:"no",control:e.jsx(B,{size:"small"}),label:e.jsx(r,{variant:"body2",children:"No"})})]})]})]}),!W&&e.jsxs(C,{component:"fieldset",fullWidth:!0,sx:{mt:1},children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Air Conditioning"}),e.jsxs(fe,{row:!0,value:ne,onChange:t=>ie(t.target.value),children:[e.jsx(p,{value:"yes",control:e.jsx(B,{size:"small"}),label:e.jsx(r,{variant:"body2",children:"Yes"})}),e.jsx(p,{value:"no",control:e.jsx(B,{size:"small"}),label:e.jsx(r,{variant:"body2",children:"No"})})]})]})]}),e.jsxs(U,{spacing:2,children:[e.jsx(r,{variant:"subtitle2",sx:{fontWeight:700,mb:1},children:"Zone & Location"}),e.jsxs(C,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(k,{id:"zone-label",children:"Zone*"}),e.jsxs(A,{labelId:"zone-label",value:He,label:"Zone",onChange:rs,children:[e.jsx(l,{value:"",children:"Select zone"}),de.map(t=>e.jsx(l,{value:t._id,children:t.name},t._id))]})]}),e.jsxs(C,{fullWidth:!0,required:!0,children:[e.jsx(k,{children:"Parent Category"}),e.jsxs(A,{value:T,label:"Parent Category",onChange:Za,children:[e.jsx(l,{value:"",children:"Select Parent Category"}),_.map(t=>e.jsx(l,{value:t._id,children:t.title},t._id))]})]}),e.jsxs(C,{fullWidth:!0,required:!0,disabled:!T,children:[e.jsx(k,{children:"Sub Category"}),e.jsxs(A,{value:qe,label:"Sub Category",onChange:t=>le(t.target.value),children:[e.jsx(l,{value:"",children:"Select Sub Category"}),Ka.map(t=>e.jsx(l,{value:t._id,children:t.title},t._id))]})]})]})]}),e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:700,mb:3},children:"Engine & Performance"}),W?e.jsxs(U,{spacing:3,children:[e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:N?"1fr":"repeat(3, 1fr)",gap:h.spacing(3)},children:[e.jsxs(C,{fullWidth:!0,size:"small",children:[e.jsx(k,{children:"Select Fuel Type"}),e.jsxs(A,{value:Me,label:"Select Fuel Type",onChange:t=>Le(t.target.value),children:[e.jsx(l,{value:"",children:"Select Fuel"}),e.jsx(l,{value:"petrol",children:"Petrol"}),e.jsx(l,{value:"diesel",children:"Diesel"}),e.jsx(l,{value:"electric",children:"Electric"}),e.jsx(l,{value:"hybrid",children:"Hybrid"}),e.jsx(l,{value:"cng",children:"CNG"})]})]}),e.jsxs(C,{fullWidth:!0,size:"small",children:[e.jsx(k,{children:"Transmission"}),e.jsxs(A,{value:be,label:"Transmission",onChange:t=>Pe(t.target.value),children:[e.jsx(l,{value:"",children:"Select Transmission"}),e.jsx(l,{value:"manual",children:"Manual"}),e.jsx(l,{value:"automatic",children:"Automatic"}),e.jsx(l,{value:"semi-automatic",children:"Semi-Automatic"})]})]}),e.jsxs(C,{fullWidth:!0,size:"small",children:[e.jsx(k,{children:"Climate Control"}),e.jsxs(A,{value:ne,label:"Climate Control",onChange:t=>ie(t.target.value),children:[e.jsx(l,{value:"yes",children:"AC"}),e.jsx(l,{value:"no",children:"Non-AC"})]})]})]}),e.jsxs(C,{component:"fieldset",fullWidth:!0,children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Air Conditioning"}),e.jsxs(fe,{row:!0,value:ne,onChange:t=>ie(t.target.value),children:[e.jsx(p,{value:"yes",control:e.jsx(B,{size:"small"}),label:e.jsx(r,{variant:"body2",children:"Yes"})}),e.jsx(p,{value:"no",control:e.jsx(B,{size:"small"}),label:e.jsx(r,{variant:"body2",children:"No"})})]})]})]}):e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:N?"1fr":"repeat(3, 1fr)",gap:h.spacing(3)},children:[e.jsxs(C,{fullWidth:!0,children:[e.jsx(k,{children:"Select Fuel Type"}),e.jsxs(A,{value:Me,label:"Select Fuel Type",onChange:t=>Le(t.target.value),children:[e.jsx(l,{value:"",children:"Select Fuel"}),e.jsx(l,{value:"petrol",children:"Petrol"}),e.jsx(l,{value:"diesel",children:"Diesel"}),e.jsx(l,{value:"electric",children:"Electric"}),e.jsx(l,{value:"hybrid",children:"Hybrid"}),e.jsx(l,{value:"cng",children:"CNG"})]})]}),e.jsxs(C,{fullWidth:!0,required:!0,children:[e.jsx(k,{children:"Transmission"}),e.jsxs(A,{value:be,label:"Transmission",onChange:t=>Pe(t.target.value),children:[e.jsx(l,{value:"",children:"Select Transmission"}),e.jsx(l,{value:"manual",children:"Manual"}),e.jsx(l,{value:"automatic",children:"Automatic"}),e.jsx(l,{value:"semi-automatic",children:"Semi-Automatic"})]})]}),e.jsxs(C,{fullWidth:!0,children:[e.jsx(k,{children:"Vehicle Class"}),e.jsxs(A,{value:Be,label:"Vehicle Class",onChange:t=>gt(t.target.value),children:[e.jsx(l,{value:"standard",children:"Standard"}),e.jsx(l,{value:"luxury",children:"Luxury"}),e.jsx(l,{value:"vintage",children:"Vintage"})]})]}),e.jsx(f,{fullWidth:!0,label:"Engine Capacity (CC)",variant:"outlined",type:"number",value:We,onChange:t=>ot(t.target.value),placeholder:"e.g. 2000",inputProps:{min:0}}),e.jsx(f,{fullWidth:!0,label:"Engine Power (HP)",variant:"outlined",type:"number",value:Te,onChange:t=>it(t.target.value),placeholder:"e.g. 180",inputProps:{min:0}}),e.jsx(f,{fullWidth:!0,label:"Torque",variant:"outlined",value:lt,onChange:t=>dt(t.target.value),placeholder:"e.g. 250 Nm"}),e.jsx(f,{fullWidth:!0,label:"Mileage",variant:"outlined",value:ct,onChange:t=>ut(t.target.value),placeholder:"e.g. 15 km/l"})]})]}),e.jsx(n,{sx:{mt:3},children:e.jsx(f,{fullWidth:!0,label:"Vihicles Address*",variant:"outlined",value:Qe,onChange:t=>ce(t.target.value),placeholder:"Enter venue address",required:!0})}),e.jsxs(n,{sx:{mt:3},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Location and Operating Hours"}),e.jsx(f,{fullWidth:!0,label:"Search Location",inputRef:nt,variant:"outlined",placeholder:"Enter a location",sx:{mb:2}}),e.jsxs(n,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(f,{sx:{flex:1},label:"Latitude*",variant:"outlined",value:M,onChange:t=>ue(t.target.value),placeholder:"e.g., 25.2048",required:!0}),e.jsx(f,{sx:{flex:1},label:"Longitude*",variant:"outlined",value:L,onChange:t=>ge(t.target.value),placeholder:"e.g., 55.2708",required:!0})]}),O&&Et?e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Click on the map below to select a location"}),e.jsx(n,{ref:rt,sx:{height:300,width:"100%",borderRadius:h.shape.borderRadius,border:`1px solid ${h.palette.grey[300]}`,mb:2}})]}):e.jsx(n,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${h.palette.grey[300]}`,borderRadius:h.shape.borderRadius,mb:2},children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"Map loading..."})})]})]})})}),e.jsx(n,{sx:{mb:4},children:e.jsxs(xe,{sx:{"&:last-child":{pb:2}},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Vehicle Identity"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the vehicle number and driver availability"}),e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:N?"1fr":"2fr 1fr",gap:3,alignItems:"center"},children:[e.jsx(f,{fullWidth:!0,label:"Vehicle Number*",variant:"outlined",value:Ne,onChange:t=>{_t(t.target.value),Yt(t.target.value)},placeholder:"Enter vehicle number",required:!0,error:!!ia,helperText:ia}),e.jsxs(n,{children:[e.jsx(r,{variant:"body2",fontWeight:600,sx:{mb:1},children:"Driver Included"}),e.jsxs(n,{sx:{display:"flex",gap:3},children:[e.jsx(p,{control:e.jsx(Q,{checked:F.driverIncluded===!0,onChange:()=>oe(t=>({...t,driverIncluded:!0}))}),label:"Yes"}),e.jsx(p,{control:e.jsx(Q,{checked:F.driverIncluded===!1,onChange:()=>oe(t=>({...t,driverIncluded:!1}))}),label:"No"})]})]})]})]})}),qt&&he&&e.jsxs(G,{sx:{mt:6,mb:6,borderRadius:4,border:"none",boxShadow:"0 10px 30px rgba(0,0,0,0.05)",backgroundColor:"#ffffff",overflow:"hidden"},children:[e.jsxs(n,{sx:{px:4,py:3,background:"linear-gradient(135deg, #e9ebef 0%, #b3b7c1 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(n,{children:[e.jsx(r,{variant:"h5",sx:{fontWeight:800,letterSpacing:"-0.5px"},children:"Vehicle Features & Amenities"}),e.jsx(r,{variant:"body2",sx:{opacity:.8},children:"Customize the luxury and comfort options for your vehicle"})]}),e.jsx(wa,{sx:{fontSize:40,opacity:.2}})]}),e.jsxs(n,{sx:{p:4},children:[e.jsx($,{container:!0,spacing:10,sx:{width:"100%",m:0},children:[{title:"Interior Comfort",icon:e.jsx(Ia,{}),number:"01",items:[["Leather Seats","leatherSeats"],["Adjustable Seats","adjustableSeats"],["Armrest","armrest"]]},{title:"Entertainment",icon:e.jsx(bs,{}),number:"02",items:[["Music System","musicSystem"],["Bluetooth","bluetooth"],["USB / AUX","usbAux"]]},{title:"Safety & Compliance",icon:e.jsx(ka,{}),number:"03",items:[["Airbags","airbags"],["ABS","abs"],["Rear Camera","rearCamera"],["Parking Sensors","parkingSensors"]]},{title:"Convenience",icon:e.jsx(ps,{}),number:"04",items:[["Power Windows","powerWindows"],["Central Lock","centralLock"],["Keyless Entry","keylessEntry"]]}].map((t,s)=>e.jsx($,{item:!0,xs:12,sm:12,md:6,lg:6,sx:{display:"flex"},children:e.jsxs(n,{sx:{width:"100%",display:"flex",flexDirection:"column",p:3,borderRadius:3,border:"1px solid #f0f0f0",backgroundColor:"#f9fafb",transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 12px 20px rgba(0,0,0,0.05)",borderColor:"#E15B65"}},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsx(n,{sx:{width:40,height:40,borderRadius:2,backgroundColor:"white",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 10px rgba(0,0,0,0.05)",color:"#E15B65"},children:t.icon}),e.jsx(r,{variant:"caption",sx:{fontWeight:900,color:"#E15B65",opacity:.2,fontSize:"1.5rem",lineHeight:1},children:t.number})]}),e.jsx(r,{variant:"subtitle1",sx:{fontWeight:700,mb:2,color:"#111827"},children:t.title}),e.jsx(U,{spacing:1,children:t.items.map(([o,i])=>e.jsx(p,{control:e.jsx(Q,{size:"small",checked:m[i],onChange:Qt(i),sx:{color:"#d1d5db","&.Mui-checked":{color:"#E15B65"}}}),label:e.jsx(r,{variant:"body2",sx:{color:"#4b5563",fontWeight:500},children:o})},i))})]})},t.title))}),e.jsxs(n,{sx:{mt:4,p:3,borderRadius:4,background:"linear-gradient(135deg, #fff5f5 0%, #fff0f0 100%)",border:"1px solid #fee2e2"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(n,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:"#E15B65",color:"white",display:"flex",alignItems:"center",justifyContent:"center",mr:2,boxShadow:"0 4px 12px rgba(225, 91, 101, 0.3)"},children:e.jsx(Aa,{fontSize:"small"})}),e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:700,color:"#991b1b"},children:"Premium Add-ons & Lighting"}),e.jsx(r,{variant:"caption",sx:{color:"#b91c1c",opacity:.8},children:"Special features to enhance the premium feel"})]})]}),e.jsxs($,{container:!0,spacing:4,alignItems:"center",children:[e.jsx($,{item:!0,xs:12,md:6,children:e.jsxs(n,{sx:{display:"flex",gap:4},children:[e.jsx(p,{control:e.jsx(Q,{checked:m.wifi,onChange:Qt("wifi"),sx:{"&.Mui-checked":{color:"#E15B65"}}}),label:e.jsx(r,{sx:{fontWeight:600},children:"High-Speed Wifi"})}),e.jsx(p,{control:e.jsx(Q,{checked:m.chargingPoints,onChange:Qt("chargingPoints"),sx:{"&.Mui-checked":{color:"#E15B65"}}}),label:e.jsx(r,{sx:{fontWeight:600},children:"Charging Points"})})]})}),e.jsx($,{item:!0,xs:12,md:6,children:e.jsxs(n,{sx:{p:2,backgroundColor:"white",borderRadius:3,border:"1px solid #fee2e2",display:"flex",alignItems:"center",gap:3},children:[e.jsx(r,{variant:"body2",sx:{fontWeight:700,color:"#991b1b",minWidth:120},children:"Interior Lighting"}),e.jsxs(fe,{row:!0,value:ze,onChange:t=>Re(t.target.value),children:[e.jsx(p,{value:"normal",control:e.jsx(B,{size:"small",sx:{"&.Mui-checked":{color:"#E15B65"}}}),label:e.jsx(r,{variant:"body2",children:"Standard"})}),e.jsx(p,{value:"premium",control:e.jsx(B,{size:"small",sx:{"&.Mui-checked":{color:"#E15B65"}}}),label:e.jsx(r,{variant:"body2",children:"Premium RGB"})})]})]})})]})]})]})]}),qt&&W&&e.jsxs(G,{sx:{mt:6,mb:6,borderRadius:4,border:"none",boxShadow:"0 10px 30px rgba(0,0,0,0.05)",backgroundColor:"#ffffff",overflow:"hidden"},children:[e.jsxs(n,{sx:{px:4,py:3,background:"linear-gradient(135deg, #ecedf1 0%, #adb0ba 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(n,{children:[e.jsx(r,{variant:"h5",sx:{fontWeight:800,letterSpacing:"-0.5px"},children:"Bus Features & Amenities"}),e.jsx(r,{variant:"body2",sx:{opacity:.8},children:"Configure passenger comfort and safety options for the bus"})]}),e.jsx(ys,{sx:{fontSize:40,opacity:.2}})]}),e.jsxs(n,{sx:{p:4},children:[e.jsx($,{container:!0,spacing:10,sx:{width:"100%",m:0},children:[{title:"Interior Comfort",icon:e.jsx(Ia,{}),number:"01",items:[["Curtains","curtains"],["Reading Lights","readingLights"],["Foot Rest","footRest"],["Bottle Holder","bottleHolder"]]},{title:"Entertainment",icon:e.jsx(js,{}),number:"02",items:[["Music System","musicSystem"],["Microphone","microphone"],["LED Display","ledDisplay"],["TV / Screen","tvScreen"]]},{title:"Safety & Compliance",icon:e.jsx(ka,{}),number:"03",items:[["Fire Extinguisher","fireExtinguisher"],["First Aid Kit","firstAidKit"],["LED Emergency Exit","ledEmergencyExit"],["CCTV","cctv"]]},{title:"Storage & Utilities",icon:e.jsx(ms,{}),number:"04",items:[["Luggage Carrier","luggageCarrier"],["Overhead Storage","overheadStorage"]]}].map(t=>e.jsx($,{item:!0,xs:12,sm:12,md:6,lg:3,sx:{display:"flex"},children:e.jsxs(n,{sx:{width:"100%",display:"flex",flexDirection:"column",p:3,borderRadius:3,border:"1px solid #f0f0f0",backgroundColor:"#f8fafc",transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 12px 20px rgba(0,0,0,0.05)",borderColor:"#98a0bc"}},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsx(n,{sx:{width:40,height:40,borderRadius:2,backgroundColor:"white",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 10px rgba(0,0,0,0.05)",color:"#7882a3"},children:t.icon}),e.jsx(r,{variant:"caption",sx:{fontWeight:900,color:"#1e40af",opacity:.1,fontSize:"1.5rem",lineHeight:1},children:t.number})]}),e.jsx(r,{variant:"subtitle1",sx:{fontWeight:700,mb:2,color:"#111827"},children:t.title}),e.jsx(U,{spacing:1,children:t.items.map(([s,o])=>e.jsx(p,{control:e.jsx(Q,{size:"small",checked:b[o],onChange:ea(o),sx:{color:"#d1d5db","&.Mui-checked":{color:"#1e40af"}}}),label:e.jsx(r,{variant:"body2",sx:{color:"#4b5563",fontWeight:500},children:s})},o))})]})},t.title))}),e.jsxs(n,{sx:{mt:4,p:3,borderRadius:4,background:"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)",border:"1px solid #bfdbfe"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(n,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:"#42454f",color:"white",display:"flex",alignItems:"center",justifyContent:"center",mr:2,boxShadow:"0 4px 12px rgba(30, 64, 175, 0.3)"},children:e.jsx(Aa,{fontSize:"small"})}),e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:700,color:"#1e3a8a"},children:"Premium Add-ons & Lighting"}),e.jsx(r,{variant:"caption",sx:{color:"#1e40af",opacity:.8},children:"Special connectivity and ambient features for passengers"})]})]}),e.jsxs($,{container:!0,spacing:4,alignItems:"center",children:[e.jsx($,{item:!0,xs:12,md:6,children:e.jsxs(n,{sx:{display:"flex",gap:4},children:[e.jsx(p,{control:e.jsx(Q,{checked:b.wifi,onChange:ea("wifi"),sx:{"&.Mui-checked":{color:"#1e40af"}}}),label:e.jsx(r,{sx:{fontWeight:600},children:"Guest Wifi"})}),e.jsx(p,{control:e.jsx(Q,{checked:b.chargingPoints,onChange:ea("chargingPoints"),sx:{"&.Mui-checked":{color:"#1e40af"}}}),label:e.jsx(r,{sx:{fontWeight:600},children:"USB Charging ports"})})]})}),e.jsx($,{item:!0,xs:12,md:6,children:e.jsxs(n,{sx:{p:2,backgroundColor:"white",borderRadius:3,border:"1px solid #bfdbfe",display:"flex",alignItems:"center",gap:3},children:[e.jsx(r,{variant:"body2",sx:{fontWeight:700,color:"#1e3a8a",minWidth:120},children:"Interior Lighting"}),e.jsxs(fe,{row:!0,value:ze,onChange:t=>Re(t.target.value),children:[e.jsx(p,{value:"normal",control:e.jsx(B,{size:"small",sx:{"&.Mui-checked":{color:"#1e40af"}}}),label:e.jsx(r,{variant:"body2",children:"Normal"})}),e.jsx(p,{value:"premium",control:e.jsx(B,{size:"small",sx:{"&.Mui-checked":{color:"#1e40af"}}}),label:e.jsx(r,{variant:"body2",children:"Premium Ambient"})})]})]})})]})]})]})]}),qt&&(he||W)&&e.jsx(n,{sx:{mb:4},children:e.jsxs(G,{sx:{mt:6,mb:6,borderRadius:3,border:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",overflow:"hidden"},children:[e.jsxs(n,{sx:{px:4,py:3,background:"linear-gradient(135deg, #f5efef 0%, #efdfe1 100%)",color:"white"},children:[e.jsx(r,{variant:"h5",sx:{fontWeight:700,mb:.5},children:"Package Pricing"}),e.jsx(r,{variant:"body2",sx:{opacity:.95},children:"Set base price, discount & advance booking options"})]}),e.jsx(n,{sx:{p:4,backgroundColor:"#fafbfc"},children:e.jsxs(U,{spacing:3,children:[e.jsxs(n,{sx:{p:3,borderRadius:2,backgroundColor:"#ffffff",border:"2px solid #e5e7eb",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 24px rgba(225, 91, 101, 0.15)",borderColor:"#E15B65"}},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(n,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:"#E15B65",display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:e.jsx(r,{sx:{color:"white",fontSize:20,fontWeight:700},children:"â‚¹"})}),e.jsx(r,{variant:"subtitle1",fontWeight:700,sx:{color:"#1f2937"},children:"Package Details"})]}),e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsxs(n,{sx:{p:2.5,borderRadius:2,backgroundColor:"#fef3f2",border:"1px solid #fecaca",display:"flex",flexDirection:"column"},children:[e.jsx(r,{variant:"body2",fontWeight:600,sx:{color:"#991b1b",mb:2},children:"Basic Package"}),e.jsxs(U,{spacing:2,sx:{flexGrow:1},children:[e.jsx(f,{fullWidth:!0,label:"Base Package Price",type:"number",value:je,onChange:t=>pt(t.target.value),placeholder:"0",InputProps:{startAdornment:e.jsx(r,{sx:{mr:.5,color:"#E15B65",fontWeight:600},children:"â‚¹"})},size:"small"}),e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:5,mt:3},children:[e.jsxs(C,{fullWidth:!0,size:"small",children:[e.jsx(k,{children:"Hours Included"}),e.jsxs(A,{value:mt,label:"Hours Included",onChange:t=>bt(t.target.value),children:[e.jsx(l,{value:"",children:"Select"}),e.jsx(l,{value:"4",children:"4 Hrs"}),e.jsx(l,{value:"6",children:"6 Hrs"}),e.jsx(l,{value:"8",children:"8 Hrs"}),e.jsx(l,{value:"10",children:"10 Hrs"}),e.jsx(l,{value:"12",children:"12 Hrs"})]})]}),e.jsxs(C,{fullWidth:!0,size:"small",children:[e.jsx(k,{children:"KM Included"}),e.jsxs(A,{value:jt,label:"KM Included",onChange:t=>yt(t.target.value),children:[e.jsx(l,{value:"",children:"Select"}),e.jsx(l,{value:"50",children:"50 KM"}),e.jsx(l,{value:"100",children:"100 KM"}),e.jsx(l,{value:"150",children:"150 KM"})]})]})]})]})]}),e.jsxs(n,{sx:{p:2.5,borderRadius:2,backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",display:"flex",flexDirection:"column"},children:[e.jsx(r,{variant:"body2",fontWeight:600,sx:{color:"#15803d",mb:2},children:"Apply Discount"}),e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,mb:3},children:[e.jsxs(C,{fullWidth:!0,size:"small",children:[e.jsx(k,{children:"Type"}),e.jsxs(A,{value:ye,label:"Type",onChange:t=>kt(t.target.value),children:[e.jsx(l,{value:"percentage",children:"Percentage (%)"}),e.jsx(l,{value:"flat",children:"Flat Rate (â‚¹)"})]})]}),e.jsx(f,{fullWidth:!0,label:"Value",type:"number",value:Ke,onChange:t=>Vt(t.target.value),size:"small"})]}),e.jsxs(n,{sx:{p:2,borderRadius:2,background:"linear-gradient(135deg, #e3dedf 0%, #ceaaad 100%)",textAlign:"center",boxShadow:"0 4px 14px rgba(225, 91, 101, 0.25)",display:"flex",flexDirection:"column",justifyContent:"center",minHeight:160},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:.5},children:[e.jsx(n,{sx:{width:24,height:24,borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.35)",display:"flex",alignItems:"center",justifyContent:"center",mr:1},children:e.jsx(r,{sx:{fontSize:13,fontWeight:700,color:"#000"},children:"Î£"})}),e.jsx(r,{variant:"caption",sx:{fontWeight:700,color:"#000"},children:"GRAND TOTAL"})]}),e.jsxs(r,{sx:{fontWeight:800,fontSize:"1.6rem",lineHeight:1.2,mb:.5,color:"#000"},children:["â‚¹ ",ns]}),Z>0&&e.jsxs(r,{variant:"caption",sx:{textDecoration:"line-through",color:"#6b7280",fontSize:"0.75rem"},children:["Original: â‚¹ ",Ie]}),e.jsx(r,{variant:"caption",sx:{fontSize:"0.7rem",fontWeight:600,color:"#000"},children:Z>0?`Discount Applied: â‚¹ ${Z}`:"Base Price"}),e.jsxs(n,{sx:{mt:2,pt:1.5,borderTop:"1px solid rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[e.jsx(r,{sx:{fontSize:"0.9rem"},children:"ðŸ’¡"}),e.jsx(r,{variant:"caption",sx:{fontSize:"0.7rem",lineHeight:1.3},children:"Final amount based on base price and discounts"})]})]})]})]})]}),e.jsxs(n,{sx:{p:3,borderRadius:2,backgroundColor:"#ffffff",border:"2px solid #e5e7eb",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 24px rgba(225, 91, 101, 0.15)",borderColor:"#E15B65"}},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(n,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:e.jsx(r,{sx:{color:"white",fontSize:20,fontWeight:700},children:"%"})}),e.jsx(r,{variant:"subtitle1",fontWeight:700,sx:{color:"#1f2937"},children:"Offers & Advance"})]}),e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:3},children:[e.jsxs(n,{sx:{p:2.5,borderRadius:2,backgroundColor:"#fff7ed",border:"1px solid #fed7aa",height:"100%"},children:[e.jsx(r,{variant:"body2",fontWeight:600,sx:{color:"#9a3412",mb:2},children:"Extra Charges"}),e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(f,{fullWidth:!0,label:"Price/KM",type:"number",value:Ct,onChange:t=>vt(t.target.value),placeholder:"0",InputProps:{startAdornment:e.jsx(r,{sx:{mr:.5,color:"text.secondary",fontSize:14},children:"â‚¹"})},size:"small"}),e.jsxs(C,{fullWidth:!0,size:"small",children:[e.jsx(k,{children:"After KM"}),e.jsxs(A,{value:St,label:"After KM",onChange:t=>wt(t.target.value),children:[e.jsx(l,{value:"",children:"Select"}),e.jsx(l,{value:"1",children:"Per KM"})]})]})]})]}),e.jsxs(n,{sx:{p:2.5,borderRadius:2,backgroundColor:"#eff6ff",border:"1px solid #bfdbfe",height:"100%"},children:[e.jsx(r,{variant:"body2",fontWeight:600,sx:{color:"#1e40af",mb:2},children:"Advance Booking"}),e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsxs(C,{fullWidth:!0,size:"small",children:[e.jsx(k,{children:"Type"}),e.jsxs(A,{value:Wa,label:"Type",onChange:t=>na(t.target.value),children:[e.jsx(l,{value:"percentage",children:"Percentage (%)"}),e.jsx(l,{value:"flat",children:"Flat (â‚¹)"})]})]}),e.jsx(f,{fullWidth:!0,label:"Amount",type:"number",value:At,onChange:t=>It(t.target.value),InputProps:{startAdornment:e.jsx(r,{sx:{mr:.5,color:"text.secondary",fontSize:14},children:"â‚¹"})},size:"small"})]})]})]})]})]})})]})}),e.jsxs(n,{sx:{mt:3,p:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"#fafafa"},children:[e.jsx(r,{variant:"subtitle1",gutterBottom:!0,children:"Vehicle Features"}),e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:F.decorationAvailable?{xs:"1fr",md:"1fr 1fr"}:"max-content",gap:3,alignItems:"center"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:3,px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white",width:"fit-content",minWidth:260},children:[e.jsx(r,{fontSize:14,fontWeight:500,children:"Decoration Available"}),e.jsx(hs,{checked:F.decorationAvailable,onChange:t=>oe(s=>({...s,decorationAvailable:t.target.checked})),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#E15B65"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})]}),F.decorationAvailable&&e.jsx(n,{sx:{px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white",minWidth:260},children:e.jsx(f,{fullWidth:!0,label:"Decoration Price (â‚¹)",type:"number",value:ke,onChange:t=>Ht(t.target.value),inputProps:{min:0},placeholder:"e.g. 5000"})})]})]}),e.jsxs(n,{sx:{mt:4,p:3,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"#fafafa"},children:[e.jsx(r,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Upload Vehicle Documents"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Upload RC, Insurance, Permit or any supporting vehicle documents"}),e.jsxs(sa,{onDragOver:t=>t.preventDefault(),onDrop:Ua,onClick:()=>document.getElementById("vehicle-documents-upload").click(),sx:{minHeight:160},children:[da.length>0?e.jsx(U,{spacing:1,sx:{width:"100%"},children:da.map((t,s)=>e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:1,border:"1px solid #e5e7eb",borderRadius:1,backgroundColor:"#ffffff"},children:[e.jsxs(r,{variant:"body2",noWrap:!0,children:["ðŸ“„ ",t.name]}),e.jsx(at,{size:"small",onClick:()=>Gt(o=>o.filter((i,u)=>u!==s)),children:"âœ•"})]},s))}):e.jsxs(e.Fragment,{children:[e.jsx(aa,{sx:{fontSize:42,color:"#E15B65",mb:1}}),e.jsx(r,{fontWeight:600,color:"#E15B65",children:"Click to upload documents"}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Or drag & drop files here (PDF, JPG, PNG)"})]}),e.jsx("input",{id:"vehicle-documents-upload",type:"file",hidden:!0,multiple:!0,accept:".pdf,image/png,image/jpeg,image/jpg",onChange:Ga})]})]}),e.jsx(n,{sx:{mb:4},children:e.jsxs(G,{sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, #ffffff, #fafafa)",border:"1px solid #eee"},children:[e.jsx(r,{variant:"h6",fontWeight:600,sx:{mb:.5},children:"Terms & Conditions"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Define rules & policies shown to customers during booking"}),z.map((t,s)=>e.jsxs(n,{sx:{mb:3,p:2,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(f,{fullWidth:!0,label:"Section Heading",placeholder:"e.g. Booking & Confirmation",value:t.heading,onChange:o=>{const i=[...z];i[s].heading=o.target.value,K(i)}}),z.length>1&&e.jsx(pe,{onClick:()=>K(o=>o.filter((i,u)=>u!==s)),sx:{ml:1,color:"error.main"},children:"âœ•"})]}),t.points.map((o,i)=>e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(f,{fullWidth:!0,label:`Point ${i+1}`,placeholder:"Enter policy detail",value:o,onChange:u=>{const x=[...z];x[s].points[i]=u.target.value,K(x)}}),t.points.length>1&&e.jsx(pe,{onClick:()=>{const u=[...z];u[s].points.splice(i,1),K(u)},sx:{ml:1,color:"error.main"},children:"âœ•"})]},i)),e.jsx(pe,{size:"small",onClick:()=>{const o=[...z];o[s].points.push(""),K(o)},sx:{mt:1,color:"#E15B65"},children:"+ Add Point"})]},s)),e.jsx(pe,{variant:"outlined",onClick:()=>K([...z,{heading:"",points:[""]}]),sx:{mt:2,borderRadius:2,borderColor:"#E15B65",color:"#E15B65"},children:"+ Add Section"})]})}),e.jsx(n,{sx:{mb:4},children:e.jsx(G,{sx:{p:2,boxShadow:"none",border:`1px solid ${h.palette.grey[200]}`},children:e.jsxs(xe,{sx:{"&:last-child":{pb:2}},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Search Tags"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert tags for appearing in user search results"}),e.jsx(f,{fullWidth:!0,label:"Type and press Enter",variant:"outlined",value:Ge,onChange:es,onKeyPress:ts,placeholder:"Type and press Enter",sx:{mb:2}}),e.jsx(n,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:$t.map((t,s)=>e.jsxs(n,{sx:{display:"flex",alignItems:"center",backgroundColor:h.palette.grey[200],borderRadius:h.shape.borderRadius,px:1,py:.5},children:[e.jsx(r,{variant:"body2",children:t}),e.jsx(at,{size:"small",onClick:()=>as(t),children:e.jsx(r,{sx:{fontSize:14},children:"Ã—"})})]},s))})]})})}),e.jsxs(n,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(pe,{variant:"outlined",color:"#E15B65",size:"large",onClick:Xt,sx:{color:"#E15B65"},children:et?"Cancel":"Reset"}),e.jsx(pe,{variant:"contained",type:"submit",size:"large",disabled:Ze,startIcon:Ze?e.jsx(Sa,{size:20,color:"inherit"}):null,sx:{color:"white",bgcolor:"#E15B65"},children:Ze?"Submitting...":et?"Update":"Submit"})]})]})]}),e.jsx(xs,{open:_a,autoHideDuration:6e3,onClose:fa,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{"& .MuiSnackbarContent-root":{minWidth:"600px",maxWidth:"600px",width:"auto"}},children:e.jsx(fs,{onClose:fa,severity:la,sx:{width:"100%",backgroundColor:la==="success"?"#1976d2":"#d32f2f",color:"white","& .MuiAlert-message":{whiteSpace:"pre-line",wordBreak:"break-word",fontSize:"1rem",lineHeight:1.5}},children:Va})})]})};export{Js as default};
