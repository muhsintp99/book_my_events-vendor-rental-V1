import{r as a,j as e,B as n,T as m,a as i,a1 as X,w as Y,z as Z,b as A,W as ee,k as te,s as B,N as se,E as ae,H as le}from"./index-RkRZ9gxu.js";import{S as re}from"./Search-C02erG94.js";import{D as oe}from"./Delete-CHkMXzho.js";import{T as ne,a as ie}from"./Tabs-C2YqPK-O.js";import{T as ce}from"./TableContainer-0HAr85AI.js";import{T as de,a as ue,b as L,c as r,d as he}from"./TableRow-cLftf7jN.js";const je=()=>{const[M,V]=a.useState("Role name example"),[u,p]=a.useState({Trip:!1,Vehicle:!1,Driver:!1,Marketing:!1,"Store setup":!1,"My wallet":!1,Profile:!1,Employees:!1,"My shop":!1,Reviews:!1,Chat:!1,Report:!1}),[h,C]=a.useState(0),[x,f]=a.useState(""),[W,y]=a.useState(""),[I,w]=a.useState(""),[O,R]=a.useState(""),[F,T]=a.useState(""),[$,E]=a.useState(""),[z,D]=a.useState(!1),[N,H]=a.useState(""),[c,b]=a.useState(()=>{const t=localStorage.getItem("roles");return t?JSON.parse(t):[{id:1,roleName:"manager",modules:"Vehicle",createdAt:"11-Sep-25"}]}),[q,g]=a.useState(!1),[d,j]=a.useState(null);a.useEffect(()=>{localStorage.setItem("roles",JSON.stringify(c)),window.dispatchEvent(new Event("rolesUpdated"))},[c]);const G=t=>{p({...u,[t.target.name]:t.target.checked})},J=(t,s)=>{C(s)},U=t=>{if(t.preventDefault(),!x.trim()){alert("Role name is required to submit.");return}const s=Object.entries(u).filter(([l,S])=>S).map(([l])=>l).join(", "),o={id:d?d.id:Date.now(),roleName:x.trim(),modules:s||"None",createdAt:d?d.createdAt:new Date().toLocaleDateString("en-GB")};d?(b(c.map(l=>l.id===d.id?o:l)),g(!1),j(null)):b([...c,o]),console.log({roleName:M,permissions:u}),D(!0),P()},P=()=>{V("Role name example"),p({Trip:!1,Vehicle:!1,Driver:!1,Marketing:!1,"Store setup":!1,"My wallet":!1,Profile:!1,Employees:!1,"My shop":!1,Reviews:!1,Chat:!1,Report:!1}),f(""),y(""),w(""),R(""),T(""),E(""),g(!1),j(null)},k=(t,s)=>{s!=="clickaway"&&D(!1)},_=t=>{b(c.filter(s=>s.id!==t))},K=t=>{g(!0),j(t),f(t.roleName),C(0);const s={...u};t.modules.split(", ").forEach(o=>{o in s&&(s[o]=!0)}),p(s)};function v(t){const{children:s,value:o,index:l,...S}=t;return e.jsx("div",{role:"tabpanel",hidden:o!==l,id:`simple-tabpanel-${l}`,"aria-labelledby":`simple-tab-${l}`,...S,children:o===l&&e.jsx(n,{sx:{p:3},children:s})})}function Q(t){return{id:`simple-tab-${t}`,"aria-controls":`simple-tabpanel-${t}`}}return e.jsxs(n,{sx:{p:3,width:1200,margin:"auto",backgroundColor:"white"},children:[e.jsxs(m,{variant:"h6",gutterBottom:!0,children:[e.jsx("span",{role:"img","aria-label":"user",children:"ðŸ‘¤"})," Custom Role"]}),e.jsxs(n,{component:"form",sx:{backgroundColor:"#fff",p:2,borderRadius:1,boxShadow:1},children:[e.jsx(m,{variant:"subtitle1",gutterBottom:!0,children:"Role Form"}),e.jsx(n,{sx:{mb:2},children:e.jsx(n,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:e.jsx(ne,{value:h,onChange:J,"aria-label":"language tabs",children:e.jsx(ie,{label:"Default",...Q(0)})})})}),e.jsxs(v,{value:h,index:0,children:[e.jsx(i,{fullWidth:!0,label:"Role name (Default)*",variant:"outlined",value:x,onChange:t=>f(t.target.value),placeholder:"Type role name",sx:{mb:2},required:!0,inputProps:{maxLength:100}}),e.jsx(i,{fullWidth:!0,label:"Short description (Default)",variant:"outlined",multiline:!0,rows:4,value:W,onChange:t=>y(t.target.value),placeholder:"Type short description",inputProps:{maxLength:500}})]}),e.jsxs(v,{value:h,index:1,children:[e.jsx(i,{fullWidth:!0,label:"Role name (English)",variant:"outlined",value:I,onChange:t=>w(t.target.value),placeholder:"Type role name in English",sx:{mb:2},inputProps:{maxLength:100}}),e.jsx(i,{fullWidth:!0,label:"Short description (English)",variant:"outlined",multiline:!0,rows:4,value:O,onChange:t=>R(t.target.value),placeholder:"Type short description in English",inputProps:{maxLength:500}})]}),e.jsxs(v,{value:h,index:2,children:[e.jsx(i,{fullWidth:!0,label:"Role name (Arabic)",variant:"outlined",value:F,onChange:t=>T(t.target.value),placeholder:"Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",sx:{mb:2},dir:"rtl",inputProps:{style:{textAlign:"right"},maxLength:100}}),e.jsx(i,{fullWidth:!0,label:"Short description (Arabic)",variant:"outlined",multiline:!0,rows:4,value:$,onChange:t=>E(t.target.value),placeholder:"Ø§ÙƒØªØ¨ ÙˆØµÙÙ‹Ø§ Ù‚ØµÙŠØ±Ù‹Ø§ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",dir:"rtl",inputProps:{style:{textAlign:"right"},maxLength:500}})]}),e.jsx(m,{variant:"subtitle1",gutterBottom:!0,children:"Module Permission :"}),e.jsx(X,{row:!0,sx:{justifyContent:"space-between",mb:2},children:["Venue","Profile","Employees","Reviews"].map(t=>e.jsx(Y,{control:e.jsx(Z,{checked:u[t],onChange:G,name:t}),label:t},t))}),e.jsxs(n,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(A,{variant:"outlined",color:"#E15B65",onClick:P,sx:{color:"#E15B65"},children:"Reset"}),e.jsx(A,{variant:"contained",color:"primary",onClick:U,sx:{color:"white",bgcolor:"#E15B65"},children:"Submit"})]})]}),!q&&e.jsxs(n,{sx:{mt:5,backgroundColor:"#fff",p:2,borderRadius:1,boxShadow:1},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(m,{variant:"h6",children:"ðŸ“‹ Roles Table"}),e.jsx(i,{size:"small",placeholder:"Search role",value:N,onChange:t=>H(t.target.value),InputProps:{endAdornment:e.jsx(ee,{position:"end",children:e.jsx(re,{})})}})]}),e.jsx(ce,{component:te,children:e.jsxs(de,{children:[e.jsx(ue,{sx:{backgroundColor:"#f9fafb"},children:e.jsxs(L,{children:[e.jsx(r,{children:"Sl#"}),e.jsx(r,{children:"Role Name"}),e.jsx(r,{children:"Modules"}),e.jsx(r,{children:"Created At"}),e.jsx(r,{children:"Action"})]})}),e.jsx(he,{children:c.filter(t=>t.roleName.toLowerCase().includes(N.toLowerCase())).map((t,s)=>e.jsxs(L,{children:[e.jsx(r,{children:s+1}),e.jsx(r,{children:t.roleName}),e.jsx(r,{children:t.modules}),e.jsx(r,{children:t.createdAt}),e.jsxs(r,{children:[e.jsx(B,{color:"primary",onClick:()=>K(t),children:e.jsx(se,{})}),e.jsx(B,{color:"error",onClick:()=>_(t.id),children:e.jsx(oe,{})})]})]},t.id))})]})})]}),e.jsx(ae,{open:z,autoHideDuration:3e3,onClose:k,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(le,{onClose:k,severity:"info",sx:{backgroundColor:"#1976d2",color:"white"},children:"Role updated successfully!"})})]})};export{je as default};
