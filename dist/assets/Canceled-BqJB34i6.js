import{r as t,j as s,B as o,T as r,t as A,a8 as w,S as x,ae as B,D as z,g as u,h as D}from"./index-0_6MWcuR.js";const b=()=>{const[f,h]=t.useState(null),[i,j]=t.useState([]),[g,p]=t.useState(!0),y=e=>e?typeof e=="string"?e:Array.isArray(e)?e.join(", "):typeof e=="object"?e.label?e.label:e.name?e.name:Object.values(e).filter(n=>typeof n=="string").join(", "):"N/A":"N/A",m=e=>{if(!e)return"N/A";const n=new Date(e);return isNaN(n.getTime())?"N/A":n.toDateString()},N=e=>Number(e)||0;t.useEffect(()=>{(async()=>{var n;try{const C=(((n=(await D.get("https://api.bookmyevent.ae/api/bookings")).data)==null?void 0:n.bookings)||[]).filter(c=>{var d,l;return((d=c.status)==null?void 0:d.toLowerCase())==="rejected"||((l=c.status)==null?void 0:l.toLowerCase())==="cancelled"});j(C)}catch(a){console.error("Failed to fetch canceled bookings",a)}finally{p(!1)}})()},[]);const k=e=>{h(n=>n===e?null:e)};return s.jsxs(o,{p:2,children:[s.jsx(r,{variant:"h4",gutterBottom:!0,children:"Canceled / Rejected Bookings"}),g?s.jsx(A,{}):i.length===0?s.jsx(r,{children:"No canceled bookings found"}):i.map(e=>{var n;return s.jsxs(w,{elevation:3,sx:{p:2,mt:2,borderRadius:"12px",cursor:"pointer"},onClick:()=>k(e._id),children:[s.jsxs(x,{direction:"row",justifyContent:"space-between",children:[s.jsxs(o,{children:[s.jsxs(r,{fontWeight:600,children:["Booking ID: #",(n=e._id)==null?void 0:n.slice(-6)]}),s.jsx(r,{color:"gray",fontSize:14,children:m(e.bookingDate)}),s.jsx(r,{color:"gray",fontSize:13,children:y(e.timeSlot)})]}),s.jsxs(r,{fontWeight:700,color:"red",children:["â‚¹",N(e.finalPrice)]})]}),s.jsxs(B,{in:f===e._id,children:[s.jsx(z,{sx:{my:2}}),s.jsxs(o,{sx:{background:"#f8f8f8",p:2,borderRadius:"10px"},children:[s.jsxs(r,{fontSize:14,children:[s.jsx("strong",{children:"Customer:"})," ",e.fullName||"N/A"]}),s.jsxs(r,{fontSize:14,children:[s.jsx("strong",{children:"Email:"})," ",e.emailAddress||"N/A"]}),s.jsxs(r,{fontSize:14,children:[s.jsx("strong",{children:"Contact:"})," ",e.contactNumber||"N/A"]}),s.jsxs(r,{fontSize:14,children:[s.jsx("strong",{children:"Guests:"})," ",e.numberOfGuests||"N/A"]}),s.jsxs(r,{fontSize:14,mt:1,children:[s.jsx("strong",{children:"Status:"})," ",s.jsx("span",{style:{color:"red"},children:e.status||"N/A"})]}),s.jsxs(r,{fontSize:14,children:[s.jsx("strong",{children:"Payment:"})," ",e.paymentStatus||"N/A"]})]}),s.jsxs(x,{direction:"row",spacing:2,mt:2,justifyContent:"center",children:[s.jsx(u,{variant:"outlined",sx:{width:"120px",borderRadius:"30px",color:"#E15B65"},children:"Download"}),s.jsx(u,{variant:"contained",sx:{width:"120px",borderRadius:"30px",bgcolor:"#E15B65",color:"white"},children:"View"})]})]})]},e._id)})]})};export{b as default};
