import{u as Ie,i as We,r as p,h as re,j as e,B as c,T as n,S as d,G as y,al as ie,s as z,a as U,ao as E,g as A,av as Pe,a3 as j,ay as De,F as Te,I as Fe,ab as Le,W as T,t as _e,U as ze,q as M,a4 as O,b as B,as as ce,bd as de,ak as Be,be as Re,P as Ne,ar as ke,D as ae,aD as Ee}from"./index-o1Kc6YJO.js";import{E as Me}from"./EventAvailable-CUDjyQQo.js";import{A as xe}from"./AccessTime-D8SLivA-.js";import{C as ue}from"./CheckCircle-CHLNeZze.js";import{T as Oe,S as $e}from"./TrendingUp-BVaWo5IO.js";import{S as Ve}from"./Search-BYqE0FF3.js";import{F as Ue}from"./FilterList-DMavtZr6.js";import{C as Ge}from"./Clear-CVKKPdgw.js";import{T as He,a as Ye}from"./Tabs-pLjnByfF.js";import{A as G,a as oe}from"./ArrowUpward-DxQoLzcC.js";import{C as me}from"./Cancel-nHXF7ABk.js";import{L as qe}from"./LocationOn-DmBlEiAk.js";import{G as Je}from"./Group-BmA4YC9R.js";const H="https://api.bookmyevent.ae",u="#D4AF37",pe="#0f172a",Y=(i,s="venues")=>{if(!i)return null;if(i.startsWith("http"))return i;const g=(i.startsWith("/")?i.slice(1):i).split("/").pop();return`https://api.bookmyevent.ae/uploads/${s}/${g}`},Ke=()=>{try{const i=localStorage.getItem("user");if(!i)return null;const s=JSON.parse(i);return(s==null?void 0:s._id)||null}catch{return null}},le=i=>{const s=String(i||"").toLowerCase();return["accepted","confirmed","approve","approved"].includes(s)?"#22c55e":s==="pending"?"#f59e0b":["cancelled","rejected"].includes(s)?"#ef4444":s==="completed"?"#3b82f6":"#64748b"},fe=i=>{var a;const s=i.packageId||i.venueId||i.moduleId||{};return{name:s.venueName||s.name||s.title||i.packageName||"Venue",thumbnail:s.thumbnail||i.thumbnail||"",category:((a=s.category)==null?void 0:a.title)||s.venueType||"Venue",address:s.venueAddress||i.venueAddress||"N/A",id:s._id||"N/A"}},ut=({initialTab:i="All",hideTabs:s=!1})=>{const a=Ie(),g=We(a.breakpoints.down("sm")),[I,C]=p.useState(null),[f,v]=p.useState([]),[S,W]=p.useState(!0),m=p.useMemo(()=>[{label:"All",value:0,filterFn:()=>!0,key:"All"},{label:"Pending",value:1,filterFn:t=>t==="pending",key:"Pending"},{label:"Confirmed",value:2,filterFn:(t,o,r)=>["accepted","confirmed","approve","approved"].includes(t)&&new Date(r.bookingDate)>=new Date().setHours(0,0,0,0),key:"Confirmed"},{label:"Completed",value:3,filterFn:(t,o,r)=>t==="completed"||t==="completed bookings"||t==="done"||["accepted","confirmed"].includes(t)&&new Date(r.bookingDate)<new Date().setHours(0,0,0,0),key:"Completed"},{label:"Cancelled",value:4,filterFn:t=>["cancelled","rejected"].includes(t),key:"Cancelled"},{label:"Payment Failed",value:5,filterFn:(t,o)=>o==="failed"||o==="Payment Failed"||o==="payment failed",key:"Payment Failed"}],[]),he=p.useMemo(()=>{const t=m.findIndex(o=>o.key.toLowerCase()===i.toLowerCase());return t!==-1?t:0},[i,m]),[L,je]=p.useState(he),[R,q]=p.useState(""),[$,ge]=p.useState("newest"),[be,J]=p.useState(null),[ve,K]=p.useState(!1),[P,ye]=p.useState(!1),[Q,V]=p.useState(null),[x,D]=p.useState({dateFrom:"",dateTo:"",paymentStatus:"all",minAmount:"",maxAmount:""});p.useEffect(()=>{const t=Ke();t?(C(t),Ce(t)):W(!1)},[]);const Ce=async t=>{var o;W(!0);try{const h=(((o=(await re.get(`${H}/api/bookings/provider/${t}`)).data)==null?void 0:o.data)||[]).filter(w=>{const _=String(w.moduleType||"").toLowerCase();return _==="venue"||_==="venues"});v(h)}catch(r){console.error("Error fetching bookings:",r)}finally{W(!1)}},X=p.useMemo(()=>{let t=[...f];const o=m[L];if(o&&(o.label!=="All"||s)&&(t=t.filter(r=>{const l=String(r.status||"").toLowerCase(),h=String(r.paymentStatus||"").toLowerCase();return o.filterFn(l,h,r)})),R.trim()){const r=R.toLowerCase();t=t.filter(l=>l._id&&l._id.toLowerCase().includes(r)||l.fullName&&l.fullName.toLowerCase().includes(r)||l.contactNumber&&String(l.contactNumber).includes(r)||l.emailAddress&&l.emailAddress.toLowerCase().includes(r)||l.venueName&&l.venueName.toLowerCase().includes(r))}return x.dateFrom&&(t=t.filter(r=>new Date(r.bookingDate)>=new Date(x.dateFrom))),x.dateTo&&(t=t.filter(r=>new Date(r.bookingDate)<=new Date(x.dateTo))),x.paymentStatus!=="all"&&(t=t.filter(r=>String(r.paymentStatus||"").toLowerCase()===x.paymentStatus.toLowerCase())),x.minAmount&&(t=t.filter(r=>parseFloat(r.finalPrice||0)>=parseFloat(x.minAmount))),x.maxAmount&&(t=t.filter(r=>parseFloat(r.finalPrice||0)<=parseFloat(x.maxAmount))),t.sort((r,l)=>{const h=new Date(r.bookingDate||0),w=new Date(l.bookingDate||0),_=parseFloat(r.finalPrice||0),te=parseFloat(l.finalPrice||0),se=(r.fullName||"").toLowerCase(),ne=(l.fullName||"").toLowerCase();switch($){case"newest":return l._id.localeCompare(r._id);case"date_asc":return h-w||l._id.localeCompare(r._id);case"date_desc":return w-h||l._id.localeCompare(r._id);case"price_high":return te-_||l._id.localeCompare(r._id);case"price_low":return _-te||l._id.localeCompare(r._id);case"name_asc":return se.localeCompare(ne)||l._id.localeCompare(r._id);case"name_desc":return ne.localeCompare(se)||l._id.localeCompare(r._id);default:return l._id.localeCompare(r._id)}}),t},[f,L,R,$,m,s,x]),N=p.useMemo(()=>{const t=f.length,o=f.filter(h=>String(h.status).toLowerCase()==="pending").length,r=f.filter(h=>["accepted","confirmed","approved"].includes(String(h.status).toLowerCase())).length,l=f.reduce((h,w)=>h+parseFloat(w.finalPrice||0),0);return{total:t,pending:o,confirmed:r,revenue:l}},[f]),we=(t,o)=>{J(t),K(!0)},Se=()=>{K(!1),J(null)},Z=async(t,o,r)=>{r&&r.stopPropagation();try{let l="";if(o==="accepted"?l=`${H}/api/bookings/${t}/accept`:o==="rejected"&&(l=`${H}/api/bookings/${t}/reject`),!l)return;await re.patch(l),v(h=>h.map(w=>w._id===t?{...w,status:o}:w)),alert(`Booking ${o==="accepted"?"Confirmed":"Rejected"}`)}catch(l){console.error("Status update error:",l),alert("Failed to update status")}},Ae=()=>{D({dateFrom:"",dateTo:"",paymentStatus:"all",minAmount:"",maxAmount:""}),q("")},ee=p.useMemo(()=>{let t=0;return x.dateFrom&&t++,x.dateTo&&t++,x.paymentStatus!=="all"&&t++,x.minAmount&&t++,x.maxAmount&&t++,t},[x]);return e.jsxs(c,{sx:{minHeight:"100vh",bgcolor:"#f8fafc",pb:6},children:[e.jsxs(c,{sx:{px:4,py:2,display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#fff",borderBottom:"1px solid #e2e8f0"},children:[e.jsxs(n,{variant:"h6",fontWeight:700,color:"text.primary",children:[m[L].label," Venues"]}),e.jsxs(d,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(n,{variant:"caption",color:"text.secondary",children:"Bookings"}),e.jsx(n,{variant:"caption",color:"text.secondary",sx:{mb:.5},children:">"}),e.jsx(n,{variant:"caption",fontWeight:600,color:"#6366f1",children:m[L].label})]})]}),e.jsxs(c,{sx:{p:{xs:2,md:4}},children:[!s&&e.jsxs(y,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(k,{label:"Total Bookings",value:N.total,color:u,icon:e.jsx(Me,{})}),e.jsx(k,{label:"Pending Orders",value:N.pending,color:"#f59e0b",icon:e.jsx(xe,{})}),e.jsx(k,{label:"Confirmed",value:N.confirmed,color:"#22c55e",icon:e.jsx(ue,{})}),e.jsx(k,{label:"Total Revenue",value:`₹${N.revenue.toLocaleString()}`,color:pe,icon:e.jsx(Oe,{})})]}),e.jsxs(ie,{elevation:0,sx:{borderRadius:"16px",border:"1px solid #e2e8f0",overflow:"hidden",bgcolor:"#fff"},children:[e.jsxs(c,{sx:{p:3,borderBottom:"1px solid #f1f5f9"},children:[e.jsxs(d,{direction:{xs:"column",md:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"stretch",md:"center"},children:[e.jsx(n,{variant:"h6",fontWeight:800,sx:{color:"#1e293b"},children:"Venue Bookings"}),e.jsxs(d,{direction:{xs:"column",sm:"row"},spacing:2,flex:1,maxWidth:{md:700},children:[e.jsx(z,{placeholder:"Search by ID, Name, Venue...",size:"small",fullWidth:!0,value:R,onChange:t=>q(t.target.value),InputProps:{startAdornment:e.jsx(U,{position:"start",children:e.jsx(Ve,{fontSize:"small"})}),sx:{borderRadius:"12px",bgcolor:"#f8fafc"}}}),e.jsx(E,{title:"Sort Options",children:e.jsx(A,{variant:"outlined",size:"small",onClick:t=>V(t.currentTarget),startIcon:e.jsx($e,{}),sx:{borderRadius:"12px",minWidth:100,borderColor:"#e2e8f0",color:"#64748b","&:hover":{borderColor:u,color:u}},children:"Sort"})}),e.jsx(E,{title:"Filter Options",children:e.jsx(Pe,{badgeContent:ee,color:"error",children:e.jsx(A,{variant:P?"contained":"outlined",size:"small",onClick:()=>ye(!P),startIcon:e.jsx(Ue,{}),sx:{borderRadius:"12px",minWidth:100,borderColor:"#e2e8f0",color:P?"#fff":"#64748b",bgcolor:P?u:"transparent","&:hover":{borderColor:u,bgcolor:P?u:j(u,.1)}},children:"Filters"})})})]})]}),e.jsx(De,{in:P,children:e.jsxs(c,{sx:{mt:3,p:3,borderRadius:"16px",bgcolor:j(u,.03),border:`1px solid ${j(u,.1)}`},children:[e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(n,{variant:"subtitle2",fontWeight:700,color:u,children:"Advanced Filters"}),ee>0&&e.jsx(A,{size:"small",startIcon:e.jsx(Ge,{}),onClick:Ae,sx:{color:"#64748b",textTransform:"none"},children:"Clear All"})]}),e.jsxs(y,{container:!0,spacing:2,children:[e.jsx(y,{item:!0,xs:12,sm:6,md:3,children:e.jsx(z,{fullWidth:!0,size:"small",label:"From Date",type:"date",value:x.dateFrom,onChange:t=>D(o=>({...o,dateFrom:t.target.value})),InputLabelProps:{shrink:!0},sx:{bgcolor:"#fff",borderRadius:"8px"}})}),e.jsx(y,{item:!0,xs:12,sm:6,md:3,children:e.jsx(z,{fullWidth:!0,size:"small",label:"To Date",type:"date",value:x.dateTo,onChange:t=>D(o=>({...o,dateTo:t.target.value})),InputLabelProps:{shrink:!0},sx:{bgcolor:"#fff",borderRadius:"8px"}})}),e.jsx(y,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(Te,{fullWidth:!0,size:"small",sx:{bgcolor:"#fff",borderRadius:"8px"},children:[e.jsx(Fe,{children:"Payment Status"}),e.jsxs(Le,{value:x.paymentStatus,label:"Payment Status",onChange:t=>D(o=>({...o,paymentStatus:t.target.value})),children:[e.jsx(T,{value:"all",children:"All"}),e.jsx(T,{value:"initiated",children:"Initiated"}),e.jsx(T,{value:"completed",children:"Completed"}),e.jsx(T,{value:"failed",children:"Failed"}),e.jsx(T,{value:"pending",children:"Pending"})]})]})}),e.jsx(y,{item:!0,xs:12,sm:6,md:2,children:e.jsx(z,{fullWidth:!0,size:"small",label:"Min Amount",type:"number",value:x.minAmount,onChange:t=>D(o=>({...o,minAmount:t.target.value})),InputProps:{startAdornment:e.jsx(U,{position:"start",children:"₹"})},sx:{bgcolor:"#fff",borderRadius:"8px"}})}),e.jsx(y,{item:!0,xs:12,sm:6,md:2,children:e.jsx(z,{fullWidth:!0,size:"small",label:"Max Amount",type:"number",value:x.maxAmount,onChange:t=>D(o=>({...o,maxAmount:t.target.value})),InputProps:{startAdornment:e.jsx(U,{position:"start",children:"₹"})},sx:{bgcolor:"#fff",borderRadius:"8px"}})})]})]})})]}),!s&&e.jsx(c,{sx:{px:3,borderBottom:"1px solid #f1f5f9"},children:e.jsx(He,{value:L,onChange:(t,o)=>je(o),sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:700,minWidth:100,fontSize:"0.9rem",color:"#64748b"},"& .Mui-selected":{color:"#3b82f6 !important"},"& .MuiTabs-indicator":{bgcolor:"#3b82f6",height:3}},children:m.map(t=>e.jsx(Ye,{label:t.label},t.key))})}),!g&&e.jsxs(c,{sx:{px:3,py:2,bgcolor:"#f8fafc",borderBottom:"1px solid #f1f5f9",display:"flex",gap:2,alignItems:"center"},children:[e.jsx(b,{flex:.5,label:"SI#"}),e.jsx(b,{flex:1.5,label:"Booking ID"}),e.jsx(b,{flex:2.5,label:"Venue"}),e.jsx(b,{flex:1.5,label:"Customer"}),e.jsx(b,{flex:2.2,label:"Email"}),e.jsx(b,{flex:1.5,label:"Booking Date"}),e.jsx(b,{flex:.8,label:"Guests"}),e.jsx(b,{flex:1.2,label:"Paid"}),e.jsx(b,{flex:1.3,label:"Total"}),e.jsx(b,{flex:1.5,label:"Status"}),e.jsx(b,{flex:1.2,label:"Payment"}),e.jsx(b,{flex:1.8,label:"Action",textAlign:"center"})]}),e.jsx(c,{sx:{minHeight:400},children:S?e.jsx(d,{alignItems:"center",justifyContent:"center",sx:{py:10},children:e.jsx(_e,{size:32,thickness:5})}):X.length===0?e.jsx(d,{alignItems:"center",justifyContent:"center",sx:{py:10,opacity:.5},children:e.jsx(n,{fontWeight:600,children:"No bookings found"})}):X.map((t,o)=>e.jsx(Qe,{index:o+1,booking:t,isMobile:g,onUpdateStatus:Z,onView:r=>we(r),statusColor:le(t.status)},t._id))})]})]}),e.jsx(Xe,{open:ve,onClose:Se,booking:be,onUpdateStatus:Z,getStatusColor:le}),e.jsxs(ze,{anchorEl:Q,open:!!Q,onClose:()=>V(null),PaperProps:{sx:{borderRadius:"16px",boxShadow:"0 8px 24px rgba(0,0,0,0.12)",minWidth:220,mt:1}},children:[e.jsx(c,{sx:{px:2,py:1.5,borderBottom:"1px solid #f1f5f9"},children:e.jsx(n,{variant:"caption",fontWeight:700,color:"text.secondary",children:"SORT BY"})}),[{value:"newest",label:"Latest First",icon:e.jsx(G,{fontSize:"small"})},{value:"date_desc",label:"Event Date (Newest)",icon:e.jsx(G,{fontSize:"small"})},{value:"date_asc",label:"Event Date (Oldest)",icon:e.jsx(oe,{fontSize:"small"})},{value:"price_high",label:"Amount (High to Low)",icon:e.jsx(G,{fontSize:"small"})},{value:"price_low",label:"Amount (Low to High)",icon:e.jsx(oe,{fontSize:"small"})}].map(t=>e.jsxs(T,{selected:$===t.value,onClick:()=>{ge(t.value),V(null)},sx:{py:1.5,px:2,gap:1.5},children:[t.icon,e.jsx(n,{variant:"body2",children:t.label})]},t.value))]})]})},k=({label:i,value:s,color:a,icon:g})=>e.jsx(y,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(ie,{elevation:0,sx:{p:3,borderRadius:"24px",border:"1px solid #e2e8f0",bgcolor:"#fff",display:"flex",alignItems:"center",gap:2.5,transition:"all 0.3s","&:hover":{transform:"translateY(-5px)",boxShadow:"0 12px 24px rgba(0,0,0,0.05)"}},children:[e.jsx(M,{sx:{bgcolor:j(a,.1),color:a,width:48,height:48,borderRadius:"14px"},children:g}),e.jsxs(c,{children:[e.jsx(n,{variant:"caption",fontWeight:700,color:"text.secondary",sx:{textTransform:"uppercase",fontSize:"0.65rem"},children:i}),e.jsx(n,{variant:"h5",fontWeight:900,sx:{color:a},children:s})]})]})}),b=({label:i,flex:s,textAlign:a="left"})=>e.jsx(n,{variant:"caption",fontWeight:800,color:"#64748b",sx:{flex:s,textAlign:a,fontSize:"0.7rem",textTransform:"uppercase"},children:i}),Qe=({index:i,booking:s,isMobile:a,onUpdateStatus:g,onView:I,statusColor:C})=>{var S,W;const f=String(s.status).toLowerCase()==="pending",v=fe(s);return a?e.jsxs(c,{sx:{p:2,borderBottom:"1px solid #f1f5f9"},onClick:()=>I(s),children:[e.jsxs(d,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(M,{src:Y(v.thumbnail,"venues"),variant:"rounded",sx:{width:50,height:50,border:`1px solid ${j(u,.2)}`}}),e.jsxs(c,{flex:1,children:[e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(n,{variant:"caption",fontWeight:800,color:u,children:["#",(S=s._id)==null?void 0:S.slice(-6)]}),e.jsx(O,{label:s.status,size:"small",sx:{height:18,fontSize:"0.6rem",fontWeight:800,bgcolor:j(C,.1),color:C}})]}),e.jsx(n,{variant:"subtitle2",fontWeight:800,noWrap:!0,children:v.name}),e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(n,{variant:"caption",color:"text.secondary",children:s.fullName}),e.jsxs(c,{sx:{textAlign:"right"},children:[e.jsxs(n,{variant:"caption",sx:{display:"block",fontWeight:600,color:"#10b981"},children:["Paid: ₹",(s.advanceAmount||0).toLocaleString()]}),e.jsxs(n,{variant:"caption",sx:{display:"block",fontWeight:800},children:["Total: ₹",(s.finalPrice||0).toLocaleString()]})]})]})]})]}),e.jsxs(d,{direction:"row",justifyContent:"space-between",mt:1.5,alignItems:"center",children:[e.jsx(c,{}),e.jsxs(d,{direction:"row",spacing:1,children:[e.jsx(B,{size:"small",sx:{border:"1px solid #e2e8f0",color:u},onClick:m=>{m.stopPropagation(),window.open(`tel:${s.contactNumber}`)},children:e.jsx(ce,{fontSize:"small"})}),e.jsx(B,{size:"small",sx:{border:"1px solid #e2e8f0",color:"#25d366"},onClick:m=>{m.stopPropagation(),window.open(`https://wa.me/${s.contactNumber}`)},children:e.jsx(de,{fontSize:"small"})})]})]})]}):e.jsxs(c,{onClick:()=>I(s),sx:{px:3,py:2,borderBottom:"1px solid #f1f5f9",display:"flex",alignItems:"center",gap:2,cursor:"pointer",transition:"all 0.2s","&:hover":{bgcolor:j(u,.05),zIndex:1}},children:[e.jsx(n,{variant:"body2",sx:{flex:.5,fontWeight:600,color:"text.secondary"},children:i}),e.jsxs(n,{variant:"body2",sx:{flex:1.5,fontWeight:700,color:u},children:["#",(W=s._id)==null?void 0:W.slice(-6)]}),e.jsxs(c,{sx:{flex:2.5,display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(M,{src:Y(v.thumbnail,"venues"),variant:"rounded",sx:{width:44,height:44,border:`1px solid ${j(u,.2)}`,bgcolor:"#f1f5f9"},children:e.jsx(Be,{sx:{fontSize:20,color:u}})}),e.jsxs(c,{children:[e.jsx(n,{variant:"body2",fontWeight:700,noWrap:!0,sx:{maxWidth:150},children:v.name}),e.jsx(n,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:v.category})]})]}),e.jsx(n,{variant:"body2",sx:{flex:1.5,fontWeight:700},children:s.fullName}),e.jsx(n,{variant:"body2",sx:{flex:2.2,color:"text.secondary",fontSize:"0.8rem"},noWrap:!0,children:s.emailAddress}),e.jsx(n,{variant:"body2",sx:{flex:1.5},children:new Date(s.bookingDate).toLocaleDateString()}),e.jsx(n,{variant:"body2",sx:{flex:.8,fontWeight:700},children:s.numberOfGuests||"-"}),e.jsxs(n,{variant:"body2",sx:{flex:1.2,fontWeight:700,color:"#10b981"},children:["₹",(s.advanceAmount||0).toLocaleString()]}),e.jsxs(n,{variant:"body2",sx:{flex:1.3,fontWeight:800},children:["₹",(s.finalPrice||0).toLocaleString()]}),e.jsx(c,{sx:{flex:1.5},children:e.jsx(O,{label:s.status,size:"small",sx:{fontWeight:800,bgcolor:j(C,.1),color:C}})}),e.jsx(c,{sx:{flex:1.2},children:e.jsx(n,{variant:"caption",fontWeight:700,sx:{textTransform:"capitalize"},children:s.paymentStatus||"Pending"})}),e.jsx(d,{direction:"row",spacing:1,sx:{flex:1.8},justifyContent:"center",children:f?e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Confirm",children:e.jsx(B,{size:"small",color:"success",onClick:m=>g(s._id,"accepted",m),children:e.jsx(ue,{fontSize:"small"})})}),e.jsx(E,{title:"Reject",children:e.jsx(B,{size:"small",color:"error",onClick:m=>g(s._id,"rejected",m),children:e.jsx(me,{fontSize:"small"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{onClick:m=>I(s,m),size:"small",variant:"outlined",sx:{minWidth:60,textTransform:"none"},children:"View"}),e.jsx(A,{size:"small",variant:"outlined",sx:{minWidth:80,textTransform:"none"},children:"Download"})]})})]})},Xe=({open:i,onClose:s,booking:a,onUpdateStatus:g,getStatusColor:I})=>{var v;if(!a)return null;const C=I(a.status),f=fe(a);return e.jsxs(Re,{anchor:"right",open:i,onClose:s,PaperProps:{sx:{width:{xs:"100%",sm:500},borderRadius:"24px 0 0 24px",p:4}},children:[e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:4,children:[e.jsx(n,{variant:"h5",fontWeight:800,children:"Booking Details"}),e.jsx(B,{onClick:s,children:e.jsx(me,{})})]}),e.jsxs(d,{spacing:4,children:[e.jsx(c,{sx:{p:3,borderRadius:"20px",bgcolor:j(C,.05),border:"1px solid",borderColor:j(C,.1)},children:e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(c,{children:[e.jsx(n,{variant:"caption",fontWeight:700,color:"text.secondary",children:"STATUS"}),e.jsx(n,{variant:"h6",fontWeight:800,color:C,sx:{textTransform:"capitalize"},children:a.status})]}),e.jsx(O,{label:a.moduleType||"Venue",sx:{fontWeight:700,bgcolor:"#fff"}})]})}),e.jsxs(c,{sx:{p:3,borderRadius:"24px",bgcolor:j(u,.03),border:"1px solid",borderColor:j(u,.1)},children:[e.jsx(n,{variant:"caption",fontWeight:800,color:"text.secondary",children:"VENUE INFO"}),e.jsxs(d,{direction:"row",spacing:3,mt:2,alignItems:"center",children:[e.jsx(M,{src:Y(f.thumbnail,"venues"),variant:"rounded",sx:{width:80,height:80,borderRadius:"16px"}}),e.jsxs(c,{flex:1,children:[e.jsx(n,{variant:"h6",fontWeight:800,children:f.name}),e.jsx(n,{variant:"body2",color:"text.secondary",children:f.category}),e.jsxs(d,{direction:"row",spacing:.5,alignItems:"center",mt:.5,children:[e.jsx(qe,{sx:{fontSize:14,color:"text.secondary"}}),e.jsx(n,{variant:"caption",color:"text.secondary",noWrap:!0,children:f.address})]})]})]})]}),e.jsxs(c,{children:[e.jsx(n,{variant:"caption",fontWeight:800,color:"text.secondary",children:"CUSTOMER PROFILE"}),e.jsxs(d,{spacing:2,sx:{mt:2},children:[e.jsx(F,{icon:e.jsx(Ne,{}),label:"Full Name",value:a.fullName}),e.jsx(F,{icon:e.jsx(ke,{}),label:"Email",value:a.emailAddress}),e.jsx(F,{icon:e.jsx(ce,{}),label:"Phone",value:a.contactNumber}),e.jsx(F,{icon:e.jsx(Je,{}),label:"Guest Count",value:a.numberOfGuests||"Not specified"})]})]}),e.jsx(ae,{}),e.jsxs(c,{children:[e.jsx(n,{variant:"caption",fontWeight:800,color:"text.secondary",children:"EVENT DETAILS"}),e.jsxs(y,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(y,{item:!0,xs:6,children:e.jsx(F,{icon:e.jsx(Ee,{}),label:"Event Date",value:new Date(a.bookingDate).toLocaleDateString()})}),e.jsx(y,{item:!0,xs:6,children:e.jsx(F,{icon:e.jsx(xe,{}),label:"Booking ID",value:`#${(v=a._id)==null?void 0:v.slice(-8).toUpperCase()}`})})]})]}),e.jsxs(c,{sx:{p:3,borderRadius:"24px",background:pe,color:"#fff"},children:[e.jsx(n,{variant:"caption",sx:{opacity:.7,fontWeight:700,textTransform:"uppercase",letterSpacing:1},children:"Payment Breakdown"}),e.jsxs(d,{spacing:2,mt:2,children:[e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(n,{variant:"body2",color:"rgba(255,255,255,0.7)",children:"Paid Amount"}),e.jsxs(n,{variant:"subtitle1",fontWeight:700,sx:{color:"#10b981"},children:["₹",(a.advanceAmount||0).toLocaleString()]})]}),e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(n,{variant:"body2",color:"rgba(255,255,255,0.7)",children:"Remaining Amount"}),e.jsxs(n,{variant:"subtitle1",fontWeight:700,sx:{color:"#f59e0b"},children:["₹",Math.max(0,(a.finalPrice||0)-(a.advanceAmount||0)).toLocaleString()]})]}),e.jsx(ae,{sx:{borderColor:"rgba(255,255,255,0.1)"}}),e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(c,{children:[e.jsx(n,{variant:"caption",sx:{opacity:.7},children:"GRAND TOTAL"}),e.jsxs(n,{variant:"h5",fontWeight:900,color:u,children:["₹",(a.finalPrice||0).toLocaleString()]})]}),e.jsx(O,{label:a.paymentStatus||"Pending",color:"primary",sx:{fontWeight:800,textTransform:"capitalize"}})]})]})]}),e.jsxs(d,{direction:"row",spacing:2,children:[String(a.status).toLowerCase()==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(A,{fullWidth:!0,variant:"outlined",color:"error",onClick:S=>{g(a._id,"rejected",S),s()},children:"Reject"}),e.jsx(A,{fullWidth:!0,variant:"contained",color:"success",onClick:S=>{g(a._id,"accepted",S),s()},children:"Confirm"})]}),e.jsx(A,{fullWidth:!0,variant:"soft",startIcon:e.jsx(de,{}),sx:{bgcolor:j("#25d366",.1),color:"#25d366"},onClick:()=>window.open(`https://wa.me/${a.contactNumber}`,"_blank"),children:"Chat"})]})]})]})},F=({icon:i,label:s,value:a})=>e.jsxs(d,{direction:"row",spacing:1.5,alignItems:"flex-start",children:[e.jsx(c,{sx:{color:"text.secondary",mt:.3},children:i}),e.jsxs(c,{children:[e.jsx(n,{variant:"caption",color:"text.secondary",fontWeight:500,children:s}),e.jsx(n,{variant:"body2",fontWeight:600,children:a})]})]});export{ut as V};
