import{r as i,a8 as ye,a7 as Ce,a9 as ke,as as Ue,ac as q,aa as ne,U as K,aQ as Ge,j as e,ab as Se,k as be,ae as J,aJ as Oe,Z as V,B as k,J as qe,K as Je,T as g,b as D,S as Z,a as L,W as Ke,F as Qe,o as Xe,M as Be,c as We,x as G,al as ue,s as ee,V as Ye,N as Ze,l as pe,m as xe,n as he,C as es,A as ge,G as x,X as me,am as ss,aR as ts,an as as,w as je,z as fe,E as os,H as rs}from"./index-iUmyR6eP.js";import{A as ns}from"./Add-BaTqihYV.js";import{S as is}from"./Search-DQd6c-Jb.js";import{R as ls,D as cs}from"./Refresh-CdaiELdX.js";import{T as ds}from"./TableContainer-CR4rAkIs.js";import{T as us,a as ps,b as ae,c as h,d as xs}from"./TableRow-CGK16QX6.js";import{S as hs}from"./Switch-DKfOGyuc.js";import{D as gs}from"./Delete-BEp56KFO.js";import{C as Re}from"./Close-qBGd7dpU.js";import{C as ms}from"./CardMedia-BkgTZmy-.js";import{S as js,A as ze}from"./Schedule-CstjOnEB.js";import{C as Le}from"./CheckCircle-Dj3TyYzg.js";import{I as fs}from"./Info-GafTMl3J.js";import{L as vs}from"./LocalOffer-bJG8UHIe.js";import{D as bs}from"./DirectionsCar-7Yx9pktq.js";import{L as ys,S as Cs}from"./Skeleton-DHhh3z5e.js";import{D as ve}from"./DialogActions-DqWAmXeJ.js";import{D as ks}from"./DialogContentText-DZL0oN05.js";const Ve=i.createContext({});function Ss(t){return Ce("MuiAccordion",t)}const oe=ye("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),As=t=>{const{classes:r,square:d,expanded:m,disabled:v,disableGutters:u}=t;return Se({root:["root",!d&&"rounded",m&&"expanded",v&&"disabled",!u&&"gutters"],heading:["heading"],region:["region"]},Ss,r)},Ps=K(be,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:d}=t;return[{[`& .${oe.region}`]:r.region},r.root,!d.square&&r.rounded,!d.disableGutters&&r.gutters]}})(J(({theme:t})=>{const r={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],r),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],r)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${oe.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${oe.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),J(({theme:t})=>({variants:[{props:r=>!r.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:r=>!r.disableGutters,style:{[`&.${oe.expanded}`]:{margin:"16px 0"}}}]}))),Ts=K("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),ws=i.forwardRef(function(r,d){const m=ke({props:r,name:"MuiAccordion"}),{children:v,className:u,defaultExpanded:b=!1,disabled:A=!1,disableGutters:P=!1,expanded:Q,onChange:N,square:T=!1,slots:H={},slotProps:B={},TransitionComponent:F,TransitionProps:W,...a}=m,[y,w]=Ue({controlled:Q,default:b,name:"Accordion",state:"expanded"}),R=i.useCallback(ce=>{w(!y),N&&N(ce,!y)},[y,N,w]),[n,...j]=i.Children.toArray(v),_=i.useMemo(()=>({expanded:y,disabled:A,disableGutters:P,toggle:R}),[y,A,P,R]),z={...m,square:T,disabled:A,disableGutters:P,expanded:y},I=As(z),U={transition:F,...H},f={transition:W,...B},E={slots:U,slotProps:f},[$,X]=q("root",{elementType:Ps,externalForwardedProps:{...E,...a},className:ne(I.root,u),shouldForwardComponentProp:!0,ownerState:z,ref:d,additionalProps:{square:T}}),[ie,Y]=q("heading",{elementType:Ts,externalForwardedProps:E,className:I.heading,ownerState:z}),[le,se]=q("transition",{elementType:Ge,externalForwardedProps:E,ownerState:z});return e.jsxs($,{...X,children:[e.jsx(ie,{...Y,children:e.jsx(Ve.Provider,{value:_,children:n})}),e.jsx(le,{in:y,timeout:"auto",...se,children:e.jsx("div",{"aria-labelledby":n.props.id,id:n.props["aria-controls"],role:"region",className:I.region,children:j})})]})});function Is(t){return Ce("MuiAccordionDetails",t)}ye("MuiAccordionDetails",["root"]);const Es=t=>{const{classes:r}=t;return Se({root:["root"]},Is,r)},Ms=K("div",{name:"MuiAccordionDetails",slot:"Root"})(J(({theme:t})=>({padding:t.spacing(1,2,2)}))),Ds=i.forwardRef(function(r,d){const m=ke({props:r,name:"MuiAccordionDetails"}),{className:v,...u}=m,b=m,A=Es(b);return e.jsx(Ms,{className:ne(A.root,v),ref:d,ownerState:b,...u})});function Bs(t){return Ce("MuiAccordionSummary",t)}const O=ye("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Ws=t=>{const{classes:r,expanded:d,disabled:m,disableGutters:v}=t;return Se({root:["root",d&&"expanded",m&&"disabled",!v&&"gutters"],focusVisible:["focusVisible"],content:["content",d&&"expanded",!v&&"contentGutters"],expandIconWrapper:["expandIconWrapper",d&&"expanded"]},Bs,r)},Rs=K(Oe,{name:"MuiAccordionSummary",slot:"Root"})(J(({theme:t})=>{const r={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],r),[`&.${O.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${O.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${O.disabled})`]:{cursor:"pointer"},variants:[{props:d=>!d.disableGutters,style:{[`&.${O.expanded}`]:{minHeight:64}}}]}})),zs=K("span",{name:"MuiAccordionSummary",slot:"Content"})(J(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:r=>!r.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${O.expanded}`]:{margin:"20px 0"}}}]}))),Ls=K("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(J(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${O.expanded}`]:{transform:"rotate(180deg)"}}))),Vs=i.forwardRef(function(r,d){const m=ke({props:r,name:"MuiAccordionSummary"}),{children:v,className:u,expandIcon:b,focusVisibleClassName:A,onClick:P,slots:Q,slotProps:N,...T}=m,{disabled:H=!1,disableGutters:B,expanded:F,toggle:W}=i.useContext(Ve),a=f=>{W&&W(f),P&&P(f)},y={...m,expanded:F,disabled:H,disableGutters:B},w=Ws(y),R={slots:Q,slotProps:N},[n,j]=q("root",{ref:d,shouldForwardComponentProp:!0,className:ne(w.root,u),elementType:Rs,externalForwardedProps:{...R,...T},ownerState:y,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:H,"aria-expanded":F,focusVisibleClassName:ne(w.focusVisible,A)},getSlotProps:f=>({...f,onClick:E=>{var $;($=f.onClick)==null||$.call(f,E),a(E)}})}),[_,z]=q("content",{className:w.content,elementType:zs,externalForwardedProps:R,ownerState:y}),[I,U]=q("expandIconWrapper",{className:w.expandIconWrapper,elementType:Ls,externalForwardedProps:R,ownerState:y});return e.jsxs(n,{...j,children:[e.jsx(_,{...z,children:v}),b&&e.jsx(I,{...U,children:b})]})}),$s=V([e.jsx("path",{d:"m12 2-5.5 9h11z"},"0"),e.jsx("circle",{cx:"17.5",cy:"17.5",r:"4.5"},"1"),e.jsx("path",{d:"M3 13.5h8v8H3z"},"2")]),Ns=V(e.jsx("path",{d:"M16.53 11.06 15.47 10l-4.88 4.88-2.12-2.12-1.06 1.06L10.59 17zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14z"})),Hs=V(e.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),Fs=V(e.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),_s=V(e.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"})),Us=V(e.jsx("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"})),Gs=V(e.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"})),Os=V([e.jsx("path",{d:"m21 5-9-4-9 4v6c0 5.55 3.84 10.74 9 12 2.3-.56 4.33-1.9 5.88-3.71l-3.12-3.12c-1.94 1.29-4.58 1.07-6.29-.64-1.95-1.95-1.95-5.12 0-7.07s5.12-1.95 7.07 0c1.71 1.71 1.92 4.35.64 6.29l2.9 2.9C20.29 15.69 21 13.38 21 11z"},"0"),e.jsx("circle",{cx:"12",cy:"12",r:"3"},"1")]),qs=V([e.jsx("path",{d:"M8.55 12c-1.07-.71-2.25-1.27-3.53-1.61 1.28.34 2.46.9 3.53 1.61m10.43-1.61c-1.29.34-2.49.91-3.57 1.64 1.08-.73 2.28-1.3 3.57-1.64"},"0"),e.jsx("path",{d:"M15.49 9.63c-.18-2.79-1.31-5.51-3.43-7.63-2.14 2.14-3.32 4.86-3.55 7.63 1.28.68 2.46 1.56 3.49 2.63 1.03-1.06 2.21-1.94 3.49-2.63m-6.5 2.65c-.14-.1-.3-.19-.45-.29.15.11.31.19.45.29m6.42-.25c-.13.09-.27.16-.4.26.13-.1.27-.17.4-.26M12 15.45C9.85 12.17 6.18 10 2 10c0 5.32 3.36 9.82 8.03 11.49.63.23 1.29.4 1.97.51.68-.12 1.33-.29 1.97-.51C18.64 19.82 22 15.32 22 10c-4.18 0-7.85 2.17-10 5.45"},"1")]),re="https://api.bookmyevent.ae/api/makeup-packages";function pt(){var Ae,Pe,Te,we,Ie,Ee,Me;const[t,r]=i.useState([]),[d,m]=i.useState(!0),[v,u]=i.useState({open:!1,message:"",severity:"success"}),[b,A]=i.useState({search:"",category:""}),[P,Q]=i.useState(""),[N,T]=i.useState(!1),[H,B]=i.useState(!1),[F,W]=i.useState(!1),[a,y]=i.useState(null),[w,R]=i.useState(null),[n,j]=i.useState({}),[_,z]=i.useState(!1),[I,U]=i.useState(0),f=localStorage.getItem("token"),E=JSON.parse(localStorage.getItem("user")||"{}"),$=E==null?void 0:E._id,X=s=>s?`https://api.bookmyevent.ae/${s.startsWith("/")?s.slice(1):s}`:null,ie=({src:s,alt:o,title:l})=>{var te;const[c,C]=i.useState(!1),[p,S]=i.useState(!0);return!s||c?e.jsx(ge,{variant:"rounded",sx:{width:70,height:70,bgcolor:"#E15B65",fontSize:"1.8rem",fontWeight:"bold",color:"white"},children:((te=l==null?void 0:l[0])==null?void 0:te.toUpperCase())||"M"}):e.jsxs(k,{sx:{position:"relative"},children:[p&&e.jsx(Cs,{variant:"rectangular",width:70,height:70,sx:{borderRadius:2}}),e.jsx(ge,{variant:"rounded",src:s,alt:o,sx:{width:70,height:70,borderRadius:2,display:p?"none":"block"},imgProps:{onLoad:()=>S(!1),onError:()=>{C(!0),S(!1)}}})]})},Y=i.useCallback(async()=>{if(!$||!f){u({open:!0,message:"Please login again",severity:"error"}),m(!1);return}m(!0);try{const s=await fetch(`${re}/provider/${$}`,{headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to load packages");const o=await s.json();o.success&&r(o.data||[])}catch(s){u({open:!0,message:s.message,severity:"error"})}finally{m(!1)}},[$,f]);i.useEffect(()=>{Y()},[Y]),i.useEffect(()=>{const s=setTimeout(()=>A(o=>({...o,search:P})),400);return()=>clearTimeout(s)},[P]);const le=s=>{y(s),U(0),T(!0)},se=s=>{y(s),j({...s}),B(!0)},ce=async()=>{z(!0);try{const o=await(await fetch(`${re}/${a._id}`,{method:"PUT",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},body:JSON.stringify(n)})).json();o.success?(r(l=>l.map(c=>c._id===a._id?o.data:c)),u({open:!0,message:"Package updated successfully",severity:"success"}),B(!1)):u({open:!0,message:o.message||"Update failed",severity:"error"})}catch{u({open:!0,message:"Something went wrong",severity:"error"})}finally{z(!1)}},$e=async(s,o)=>{try{(await(await fetch(`${re}/${s}/toggle-active`,{method:"PATCH",headers:{Authorization:`Bearer ${f}`}})).json()).success&&(r(C=>C.map(p=>p._id===s?{...p,isActive:!o}:p)),u({open:!0,message:"Status updated",severity:"success"}))}catch{u({open:!0,message:"Failed to update status",severity:"error"})}},Ne=async()=>{try{(await(await fetch(`${re}/${w}`,{method:"DELETE",headers:{Authorization:`Bearer ${f}`}})).json()).success&&(r(l=>l.filter(c=>c._id!==w)),u({open:!0,message:"Package deleted",severity:"success"}))}catch{u({open:!0,message:"Delete failed",severity:"error"})}finally{W(!1),R(null)}},de=i.useMemo(()=>t.filter(s=>{var c,C;const o=!b.search||((c=s.packageTitle)==null?void 0:c.toLowerCase().includes(b.search.toLowerCase())),l=!b.category||((C=s.categories)==null?void 0:C.some(p=>p._id===b.category));return o&&l}),[t,b]),He=i.useMemo(()=>{const s=new Map;return t.forEach(o=>{var l;return(l=o.categories)==null?void 0:l.forEach(c=>s.set(c._id,c))}),Array.from(s.values())},[t]),Fe=()=>{const s=["No","Title","Categories","Type","Base Price","Final Price","Status"],o=de.map((S,te)=>{var De;return[te+1,S.packageTitle||"",((De=S.categories)==null?void 0:De.map(_e=>_e.title).join(" | "))||"",S.makeupType||"",S.basePrice||0,S.finalPrice||0,S.isActive?"Active":"Inactive"]}),l=[s.join(","),...o.map(S=>S.join(","))].join(`
`),c=new Blob([l],{type:"text/csv"}),C=URL.createObjectURL(c),p=document.createElement("a");p.href=C,p.download=`makeup_packages_${new Date().toISOString().slice(0,10)}.csv`,p.click()},M=({icon:s,label:o,value:l,chip:c,success:C,error:p})=>e.jsxs(k,{sx:{display:"flex",alignItems:"flex-start",gap:2,py:1.5,borderBottom:"1px solid #f0f0f0"},children:[e.jsx(k,{sx:{color:"#E15B65",mt:.5},children:s}),e.jsxs(k,{sx:{flex:1},children:[e.jsx(g,{variant:"caption",color:"text.secondary",sx:{fontWeight:500},children:o}),c?e.jsx(G,{label:l,size:"small",color:C?"success":p?"error":"default",sx:{mt:.5}}):e.jsx(g,{variant:"body2",sx:{fontWeight:500,mt:.3},children:l||"Not specified"})]})]});return e.jsxs(k,{sx:{bgcolor:"#fafafa",minHeight:"100vh",p:3},children:[e.jsx(qe,{position:"static",color:"transparent",elevation:0,children:e.jsxs(Je,{children:[e.jsxs(g,{variant:"h5",sx:{flexGrow:1,fontWeight:600},children:["My Makeup Packages (",t.length,")"]}),e.jsx(D,{variant:"contained",startIcon:e.jsx(ns,{}),sx:{bgcolor:"#E15B65","&:hover":{bgcolor:"#c14a54"}},onClick:()=>window.location.href="/makeup/new",children:"Add New Package"})]})}),e.jsx(be,{sx:{p:2,mt:3},children:e.jsxs(Z,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",children:[e.jsx(L,{size:"small",placeholder:"Search packages...",value:P,onChange:s=>Q(s.target.value),InputProps:{startAdornment:e.jsx(Ke,{position:"start",children:e.jsx(is,{})})},sx:{width:{xs:"100%",sm:300}}}),e.jsx(Qe,{size:"small",sx:{minWidth:180},children:e.jsxs(Xe,{value:b.category,onChange:s=>A(o=>({...o,category:s.target.value})),displayEmpty:!0,children:[e.jsx(Be,{value:"",children:"All Categories"}),He.map(s=>e.jsx(Be,{value:s._id,children:s.title},s._id))]})}),e.jsxs(k,{sx:{ml:"auto",gap:1,display:"flex"},children:[e.jsx(D,{variant:"outlined",startIcon:e.jsx(ls,{}),onClick:Y,children:"Refresh"}),e.jsx(D,{variant:"outlined",startIcon:e.jsx(cs,{}),onClick:Fe,children:"Export CSV"})]})]})}),e.jsx(be,{sx:{mt:3},children:e.jsx(ds,{sx:{maxHeight:"70vh"},children:e.jsxs(us,{stickyHeader:!0,children:[e.jsx(ps,{children:e.jsxs(ae,{sx:{bgcolor:"#f8f9fa"},children:[e.jsx(h,{children:"#"}),e.jsx(h,{children:"Image"}),e.jsx(h,{children:"Title"}),e.jsx(h,{children:"Categories"}),e.jsx(h,{children:"Type"}),e.jsx(h,{align:"right",children:"Price"}),e.jsx(h,{children:"Status"}),e.jsx(h,{children:"Actions"})]})}),e.jsxs(xs,{children:[d&&e.jsx(ae,{children:e.jsx(h,{colSpan:8,align:"center",children:e.jsx(We,{})})}),!d&&de.length===0&&e.jsx(ae,{children:e.jsxs(h,{colSpan:8,align:"center",sx:{py:8},children:[e.jsx(g,{variant:"h6",color:"text.secondary",children:t.length===0?"No packages created yet":"No packages match your search"}),e.jsx(D,{variant:"contained",sx:{mt:2,bgcolor:"#E15B65"},onClick:()=>window.location.href="/makeup/new",children:"Create Your First Package"})]})}),de.map((s,o)=>{var l,c,C;return e.jsxs(ae,{hover:!0,children:[e.jsx(h,{children:o+1}),e.jsx(h,{children:e.jsx(ie,{src:X((l=s.gallery)==null?void 0:l[0]),alt:s.packageTitle,title:s.packageTitle})}),e.jsx(h,{children:e.jsx(g,{fontWeight:"medium",children:s.packageTitle})}),e.jsx(h,{children:e.jsx(Z,{direction:"row",spacing:.5,flexWrap:"wrap",children:(c=s.categories)==null?void 0:c.map(p=>e.jsx(G,{label:p.title,size:"small",color:"primary",variant:"outlined"},p._id))})}),e.jsx(h,{children:s.makeupType||"-"}),e.jsxs(h,{align:"right",children:[e.jsxs(g,{fontWeight:"bold",color:"primary",children:["AED ",(C=s.finalPrice)==null?void 0:C.toLocaleString()]}),s.basePrice>s.finalPrice&&e.jsx(g,{variant:"caption",color:"text.secondary",children:e.jsxs("del",{children:["AED ",s.basePrice]})})]}),e.jsx(h,{children:e.jsx(hs,{checked:s.isActive,onChange:()=>$e(s._id,s.isActive),color:"success"})}),e.jsx(h,{children:e.jsxs(Z,{direction:"row",spacing:.5,children:[e.jsx(ue,{title:"View Details",children:e.jsx(ee,{size:"small",onClick:()=>le(s),children:e.jsx(Ye,{fontSize:"small"})})}),e.jsx(ue,{title:"Edit Package",children:e.jsx(ee,{size:"small",color:"primary",onClick:()=>se(s),children:e.jsx(Ze,{fontSize:"small"})})}),e.jsx(ue,{title:"Delete",children:e.jsx(ee,{size:"small",color:"error",onClick:()=>{R(s._id),W(!0)},children:e.jsx(gs,{fontSize:"small"})})})]})})]},s._id)})]})]})})}),e.jsxs(pe,{open:N,onClose:()=>T(!1),maxWidth:"md",fullWidth:!0,scroll:"paper",children:[e.jsxs(xe,{sx:{bgcolor:"#E15B65",color:"white",pr:6},children:[e.jsx(g,{variant:"h6",children:a==null?void 0:a.packageTitle}),e.jsxs(g,{variant:"caption",sx:{opacity:.9},children:["ID: ",a==null?void 0:a.makeupId]}),e.jsx(ee,{sx:{position:"absolute",right:8,top:8,color:"white"},onClick:()=>T(!1),children:e.jsx(Re,{})})]}),e.jsx(he,{dividers:!0,sx:{p:0},children:a&&e.jsxs(k,{children:[e.jsxs(k,{sx:{bgcolor:"#1a1a1a",p:2},children:[e.jsx(k,{sx:{display:"flex",justifyContent:"center",mb:2},children:(Ae=a.gallery)!=null&&Ae[I]?e.jsx(es,{elevation:3,sx:{maxWidth:500},children:e.jsx(ms,{component:"img",height:"300",image:X(a.gallery[I]),alt:a.packageTitle,sx:{objectFit:"cover"}})}):e.jsx(k,{sx:{height:300,width:"100%",maxWidth:500,bgcolor:"#333",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:2},children:e.jsx(Fs,{sx:{fontSize:80,color:"#666"}})})}),((Pe=a.gallery)==null?void 0:Pe.length)>1&&e.jsx(k,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:a.gallery.map((s,o)=>e.jsx(ge,{variant:"rounded",src:X(s),onClick:()=>U(o),sx:{width:60,height:60,cursor:"pointer",border:I===o?"3px solid #E15B65":"3px solid transparent",opacity:I===o?1:.7,"&:hover":{opacity:1}}},o))})]}),e.jsx(k,{sx:{p:3},children:e.jsxs(x,{container:!0,spacing:3,children:[e.jsxs(x,{item:!0,xs:12,md:6,children:[e.jsx(g,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Basic Information"}),e.jsx(M,{icon:e.jsx($s,{}),label:"Categories",value:((Te=a.categories)==null?void 0:Te.map(s=>s.title).join(", "))||"None"}),e.jsx(M,{icon:e.jsx(Us,{}),label:"Makeup Type",value:a.makeupType}),e.jsx(M,{icon:e.jsx(js,{}),label:"Duration",value:a.duration}),e.jsx(M,{icon:e.jsx(Le,{}),label:"Status",value:a.isActive?"Active":"Inactive",chip:!0,success:a.isActive,error:!a.isActive}),e.jsx(M,{icon:e.jsx(fs,{}),label:"Description",value:a.description})]}),e.jsxs(x,{item:!0,xs:12,md:6,children:[e.jsx(g,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Pricing & Policies"}),e.jsx(M,{icon:e.jsx(ze,{}),label:"Base Price",value:`AED ${(we=a.basePrice)==null?void 0:we.toLocaleString()}`}),e.jsx(M,{icon:e.jsx(vs,{}),label:"Offer Discount",value:a.offerPrice?`AED ${(Ie=a.offerPrice)==null?void 0:Ie.toLocaleString()}`:"No offer"}),e.jsx(M,{icon:e.jsx(ze,{}),label:"Final Price",value:e.jsxs(g,{sx:{color:"#E15B65",fontWeight:"bold"},children:["AED ",(Ee=a.finalPrice)==null?void 0:Ee.toLocaleString()]})}),e.jsx(M,{icon:e.jsx(Gs,{}),label:"Advance Booking Amount",value:a.advanceBookingAmount?`AED ${a.advanceBookingAmount}`:"Not specified"}),e.jsx(M,{icon:e.jsx(Os,{}),label:"Cancellation Policy",value:a.cancellationPolicy})]}),e.jsxs(x,{item:!0,xs:12,children:[e.jsx(me,{sx:{my:2}}),e.jsx(g,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Additional Features"}),e.jsxs(Z,{direction:"row",spacing:2,flexWrap:"wrap",useFlexGap:!0,children:[e.jsx(G,{icon:e.jsx(qs,{}),label:a.trialMakeupIncluded?"Trial Makeup Included":"No Trial Makeup",color:a.trialMakeupIncluded?"success":"default",variant:a.trialMakeupIncluded?"filled":"outlined"}),e.jsx(G,{icon:e.jsx(bs,{}),label:a.travelToVenue?"Travel to Venue Included":"No Travel to Venue",color:a.travelToVenue?"success":"default",variant:a.travelToVenue?"filled":"outlined"}),e.jsx(G,{icon:e.jsx(Ns,{}),label:a.isTopPick?"Top Pick":"Not a Top Pick",color:a.isTopPick?"warning":"default",variant:a.isTopPick?"filled":"outlined"})]})]}),((Me=a.includedServices)==null?void 0:Me.length)>0&&e.jsxs(x,{item:!0,xs:12,children:[e.jsx(me,{sx:{my:2}}),e.jsx(g,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Included Services"}),a.includedServices.map((s,o)=>{var l,c;return e.jsxs(ws,{defaultExpanded:o===0,sx:{mb:1,"&:before":{display:"none"},boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx(Vs,{expandIcon:e.jsx(Hs,{}),sx:{bgcolor:"#f8f9fa"},children:e.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_s,{sx:{color:"#E15B65"}}),e.jsx(g,{fontWeight:500,children:s.title}),e.jsx(G,{label:`${((l=s.items)==null?void 0:l.length)||0} items`,size:"small",sx:{ml:1}})]})}),e.jsx(Ds,{children:e.jsx(ss,{dense:!0,children:(c=s.items)==null?void 0:c.map((C,p)=>e.jsxs(ys,{children:[e.jsx(ts,{sx:{minWidth:32},children:e.jsx(Le,{sx:{fontSize:18,color:"success.main"}})}),e.jsx(as,{primary:C})]},p))})})]},o)})]}),e.jsxs(x,{item:!0,xs:12,children:[e.jsx(me,{sx:{my:2}}),e.jsxs(Z,{direction:"row",spacing:4,sx:{color:"text.secondary"},children:[e.jsxs(g,{variant:"caption",children:["Created: ",new Date(a.createdAt).toLocaleString()]}),e.jsxs(g,{variant:"caption",children:["Updated: ",new Date(a.updatedAt).toLocaleString()]})]})]})]})})]})}),e.jsxs(ve,{sx:{p:2},children:[e.jsx(D,{onClick:()=>{T(!1),se(a)},variant:"outlined",children:"Edit Package"}),e.jsx(D,{variant:"contained",sx:{bgcolor:"#E15B65"},onClick:()=>T(!1),children:"Close"})]})]}),e.jsxs(pe,{open:H,onClose:()=>B(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(xe,{children:"Edit Package"}),e.jsx(ee,{sx:{position:"absolute",right:8,top:8},onClick:()=>B(!1),children:e.jsx(Re,{})}),e.jsx(he,{children:e.jsxs(x,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(x,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Package Title",value:n.packageTitle||"",onChange:s=>j({...n,packageTitle:s.target.value})})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Description",multiline:!0,rows:3,value:n.description||"",onChange:s=>j({...n,description:s.target.value})})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(L,{fullWidth:!0,label:"Base Price (AED)",type:"number",value:n.basePrice||"",onChange:s=>j({...n,basePrice:Number(s.target.value)})})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(L,{fullWidth:!0,label:"Final Price (AED)",type:"number",value:n.finalPrice||"",onChange:s=>j({...n,finalPrice:Number(s.target.value)})})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(L,{fullWidth:!0,label:"Offer Price (AED)",type:"number",value:n.offerPrice||"",onChange:s=>j({...n,offerPrice:Number(s.target.value)})})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(L,{fullWidth:!0,label:"Advance Booking (AED)",value:n.advanceBookingAmount||"",onChange:s=>j({...n,advanceBookingAmount:s.target.value})})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Duration",value:n.duration||"",onChange:s=>j({...n,duration:s.target.value})})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Cancellation Policy",multiline:!0,rows:2,value:n.cancellationPolicy||"",onChange:s=>j({...n,cancellationPolicy:s.target.value})})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(je,{control:e.jsx(fe,{checked:n.trialMakeupIncluded||!1,onChange:s=>j({...n,trialMakeupIncluded:s.target.checked})}),label:"Trial Makeup Included"})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(je,{control:e.jsx(fe,{checked:n.travelToVenue||!1,onChange:s=>j({...n,travelToVenue:s.target.checked})}),label:"Travel to Venue"})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(je,{control:e.jsx(fe,{checked:n.isActive||!1,onChange:s=>j({...n,isActive:s.target.checked})}),label:"Active (Visible to customers)"})})]})}),e.jsxs(ve,{children:[e.jsx(D,{onClick:()=>B(!1),children:"Cancel"}),e.jsx(D,{variant:"contained",onClick:ce,disabled:_,children:_?e.jsx(We,{size:24}):"Save Changes"})]})]}),e.jsxs(pe,{open:F,onClose:()=>W(!1),children:[e.jsx(xe,{children:"Delete Package?"}),e.jsx(he,{children:e.jsx(ks,{children:"This action cannot be undone. This package will be permanently deleted."})}),e.jsxs(ve,{children:[e.jsx(D,{onClick:()=>W(!1),children:"Cancel"}),e.jsx(D,{color:"error",variant:"contained",onClick:Ne,children:"Delete Permanently"})]})]}),e.jsx(os,{open:v.open,autoHideDuration:4e3,onClose:()=>u({...v,open:!1}),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(rs,{severity:v.severity,variant:"filled",children:v.message})})]})}export{pt as default};
