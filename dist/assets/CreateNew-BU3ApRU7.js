import{u as ua,i as pa,aj as ha,w as ga,ai as xa,r,h as _,j as e,B as i,b as mt,ak as ma,T as o,t as Lt,p as w,W as z,s as x,am as ba,S as bt,F as O,I as Y,ag as X,$ as S,at as fa,f as le,an as de,al as ft,g as ee,ao as ya,x as ja}from"./index-CyTDxlSb.js";import{D as Ca}from"./DirectionsCar-CO_NRnmV.js";import{C as Rt}from"./CloudUpload-M9NKcz3t.js";const $t=ba(i)(({theme:l})=>({border:"2px dashed #e0e0e0",borderRadius:l.shape.borderRadius,padding:l.spacing(3),textAlign:"center",backgroundColor:l.palette.grey[50],cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"150px","&:hover":{borderColor:l.palette.primary.main},'& input[type="file"]':{display:"none"}})),za=()=>{const l=ua(),L=pa(l.breakpoints.down("md")),Z=ha(),Te=ga(),{id:te}=xa(),Me=r.useRef(null),C=r.useRef(null),De=r.useRef(null),[yt,Ft]=r.useState(""),[We,Vt]=r.useState(""),k="https://api.bookmyevent.ae/api",_e="AIzaSyAfLUm1kPmeMkHh1Hr5nbgNpQJOsNa7B78",G=localStorage.getItem("moduleId");r.useMemo(()=>{var t;return(t=Z.state)==null?void 0:t.vehicle},[Z.state]);const jt=r.useMemo(()=>{var t,a;return(a=(t=Z.state)==null?void 0:t.vehicle)==null?void 0:a._id},[Z.state]),ae=r.useMemo(()=>{var t,a;return te||((a=(t=Z.state)==null?void 0:t.vehicle)==null?void 0:a._id)||""},[te,jt]),Ht=r.useMemo(()=>ae?"edit":"create",[ae]),[ze,Le]=r.useState(Ht),[ce,Re]=r.useState(""),[Ct,$e]=r.useState(""),[N,Fe]=r.useState(null),[M,ue]=r.useState([]),[pe,Ve]=r.useState(""),[he,He]=r.useState(""),[Ot,vt]=r.useState(""),[ge,Oe]=r.useState(""),[re,Ne]=r.useState(""),[xe,Ue]=r.useState(""),[qe,Ze]=r.useState("yes"),[se,Ge]=r.useState(""),[St,Je]=r.useState(""),[g,R]=r.useState("hourly"),[me,Ke]=r.useState(""),[be,Qe]=r.useState(""),[fe,Ye]=r.useState(""),[ye,Xe]=r.useState(""),[D,ne]=r.useState({driverIncluded:!1,sunroof:!1,decorationAvailable:!1}),[et,wt]=r.useState(""),[I,$]=r.useState([{heading:"",points:[""]}]),[tt,je]=r.useState([]),[Ce,at]=r.useState(""),[Nt,b]=r.useState(!1),[Ut,y]=r.useState(""),[kt,j]=r.useState("success"),[rt,st]=r.useState([]),[nt,At]=r.useState([]),[qt,Zt]=r.useState([]),[ot,Gt]=r.useState({}),[va,Sa]=r.useState(""),[wa,ka]=r.useState(""),[Aa,Ba]=r.useState(""),[Ea,Pa]=r.useState(""),[Ia,Ta]=r.useState(""),[ve,Bt]=r.useState(""),[Ma,Jt]=r.useState({}),[Kt,it]=r.useState([]),[Qt,oe]=r.useState([]),[ie,Et]=r.useState(""),[Se,lt]=r.useState(""),[U,dt]=r.useState([]),[ct,Pt]=r.useState(!1),[we,A]=r.useState(!1),[ke,ut]=r.useState(""),[q,pt]=r.useState([]),[Ae,J]=r.useState(""),[B,K]=r.useState(""),[E,Q]=r.useState(""),[Be,ht]=r.useState(""),[W,It]=r.useState(!1),[f,Tt]=r.useState(null);r.useEffect(()=>{if(window.google&&window.google.maps){It(!0);return}const t=document.createElement("script");return t.src=`https://maps.googleapis.com/maps/api/js?key=${_e}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{It(!0)},document.head.appendChild(t),()=>{document.head.contains(t)&&document.head.removeChild(t)}},[_e]),r.useEffect(()=>{W&&window.google&&window.google.maps&&Yt()},[W]);const Yt=r.useCallback(()=>{if(!window.google||!Me.current||!W)return;const t=B&&E?parseFloat(B):20.5937,a=B&&E?parseFloat(E):78.9629,n={lat:t,lng:a},s=new window.google.maps.Map(Me.current,{zoom:12,center:n});s.addListener("click",d=>{const h=d.latLng.lat(),c=d.latLng.lng();K(h.toString()),Q(c.toString()),C.current&&C.current.setMap(null),C.current=new window.google.maps.Marker({position:{lat:h,lng:c},map:s}),new window.google.maps.Geocoder().geocode({location:{lat:h,lng:c}},(P,T)=>{T==="OK"&&P[0]?(J(P[0].formatted_address),y("Location set and address auto-filled!"),j("success"),b(!0)):(y("Location set, but could not determine address."),j("info"),b(!0))})}),Tt(s)},[W,B,E]);r.useEffect(()=>{if(!W||!f||!De.current||!window.google)return;const t=new window.google.maps.places.Autocomplete(De.current,{fields:["place_id","geometry","name","formatted_address"]}),a=t.addListener("place_changed",()=>{const n=t.getPlace();if(!n.geometry||!n.geometry.location)return;const s=n.geometry.location;n.geometry.viewport?f.fitBounds(n.geometry.viewport):(f.setCenter(s),f.setZoom(17)),C.current&&C.current.setMap(null),C.current=new window.google.maps.Marker({position:s,map:f}),K(s.lat().toString()),Q(s.lng().toString()),J(n.formatted_address||n.name),y("Location selected!"),j("success"),b(!0)});return()=>{window.google&&window.google.maps.event&&window.google.maps.event.removeListener(a)}},[W,f]),r.useEffect(()=>{if(!f||!B||!E)return;const t={lat:parseFloat(B),lng:parseFloat(E)};f.setCenter(t),f.setZoom(12),C.current?C.current.setPosition(t):C.current=new window.google.maps.Marker({position:t,map:f})},[B,E,f]),r.useEffect(()=>{if(!re||!W||!window.google||!window.google.maps)return;new window.google.maps.Geocoder().geocode({address:re},(a,n)=>{if(n==="OK"&&a[0]){const s=a[0].geometry.location,d=s.lat().toString(),h=s.lng().toString();K(d),Q(h),J(a[0].formatted_address),f&&(f.setCenter({lat:s.lat(),lng:s.lng()}),f.setZoom(12),C.current&&C.current.setMap(null),C.current=new window.google.maps.Marker({position:{lat:s.lat(),lng:s.lng()},map:f})),y(`Location set for ${re}!`),j("success"),b(!0)}else y(`Could not find location for ${re}`),j("warning"),b(!0)})},[re,W,f]);const Ee=r.useCallback(t=>{var d,h,c,v,P,T,F,V,H,u,m,Ie,Wt,_t,zt;if(console.log("Setting vehicle data:",t),t.brand&&t.brand._id&&!rt.some(p=>p._id===t.brand._id)&&st(p=>[...p,{_id:t.brand._id,title:t.brand.title||t.brand.name||"Unknown Brand"}]),Bt(((d=t.advanceBookingAmount)==null?void 0:d.toString())||""),(c=(h=t.category)==null?void 0:h.parentCategory)!=null&&c._id){const p=t.category.parentCategory._id;Et(p),lt(t.category._id),_.get(`${k}/categories/parents/${p}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(ca=>oe(ca.data.data||[])).catch(()=>oe([]))}t.termsAndConditions&&Array.isArray(t.termsAndConditions)&&t.termsAndConditions.length>0?$(t.termsAndConditions.map(p=>({heading:p.heading||"",points:Array.isArray(p.points)&&p.points.length>0?p.points:[""]}))):$([{heading:"",points:[""]}]);let a="";Array.isArray(t.category)&&t.category.length>0?(a=t.category[0]._id,nt.some(p=>p._id===a)||At(p=>[...p,{_id:a,title:t.category[0].title||"Unknown Category"}])):t.category&&typeof t.category=="object"&&t.category._id?(a=t.category._id,nt.some(p=>p._id===a)||At(p=>[...p,{_id:a,title:t.category.title||"Unknown Category"}])):typeof t.category=="string"&&(a=t.category),t.zone&&t.zone._id&&!U.some(p=>p._id===t.zone._id)&&dt(p=>[...p,{_id:t.zone._id,name:t.zone.name||"Unknown Zone"}]),Re(t.name||""),$e(t.description||""),Ve(((v=t.brand)==null?void 0:v._id)||""),vt(a),console.log("Category ID being set:",a);const n=((P=t.zone)==null?void 0:P._id)||"";Oe(n);const s=U.find(p=>p._id===n)||t.zone&&{name:t.zone.name};Ne(s?s.name:""),He(t.model||""),Ue(((T=t.seatingCapacity)==null?void 0:T.toString())||""),Ze(t.airCondition?"yes":"no"),Ge(t.licensePlateNumber||""),je(t.searchTags||[]),J(t.venueAddress||""),K(((F=t.latitude)==null?void 0:F.toString())||""),Q(((V=t.longitude)==null?void 0:V.toString())||""),ht(t.operatingHours||""),console.log("Operating hours being set:",t.operatingHours),t.pricing&&(R(t.pricing.type||"hourly"),Ke(((H=t.pricing.hourly)==null?void 0:H.toString())||""),Qe(((u=t.pricing.perDay)==null?void 0:u.toString())||""),Ye(((m=t.pricing.distanceWise)==null?void 0:m.toString())||"")),Xe(((Ie=t.discount)==null?void 0:Ie.toString())||""),ne({driverIncluded:((Wt=t.features)==null?void 0:Wt.driverIncluded)??!1,sunroof:((_t=t.features)==null?void 0:_t.sunroof)??!1,decorationAvailable:((zt=t.features)==null?void 0:zt.decorationAvailable)??!1})},[rt,nt,U]);r.useEffect(()=>()=>{M.forEach(t=>URL.revokeObjectURL(t))},[M]),r.useEffect(()=>{(async()=>{var a,n,s,d,h;try{if(!G)throw new Error("Module ID is not defined. Please log in or set moduleId in localStorage.");const c=localStorage.getItem("token"),[v,P,T]=await Promise.all([_.get(`${k}/brands/module/${G}`,{headers:{Authorization:`Bearer ${c}`}}),_.get(`${k}/categories/parents/${G}`,{headers:{Authorization:`Bearer ${c}`}}),_.get(`${k}/zones`,{headers:{Authorization:`Bearer ${c}`,Accept:"application/json"}})]);it(((a=P.data)==null?void 0:a.data)||[]);const F=Array.isArray(v.data)?v.data:v.data.data||[];st(F);const V=((n=P.data)==null?void 0:n.data)||[];it(V);const H=T.data.data||T.data||[],u=Array.isArray(H)?H.filter(m=>m.isActive).map(m=>({_id:m._id,name:m.name})):[];dt(u),console.log("Module ID:",G),console.log("Brands:",F),console.log("Parent Categories:",V),console.log("Zones:",u),Pt(!0)}catch(c){console.error("Error fetching brands/categories/zones:",((s=c.response)==null?void 0:s.data)||c),st([]),it([]),dt([]),Pt(!0),y(((h=(d=c.response)==null?void 0:d.data)==null?void 0:h.message)||"Failed to fetch brands, categories, or zones"),j("error"),b(!0)}})()},[G,k]),r.useEffect(()=>{(async()=>{var a;try{const d=(((a=(await _.get(`${k}/vehicle-attributes`)).data)==null?void 0:a.data)||[]).filter(c=>c.status),h={};d.forEach(c=>{h[c.title.toLowerCase()]=c.values||[]}),Zt(d),Jt(h),console.log("✅ Vehicle Attributes Loaded:",d)}catch(n){console.error("❌ Failed to load vehicle attributes",n)}})()},[k]),r.useEffect(()=>{var a;if(!ct)return;const t=(a=Z.state)==null?void 0:a.vehicle;t?(Ee(t),ut(t.thumbnail||""),pt(t.images||[]),Le("edit")):te&&(async()=>{var s,d,h;A(!0);try{const c=await _.get(`${k}/vehicles/${te}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),v=c.data.data||c.data;console.log("Vehicle data fetched for edit:",v),Ee(v),ut(v.thumbnail||""),pt(v.images||[]),Le("edit")}catch(c){y(((d=(s=c.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to fetch vehicle data"),j("error"),b(!0),console.error("Error fetching vehicle:",((h=c.response)==null?void 0:h.data)||c)}finally{A(!1)}})()},[ct,te,Ee]);const Xt=async t=>{const a=t.target.value;if(Et(a),lt(""),oe([]),!!a)try{const n=await _.get(`${k}/categories/parents/${a}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});oe(n.data.data||[])}catch(n){console.error("Failed to fetch sub categories",n),oe([])}},ea=r.useCallback(t=>{const a=t.target.files[0];a&&Fe(a)},[]),Mt=r.useCallback(t=>{t.preventDefault()},[]),ta=r.useCallback(t=>{t.preventDefault();const a=t.dataTransfer.files[0];a&&Fe(a)},[]),aa=r.useCallback(t=>{const a=Array.from(t.target.files);ue(n=>[...n,...a])},[]),ra=r.useCallback(t=>{t.preventDefault();const a=Array.from(t.dataTransfer.files);ue(n=>[...n,...a])},[]),sa=r.useCallback(t=>{at(t.target.value)},[]),na=(t,a)=>{Gt(n=>({...n,[t]:a}))},oa=r.useCallback(t=>{t.key==="Enter"&&Ce.trim()&&(je(a=>[...a,Ce.trim()]),at(""),t.preventDefault())},[Ce]),ia=r.useCallback(t=>{je(a=>a.filter(n=>n!==t))},[]),gt=r.useCallback(t=>/^[A-Z0-9]{6,8}$/.test(t)?(Je(""),!0):(Je("License plate must be 6-8 alphanumeric characters"),!1),[]),xt=r.useCallback(()=>{Re(""),$e(""),J(""),Ve(""),He(""),vt(""),Oe(""),Ne(""),Fe(null),ue([]),ut(""),pt([]),Ue(""),Ze("yes"),Ge(""),Je(""),ne({driverIncluded:!1,sunroof:!1,decorationAvailable:!1}),R("hourly"),Ke(""),Qe(""),Ye(""),Xe(""),wt(""),je([]),at(""),K(""),Q(""),ht(""),Le("create"),C.current&&(C.current.setMap(null),C.current=null),f&&Tt(null)},[]),la=r.useCallback(async t=>{var h,c,v,P,T,F,V,H;t.preventDefault();const a=ze==="edit";if(A(!0),!ce||!pe||!he||!ie||!Se||!ge||!xe||!se||!g||!Ae||!B||!E){y("Please fill all required fields."),j("error"),b(!0),A(!1);return}if(g==="hourly"&&!me||g==="perDay"&&!be||g==="distanceWise"&&!fe){y(`Please provide a price for ${g} trip type.`),j("error"),b(!0),A(!1);return}if(!N&&!ke&&!a){y("Please upload a thumbnail image."),j("error"),b(!0),A(!1);return}if(M.length===0&&q.length===0&&!a){y("Please upload at least one vehicle image."),j("error"),b(!0),A(!1);return}if(!gt(se)){y("Invalid license plate number."),j("error"),b(!0),A(!1);return}if(!I.length||!I[0].heading){y("Please add at least one Terms & Conditions section."),j("error"),b(!0),A(!1);return}const n=localStorage.getItem("token");if(!n){y("No authentication token found. Please log in."),j("error"),b(!0),A(!1);return}const s=new FormData;s.append("transmissionType",yt),s.append("enginePower",We?parseInt(We):""),s.append("name",ce),s.append("description",Ct),s.append("brand",pe),s.append("category",ie),s.append("subCategories[]",Se),s.append("zone",ge),s.append("model",he),s.append("seatingCapacity",parseInt(xe)),s.append("airCondition",qe==="yes"),s.append("features[driverIncluded]",D.driverIncluded),s.append("features[sunroof]",D.sunroof),s.append("features[decorationAvailable]",D.decorationAvailable),D.decorationAvailable&&et&&s.append("decorationPrice",parseFloat(et)),s.append("attributes",JSON.stringify(ot)),s.append("licensePlateNumber",se),s.append("termsAndConditions",JSON.stringify(I)),s.append("venueAddress",Ae),s.append("latitude",parseFloat(B)),s.append("longitude",parseFloat(E)),Be&&s.append("operatingHours",Be),s.append("pricing[type]",g),s.append("pricing[hourly]",g==="hourly"&&parseFloat(me)||0),s.append("pricing[perDay]",g==="perDay"&&parseFloat(be)||0),s.append("pricing[distanceWise]",g==="distanceWise"&&parseFloat(fe)||0),ye&&s.append("discount",parseFloat(ye)),ve&&s.append("advanceBookingAmount",parseFloat(ve)),tt.forEach(u=>s.append("searchTags[]",u)),N&&s.append("thumbnail",N),M.forEach(u=>s.append("images",u));const d={};for(let[u,m]of s.entries())d[u]=m instanceof File?m.name:m;console.log("FormData:",d);try{let u,m;if(a){if(!ae)throw new Error("Invalid vehicle ID for update");u=await _.put(`${k}/vehicles/${ae}`,s,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}}),m=u.data.data||u.data}else u=await _.post(`${k}/vehicles`,s,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}}),m=u.data.data||u.data;console.log("API Response:",u.data),y(a?"Vehicle updated successfully!":"Vehicle added successfully!"),j("success"),b(!0),xt(),a&&Te("/vehicle-setup/lists",{state:{vehicle:m}})}catch(u){console.error("API Error:",{status:(h=u.response)==null?void 0:h.status,statusText:(c=u.response)==null?void 0:c.statusText,data:(v=u.response)==null?void 0:v.data,headers:(P=u.response)==null?void 0:P.headers,message:u.message});let m=((F=(T=u.response)==null?void 0:T.data)==null?void 0:F.message)||"Failed to save vehicle";(H=(V=u.response)==null?void 0:V.data)!=null&&H.errors&&(m=u.response.data.errors.map(Ie=>Ie.msg).join(", ")),y(m),j("error"),b(!0)}finally{A(!1)}},[ze,ae,ce,pe,he,Ot,ge,xe,qe,D,se,g,me,be,fe,ye,tt,N,M,ke,q,gt,xt,Te,k,G,ct,jt,Ee,Ae,B,E,Be,ie,Se,ot,ve]),Dt=r.useCallback((t,a)=>{a!=="clickaway"&&b(!1)},[]),Pe=ze==="edit",da=r.useCallback(t=>{const a=t.target.value;Oe(a);const n=U.find(s=>s._id===a);Ne(n?n.name:"")},[U]);return e.jsxs(i,{sx:{p:L?2:3,backgroundColor:l.palette.grey[100],minHeight:"100vh",width:"100%"},children:[e.jsxs(i,{sx:{maxWidth:"lg",margin:"auto",backgroundColor:"white",borderRadius:l.shape.borderRadius,boxShadow:l.shadows[1],p:L?2:3,overflowX:"hidden"},children:[e.jsx(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[Pe&&e.jsx(mt,{onClick:()=>Te("/vehicle-setup/lists"),color:"primary",children:e.jsx(ma,{})}),e.jsx(Ca,{sx:{fontSize:24,mr:1}}),e.jsx(o,{variant:"h5",component:"h1",children:Pe?"Edit Vehicle":"Add New Vehicle"})]})}),e.jsx(o,{variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Insert the basic information of the vehicle"}),we&&e.jsx(i,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.jsx(Lt,{})}),e.jsxs(i,{component:"form",onSubmit:la,children:[e.jsxs(i,{sx:{display:"flex",flexDirection:L?"column":"row",gap:3,mb:4},children:[e.jsx(w,{sx:{flex:L?"auto":2,p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"General Information"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the basic information of the vehicle"}),e.jsx(x,{fullWidth:!0,label:"Vehicle Name*",variant:"outlined",value:ce,onChange:t=>Re(t.target.value),placeholder:"Type vehicle name",sx:{mb:2},required:!0}),e.jsx(x,{fullWidth:!0,label:"Short Description",variant:"outlined",multiline:!0,rows:4,value:Ct,onChange:t=>$e(t.target.value),placeholder:"Type short description",sx:{mb:2}})]})}),e.jsx(w,{sx:{flex:L?"auto":1,p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Thumbnail*"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs($t,{onDragOver:Mt,onDrop:ta,onClick:()=>document.getElementById("thumbnail-upload").click(),children:[N?e.jsxs(i,{children:[e.jsx("img",{src:URL.createObjectURL(N),alt:"Thumbnail preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:l.spacing(1)}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:N.name})]}):ke?e.jsxs(i,{children:[e.jsx("img",{src:ke,alt:"Existing thumbnail",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:l.spacing(1),borderColor:"#E15B65"}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Existing thumbnail. Upload to replace."})]}):e.jsxs(i,{children:[e.jsx(Rt,{sx:{fontSize:40,color:"#E15B65",mb:1}}),e.jsx(o,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(o,{variant:"body2",color:"#E15B65",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"thumbnail-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:ea})]})]})})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Images*"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs($t,{onDragOver:Mt,onDrop:ra,onClick:()=>document.getElementById("images-upload").click(),children:[e.jsxs(i,{sx:{display:"flex",flexWrap:"wrap",gap:1,justifyContent:"center",width:"100%"},children:[q.length>0&&e.jsx(e.Fragment,{children:q.map((t,a)=>e.jsxs(i,{sx:{position:"relative"},children:[e.jsx("img",{src:t,alt:`Existing vehicle image ${a+1}`,style:{maxWidth:80,maxHeight:80,objectFit:"cover",borderRadius:l.shape.borderRadius}}),e.jsx(o,{variant:"caption",sx:{position:"absolute",top:0,right:0,backgroundColor:"rgba(0,0,0,0.5)",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"Existing"})]},`existing-${a}`))}),M.length>0&&e.jsx(e.Fragment,{children:M.map((t,a)=>e.jsxs(i,{sx:{position:"relative"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`New vehicle image ${a+1}`,style:{maxWidth:80,maxHeight:80,objectFit:"cover",borderRadius:l.shape.borderRadius}}),e.jsx(mt,{size:"small",onClick:()=>ue(n=>n.filter((s,d)=>d!==a)),sx:{position:"absolute",top:-4,right:-4,backgroundColor:"white",width:24,height:24},children:e.jsx(o,{sx:{fontSize:14,color:"red"},children:"×"})})]},`new-${a}`))}),q.length===0&&M.length===0&&e.jsxs(e.Fragment,{children:[e.jsx(Rt,{sx:{fontSize:40,color:"#E15B65",mb:1}}),e.jsx(o,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium",borderColor:"#E15B65"},children:"Click to upload"}),e.jsx(o,{variant:"body2",color:"#E15B65",children:"Or drag and drop"})]})]}),e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{mt:1,width:"100%",textAlign:"center"},children:[q.length+M.length," image(s) ",q.length>0?"(including existing)":"",". Upload to add more."]}),e.jsx("input",{type:"file",id:"images-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",multiple:!0,onChange:aa})]})]})})}),e.jsx(i,{sx:{mb:4},children:e.jsxs(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:[e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Information"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the vehicle's general information"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:L?"1fr":"repeat(3, 1fr)",gap:l.spacing(3)},children:[e.jsxs(bt,{spacing:2,children:[e.jsxs(O,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(Y,{id:"brand-label",children:"Brand*"}),e.jsxs(X,{labelId:"brand-label",id:"brand-select",value:pe,label:"Brand",onChange:t=>Ve(t.target.value),children:[e.jsx(S,{value:"",children:"Select vehicle brand"}),rt.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]}),e.jsx(O,{fullWidth:!0,variant:"outlined",required:!0,children:e.jsx(x,{id:"seating-capacity-input",label:"Seating Capacity*",variant:"outlined",value:xe,onChange:t=>Ue(t.target.value),placeholder:"Input how many persons can seat",type:"number",inputProps:{min:1}})})]}),e.jsxs(bt,{spacing:2,children:[e.jsx(x,{fullWidth:!0,label:"Model*",variant:"outlined",value:he,onChange:t=>He(t.target.value),placeholder:"Model Name",required:!0}),e.jsxs(O,{fullWidth:!0,required:!0,children:[e.jsx(Y,{children:"Transmission Type"}),e.jsxs(X,{value:yt,label:"Transmission Type",onChange:t=>Ft(t.target.value),children:[e.jsx(S,{value:"",children:"Select Transmission"}),e.jsx(S,{value:"manual",children:"Manual"}),e.jsx(S,{value:"automatic",children:"Automatic"}),e.jsx(S,{value:"semi-automatic",children:"Semi-Automatic"})]})]}),e.jsx(x,{fullWidth:!0,label:"Engine Power (HP)",variant:"outlined",type:"number",value:We,onChange:t=>Vt(t.target.value),placeholder:"e.g. 180",inputProps:{min:0}})]}),e.jsxs(bt,{spacing:2,children:[e.jsxs(O,{fullWidth:!0,required:!0,children:[e.jsx(Y,{children:"Parent Category"}),e.jsxs(X,{value:ie,label:"Parent Category",onChange:Xt,children:[e.jsx(S,{value:"",children:"Select Parent Category"}),Kt.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]}),e.jsxs(O,{fullWidth:!0,required:!0,disabled:!ie,children:[e.jsx(Y,{children:"Sub Category"}),e.jsxs(X,{value:Se,label:"Sub Category",onChange:t=>lt(t.target.value),children:[e.jsx(S,{value:"",children:"Select Sub Category"}),Qt.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]})]})]}),e.jsxs(O,{component:"fieldset",fullWidth:!0,children:[e.jsx(o,{variant:"body1",color:"text.secondary",sx:{mb:1},children:"Air Condition"}),e.jsxs(fa,{row:!0,value:qe,onChange:t=>Ze(t.target.value),children:[e.jsx(le,{value:"yes",control:e.jsx(de,{}),label:"Yes"}),e.jsx(le,{value:"no",control:e.jsx(de,{}),label:"No"})]})]}),e.jsx(i,{sx:{mt:3},children:e.jsxs(O,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(Y,{id:"zone-label",children:"Zone*"}),e.jsxs(X,{labelId:"zone-label",id:"zone-select",value:ge,label:"Zone",onChange:da,children:[e.jsx(S,{value:"",children:"Select zone"}),U.length>0?U.map(t=>e.jsx(S,{value:t._id,children:t.name},t._id)):e.jsx(S,{disabled:!0,children:"No zones available"})]})]})}),e.jsx(i,{sx:{mt:3},children:e.jsx(x,{fullWidth:!0,label:"Vihicles Address*",variant:"outlined",value:Ae,onChange:t=>J(t.target.value),placeholder:"Enter venue address",required:!0})}),e.jsxs(i,{sx:{mt:3},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Location and Operating Hours"}),e.jsx(x,{fullWidth:!0,label:"Search Location",inputRef:De,variant:"outlined",placeholder:"Enter a location",sx:{mb:2}}),e.jsxs(i,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(x,{sx:{flex:1},label:"Latitude*",variant:"outlined",value:B,onChange:t=>K(t.target.value),placeholder:"e.g., 25.2048",required:!0}),e.jsx(x,{sx:{flex:1},label:"Longitude*",variant:"outlined",value:E,onChange:t=>Q(t.target.value),placeholder:"e.g., 55.2708",required:!0})]}),W&&_e?e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Click on the map below to select a location"}),e.jsx(i,{ref:Me,sx:{height:300,width:"100%",borderRadius:l.shape.borderRadius,border:`1px solid ${l.palette.grey[300]}`,mb:2}})]}):e.jsx(i,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${l.palette.grey[300]}`,borderRadius:l.shape.borderRadius,mb:2},children:e.jsx(o,{variant:"body2",color:"text.secondary",children:"Map loading..."})}),e.jsx(x,{fullWidth:!0,label:"Operating Hours",variant:"outlined",value:Be,onChange:t=>ht(t.target.value),placeholder:"e.g., 9:00 AM - 6:00 PM",multiline:!0,rows:2})]})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Attributes"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Select additional attributes for the vehicle"}),e.jsx(i,{sx:{display:"grid",gridTemplateColumns:L?"1fr":"repeat(3, 1fr)",gap:3},children:qt.map(t=>e.jsxs(O,{fullWidth:!0,children:[e.jsx(Y,{children:t.title}),e.jsxs(X,{value:ot[t._id]||"",label:t.title,onChange:a=>na(t._id,a.target.value),children:[e.jsxs(S,{value:"",children:["Select ",t.title]}),t.values.map(a=>e.jsx(S,{value:a,children:a},a))]})]},t._id))})]})})})]})}),e.jsxs(i,{sx:{mt:3,p:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"#fafafa"},children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Vehicle Features"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},gap:4},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white",minHeight:56},children:[e.jsx(o,{fontSize:14,fontWeight:500,children:"Driver Included"}),e.jsx(ft,{checked:D.driverIncluded,onChange:t=>ne(a=>({...a,driverIncluded:t.target.checked})),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#E15B65"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})]}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white",minHeight:56},children:[e.jsx(o,{fontSize:14,fontWeight:500,children:"Sunroof"}),e.jsx(ft,{checked:D.sunroof,onChange:t=>ne(a=>({...a,sunroof:t.target.checked})),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#E15B65"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})]}),e.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:1.5,px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white"},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(o,{fontSize:14,fontWeight:500,children:"Decoration Available"}),e.jsx(ft,{checked:D.decorationAvailable,onChange:t=>ne(a=>({...a,decorationAvailable:t.target.checked})),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#E15B65"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})]}),D.decorationAvailable&&e.jsx(x,{fullWidth:!0,label:"Decoration Price (₹)",type:"number",value:et,onChange:t=>wt(t.target.value),inputProps:{min:0},placeholder:"e.g. 5000"})]})]})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Identity"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the vehicle's license plate number"}),e.jsx(x,{fullWidth:!0,label:"License Plate Number*",variant:"outlined",value:se,onChange:t=>{Ge(t.target.value),gt(t.target.value)},placeholder:"Type license plate number (6-8 alphanumeric)",required:!0,error:!!St,helperText:St})]})})}),e.jsxs(i,{sx:{mb:4},children:[e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Pricing & Discounts"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert pricing and discount information"}),e.jsxs(i,{sx:{mb:3},children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Trip Type"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Choose the trip type you prefer"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:L?"1fr":"repeat(3, 1fr)",gap:l.spacing(2)},children:[e.jsxs(w,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:g==="hourly"?"#E15B65":void 0,borderWidth:g==="hourly"?2:1},onClick:()=>R("hourly"),children:[e.jsx(le,{control:e.jsx(de,{checked:g==="hourly",onChange:()=>R("hourly"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"Hourly",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Set your hourly rental price"})]}),e.jsxs(w,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:g==="perDay"?"#E15B65":void 0,borderWidth:g==="perDay"?2:1},onClick:()=>R("perDay"),children:[e.jsx(le,{control:e.jsx(de,{checked:g==="perDay",onChange:()=>R("perDay"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"Per Day",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Set your per day rental price"})]}),e.jsxs(w,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:g==="distanceWise"?"#E15B65":void 0,borderWidth:g==="distanceWise"?2:1},onClick:()=>R("distanceWise"),children:[e.jsx(le,{control:e.jsx(de,{checked:g==="distanceWise",onChange:()=>R("distanceWise"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"DistanceWise",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Set your distance wise rental price"})]})]})]}),g==="hourly"&&e.jsx(i,{sx:{mb:3},children:e.jsx(x,{fullWidth:!0,label:"Hourly Price (₹/per hour)*",variant:"outlined",value:me,onChange:t=>Ke(t.target.value),placeholder:"Ex: 2500.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),g==="perDay"&&e.jsx(i,{sx:{mb:3},children:e.jsx(x,{fullWidth:!0,label:"Per Day Price (₹/per day)*",variant:"outlined",value:be,onChange:t=>Qe(t.target.value),placeholder:"Ex: 15000.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),g==="distanceWise"&&e.jsx(i,{sx:{mb:3},children:e.jsx(x,{fullWidth:!0,label:"Distance Price (₹/per km)*",variant:"outlined",value:fe,onChange:t=>Ye(t.target.value),placeholder:"Ex: 100.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),e.jsxs(i,{children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Discount"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Set a discount amount (e.g., 10 for 10%)"}),e.jsx(x,{fullWidth:!0,label:"Discount (%)",variant:"outlined",value:ye,onChange:t=>Xe(t.target.value),placeholder:"Ex: 10",type:"number",inputProps:{step:"any",min:0,max:100}})]})]})}),e.jsx(w,{sx:{mt:3},children:e.jsxs(z,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Advance Booking Amount"}),e.jsx(x,{fullWidth:!0,type:"number",label:"Advance Amount",value:ve,onChange:t=>Bt(t.target.value),inputProps:{min:0},helperText:"Flat advance amount payable during booking"})]})}),e.jsx(i,{sx:{mb:4},children:e.jsxs(w,{sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, #ffffff, #fafafa)",border:"1px solid #eee"},children:[e.jsx(o,{variant:"h6",fontWeight:600,sx:{mb:.5},children:"Terms & Conditions"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Define rules & policies shown to customers during booking"}),I.map((t,a)=>e.jsxs(i,{sx:{mb:3,p:2,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(x,{fullWidth:!0,label:"Section Heading",placeholder:"e.g. Booking & Confirmation",value:t.heading,onChange:n=>{const s=[...I];s[a].heading=n.target.value,$(s)}}),I.length>1&&e.jsx(ee,{onClick:()=>$(n=>n.filter((s,d)=>d!==a)),sx:{ml:1,color:"error.main"},children:"✕"})]}),t.points.map((n,s)=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(x,{fullWidth:!0,label:`Point ${s+1}`,placeholder:"Enter policy detail",value:n,onChange:d=>{const h=[...I];h[a].points[s]=d.target.value,$(h)}}),t.points.length>1&&e.jsx(ee,{onClick:()=>{const d=[...I];d[a].points.splice(s,1),$(d)},sx:{ml:1,color:"error.main"},children:"✕"})]},s)),e.jsx(ee,{size:"small",onClick:()=>{const n=[...I];n[a].points.push(""),$(n)},sx:{mt:1,color:"#E15B65"},children:"+ Add Point"})]},a)),e.jsx(ee,{variant:"outlined",onClick:()=>$([...I,{heading:"",points:[""]}]),sx:{mt:2,borderRadius:2,borderColor:"#E15B65",color:"#E15B65"},children:"+ Add Section"})]})})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Search Tags"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert tags for appearing in user search results"}),e.jsx(x,{fullWidth:!0,label:"Type and press Enter",variant:"outlined",value:Ce,onChange:sa,onKeyPress:oa,placeholder:"Type and press Enter",sx:{mb:2}}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:tt.map((t,a)=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",backgroundColor:l.palette.grey[200],borderRadius:l.shape.borderRadius,px:1,py:.5},children:[e.jsx(o,{variant:"body2",children:t}),e.jsx(mt,{size:"small",onClick:()=>ia(t),children:e.jsx(o,{sx:{fontSize:14},children:"×"})})]},a))})]})})}),e.jsxs(i,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(ee,{variant:"outlined",color:"#E15B65",size:"large",onClick:xt,sx:{color:"#E15B65"},children:Pe?"Cancel":"Reset"}),e.jsx(ee,{variant:"contained",type:"submit",size:"large",disabled:we,startIcon:we?e.jsx(Lt,{size:20,color:"inherit"}):null,sx:{color:"white",bgcolor:"#E15B65"},children:we?"Submitting...":Pe?"Update":"Submit"})]})]})]}),e.jsx(ya,{open:Nt,autoHideDuration:6e3,onClose:Dt,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{"& .MuiSnackbarContent-root":{minWidth:"600px",maxWidth:"600px",width:"auto"}},children:e.jsx(ja,{onClose:Dt,severity:kt,sx:{width:"100%",backgroundColor:kt==="success"?"#1976d2":"#d32f2f",color:"white","& .MuiAlert-message":{whiteSpace:"pre-line",wordBreak:"break-word",fontSize:"1rem",lineHeight:1.5}},children:Ut})})]})};export{za as default};
