import{c as P,j as e,w as xe,r as l,B as o,S as m,T as r,g as f,p as I,W as Y,s as he,a as pe,t as ge,G as p,a8 as x,D as B,V as ue,b as M,aq as fe,ar as q,ak as je,aa as J,ab as Q,ac as K,q as me,aN as be,a5 as ve,b6 as ye,a6 as Ce,an as we,x as Se}from"./index-Ds4opi1T.js";import{C as ke}from"./Container-CHEdREZh.js";import{A as X}from"./Add-BAUVc6MB.js";import{S as Ie}from"./Search-CB1swKPE.js";import{I as D}from"./Image-BQpRx4hf.js";import{C as Z}from"./CardMedia-CLoxdAD_.js";import{C as Be}from"./Close-8VCcaKhg.js";import{C as Pe}from"./Category-hLIRbxQL.js";import{S as Ae}from"./Schedule-DDN9npac.js";import{C as ee}from"./CheckCircle-68gtVt3J.js";import{I as Ee}from"./Info-Bm1LSSqp.js";import{A as te}from"./AttachMoney-DCN_PyBu.js";import{L as Te}from"./LocalOffer-Cff__Ynh.js";import{P as We,A as ze,a as Me,E as De,b as Le}from"./Policy-PC1viWfn.js";import{D as Ne}from"./DirectionsCar-C97i9ws5.js";import{L as Ve}from"./ListItem-Bqxirs5e.js";import{D as se}from"./DialogActions-noI9w1GG.js";const oe=P(e.jsx("path",{d:"M16.53 11.06 15.47 10l-4.88 4.88-2.12-2.12-1.06 1.06L10.59 17zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14z"})),$e=P(e.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"})),He=P(e.jsx("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"})),Fe=P([e.jsx("path",{d:"M8.55 12c-1.07-.71-2.25-1.27-3.53-1.61 1.28.34 2.46.9 3.53 1.61m10.43-1.61c-1.29.34-2.49.91-3.57 1.64 1.08-.73 2.28-1.3 3.57-1.64"},"0"),e.jsx("path",{d:"M15.49 9.63c-.18-2.79-1.31-5.51-3.43-7.63-2.14 2.14-3.32 4.86-3.55 7.63 1.28.68 2.46 1.56 3.49 2.63 1.03-1.06 2.21-1.94 3.49-2.63m-6.5 2.65c-.14-.1-.3-.19-.45-.29.15.11.31.19.45.29m6.42-.25c-.13.09-.27.16-.4.26.13-.1.27-.17.4-.26M12 15.45C9.85 12.17 6.18 10 2 10c0 5.32 3.36 9.82 8.03 11.49.63.23 1.29.4 1.97.51.68-.12 1.33-.29 1.97-.51C18.64 19.82 22 15.32 22 10c-4.18 0-7.85 2.17-10 5.45"},"1")]),L="https://api.bookmyevent.ae/api/makeup-packages";function rt(){var R,O,G,U;const C=xe(),[g,A]=l.useState([]),[N,E]=l.useState(!0),[w,u]=l.useState({open:!1,message:"",severity:"success"}),[j,ie]=l.useState(""),[re,b]=l.useState(!1),[ae,S]=l.useState(!1),[s,ne]=l.useState(null),[V,$]=l.useState(null),[k,H]=l.useState(0),v=localStorage.getItem("token"),T=JSON.parse(localStorage.getItem("user")||"{}"),W=T==null?void 0:T._id,z=t=>t?`https://api.bookmyevent.ae/${t.startsWith("/")?t.slice(1):t}`:null,y=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(t||0),F=l.useCallback(async()=>{if(!W||!v){u({open:!0,message:"Please login again",severity:"error"}),E(!1);return}E(!0);try{const t=await fetch(`${L}/provider/${W}`,{headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to load packages");const i=await t.json();i.success&&A(i.data||[])}catch(t){u({open:!0,message:t.message,severity:"error"})}finally{E(!1)}},[W,v]);l.useEffect(()=>{F()},[F]);const ce=t=>{ne(t),H(0),b(!0)},le=async(t,i)=>{try{(await(await fetch(`${L}/${t}/toggle-active`,{method:"PATCH",headers:{Authorization:`Bearer ${v}`}})).json()).success&&(A(c=>c.map(h=>h._id===t?{...h,isActive:!i}:h)),u({open:!0,message:"Status updated",severity:"success"}))}catch{u({open:!0,message:"Failed to update status",severity:"error"})}},de=async()=>{try{(await(await fetch(`${L}/${V}`,{method:"DELETE",headers:{Authorization:`Bearer ${v}`}})).json()).success&&(A(a=>a.filter(n=>n._id!==V)),u({open:!0,message:"Package deleted",severity:"success"}))}catch{u({open:!0,message:"Delete failed",severity:"error"})}finally{S(!1),$(null)}},_=l.useMemo(()=>g.filter(t=>{var a,n,c;return!j||((a=t.packageTitle)==null?void 0:a.toLowerCase().includes(j.toLowerCase()))||((n=t.makeupType)==null?void 0:n.toLowerCase().includes(j.toLowerCase()))||((c=t.description)==null?void 0:c.toLowerCase().includes(j.toLowerCase()))}),[g,j]),d=({icon:t,label:i,value:a,chip:n,success:c,error:h})=>e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",gap:2,py:1.5,borderBottom:"1px solid #f0f0f0"},children:[e.jsx(o,{sx:{color:"#E15B65",mt:.5},children:t}),e.jsxs(o,{sx:{flex:1},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:500},children:i}),n?e.jsx(x,{label:a,size:"small",color:c?"success":h?"error":"default",sx:{mt:.5}}):e.jsx(r,{variant:"body2",sx:{fontWeight:500,mt:.3},children:a||"Not specified"})]})]});return e.jsxs(o,{sx:{bgcolor:"#f5f7fa",minHeight:"100vh",pb:4},children:[e.jsx(o,{sx:{background:"linear-gradient(135deg, #E15B65 0%, #c14a54 100%)",color:"white",py:4,px:3,borderRadius:"0 0 24px 24px",boxShadow:"0 4px 20px rgba(225, 91, 101, 0.3)"},children:e.jsx(ke,{maxWidth:"xl",children:e.jsxs(m,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(o,{children:[e.jsx(r,{variant:"h4",sx:{fontWeight:700,mb:.5},children:"My Makeup Packages"}),e.jsxs(r,{variant:"body2",sx:{opacity:.9},children:[g.length," total packages â€¢ ",g.filter(t=>t.isActive).length," active"]})]}),e.jsx(f,{variant:"contained",size:"large",startIcon:e.jsx(X,{}),onClick:()=>C("/makeupartist/addpackage"),sx:{bgcolor:"white",color:"#E15B65",fontWeight:600,px:3,"&:hover":{bgcolor:"#f5f5f5",transform:"translateY(-2px)"},transition:"all 0.3s",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:"Add New Package"})]})})}),e.jsxs(o,{sx:{width:"100%",px:2,mt:4},children:[e.jsx(I,{sx:{mb:3,borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",overflow:"visible"},children:e.jsx(Y,{children:e.jsx(he,{fullWidth:!0,size:"medium",placeholder:"Search by package name, type, or description...",value:j,onChange:t=>ie(t.target.value),InputProps:{startAdornment:e.jsx(pe,{position:"start",children:e.jsx(Ie,{sx:{color:"#E15B65",fontSize:28}})}),sx:{borderRadius:2,fontSize:"1.1rem","& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#E15B65"},"&.Mui-focused fieldset":{borderColor:"#E15B65"}}}})})}),N&&e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(ge,{size:60,sx:{color:"#E15B65"}})}),!N&&_.length===0&&e.jsxs(I,{sx:{borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",textAlign:"center",py:8},children:[e.jsx(D,{sx:{fontSize:80,color:"#ddd",mb:2}}),e.jsx(r,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:g.length===0?"No packages yet":"No packages match your search"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:g.length===0?"Create your first makeup package to get started":"Try adjusting your search terms"}),g.length===0&&e.jsx(f,{variant:"contained",size:"large",startIcon:e.jsx(X,{}),sx:{bgcolor:"#E15B65","&:hover":{bgcolor:"#c14a54"}},onClick:()=>C("/makeupartist/addpackage"),children:"Create Your First Package"})]}),e.jsx(p,{container:!0,spacing:3,children:_.map(t=>{var i,a,n;return e.jsx(p,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2.4,children:e.jsxs(I,{sx:{height:"100%",borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",transition:"all 0.3s","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 24px rgba(225, 91, 101, 0.2)"},minWidth:280},children:[e.jsxs(o,{sx:{position:"relative",paddingTop:"75%",bgcolor:"#f5f5f5"},children:[(i=t.gallery)!=null&&i[0]?e.jsx(Z,{component:"img",image:z(t.gallery[0]),alt:t.packageTitle,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(o,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#f0f0f0"},children:e.jsx(D,{sx:{fontSize:60,color:"#ccc"}})}),e.jsx(o,{sx:{position:"absolute",top:12,right:12},children:e.jsx(x,{label:t.isActive?"Active":"Inactive",size:"small",sx:{bgcolor:t.isActive?"#4caf50":"#757575",color:"white",fontWeight:600,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}})}),t.isTopPick&&e.jsx(o,{sx:{position:"absolute",top:12,left:12},children:e.jsx(x,{icon:e.jsx(oe,{sx:{color:"white !important"}}),label:"Top Pick",size:"small",sx:{bgcolor:"#ff9800",color:"white",fontWeight:600,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}})})]}),e.jsxs(Y,{sx:{p:2.5},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:700,mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#2c3e50"},children:t.packageTitle}),e.jsxs(m,{direction:"row",spacing:.5,flexWrap:"wrap",sx:{mb:2,minHeight:28},children:[(a=t.categories)==null?void 0:a.slice(0,2).map((c,h)=>e.jsx(x,{label:typeof c=="string"?"Category":c.title,size:"small",sx:{bgcolor:"#E15B6510",color:"#E15B65",fontWeight:500,height:24,fontSize:"0.75rem"}},c._id||h)),((n=t.categories)==null?void 0:n.length)>2&&e.jsx(x,{label:`+${t.categories.length-2}`,size:"small",sx:{bgcolor:"#E15B6510",color:"#E15B65",fontWeight:500,height:24,fontSize:"0.75rem"}})]}),e.jsx(B,{sx:{my:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(r,{variant:"h5",sx:{fontWeight:700,color:"#E15B65",mb:.5},children:y(t.finalPrice)}),t.basePrice>t.finalPrice&&e.jsxs(m,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through"},children:y(t.basePrice)}),e.jsx(x,{label:`${Math.round((t.basePrice-t.finalPrice)/t.basePrice*100)}% OFF`,size:"small",sx:{bgcolor:"#4caf50",color:"white",fontWeight:600,height:20,fontSize:"0.7rem"}})]})]}),e.jsxs(m,{direction:"row",spacing:1,children:[e.jsx(f,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(ue,{}),onClick:()=>ce(t),sx:{borderColor:"#E15B65",color:"#E15B65","&:hover":{borderColor:"#c14a54",bgcolor:"#E15B6505"}},children:"View"}),e.jsx(M,{color:"primary",onClick:()=>C(`/makeupartist/edit/${t._id}`),sx:{border:"1px solid #e0e0e0","&:hover":{bgcolor:"#f5f5f5"}},children:e.jsx(fe,{})}),e.jsx(M,{color:"error",onClick:()=>{$(t._id),S(!0)},sx:{border:"1px solid #e0e0e0","&:hover":{bgcolor:"#ffebee"}},children:e.jsx(q,{})})]}),e.jsxs(o,{sx:{mt:2,pt:2,borderTop:"1px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(r,{variant:"body2",fontWeight:500,children:"Package Status"}),e.jsx(je,{checked:t.isActive,onChange:()=>le(t._id,t.isActive),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4caf50"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4caf50"}}})]})]})]})},t._id)})})]}),e.jsxs(J,{open:re,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,scroll:"paper",children:[e.jsxs(Q,{sx:{bgcolor:"#E15B65",color:"white",pr:6},children:[e.jsx(r,{variant:"h6",children:s==null?void 0:s.packageTitle}),e.jsx(M,{sx:{position:"absolute",right:8,top:8,color:"white"},onClick:()=>b(!1),children:e.jsx(Be,{})})]}),e.jsx(K,{dividers:!0,sx:{p:0},children:s&&e.jsxs(o,{children:[e.jsxs(o,{sx:{bgcolor:"#1a1a1a",p:2},children:[e.jsx(o,{sx:{display:"flex",justifyContent:"center",mb:2},children:(R=s.gallery)!=null&&R[k]?e.jsx(I,{elevation:3,sx:{maxWidth:500},children:e.jsx(Z,{component:"img",height:"300",image:z(s.gallery[k]),alt:s.packageTitle,sx:{objectFit:"cover"}})}):e.jsx(o,{sx:{height:300,width:"100%",maxWidth:500,bgcolor:"#333",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:2},children:e.jsx(D,{sx:{fontSize:80,color:"#666"}})})}),((O=s.gallery)==null?void 0:O.length)>1&&e.jsx(o,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:s.gallery.map((t,i)=>e.jsx(me,{variant:"rounded",src:z(t),onClick:()=>H(i),sx:{width:60,height:60,cursor:"pointer",border:k===i?"3px solid #E15B65":"3px solid transparent",opacity:k===i?1:.7,"&:hover":{opacity:1}}},i))})]}),e.jsx(o,{sx:{p:3},children:e.jsxs(p,{container:!0,spacing:3,children:[e.jsxs(p,{item:!0,xs:12,md:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Basic Information"}),e.jsx(d,{icon:e.jsx(Pe,{}),label:"Categories",value:((G=s.categories)==null?void 0:G.map(t=>t.title).join(", "))||"None"}),e.jsx(d,{icon:e.jsx(He,{}),label:"Makeup Type",value:s.makeupType}),e.jsx(d,{icon:e.jsx(Ae,{}),label:"Duration",value:s.duration}),e.jsx(d,{icon:e.jsx(ee,{}),label:"Status",value:s.isActive?"Active":"Inactive",chip:!0,success:s.isActive,error:!s.isActive}),e.jsx(d,{icon:e.jsx(Ee,{}),label:"Description",value:s.description})]}),e.jsxs(p,{item:!0,xs:12,md:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Pricing & Policies"}),e.jsx(d,{icon:e.jsx(te,{}),label:"Base Price",value:y(s.basePrice)}),e.jsx(d,{icon:e.jsx(Te,{}),label:"Offer Discount",value:s.offerPrice?y(s.offerPrice):"No offer"}),e.jsx(d,{icon:e.jsx(te,{}),label:"Final Price",value:e.jsx(r,{sx:{color:"#E15B65",fontWeight:"bold"},children:y(s.finalPrice)})}),e.jsx(d,{icon:e.jsx(be,{}),label:"Advance Booking Amount",value:s.advanceBookingAmount?`AED ${s.advanceBookingAmount}`:"Not specified"}),e.jsx(d,{icon:e.jsx(We,{}),label:"Cancellation Policy",value:s.cancellationPolicy})]}),e.jsxs(p,{item:!0,xs:12,children:[e.jsx(B,{sx:{my:2}}),e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Additional Features"}),e.jsxs(m,{direction:"row",spacing:2,flexWrap:"wrap",useFlexGap:!0,children:[e.jsx(x,{icon:e.jsx(Fe,{}),label:s.trialMakeupIncluded?"Trial Makeup Included":"No Trial Makeup",color:s.trialMakeupIncluded?"success":"default",variant:s.trialMakeupIncluded?"filled":"outlined"}),e.jsx(x,{icon:e.jsx(Ne,{}),label:s.travelToVenue?"Travel to Venue Included":"No Travel to Venue",color:s.travelToVenue?"success":"default",variant:s.travelToVenue?"filled":"outlined"}),e.jsx(x,{icon:e.jsx(oe,{}),label:s.isTopPick?"Top Pick":"Not a Top Pick",color:s.isTopPick?"warning":"default",variant:s.isTopPick?"filled":"outlined"})]})]}),((U=s.includedServices)==null?void 0:U.length)>0&&e.jsxs(p,{item:!0,xs:12,children:[e.jsx(B,{sx:{my:2}}),e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Included Services"}),s.includedServices.map((t,i)=>{var a,n;return e.jsxs(ze,{defaultExpanded:i===0,sx:{mb:1,"&:before":{display:"none"},boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx(Me,{expandIcon:e.jsx(De,{}),sx:{bgcolor:"#f8f9fa"},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx($e,{sx:{color:"#E15B65"}}),e.jsx(r,{fontWeight:500,children:t.title}),e.jsx(x,{label:`${((a=t.items)==null?void 0:a.length)||0} items`,size:"small",sx:{ml:1}})]})}),e.jsx(Le,{children:e.jsx(ve,{dense:!0,children:(n=t.items)==null?void 0:n.map((c,h)=>e.jsxs(Ve,{children:[e.jsx(ye,{sx:{minWidth:32},children:e.jsx(ee,{sx:{fontSize:18,color:"success.main"}})}),e.jsx(Ce,{primary:c})]},h))})})]},i)})]}),e.jsxs(p,{item:!0,xs:12,children:[e.jsx(B,{sx:{my:2}}),e.jsxs(m,{direction:"row",spacing:4,sx:{color:"text.secondary"},children:[e.jsxs(r,{variant:"caption",children:["Created: ",new Date(s.createdAt).toLocaleString()]}),e.jsxs(r,{variant:"caption",children:["Updated: ",new Date(s.updatedAt).toLocaleString()]})]})]})]})})]})}),e.jsxs(se,{sx:{p:2},children:[e.jsx(f,{onClick:()=>{b(!1),C(`/makeupartist/edit/${s._id}`)},variant:"outlined",sx:{borderColor:"#E15B65",color:"#E15B65"},children:"Edit Package"}),e.jsx(f,{variant:"contained",sx:{bgcolor:"#E15B65","&:hover":{bgcolor:"#c14a54"}},onClick:()=>b(!1),children:"Close"})]})]}),e.jsxs(J,{open:ae,onClose:()=>S(!1),maxWidth:"xs",fullWidth:!0,children:[e.jsx(Q,{sx:{fontWeight:600},children:"Delete Package?"}),e.jsx(K,{children:e.jsxs(o,{sx:{textAlign:"center",py:2},children:[e.jsx(q,{sx:{fontSize:60,color:"#f44336",mb:2}}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"This action cannot be undone. This package will be permanently deleted from your account."})]})}),e.jsxs(se,{sx:{p:2,gap:1},children:[e.jsx(f,{onClick:()=>S(!1),variant:"outlined",fullWidth:!0,sx:{borderColor:"#e0e0e0",color:"text.secondary"},children:"Cancel"}),e.jsx(f,{color:"error",variant:"contained",onClick:de,fullWidth:!0,sx:{fontWeight:600},children:"Delete Permanently"})]})]}),e.jsx(we,{open:w.open,autoHideDuration:4e3,onClose:()=>u({...w,open:!1}),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(Se,{severity:w.severity,variant:"filled",sx:{minWidth:300,boxShadow:"0 4px 12px rgba(0,0,0,0.15)","& .MuiAlert-icon":{fontSize:24}},children:w.message})})]})}export{rt as default};
