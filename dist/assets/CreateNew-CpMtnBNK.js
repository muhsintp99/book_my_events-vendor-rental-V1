import{u as ha,i as ga,aj as xa,w as ma,ai as ba,r,h as _,j as e,B as i,b as bt,ak as fa,T as n,t as Ft,p as w,W as z,s as x,am as ya,S as ft,F as O,I as X,ag as ee,$ as S,at as ja,f as de,an as ce,al as yt,g as te,ao as va,x as Ca}from"./index-DaX6ntGD.js";import{D as Sa}from"./DirectionsCar-BR1NEazI.js";import{C as $t}from"./CloudUpload-ColhM9zI.js";const Vt=ya(i)(({theme:l})=>({border:"2px dashed #e0e0e0",borderRadius:l.shape.borderRadius,padding:l.spacing(3),textAlign:"center",backgroundColor:l.palette.grey[50],cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"150px","&:hover":{borderColor:l.palette.primary.main},'& input[type="file"]':{display:"none"}})),Ra=()=>{const l=ha(),L=ga(l.breakpoints.down("md")),Z=xa(),Me=ma(),{id:ae}=ba(),De=r.useRef(null),v=r.useRef(null),We=r.useRef(null),[jt,Ht]=r.useState(""),[_e,Ot]=r.useState(""),k="https://api.bookmyevent.ae/api",ze="AIzaSyAfLUm1kPmeMkHh1Hr5nbgNpQJOsNa7B78",G=localStorage.getItem("moduleId");r.useMemo(()=>{var t;return(t=Z.state)==null?void 0:t.vehicle},[Z.state]);const vt=r.useMemo(()=>{var t,a;return(a=(t=Z.state)==null?void 0:t.vehicle)==null?void 0:a._id},[Z.state]),re=r.useMemo(()=>{var t,a;return ae||((a=(t=Z.state)==null?void 0:t.vehicle)==null?void 0:a._id)||""},[ae,vt]),Nt=r.useMemo(()=>re?"edit":"create",[re]),[Le,Re]=r.useState(Nt),[ue,Fe]=r.useState(""),[Ct,$e]=r.useState(""),[N,Ve]=r.useState(null),[D,pe]=r.useState([]),[he,He]=r.useState(""),[ge,Oe]=r.useState(""),[Ut,St]=r.useState(""),[xe,Ne]=r.useState(""),[se,Ue]=r.useState(""),[me,qe]=r.useState(""),[Ze,Ge]=r.useState("yes"),[oe,Je]=r.useState(""),[wt,Ke]=r.useState(""),[g,R]=r.useState("hourly"),[be,Qe]=r.useState(""),[fe,Ye]=r.useState(""),[ye,Xe]=r.useState(""),[je,et]=r.useState(""),[T,ne]=r.useState({driverIncluded:!1,sunroof:!1,decorationAvailable:!1}),[J,tt]=r.useState(""),[B,F]=r.useState([{heading:"",points:[""]}]),[at,ve]=r.useState([]),[Ce,rt]=r.useState(""),[qt,m]=r.useState(!1),[Zt,f]=r.useState(""),[kt,y]=r.useState("success"),[st,ot]=r.useState([]),[nt,At]=r.useState([]),[Gt,Jt]=r.useState([]),[it,Kt]=r.useState({}),[wa,ka]=r.useState(""),[Aa,Ba]=r.useState(""),[Ea,Pa]=r.useState(""),[Ia,Ta]=r.useState(""),[Ma,Da]=r.useState(""),[Se,Bt]=r.useState(""),[Wa,Qt]=r.useState({}),[Yt,lt]=r.useState([]),[Xt,ie]=r.useState([]),[le,Et]=r.useState(""),[we,dt]=r.useState(""),[U,ct]=r.useState([]),[ut,Pt]=r.useState(!1),[ke,A]=r.useState(!1),[Ae,pt]=r.useState(""),[q,ht]=r.useState([]),[Be,K]=r.useState(""),[E,Q]=r.useState(""),[P,Y]=r.useState(""),[Ee,gt]=r.useState(""),[W,It]=r.useState(!1),[j,Tt]=r.useState(null);r.useEffect(()=>{if(window.google&&window.google.maps){It(!0);return}const t=document.createElement("script");return t.src=`https://maps.googleapis.com/maps/api/js?key=${ze}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{It(!0)},document.head.appendChild(t),()=>{document.head.contains(t)&&document.head.removeChild(t)}},[ze]),r.useEffect(()=>{W&&window.google&&window.google.maps&&ea()},[W]);const ea=r.useCallback(()=>{if(!window.google||!De.current||!W)return;const t=E&&P?parseFloat(E):20.5937,a=E&&P?parseFloat(P):78.9629,o={lat:t,lng:a},s=new window.google.maps.Map(De.current,{zoom:12,center:o});s.addListener("click",d=>{const h=d.latLng.lat(),c=d.latLng.lng();Q(h.toString()),Y(c.toString()),v.current&&v.current.setMap(null),v.current=new window.google.maps.Marker({position:{lat:h,lng:c},map:s}),new window.google.maps.Geocoder().geocode({location:{lat:h,lng:c}},(I,M)=>{M==="OK"&&I[0]?(K(I[0].formatted_address),f("Location set and address auto-filled!"),y("success"),m(!0)):(f("Location set, but could not determine address."),y("info"),m(!0))})}),Tt(s)},[W,E,P]);r.useEffect(()=>{if(!W||!j||!We.current||!window.google)return;const t=new window.google.maps.places.Autocomplete(We.current,{fields:["place_id","geometry","name","formatted_address"]}),a=t.addListener("place_changed",()=>{const o=t.getPlace();if(!o.geometry||!o.geometry.location)return;const s=o.geometry.location;o.geometry.viewport?j.fitBounds(o.geometry.viewport):(j.setCenter(s),j.setZoom(17)),v.current&&v.current.setMap(null),v.current=new window.google.maps.Marker({position:s,map:j}),Q(s.lat().toString()),Y(s.lng().toString()),K(o.formatted_address||o.name),f("Location selected!"),y("success"),m(!0)});return()=>{window.google&&window.google.maps.event&&window.google.maps.event.removeListener(a)}},[W,j]),r.useEffect(()=>{if(!j||!E||!P)return;const t={lat:parseFloat(E),lng:parseFloat(P)};j.setCenter(t),j.setZoom(12),v.current?v.current.setPosition(t):v.current=new window.google.maps.Marker({position:t,map:j})},[E,P,j]),r.useEffect(()=>{if(!se||!W||!window.google||!window.google.maps)return;new window.google.maps.Geocoder().geocode({address:se},(a,o)=>{if(o==="OK"&&a[0]){const s=a[0].geometry.location,d=s.lat().toString(),h=s.lng().toString();Q(d),Y(h),K(a[0].formatted_address),j&&(j.setCenter({lat:s.lat(),lng:s.lng()}),j.setZoom(12),v.current&&v.current.setMap(null),v.current=new window.google.maps.Marker({position:{lat:s.lat(),lng:s.lng()},map:j})),f(`Location set for ${se}!`),y("success"),m(!0)}else f(`Could not find location for ${se}`),y("warning"),m(!0)})},[se,W,j]);const Pe=r.useCallback(t=>{var d,h,c,C,I,M,$,V,H,u,b,Te,Wt,_t,zt,Lt,Rt;if(console.log("Setting vehicle data:",t),t.brand&&t.brand._id&&!st.some(p=>p._id===t.brand._id)&&ot(p=>[...p,{_id:t.brand._id,title:t.brand.title||t.brand.name||"Unknown Brand"}]),Bt(((d=t.advanceBookingAmount)==null?void 0:d.toString())||""),(c=(h=t.category)==null?void 0:h.parentCategory)!=null&&c._id){const p=t.category.parentCategory._id;Et(p),dt(t.category._id),_.get(`${k}/categories/parents/${p}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(pa=>ie(pa.data.data||[])).catch(()=>ie([]))}t.termsAndConditions&&Array.isArray(t.termsAndConditions)&&t.termsAndConditions.length>0?F(t.termsAndConditions.map(p=>({heading:p.heading||"",points:Array.isArray(p.points)&&p.points.length>0?p.points:[""]}))):F([{heading:"",points:[""]}]);let a="";Array.isArray(t.category)&&t.category.length>0?(a=t.category[0]._id,nt.some(p=>p._id===a)||At(p=>[...p,{_id:a,title:t.category[0].title||"Unknown Category"}])):t.category&&typeof t.category=="object"&&t.category._id?(a=t.category._id,nt.some(p=>p._id===a)||At(p=>[...p,{_id:a,title:t.category.title||"Unknown Category"}])):typeof t.category=="string"&&(a=t.category),t.zone&&t.zone._id&&!U.some(p=>p._id===t.zone._id)&&ct(p=>[...p,{_id:t.zone._id,name:t.zone.name||"Unknown Zone"}]),Fe(t.name||""),$e(t.description||""),He(((C=t.brand)==null?void 0:C._id)||""),St(a),console.log("Category ID being set:",a);const o=((I=t.zone)==null?void 0:I._id)||"";Ne(o);const s=U.find(p=>p._id===o)||t.zone&&{name:t.zone.name};Ue(s?s.name:""),Oe(t.model||""),qe(((M=t.seatingCapacity)==null?void 0:M.toString())||""),Ge(t.airCondition?"yes":"no"),Je(t.licensePlateNumber||""),ve(t.searchTags||[]),K(t.venueAddress||""),Q((($=t.latitude)==null?void 0:$.toString())||""),Y(((V=t.longitude)==null?void 0:V.toString())||""),gt(t.operatingHours||""),console.log("Operating hours being set:",t.operatingHours),t.pricing&&(R(t.pricing.type||"hourly"),Qe(((H=t.pricing.hourly)==null?void 0:H.toString())||""),Ye(((u=t.pricing.perDay)==null?void 0:u.toString())||""),Xe(((b=t.pricing.distanceWise)==null?void 0:b.toString())||"")),et(((Te=t.discount)==null?void 0:Te.toString())||""),ne({driverIncluded:((Wt=t.features)==null?void 0:Wt.driverIncluded)??!1,sunroof:((_t=t.features)==null?void 0:_t.sunroof)??!1,decorationAvailable:((zt=t.features)==null?void 0:zt.decorationAvailable)??!1}),tt(((Rt=(Lt=t.features)==null?void 0:Lt.decorationPrice)==null?void 0:Rt.toString())||"")},[st,nt,U]);r.useEffect(()=>()=>{D.forEach(t=>URL.revokeObjectURL(t))},[D]),r.useEffect(()=>{(async()=>{var a,o,s,d,h;try{if(!G)throw new Error("Module ID is not defined. Please log in or set moduleId in localStorage.");const c=localStorage.getItem("token"),[C,I,M]=await Promise.all([_.get(`${k}/brands/module/${G}`,{headers:{Authorization:`Bearer ${c}`}}),_.get(`${k}/categories/parents/${G}`,{headers:{Authorization:`Bearer ${c}`}}),_.get(`${k}/zones`,{headers:{Authorization:`Bearer ${c}`,Accept:"application/json"}})]);lt(((a=I.data)==null?void 0:a.data)||[]);const $=Array.isArray(C.data)?C.data:C.data.data||[];ot($);const V=((o=I.data)==null?void 0:o.data)||[];lt(V);const H=M.data.data||M.data||[],u=Array.isArray(H)?H.filter(b=>b.isActive).map(b=>({_id:b._id,name:b.name})):[];ct(u),console.log("Module ID:",G),console.log("Brands:",$),console.log("Parent Categories:",V),console.log("Zones:",u),Pt(!0)}catch(c){console.error("Error fetching brands/categories/zones:",((s=c.response)==null?void 0:s.data)||c),ot([]),lt([]),ct([]),Pt(!0),f(((h=(d=c.response)==null?void 0:d.data)==null?void 0:h.message)||"Failed to fetch brands, categories, or zones"),y("error"),m(!0)}})()},[G,k]),r.useEffect(()=>{(async()=>{var a;try{const d=(((a=(await _.get(`${k}/vehicle-attributes`)).data)==null?void 0:a.data)||[]).filter(c=>c.status),h={};d.forEach(c=>{h[c.title.toLowerCase()]=c.values||[]}),Jt(d),Qt(h),console.log("✅ Vehicle Attributes Loaded:",d)}catch(o){console.error("❌ Failed to load vehicle attributes",o)}})()},[k]),r.useEffect(()=>{var a;if(!ut)return;const t=(a=Z.state)==null?void 0:a.vehicle;t?(Pe(t),pt(t.thumbnail||""),ht(t.images||[]),Re("edit")):ae&&(async()=>{var s,d,h;A(!0);try{const c=await _.get(`${k}/vehicles/${ae}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),C=c.data.data||c.data;console.log("Vehicle data fetched for edit:",C),Pe(C),pt(C.thumbnail||""),ht(C.images||[]),Re("edit")}catch(c){f(((d=(s=c.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to fetch vehicle data"),y("error"),m(!0),console.error("Error fetching vehicle:",((h=c.response)==null?void 0:h.data)||c)}finally{A(!1)}})()},[ut,ae,Pe]);const ta=async t=>{const a=t.target.value;if(Et(a),dt(""),ie([]),!!a)try{const o=await _.get(`${k}/categories/parents/${a}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});ie(o.data.data||[])}catch(o){console.error("Failed to fetch sub categories",o),ie([])}},aa=r.useCallback(t=>{const a=t.target.files[0];a&&Ve(a)},[]),Mt=r.useCallback(t=>{t.preventDefault()},[]),ra=r.useCallback(t=>{t.preventDefault();const a=t.dataTransfer.files[0];a&&Ve(a)},[]),sa=r.useCallback(t=>{const a=Array.from(t.target.files);pe(o=>[...o,...a])},[]),oa=r.useCallback(t=>{t.preventDefault();const a=Array.from(t.dataTransfer.files);pe(o=>[...o,...a])},[]),na=r.useCallback(t=>{rt(t.target.value)},[]),ia=(t,a)=>{Kt(o=>({...o,[t]:a}))},la=r.useCallback(t=>{t.key==="Enter"&&Ce.trim()&&(ve(a=>[...a,Ce.trim()]),rt(""),t.preventDefault())},[Ce]),da=r.useCallback(t=>{ve(a=>a.filter(o=>o!==t))},[]),xt=r.useCallback(t=>/^[A-Z0-9]{6,8}$/.test(t)?(Ke(""),!0):(Ke("License plate must be 6-8 alphanumeric characters"),!1),[]),mt=r.useCallback(()=>{Fe(""),$e(""),K(""),He(""),Oe(""),St(""),Ne(""),Ue(""),Ve(null),pe([]),pt(""),ht([]),qe(""),Ge("yes"),Je(""),Ke(""),ne({driverIncluded:!1,sunroof:!1,decorationAvailable:!1}),R("hourly"),Qe(""),Ye(""),Xe(""),et(""),tt(""),ve([]),rt(""),Q(""),Y(""),gt(""),Re("create"),v.current&&(v.current.setMap(null),v.current=null),j&&Tt(null)},[]),ca=r.useCallback(async t=>{var h,c,C,I,M,$,V,H;t.preventDefault();const a=Le==="edit";if(A(!0),!ue||!he||!ge||!le||!we||!xe||!me||!oe||!g||!Be||!E||!P){f("Please fill all required fields."),y("error"),m(!0),A(!1);return}if(T.decorationAvailable&&(!J||parseFloat(J)<=0)){f("Please provide a valid decoration price when decoration is available."),y("error"),m(!0),A(!1);return}if(g==="hourly"&&!be||g==="perDay"&&!fe||g==="distanceWise"&&!ye){f(`Please provide a price for ${g} trip type.`),y("error"),m(!0),A(!1);return}if(!N&&!Ae&&!a){f("Please upload a thumbnail image."),y("error"),m(!0),A(!1);return}if(D.length===0&&q.length===0&&!a){f("Please upload at least one vehicle image."),y("error"),m(!0),A(!1);return}if(!xt(oe)){f("Invalid license plate number."),y("error"),m(!0),A(!1);return}if(!B.length||!B[0].heading){f("Please add at least one Terms & Conditions section."),y("error"),m(!0),A(!1);return}const o=localStorage.getItem("token");if(!o){f("No authentication token found. Please log in."),y("error"),m(!0),A(!1);return}const s=new FormData;s.append("transmissionType",jt),s.append("enginePower",_e?parseInt(_e):""),s.append("name",ue),s.append("description",Ct),s.append("brand",he),s.append("category",le),s.append("subCategories[]",we),s.append("zone",xe),s.append("model",ge),s.append("seatingCapacity",parseInt(me)),s.append("airCondition",Ze==="yes"),s.append("features[driverIncluded]",T.driverIncluded),s.append("features[sunroof]",T.sunroof),s.append("features[decorationAvailable]",T.decorationAvailable),T.decorationAvailable&&J&&s.append("decorationPrice",parseFloat(J)),s.append("attributes",JSON.stringify(it)),s.append("licensePlateNumber",oe),s.append("termsAndConditions",JSON.stringify(B)),s.append("venueAddress",Be),s.append("latitude",parseFloat(E)),s.append("longitude",parseFloat(P)),Ee&&s.append("operatingHours",Ee),s.append("pricing[type]",g),s.append("pricing[hourly]",g==="hourly"&&parseFloat(be)||0),s.append("pricing[perDay]",g==="perDay"&&parseFloat(fe)||0),s.append("pricing[distanceWise]",g==="distanceWise"&&parseFloat(ye)||0),je&&s.append("discount",parseFloat(je)),Se&&s.append("advanceBookingAmount",parseFloat(Se)),at.forEach(u=>s.append("searchTags[]",u)),N&&s.append("thumbnail",N),D.forEach(u=>s.append("images",u));const d={};for(let[u,b]of s.entries())d[u]=b instanceof File?b.name:b;console.log("FormData:",d);try{let u,b;if(a){if(!re)throw new Error("Invalid vehicle ID for update");u=await _.put(`${k}/vehicles/${re}`,s,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}}),b=u.data.data||u.data}else u=await _.post(`${k}/vehicles`,s,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}}),b=u.data.data||u.data;console.log("API Response:",u.data),f(a?"Vehicle updated successfully!":"Vehicle added successfully!"),y("success"),m(!0),mt(),a&&Me("/vehicle-setup/lists",{state:{vehicle:b}})}catch(u){console.error("API Error:",{status:(h=u.response)==null?void 0:h.status,statusText:(c=u.response)==null?void 0:c.statusText,data:(C=u.response)==null?void 0:C.data,headers:(I=u.response)==null?void 0:I.headers,message:u.message});let b=(($=(M=u.response)==null?void 0:M.data)==null?void 0:$.message)||"Failed to save vehicle";(H=(V=u.response)==null?void 0:V.data)!=null&&H.errors&&(b=u.response.data.errors.map(Te=>Te.msg).join(", ")),f(b),y("error"),m(!0)}finally{A(!1)}},[Le,re,ue,he,ge,Ut,xe,me,Ze,T,J,oe,g,be,fe,ye,je,at,N,D,Ae,q,xt,mt,Me,k,G,ut,vt,Pe,Be,E,P,Ee,le,we,it,Se,B]),Dt=r.useCallback((t,a)=>{a!=="clickaway"&&m(!1)},[]),Ie=Le==="edit",ua=r.useCallback(t=>{const a=t.target.value;Ne(a);const o=U.find(s=>s._id===a);Ue(o?o.name:"")},[U]);return e.jsxs(i,{sx:{p:L?2:3,backgroundColor:l.palette.grey[100],minHeight:"100vh",width:"100%"},children:[e.jsxs(i,{sx:{maxWidth:"lg",margin:"auto",backgroundColor:"white",borderRadius:l.shape.borderRadius,boxShadow:l.shadows[1],p:L?2:3,overflowX:"hidden"},children:[e.jsx(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[Ie&&e.jsx(bt,{onClick:()=>Me("/vehicle-setup/lists"),color:"primary",children:e.jsx(fa,{})}),e.jsx(Sa,{sx:{fontSize:24,mr:1}}),e.jsx(n,{variant:"h5",component:"h1",children:Ie?"Edit Vehicle":"Add New Vehicle"})]})}),e.jsx(n,{variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Insert the basic information of the vehicle"}),ke&&e.jsx(i,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.jsx(Ft,{})}),e.jsxs(i,{component:"form",onSubmit:ca,children:[e.jsxs(i,{sx:{display:"flex",flexDirection:L?"column":"row",gap:3,mb:4},children:[e.jsx(w,{sx:{flex:L?"auto":2,p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"General Information"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the basic information of the vehicle"}),e.jsx(x,{fullWidth:!0,label:"Vehicle Name*",variant:"outlined",value:ue,onChange:t=>Fe(t.target.value),placeholder:"Type vehicle name",sx:{mb:2},required:!0}),e.jsx(x,{fullWidth:!0,label:"Short Description",variant:"outlined",multiline:!0,rows:4,value:Ct,onChange:t=>$e(t.target.value),placeholder:"Type short description",sx:{mb:2}})]})}),e.jsx(w,{sx:{flex:L?"auto":1,p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Vehicle Thumbnail*"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs(Vt,{onDragOver:Mt,onDrop:ra,onClick:()=>document.getElementById("thumbnail-upload").click(),children:[N?e.jsxs(i,{children:[e.jsx("img",{src:URL.createObjectURL(N),alt:"Thumbnail preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:l.spacing(1)}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:N.name})]}):Ae?e.jsxs(i,{children:[e.jsx("img",{src:Ae,alt:"Existing thumbnail",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:l.spacing(1),borderColor:"#E15B65"}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Existing thumbnail. Upload to replace."})]}):e.jsxs(i,{children:[e.jsx($t,{sx:{fontSize:40,color:"#E15B65",mb:1}}),e.jsx(n,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(n,{variant:"body2",color:"#E15B65",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"thumbnail-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:aa})]})]})})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Images*"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs(Vt,{onDragOver:Mt,onDrop:oa,onClick:()=>document.getElementById("images-upload").click(),children:[e.jsxs(i,{sx:{display:"flex",flexWrap:"wrap",gap:1,justifyContent:"center",width:"100%"},children:[q.length>0&&e.jsx(e.Fragment,{children:q.map((t,a)=>e.jsxs(i,{sx:{position:"relative"},children:[e.jsx("img",{src:t,alt:`Existing vehicle image ${a+1}`,style:{maxWidth:80,maxHeight:80,objectFit:"cover",borderRadius:l.shape.borderRadius}}),e.jsx(n,{variant:"caption",sx:{position:"absolute",top:0,right:0,backgroundColor:"rgba(0,0,0,0.5)",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"Existing"})]},`existing-${a}`))}),D.length>0&&e.jsx(e.Fragment,{children:D.map((t,a)=>e.jsxs(i,{sx:{position:"relative"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`New vehicle image ${a+1}`,style:{maxWidth:80,maxHeight:80,objectFit:"cover",borderRadius:l.shape.borderRadius}}),e.jsx(bt,{size:"small",onClick:()=>pe(o=>o.filter((s,d)=>d!==a)),sx:{position:"absolute",top:-4,right:-4,backgroundColor:"white",width:24,height:24},children:e.jsx(n,{sx:{fontSize:14,color:"red"},children:"×"})})]},`new-${a}`))}),q.length===0&&D.length===0&&e.jsxs(e.Fragment,{children:[e.jsx($t,{sx:{fontSize:40,color:"#E15B65",mb:1}}),e.jsx(n,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium",borderColor:"#E15B65"},children:"Click to upload"}),e.jsx(n,{variant:"body2",color:"#E15B65",children:"Or drag and drop"})]})]}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mt:1,width:"100%",textAlign:"center"},children:[q.length+D.length," image(s) ",q.length>0?"(including existing)":"",". Upload to add more."]}),e.jsx("input",{type:"file",id:"images-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",multiple:!0,onChange:sa})]})]})})}),e.jsx(i,{sx:{mb:4},children:e.jsxs(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:[e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Vehicle Information"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the vehicle's general information"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:L?"1fr":"repeat(3, 1fr)",gap:l.spacing(3)},children:[e.jsxs(ft,{spacing:2,children:[e.jsxs(O,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(X,{id:"brand-label",children:"Brand*"}),e.jsxs(ee,{labelId:"brand-label",id:"brand-select",value:he,label:"Brand",onChange:t=>He(t.target.value),children:[e.jsx(S,{value:"",children:"Select vehicle brand"}),st.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]}),e.jsx(O,{fullWidth:!0,variant:"outlined",required:!0,children:e.jsx(x,{id:"seating-capacity-input",label:"Seating Capacity*",variant:"outlined",value:me,onChange:t=>qe(t.target.value),placeholder:"Input how many persons can seat",type:"number",inputProps:{min:1}})})]}),e.jsxs(ft,{spacing:2,children:[e.jsx(x,{fullWidth:!0,label:"Model*",variant:"outlined",value:ge,onChange:t=>Oe(t.target.value),placeholder:"Model Name",required:!0}),e.jsxs(O,{fullWidth:!0,required:!0,children:[e.jsx(X,{children:"Transmission Type"}),e.jsxs(ee,{value:jt,label:"Transmission Type",onChange:t=>Ht(t.target.value),children:[e.jsx(S,{value:"",children:"Select Transmission"}),e.jsx(S,{value:"manual",children:"Manual"}),e.jsx(S,{value:"automatic",children:"Automatic"}),e.jsx(S,{value:"semi-automatic",children:"Semi-Automatic"})]})]}),e.jsx(x,{fullWidth:!0,label:"Engine Power (HP)",variant:"outlined",type:"number",value:_e,onChange:t=>Ot(t.target.value),placeholder:"e.g. 180",inputProps:{min:0}})]}),e.jsxs(ft,{spacing:2,children:[e.jsxs(O,{fullWidth:!0,required:!0,children:[e.jsx(X,{children:"Parent Category"}),e.jsxs(ee,{value:le,label:"Parent Category",onChange:ta,children:[e.jsx(S,{value:"",children:"Select Parent Category"}),Yt.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]}),e.jsxs(O,{fullWidth:!0,required:!0,disabled:!le,children:[e.jsx(X,{children:"Sub Category"}),e.jsxs(ee,{value:we,label:"Sub Category",onChange:t=>dt(t.target.value),children:[e.jsx(S,{value:"",children:"Select Sub Category"}),Xt.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]})]})]}),e.jsxs(O,{component:"fieldset",fullWidth:!0,children:[e.jsx(n,{variant:"body1",color:"text.secondary",sx:{mb:1},children:"Air Condition"}),e.jsxs(ja,{row:!0,value:Ze,onChange:t=>Ge(t.target.value),children:[e.jsx(de,{value:"yes",control:e.jsx(ce,{}),label:"Yes"}),e.jsx(de,{value:"no",control:e.jsx(ce,{}),label:"No"})]})]}),e.jsx(i,{sx:{mt:3},children:e.jsxs(O,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(X,{id:"zone-label",children:"Zone*"}),e.jsxs(ee,{labelId:"zone-label",id:"zone-select",value:xe,label:"Zone",onChange:ua,children:[e.jsx(S,{value:"",children:"Select zone"}),U.length>0?U.map(t=>e.jsx(S,{value:t._id,children:t.name},t._id)):e.jsx(S,{disabled:!0,children:"No zones available"})]})]})}),e.jsx(i,{sx:{mt:3},children:e.jsx(x,{fullWidth:!0,label:"Vihicles Address*",variant:"outlined",value:Be,onChange:t=>K(t.target.value),placeholder:"Enter venue address",required:!0})}),e.jsxs(i,{sx:{mt:3},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Location and Operating Hours"}),e.jsx(x,{fullWidth:!0,label:"Search Location",inputRef:We,variant:"outlined",placeholder:"Enter a location",sx:{mb:2}}),e.jsxs(i,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(x,{sx:{flex:1},label:"Latitude*",variant:"outlined",value:E,onChange:t=>Q(t.target.value),placeholder:"e.g., 25.2048",required:!0}),e.jsx(x,{sx:{flex:1},label:"Longitude*",variant:"outlined",value:P,onChange:t=>Y(t.target.value),placeholder:"e.g., 55.2708",required:!0})]}),W&&ze?e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Click on the map below to select a location"}),e.jsx(i,{ref:De,sx:{height:300,width:"100%",borderRadius:l.shape.borderRadius,border:`1px solid ${l.palette.grey[300]}`,mb:2}})]}):e.jsx(i,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${l.palette.grey[300]}`,borderRadius:l.shape.borderRadius,mb:2},children:e.jsx(n,{variant:"body2",color:"text.secondary",children:"Map loading..."})}),e.jsx(x,{fullWidth:!0,label:"Operating Hours",variant:"outlined",value:Ee,onChange:t=>gt(t.target.value),placeholder:"e.g., 9:00 AM - 6:00 PM",multiline:!0,rows:2})]})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Vehicle Attributes"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Select additional attributes for the vehicle"}),e.jsx(i,{sx:{display:"grid",gridTemplateColumns:L?"1fr":"repeat(3, 1fr)",gap:3},children:Gt.map(t=>e.jsxs(O,{fullWidth:!0,children:[e.jsx(X,{children:t.title}),e.jsxs(ee,{value:it[t._id]||"",label:t.title,onChange:a=>ia(t._id,a.target.value),children:[e.jsxs(S,{value:"",children:["Select ",t.title]}),t.values.map(a=>e.jsx(S,{value:a,children:a},a))]})]},t._id))})]})})})]})}),e.jsxs(i,{sx:{mt:3,p:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"#fafafa"},children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Vehicle Features"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},gap:4},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white",minHeight:56},children:[e.jsx(n,{fontSize:14,fontWeight:500,children:"Driver Included"}),e.jsx(yt,{checked:T.driverIncluded,onChange:t=>ne(a=>({...a,driverIncluded:t.target.checked})),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#E15B65"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})]}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white",minHeight:56},children:[e.jsx(n,{fontSize:14,fontWeight:500,children:"Sunroof"}),e.jsx(yt,{checked:T.sunroof,onChange:t=>ne(a=>({...a,sunroof:t.target.checked})),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#E15B65"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})]}),e.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:1.5,px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white"},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(n,{fontSize:14,fontWeight:500,children:"Decoration Available"}),e.jsx(yt,{checked:T.decorationAvailable,onChange:t=>ne(a=>({...a,decorationAvailable:t.target.checked})),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#E15B65"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})]}),T.decorationAvailable&&e.jsx(x,{fullWidth:!0,label:"Decoration Price (₹)",type:"number",value:J,onChange:t=>tt(t.target.value),inputProps:{min:0},placeholder:"e.g. 5000"})]})]})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Vehicle Identity"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the vehicle's license plate number"}),e.jsx(x,{fullWidth:!0,label:"License Plate Number*",variant:"outlined",value:oe,onChange:t=>{Je(t.target.value),xt(t.target.value)},placeholder:"Type license plate number (6-8 alphanumeric)",required:!0,error:!!wt,helperText:wt})]})})}),e.jsxs(i,{sx:{mb:4},children:[e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Pricing & Discounts"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert pricing and discount information"}),e.jsxs(i,{sx:{mb:3},children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Trip Type"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Choose the trip type you prefer"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:L?"1fr":"repeat(3, 1fr)",gap:l.spacing(2)},children:[e.jsxs(w,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:g==="hourly"?"#E15B65":void 0,borderWidth:g==="hourly"?2:1},onClick:()=>R("hourly"),children:[e.jsx(de,{control:e.jsx(ce,{checked:g==="hourly",onChange:()=>R("hourly"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"Hourly",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Set your hourly rental price"})]}),e.jsxs(w,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:g==="perDay"?"#E15B65":void 0,borderWidth:g==="perDay"?2:1},onClick:()=>R("perDay"),children:[e.jsx(de,{control:e.jsx(ce,{checked:g==="perDay",onChange:()=>R("perDay"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"Per Day",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Set your per day rental price"})]}),e.jsxs(w,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:g==="distanceWise"?"#E15B65":void 0,borderWidth:g==="distanceWise"?2:1},onClick:()=>R("distanceWise"),children:[e.jsx(de,{control:e.jsx(ce,{checked:g==="distanceWise",onChange:()=>R("distanceWise"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"DistanceWise",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Set your distance wise rental price"})]})]})]}),g==="hourly"&&e.jsx(i,{sx:{mb:3},children:e.jsx(x,{fullWidth:!0,label:"Hourly Price (₹/per hour)*",variant:"outlined",value:be,onChange:t=>Qe(t.target.value),placeholder:"Ex: 2500.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),g==="perDay"&&e.jsx(i,{sx:{mb:3},children:e.jsx(x,{fullWidth:!0,label:"Per Day Price (₹/per day)*",variant:"outlined",value:fe,onChange:t=>Ye(t.target.value),placeholder:"Ex: 15000.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),g==="distanceWise"&&e.jsx(i,{sx:{mb:3},children:e.jsx(x,{fullWidth:!0,label:"Distance Price (₹/per km)*",variant:"outlined",value:ye,onChange:t=>Xe(t.target.value),placeholder:"Ex: 100.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),e.jsxs(i,{children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Discount"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Set a discount amount (e.g., 10 for 10%)"}),e.jsx(x,{fullWidth:!0,label:"Discount (%)",variant:"outlined",value:je,onChange:t=>et(t.target.value),placeholder:"Ex: 10",type:"number",inputProps:{step:"any",min:0,max:100}})]})]})}),e.jsx(w,{sx:{mt:3},children:e.jsxs(z,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Advance Booking Amount"}),e.jsx(x,{fullWidth:!0,type:"number",label:"Advance Amount",value:Se,onChange:t=>Bt(t.target.value),inputProps:{min:0},helperText:"Flat advance amount payable during booking"})]})}),e.jsx(i,{sx:{mb:4},children:e.jsxs(w,{sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, #ffffff, #fafafa)",border:"1px solid #eee"},children:[e.jsx(n,{variant:"h6",fontWeight:600,sx:{mb:.5},children:"Terms & Conditions"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Define rules & policies shown to customers during booking"}),B.map((t,a)=>e.jsxs(i,{sx:{mb:3,p:2,borderRadius:2,border:"1px solid #e5e7eb",backgroundColor:"#fff"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(x,{fullWidth:!0,label:"Section Heading",placeholder:"e.g. Booking & Confirmation",value:t.heading,onChange:o=>{const s=[...B];s[a].heading=o.target.value,F(s)}}),B.length>1&&e.jsx(te,{onClick:()=>F(o=>o.filter((s,d)=>d!==a)),sx:{ml:1,color:"error.main"},children:"✕"})]}),t.points.map((o,s)=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(x,{fullWidth:!0,label:`Point ${s+1}`,placeholder:"Enter policy detail",value:o,onChange:d=>{const h=[...B];h[a].points[s]=d.target.value,F(h)}}),t.points.length>1&&e.jsx(te,{onClick:()=>{const d=[...B];d[a].points.splice(s,1),F(d)},sx:{ml:1,color:"error.main"},children:"✕"})]},s)),e.jsx(te,{size:"small",onClick:()=>{const o=[...B];o[a].points.push(""),F(o)},sx:{mt:1,color:"#E15B65"},children:"+ Add Point"})]},a)),e.jsx(te,{variant:"outlined",onClick:()=>F([...B,{heading:"",points:[""]}]),sx:{mt:2,borderRadius:2,borderColor:"#E15B65",color:"#E15B65"},children:"+ Add Section"})]})})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(w,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs(z,{sx:{"&:last-child":{pb:2}},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Search Tags"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert tags for appearing in user search results"}),e.jsx(x,{fullWidth:!0,label:"Type and press Enter",variant:"outlined",value:Ce,onChange:na,onKeyPress:la,placeholder:"Type and press Enter",sx:{mb:2}}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:at.map((t,a)=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",backgroundColor:l.palette.grey[200],borderRadius:l.shape.borderRadius,px:1,py:.5},children:[e.jsx(n,{variant:"body2",children:t}),e.jsx(bt,{size:"small",onClick:()=>da(t),children:e.jsx(n,{sx:{fontSize:14},children:"×"})})]},a))})]})})}),e.jsxs(i,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(te,{variant:"outlined",color:"#E15B65",size:"large",onClick:mt,sx:{color:"#E15B65"},children:Ie?"Cancel":"Reset"}),e.jsx(te,{variant:"contained",type:"submit",size:"large",disabled:ke,startIcon:ke?e.jsx(Ft,{size:20,color:"inherit"}):null,sx:{color:"white",bgcolor:"#E15B65"},children:ke?"Submitting...":Ie?"Update":"Submit"})]})]})]}),e.jsx(va,{open:qt,autoHideDuration:6e3,onClose:Dt,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{"& .MuiSnackbarContent-root":{minWidth:"600px",maxWidth:"600px",width:"auto"}},children:e.jsx(Ca,{onClose:Dt,severity:kt,sx:{width:"100%",backgroundColor:kt==="success"?"#1976d2":"#d32f2f",color:"white","& .MuiAlert-message":{whiteSpace:"pre-line",wordBreak:"break-word",fontSize:"1rem",lineHeight:1.5}},children:Zt})})]})};export{Ra as default};
