import{r as n,j as e,B as u,T as f,a8 as g,S as I,s as T,g as S}from"./index-B1D2Baoc.js";import{T as v}from"./TableContainer-DeaHbnf6.js";import{T as y,a as l,b as s,c as k}from"./TableRow-CDkjtdnz.js";import{T as w}from"./TableHead-DSsOBCf5.js";const L=()=>{const[i,d]=n.useState(""),[h,x]=n.useState([]),m=`https://api.bookmyevent.ae/api/bookings/provider/${localStorage.getItem("providerId")}/payment-status/Paid`,a=async()=>{try{const o=await(await fetch(m)).json();if(o.success){const p=o.data.map((r,A)=>{var c;return{id:r._id,tripId:r._id.slice(-6),bookingDate:new Date(r.bookingDate).toLocaleDateString(),scheduleAt:Array.isArray(r.timeSlot)?r.timeSlot[0]:r.timeSlot,customerInfo:r.fullName+" "+r.emailAddress,driverInfo:r.driverInfo||"Unassigned",vehicleInfo:r.vehicleInfo||"Unassigned",tripType:r.moduleType,tripAmount:(c=r.finalPrice)==null?void 0:c.toFixed(2),tripStatus:r.paymentStatus}});x(p)}}catch(t){console.log("Error fetching completed bookings:",t)}};n.useEffect(()=>{a()},[]);const j=h.filter(t=>t.tripId.toString().includes(i)||t.customerInfo.toLowerCase().includes(i.toLowerCase()));return e.jsxs(u,{p:2,children:[e.jsx(f,{variant:"h4",gutterBottom:!0,children:"Completed Bookings"}),e.jsxs(g,{sx:{mt:2,width:"100%"},children:[e.jsxs(I,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},p:2,children:[e.jsx(T,{label:"Search by ID, customer name",size:"small",value:i,onChange:t=>d(t.target.value),sx:{maxWidth:{sm:300}}}),e.jsx(S,{variant:"contained",sx:{bgcolor:"#E15B65",color:"white"},onClick:a,children:"Refresh"})]}),e.jsx(v,{sx:{width:"100%",overflowX:"auto"},children:e.jsxs(y,{stickyHeader:!0,children:[e.jsx(w,{children:e.jsxs(l,{children:[e.jsx(s,{children:"S#"}),e.jsx(s,{children:"Booking ID"}),e.jsx(s,{children:"Booking Date"}),e.jsx(s,{children:"Schedule At"}),e.jsx(s,{children:"Customer"}),e.jsx(s,{children:"Driver"}),e.jsx(s,{children:"Vehicle"}),e.jsx(s,{children:"Type"}),e.jsx(s,{children:"Amount"}),e.jsx(s,{children:"Status"})]})}),e.jsx(k,{children:j.map((t,o)=>e.jsxs(l,{children:[e.jsx(s,{children:o+1}),e.jsx(s,{children:t.tripId}),e.jsx(s,{children:t.bookingDate}),e.jsx(s,{children:t.scheduleAt}),e.jsx(s,{children:t.customerInfo}),e.jsx(s,{children:t.driverInfo}),e.jsx(s,{children:t.vehicleInfo}),e.jsx(s,{children:t.tripType}),e.jsx(s,{children:t.tripAmount}),e.jsx(s,{children:t.tripStatus})]},t.id))})]})})]})]})};export{L as default};
