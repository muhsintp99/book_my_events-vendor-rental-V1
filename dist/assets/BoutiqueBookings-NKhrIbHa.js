import{u as Fe,i as Be,r as j,h as ce,j as e,B as i,T as a,S as u,G as f,a8 as he,s as R,a as q,aj as E,g as k,ay as De,a3 as m,ae as Re,F as de,I as xe,ac as ue,W as w,t as Le,U as _e,q as J,a4 as z,b as L,av as fe,bj as ge,bk as Ne,D as U,P as Me,ag as $e,af as Ee}from"./index-CxFmThG8.js";import{E as je}from"./EventAvailable-vk2O71u6.js";import{A as be}from"./AccessTime-CL4dsrjI.js";import{C as K}from"./CheckCircle-B8UbmCEa.js";import{T as Oe,S as qe}from"./TrendingUp-Cdb5BdZW.js";import{S as Ue}from"./Search-C5w2DHkN.js";import{F as He}from"./FilterList-CG88D4uP.js";import{C as Ge}from"./Clear-BSKc7KA-.js";import{T as Ve,a as Ze}from"./Tabs-CobY_Xzj.js";import{A as H,a as G}from"./ArrowUpward-VYYPl0dZ.js";import{C as ye}from"./Cancel-PhGTTinZ.js";import{C as pe}from"./Category-BrY0Mpzm.js";const V="https://api.bookmyevent.ae",d="#D4AF37",ve="#0f172a",Q=s=>s?s.startsWith("http")?s:`https://api.bookmyevent.ae/${s.startsWith("/")?s.slice(1):s}`:null,Je=()=>{try{const s=localStorage.getItem("user");if(!s)return null;const r=JSON.parse(s);return(r==null?void 0:r._id)||null}catch{return null}},me=s=>{const r=String(s||"").toLowerCase();return["accepted","confirmed","approve","approved"].includes(r)?"#22c55e":r==="pending"?"#f59e0b":["cancelled","rejected"].includes(r)?"#ef4444":r==="completed"?"#3b82f6":"#64748b"},Y=s=>{var y;const r=s.boutiqueId||s.packageId||{};let l="";return r.thumbnail?l=r.thumbnail:r.galleryImages&&r.galleryImages.length>0&&(l=r.galleryImages[0]),{name:r.name||s.packageName||"Boutique Package",thumbnail:l,packageType:r.availabilityMode||s.bookingMode||"purchase",sizes:r.availableSizes||[],colors:r.availableColors||[],category:((y=r.category)==null?void 0:y.title)||"Fashion",id:r._id||"N/A"}},xt=({initialTab:s="All",hideTabs:r=!1})=>{const l=Fe(),y=Be(l.breakpoints.down("sm")),[F,v]=j.useState(null),[p,h]=j.useState([]),[A,P]=j.useState(!0),g=j.useMemo(()=>[{label:"All",value:0,filterFn:()=>!0,key:"All"},{label:"Pending",value:1,filterFn:t=>t==="pending",key:"Pending"},{label:"Confirmed",value:2,filterFn:t=>["accepted","confirmed","approve","approved"].includes(t),key:"Confirmed"},{label:"Completed",value:3,filterFn:t=>t==="completed",key:"Completed"},{label:"Cancelled",value:4,filterFn:t=>["cancelled","rejected"].includes(t),key:"Cancelled"},{label:"Payment Failed",value:5,filterFn:(t,n)=>n==="failed"||n==="Payment Failed",key:"Payment Failed"}],[]),Ce=j.useMemo(()=>{const t=g.findIndex(n=>n.key.toLowerCase()===s.toLowerCase());return t!==-1?t:0},[s,g]),[B,Se]=j.useState(Ce),[_,X]=j.useState(""),[N,we]=j.useState("date_desc"),[Ae,ee]=j.useState(null),[We,te]=j.useState(!1),[I,ke]=j.useState(!1),[re,O]=j.useState(null),[c,T]=j.useState({dateFrom:"",dateTo:"",paymentStatus:"all",packageType:"all",minAmount:"",maxAmount:""});j.useEffect(()=>{const t=Je();t?(v(t),Te(t)):P(!1)},[]);const Te=async t=>{var n;P(!0);try{const b=(((n=(await ce.get(`${V}/api/bookings/provider/${t}`)).data)==null?void 0:n.data)||[]).filter(C=>{const D=String(C.moduleType||"").toLowerCase();return D==="boutique"||D==="boutique artist"});h(b)}catch(o){console.error("Error fetching bookings:",o)}finally{P(!1)}},se=j.useMemo(()=>{let t=[...p];const n=g[B];if(n&&(n.label!=="All"||r)&&(t=t.filter(o=>{const x=String(o.status||"").toLowerCase(),b=String(o.paymentStatus||"").toLowerCase();return n.filterFn(x,b)})),_.trim()){const o=_.toLowerCase();t=t.filter(x=>x._id&&x._id.toLowerCase().includes(o)||x.fullName&&x.fullName.toLowerCase().includes(o)||x.contactNumber&&String(x.contactNumber).includes(o)||x.emailAddress&&x.emailAddress.toLowerCase().includes(o))}return c.dateFrom&&(t=t.filter(o=>new Date(o.bookingDate)>=new Date(c.dateFrom))),c.dateTo&&(t=t.filter(o=>new Date(o.bookingDate)<=new Date(c.dateTo))),c.paymentStatus!=="all"&&(t=t.filter(o=>String(o.paymentStatus||"").toLowerCase()===c.paymentStatus.toLowerCase())),c.packageType!=="all"&&(t=t.filter(o=>Y(o).packageType.toLowerCase()===c.packageType.toLowerCase())),c.minAmount&&(t=t.filter(o=>parseFloat(o.finalPrice||0)>=parseFloat(c.minAmount))),c.maxAmount&&(t=t.filter(o=>parseFloat(o.finalPrice||0)<=parseFloat(c.maxAmount))),t.sort((o,x)=>{const b=new Date(o.bookingDate||0),C=new Date(x.bookingDate||0),D=parseFloat(o.finalPrice||0),ne=parseFloat(x.finalPrice||0),oe=(o.fullName||"").toLowerCase(),ie=(x.fullName||"").toLowerCase();switch(N){case"date_asc":return b-C;case"date_desc":return C-b;case"price_high":return ne-D;case"price_low":return D-ne;case"name_asc":return oe.localeCompare(ie);case"name_desc":return ie.localeCompare(oe);default:return 0}}),t},[p,B,_,N,g,r,c]),M=j.useMemo(()=>{const t=p.length,n=p.filter(b=>String(b.status).toLowerCase()==="pending").length,o=p.filter(b=>["accepted","confirmed","approved"].includes(String(b.status).toLowerCase())).length,x=p.reduce((b,C)=>b+parseFloat(C.finalPrice||0),0);return{total:t,pending:n,confirmed:o,revenue:x}},[p]),ze=(t,n)=>{ee(t),te(!0)},Pe=()=>{te(!1),ee(null)},ae=async(t,n,o)=>{o&&o.stopPropagation();try{let x="";if(n==="accepted"?x=`${V}/api/bookings/${t}/accept`:n==="rejected"&&(x=`${V}/api/bookings/${t}/reject`),!x)return;await ce.patch(x),h(b=>b.map(C=>C._id===t?{...C,status:n}:C)),alert(`Booking ${n==="accepted"?"Confirmed":"Rejected"}`)}catch(x){console.error("Status update error:",x),alert("Failed to update status")}},Ie=()=>{T({dateFrom:"",dateTo:"",paymentStatus:"all",packageType:"all",minAmount:"",maxAmount:""}),X("")},le=j.useMemo(()=>{let t=0;return c.dateFrom&&t++,c.dateTo&&t++,c.paymentStatus!=="all"&&t++,c.packageType!=="all"&&t++,c.minAmount&&t++,c.maxAmount&&t++,t},[c]);return e.jsxs(i,{sx:{minHeight:"100vh",bgcolor:"#f8fafc",pb:6},children:[e.jsxs(i,{sx:{px:4,py:2,display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#fff",borderBottom:"1px solid #e2e8f0"},children:[e.jsx(a,{variant:"h6",fontWeight:700,color:"text.primary",children:g[B].label}),e.jsxs(u,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(a,{variant:"caption",color:"text.secondary",children:"Bookings"}),e.jsx(a,{variant:"caption",color:"text.secondary",sx:{mb:.5},children:">"}),e.jsx(a,{variant:"caption",fontWeight:600,color:"#6366f1",children:g[B].label})]})]}),e.jsxs(i,{sx:{p:{xs:2,md:4}},children:[!r&&e.jsxs(f,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx($,{label:"Total Bookings",value:M.total,color:d,icon:e.jsx(je,{})}),e.jsx($,{label:"Pending Orders",value:M.pending,color:"#f59e0b",icon:e.jsx(be,{})}),e.jsx($,{label:"Confirmed",value:M.confirmed,color:"#22c55e",icon:e.jsx(K,{})}),e.jsx($,{label:"Total Revenue",value:`₹${M.revenue.toLocaleString()}`,color:ve,icon:e.jsx(Oe,{})})]}),e.jsxs(he,{elevation:0,sx:{borderRadius:"16px",border:"1px solid #e2e8f0",overflow:"hidden",bgcolor:"#fff"},children:[e.jsxs(i,{sx:{p:3,borderBottom:"1px solid #f1f5f9"},children:[e.jsxs(u,{direction:{xs:"column",md:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"stretch",md:"center"},children:[e.jsx(a,{variant:"h6",fontWeight:800,sx:{color:"#1e293b"},children:"My Bookings"}),e.jsxs(u,{direction:{xs:"column",sm:"row"},spacing:2,flex:1,maxWidth:{md:700},children:[e.jsx(R,{placeholder:"Search by Booking ID, Name...",size:"small",fullWidth:!0,value:_,onChange:t=>X(t.target.value),InputProps:{startAdornment:e.jsx(q,{position:"start",children:e.jsx(Ue,{fontSize:"small"})}),sx:{borderRadius:"12px",bgcolor:"#f8fafc"}}}),e.jsx(E,{title:"Sort Options",children:e.jsx(k,{variant:"outlined",size:"small",onClick:t=>O(t.currentTarget),startIcon:e.jsx(qe,{}),sx:{borderRadius:"12px",minWidth:100,borderColor:"#e2e8f0",color:"#64748b","&:hover":{borderColor:d,color:d}},children:"Sort"})}),e.jsx(E,{title:"Filter Options",children:e.jsx(De,{badgeContent:le,color:"error",children:e.jsx(k,{variant:I?"contained":"outlined",size:"small",onClick:()=>ke(!I),startIcon:e.jsx(He,{}),sx:{borderRadius:"12px",minWidth:100,borderColor:"#e2e8f0",color:I?"#fff":"#64748b",bgcolor:I?d:"transparent","&:hover":{borderColor:d,bgcolor:I?d:m(d,.1)}},children:"Filters"})})})]})]}),e.jsx(Re,{in:I,children:e.jsxs(i,{sx:{mt:3,p:3,borderRadius:"16px",bgcolor:m(d,.03),border:`1px solid ${m(d,.1)}`},children:[e.jsxs(u,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(a,{variant:"subtitle2",fontWeight:700,color:d,children:"Advanced Filters"}),le>0&&e.jsx(k,{size:"small",startIcon:e.jsx(Ge,{}),onClick:Ie,sx:{color:"#64748b",textTransform:"none"},children:"Clear All"})]}),e.jsxs(f,{container:!0,spacing:2,children:[e.jsx(f,{item:!0,xs:12,sm:6,md:3,children:e.jsx(R,{fullWidth:!0,size:"small",label:"From Date",type:"date",value:c.dateFrom,onChange:t=>T(n=>({...n,dateFrom:t.target.value})),InputLabelProps:{shrink:!0},sx:{bgcolor:"#fff",borderRadius:"8px"}})}),e.jsx(f,{item:!0,xs:12,sm:6,md:3,children:e.jsx(R,{fullWidth:!0,size:"small",label:"To Date",type:"date",value:c.dateTo,onChange:t=>T(n=>({...n,dateTo:t.target.value})),InputLabelProps:{shrink:!0},sx:{bgcolor:"#fff",borderRadius:"8px"}})}),e.jsx(f,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(de,{fullWidth:!0,size:"small",sx:{bgcolor:"#fff",borderRadius:"8px"},children:[e.jsx(xe,{children:"Payment Status"}),e.jsxs(ue,{value:c.paymentStatus,label:"Payment Status",onChange:t=>T(n=>({...n,paymentStatus:t.target.value})),children:[e.jsx(w,{value:"all",children:"All"}),e.jsx(w,{value:"initiated",children:"Initiated"}),e.jsx(w,{value:"completed",children:"Completed"}),e.jsx(w,{value:"failed",children:"Failed"}),e.jsx(w,{value:"pending",children:"Pending"})]})]})}),e.jsx(f,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(de,{fullWidth:!0,size:"small",sx:{bgcolor:"#fff",borderRadius:"8px"},children:[e.jsx(xe,{children:"Package Type"}),e.jsxs(ue,{value:c.packageType,label:"Package Type",onChange:t=>T(n=>({...n,packageType:t.target.value})),children:[e.jsx(w,{value:"all",children:"All"}),e.jsx(w,{value:"rental",children:"Rental"}),e.jsx(w,{value:"purchase",children:"Purchase"})]})]})}),e.jsx(f,{item:!0,xs:12,sm:6,md:2,children:e.jsx(R,{fullWidth:!0,size:"small",label:"Min Amount",type:"number",value:c.minAmount,onChange:t=>T(n=>({...n,minAmount:t.target.value})),InputProps:{startAdornment:e.jsx(q,{position:"start",children:"₹"})},sx:{bgcolor:"#fff",borderRadius:"8px"}})}),e.jsx(f,{item:!0,xs:12,sm:6,md:2,children:e.jsx(R,{fullWidth:!0,size:"small",label:"Max Amount",type:"number",value:c.maxAmount,onChange:t=>T(n=>({...n,maxAmount:t.target.value})),InputProps:{startAdornment:e.jsx(q,{position:"start",children:"₹"})},sx:{bgcolor:"#fff",borderRadius:"8px"}})})]})]})})]}),!r&&e.jsx(i,{sx:{px:3,borderBottom:"1px solid #f1f5f9"},children:e.jsx(Ve,{value:B,onChange:(t,n)=>Se(n),sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:700,minWidth:100,fontSize:"0.9rem",color:"#64748b"},"& .Mui-selected":{color:"#3b82f6 !important"},"& .MuiTabs-indicator":{bgcolor:"#3b82f6",height:3}},children:g.map(t=>e.jsx(Ze,{label:t.label},t.key))})}),!y&&e.jsxs(i,{sx:{px:3,py:2,bgcolor:"#f8fafc",borderBottom:"1px solid #f1f5f9",display:"flex",gap:2,alignItems:"center"},children:[e.jsx(S,{flex:.5,label:"SI#"}),e.jsx(S,{flex:1.5,label:"Booking ID"}),e.jsx(S,{flex:2.5,label:"Package"}),e.jsx(S,{flex:2,label:"Customer"}),e.jsx(S,{flex:2.5,label:"Email"}),e.jsx(S,{flex:1.5,label:"Booking Date"}),e.jsx(S,{flex:1.5,label:"Amount"}),e.jsx(S,{flex:1.5,label:"Status"}),e.jsx(S,{flex:1.5,label:"Payment Status"}),e.jsx(S,{flex:2,label:"Action",textAlign:"center"})]}),e.jsx(i,{sx:{minHeight:400},children:A?e.jsx(u,{alignItems:"center",justifyContent:"center",sx:{py:10},children:e.jsx(Le,{size:32,thickness:5})}):se.length===0?e.jsx(u,{alignItems:"center",justifyContent:"center",sx:{py:10,opacity:.5},children:e.jsx(a,{fontWeight:600,children:"No bookings found"})}):se.map((t,n)=>e.jsx(Ke,{index:n+1,booking:t,isMobile:y,onUpdateStatus:ae,onView:o=>ze(o),statusColor:me(t.status)},t._id))})]})]}),e.jsx(Ye,{open:We,onClose:Pe,booking:Ae,onUpdateStatus:ae,getStatusColor:me}),e.jsxs(_e,{anchorEl:re,open:!!re,onClose:()=>O(null),PaperProps:{sx:{borderRadius:"16px",boxShadow:"0 8px 24px rgba(0,0,0,0.12)",border:"1px solid #e2e8f0",minWidth:220,mt:1}},children:[e.jsx(i,{sx:{px:2,py:1.5,borderBottom:"1px solid #f1f5f9"},children:e.jsx(a,{variant:"caption",fontWeight:700,color:"text.secondary",sx:{textTransform:"uppercase",letterSpacing:1},children:"Sort By"})}),[{value:"date_desc",label:"Date (Newest First)",icon:e.jsx(H,{fontSize:"small"})},{value:"date_asc",label:"Date (Oldest First)",icon:e.jsx(G,{fontSize:"small"})},{value:"price_high",label:"Amount (High to Low)",icon:e.jsx(H,{fontSize:"small"})},{value:"price_low",label:"Amount (Low to High)",icon:e.jsx(G,{fontSize:"small"})},{value:"name_asc",label:"Customer (A-Z)",icon:e.jsx(G,{fontSize:"small"})},{value:"name_desc",label:"Customer (Z-A)",icon:e.jsx(H,{fontSize:"small"})}].map(t=>e.jsxs(w,{selected:N===t.value,onClick:()=>{we(t.value),O(null)},sx:{py:1.5,px:2,gap:1.5,"&.Mui-selected":{bgcolor:m(d,.1),color:d,fontWeight:700,"&:hover":{bgcolor:m(d,.15)}}},children:[t.icon,e.jsx(a,{variant:"body2",children:t.label}),N===t.value&&e.jsx(K,{sx:{ml:"auto",fontSize:18}})]},t.value))]})]})},$=({label:s,value:r,color:l,icon:y})=>e.jsx(f,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(he,{elevation:0,sx:{p:3,borderRadius:"24px",border:"1px solid #e2e8f0",bgcolor:"#fff",display:"flex",alignItems:"center",gap:2.5,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-5px)",boxShadow:"0 12px 24px rgba(0,0,0,0.05)",borderColor:m(l,.3)}},children:[e.jsx(J,{sx:{bgcolor:m(l,.1),color:l,width:48,height:48,borderRadius:"14px"},children:y}),e.jsxs(i,{children:[e.jsx(a,{variant:"caption",fontWeight:700,color:"text.secondary",sx:{textTransform:"uppercase",letterSpacing:.5,fontSize:"0.65rem"},children:s}),e.jsx(a,{variant:"h5",fontWeight:900,sx:{color:l},children:r})]})]})}),S=({label:s,flex:r,textAlign:l="left"})=>e.jsx(a,{variant:"caption",fontWeight:800,color:"#64748b",sx:{flex:r,textAlign:l,fontSize:"0.7rem",textTransform:"uppercase"},children:s}),Ke=({index:s,booking:r,isMobile:l,onUpdateStatus:y,onView:F,statusColor:v})=>{var A,P;const p=String(r.status).toLowerCase()==="pending",h=Y(r);return l?e.jsxs(i,{sx:{p:2,borderBottom:"1px solid #f1f5f9",cursor:"pointer"},onClick:()=>F(r),children:[e.jsxs(u,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(J,{src:Q(h.thumbnail),variant:"rounded",sx:{width:50,height:50,border:`1px solid ${m(d,.2)}`}}),e.jsxs(i,{flex:1,children:[e.jsxs(u,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(a,{variant:"caption",fontWeight:800,color:d,children:["#",(A=r._id)==null?void 0:A.slice(-6)]}),e.jsx(z,{label:r.status,size:"small",sx:{height:18,fontSize:"0.6rem",fontWeight:800,bgcolor:m(v,.1),color:v}})]}),e.jsx(a,{variant:"subtitle2",fontWeight:800,noWrap:!0,sx:{maxWidth:"60vw"},children:h.name}),e.jsx(z,{label:h.packageType,size:"small",sx:{height:16,fontSize:"0.6rem",fontWeight:700}}),e.jsx(a,{variant:"caption",color:"text.secondary",children:r.fullName})]})]}),e.jsxs(u,{direction:"row",justifyContent:"space-between",mt:1.5,alignItems:"center",children:[e.jsxs(a,{variant:"body2",fontWeight:900,children:["₹",parseFloat(r.finalPrice||0).toLocaleString()]}),e.jsxs(u,{direction:"row",spacing:1,children:[e.jsx(L,{size:"small",sx:{border:"1px solid #e2e8f0",color:d},onClick:g=>{g.stopPropagation(),window.open(`tel:${r.contactNumber}`)},children:e.jsx(fe,{fontSize:"inherit"})}),e.jsx(L,{size:"small",sx:{border:"1px solid #e2e8f0",color:"#25d366"},onClick:g=>{g.stopPropagation(),window.open(`https://wa.me/${r.contactNumber}`)},children:e.jsx(ge,{fontSize:"inherit"})})]})]})]}):e.jsxs(i,{sx:{px:3,py:2,borderBottom:"1px solid #f1f5f9",display:"flex",alignItems:"center",gap:2,transition:"all 0.2s","&:hover":{bgcolor:m(d,.05),transform:"scale(1.002)",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",zIndex:1}},children:[e.jsx(a,{variant:"body2",sx:{flex:.5,fontWeight:600,color:"text.secondary"},children:s}),e.jsxs(a,{variant:"body2",sx:{flex:1.5,fontWeight:700,color:d},children:["#",(P=r._id)==null?void 0:P.slice(-6)]}),e.jsxs(i,{sx:{flex:2.5,display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(J,{src:Q(h.thumbnail),variant:"rounded",sx:{width:44,height:44,border:`1px solid ${m(d,.2)}`,bgcolor:"#f1f5f9"}}),e.jsxs(i,{children:[e.jsx(a,{variant:"body2",fontWeight:700,noWrap:!0,sx:{maxWidth:150},children:h.name}),e.jsxs(u,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(z,{label:h.packageType,size:"small",sx:{height:16,fontSize:"0.55rem",fontWeight:700}}),e.jsx(a,{variant:"caption",color:"text.secondary",children:h.category})]})]})]}),e.jsx(a,{variant:"body2",sx:{flex:2,fontWeight:700},children:r.fullName}),e.jsx(a,{variant:"body2",sx:{flex:2.5,color:"text.secondary",fontSize:"0.8rem"},children:r.emailAddress}),e.jsx(a,{variant:"body2",sx:{flex:1.5},children:new Date(r.bookingDate).toLocaleDateString()}),e.jsxs(a,{variant:"body2",sx:{flex:1.5,fontWeight:800,color:"#0f172a"},children:["₹",parseFloat(r.finalPrice||0).toLocaleString()]}),e.jsx(i,{sx:{flex:1.5},children:e.jsx(a,{variant:"caption",fontWeight:800,sx:{px:1,py:.5,borderRadius:"6px",color:v,bgcolor:m(v,.1)},children:r.status})}),e.jsx(i,{sx:{flex:1.5},children:e.jsx(a,{variant:"caption",fontWeight:700,color:r.paymentStatus==="Initiated"?"#f59e0b":"text.primary",children:r.paymentStatus||"Pending"})}),e.jsx(u,{direction:"row",spacing:1,sx:{flex:2},justifyContent:"center",children:p?e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Confirm Booking",children:e.jsx(L,{size:"small",color:"success",onClick:g=>y(r._id,"accepted",g),sx:{border:"1px solid",borderColor:"success.light",bgcolor:m("#22c55e",.05)},children:e.jsx(K,{fontSize:"small"})})}),e.jsx(E,{title:"Reject Booking",children:e.jsx(L,{size:"small",color:"error",onClick:g=>y(r._id,"rejected",g),sx:{border:"1px solid",borderColor:"error.light",bgcolor:m("#ef4444",.05)},children:e.jsx(ye,{fontSize:"small"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{onClick:g=>F(r,g),size:"small",variant:"outlined",sx:{minWidth:50,borderRadius:"6px",textTransform:"none",fontSize:"0.7rem"},children:"View"}),e.jsx(k,{size:"small",variant:"outlined",sx:{minWidth:70,borderRadius:"6px",textTransform:"none",fontSize:"0.7rem"},children:"Download"})]})})]})},W=({icon:s,label:r,value:l})=>e.jsxs(u,{direction:"row",spacing:1.5,alignItems:"flex-start",children:[e.jsx(i,{sx:{color:"text.secondary",mt:.3},children:s}),e.jsxs(i,{children:[e.jsx(a,{variant:"caption",display:"block",color:"text.secondary",fontWeight:500,lineHeight:1,children:r}),e.jsx(a,{variant:"body2",fontWeight:500,color:"text.primary",children:l||"N/A"})]})]}),Qe=s=>s?typeof s=="string"?s:Array.isArray(s)?s.map(r=>typeof r=="object"?r.label||r.time:r).join(", "):typeof s=="object"&&(s.label||s.time)||"N/A":"N/A",Ye=({open:s,onClose:r,booking:l,onUpdateStatus:y,getStatusColor:F})=>{if(!l)return null;const v=F(l.status),p=Y(l);return e.jsxs(Ne,{anchor:"right",open:s,onClose:r,PaperProps:{sx:{width:{xs:"100%",sm:500},borderRadius:"24px 0 0 24px",p:4}},children:[e.jsxs(u,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:4,children:[e.jsx(a,{variant:"h5",fontWeight:800,children:"Booking Details"}),e.jsx(L,{onClick:r,children:e.jsx(ye,{})})]}),e.jsxs(u,{spacing:4,children:[e.jsx(i,{sx:{p:3,borderRadius:"20px",bgcolor:m(v,.05),border:"1px solid",borderColor:m(v,.1)},children:e.jsxs(u,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(i,{children:[e.jsx(a,{variant:"caption",fontWeight:700,color:"text.secondary",sx:{textTransform:"uppercase"},children:"Current Status"}),e.jsx(a,{variant:"h6",fontWeight:800,color:v,sx:{textTransform:"capitalize"},children:l.status})]}),e.jsx(z,{label:l.bookingType||"Rental",sx:{fontWeight:700,bgcolor:"#fff"}})]})}),e.jsxs(i,{sx:{p:3,borderRadius:"24px",bgcolor:m(d,.03),border:"1px solid",borderColor:m(d,.1)},children:[e.jsx(Z,{label:"Package Details"}),e.jsxs(u,{direction:"row",spacing:3,mt:2,alignItems:"center",children:[e.jsx(i,{sx:{width:100,height:100,borderRadius:"16px",overflow:"hidden",border:`2px solid ${m(d,.2)}`,boxShadow:"0 8px 16px rgba(0,0,0,0.05)"},children:e.jsx("img",{src:Q(p.thumbnail),alt:p.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:h=>{h.target.src="https://via.placeholder.com/100?text=Package"}})}),e.jsxs(i,{flex:1,children:[e.jsx(a,{variant:"h6",fontWeight:800,color:d,children:p.name}),e.jsxs(f,{container:!0,spacing:1,mt:.5,children:[e.jsx(f,{item:!0,xs:6,children:e.jsx(W,{icon:e.jsx(pe,{fontSize:"small"}),label:"Type",value:p.packageType})}),e.jsx(f,{item:!0,xs:6,children:e.jsx(W,{icon:e.jsx(pe,{fontSize:"small"}),label:"Category",value:p.category})}),p.sizes&&p.sizes.length>0&&e.jsxs(f,{item:!0,xs:12,children:[e.jsx(a,{variant:"caption",color:"text.secondary",display:"block",children:"Available Sizes"}),e.jsx(u,{direction:"row",spacing:.5,mt:.5,flexWrap:"wrap",children:p.sizes.map((h,A)=>e.jsx(z,{label:h,size:"small",sx:{height:20,fontSize:"0.65rem"}},A))})]}),p.colors&&p.colors.length>0&&e.jsxs(f,{item:!0,xs:12,children:[e.jsx(a,{variant:"caption",color:"text.secondary",display:"block",children:"Available Colors"}),e.jsx(u,{direction:"row",spacing:.5,mt:.5,flexWrap:"wrap",children:p.colors.map((h,A)=>e.jsx(z,{label:h,size:"small",sx:{height:20,fontSize:"0.65rem"}},A))})]})]})]})]})]}),e.jsx(U,{sx:{borderStyle:"dotted"}}),e.jsxs(i,{children:[e.jsx(Z,{label:"Customer Profiles"}),e.jsxs(u,{spacing:2,sx:{mt:2},children:[e.jsx(W,{icon:e.jsx(Me,{}),label:"Full Name",value:l.fullName}),e.jsx(W,{icon:e.jsx($e,{}),label:"Email Address",value:l.emailAddress}),e.jsx(W,{icon:e.jsx(fe,{}),label:"Phone Number",value:l.contactNumber})]})]}),e.jsx(U,{sx:{borderStyle:"dotted"}}),e.jsxs(i,{children:[e.jsx(Z,{label:"Booking Details"}),e.jsxs(f,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(f,{item:!0,xs:6,children:e.jsx(W,{icon:e.jsx(Ee,{}),label:"Event Date",value:new Date(l.bookingDate).toLocaleDateString()})}),e.jsx(f,{item:!0,xs:6,children:e.jsx(W,{icon:e.jsx(be,{}),label:"Time Slot",value:Qe(l.timeSlot)})}),e.jsx(f,{item:!0,xs:6,children:e.jsx(W,{icon:e.jsx(je,{}),label:"Package Type",value:l.status==="confirmed"?"Reserved":"Inquiry"})})]})]}),e.jsx(U,{sx:{borderStyle:"dotted"}}),e.jsx(i,{sx:{p:3,borderRadius:"24px",background:ve,color:"#fff",boxShadow:"0 12px 24px rgba(0,0,0,0.2)"},children:e.jsxs(u,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(i,{children:[e.jsx(a,{variant:"caption",sx:{opacity:.6,fontSize:"0.7rem",textTransform:"uppercase",letterSpacing:1},children:"Grand Total"}),e.jsxs(a,{variant:"h4",fontWeight:900,color:d,children:["₹",parseFloat(l.finalPrice||0).toLocaleString()]})]}),e.jsx(z,{label:l.paymentStatus||"Initiated",sx:{fontWeight:800,bgcolor:l.paymentStatus==="Completed"?"success.main":m(d,.2),color:l.paymentStatus==="Completed"?"#fff":d,borderRadius:"10px"}})]})}),e.jsxs(u,{direction:"row",spacing:2,children:[String(l.status).toLowerCase()==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{fullWidth:!0,variant:"outlined",color:"error",onClick:h=>{y(l._id,"rejected",h),r()},sx:{borderRadius:"12px",height:48},children:"Reject"}),e.jsx(k,{fullWidth:!0,variant:"contained",color:"success",onClick:h=>{y(l._id,"accepted",h),r()},sx:{borderRadius:"12px",height:48},children:"Confirm"})]}),e.jsx(k,{fullWidth:!0,variant:"soft",startIcon:e.jsx(ge,{}),sx:{borderRadius:"12px",height:48,bgcolor:m("#25d366",.1),color:"#25d366"},onClick:()=>window.open(`https://wa.me/${l.contactNumber}`,"_blank"),children:"WhatsApp"})]})]})]})},Z=({label:s})=>e.jsx(a,{variant:"caption",fontWeight:800,color:"text.secondary",sx:{textTransform:"uppercase",letterSpacing:1},children:s});export{xt as B};
