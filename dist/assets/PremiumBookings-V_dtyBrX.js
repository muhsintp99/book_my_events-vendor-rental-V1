import{u as we,k as Ae,r as m,h as ce,j as e,B as o,T as n,S as c,G as T,a4 as pe,am as ue,q as E,a as Ie,g as N,ay as De,aB as Te,a1 as g,F as We,I as Pe,ab as Le,U as M,t as Fe,Q as Be,o as V,a3 as z,b as U,bi as ze,ar as de,p as _e,au as Re,av as Oe,aG as Ee,D as Me,bh as Ne}from"./index-s0QLBFc1.js";import{E as $e}from"./EventAvailable-DGOLxNbh.js";import{A as K}from"./AccessTime-BKag1b6a.js";import{T as ke,S as qe}from"./TrendingUp-Dv2cdsPP.js";import{S as Ge}from"./Search-DJBru7CE.js";import{F as He}from"./FilterList-DIznf5Cq.js";import{C as Ke}from"./Clear-DxlRxIiS.js";import{T as Ve,a as Ye}from"./Tabs-Dmnw9mOw.js";import{A as X,a as xe}from"./ArrowUpward-C_YTAMrg.js";import{C as he}from"./Cancel-CUJ995aD.js";const B="https://api.bookmyevent.ae",v="#D4AF37",fe="#0f172a",ot=({moduleType:d,moduleUrlName:i,moduleLabel:t,primaryColor:y="#3b82f6",moduleIcon:W,initialTab:I="All",hideTabs:S=!1,getDataFn:w=j=>({name:j.packageName||j.moduleName||t,thumbnail:j.thumbnail||"",category:j.categoryName||j.moduleType||t,id:j.packageId||j._id||"N/A"})})=>{const j=we(),D=Ae(j.breakpoints.down("sm")),[b,p]=m.useState(null),[x,_]=m.useState([]),[P,Y]=m.useState(!0),L=m.useMemo(()=>[{label:"All",value:0,filterFn:()=>!0,key:"All"},{label:"Scheduled",value:1,filterFn:r=>r==="scheduled",key:"Scheduled",hidden:i!=="transport"},{label:"Pending",value:2,filterFn:r=>r==="pending",key:"Pending"},{label:"Confirmed",value:3,filterFn:(r,a,l)=>["accepted","confirmed","approve","approved"].includes(r)&&new Date(l.bookingDate)>=new Date().setHours(0,0,0,0),key:"Confirmed"},{label:"Ongoing",value:4,filterFn:r=>r==="ongoing",key:"Ongoing",hidden:i!=="transport"},{label:"Completed",value:5,filterFn:(r,a,l)=>r==="completed"||r==="completed bookings"||r==="done"||["accepted","confirmed"].includes(r)&&new Date(l.bookingDate)<new Date().setHours(0,0,0,0),key:"Completed"},{label:"Cancelled",value:6,filterFn:r=>["cancelled","rejected"].includes(r),key:"Cancelled"},{label:"Payment Failed",value:7,filterFn:(r,a)=>a==="failed"||a==="Payment Failed"||a==="payment failed",key:"Payment Failed"}].filter(r=>!r.hidden).map((r,a)=>({...r,value:a})),[i]),me=m.useMemo(()=>{const s=L.findIndex(r=>r.key.toLowerCase()===I.toLowerCase());return s!==-1?s:0},[I,L]),[R,je]=m.useState(me),[$,te]=m.useState(""),[Q,ge]=m.useState("newest"),[ve,ye]=m.useState(null),[be,se]=m.useState(!1),[O,Ce]=m.useState(!1),[re,J]=m.useState(null),[u,F]=m.useState({dateFrom:"",dateTo:"",paymentStatus:"all",minAmount:"",maxAmount:""});m.useEffect(()=>{const r=(()=>{try{const a=localStorage.getItem("user");if(!a)return null;const l=JSON.parse(a);return(l==null?void 0:l._id)||null}catch{return null}})();r?(p(r),Se(r)):Y(!1)},[d]);const Se=async s=>{var r;Y(!0);try{const f=(((r=(await ce.get(`${B}/api/bookings/provider/${s}`)).data)==null?void 0:r.data)||[]).filter(A=>{const q=String(A.moduleType||"").toLowerCase();return(Array.isArray(d)?d.map(G=>G.toLowerCase()):[d.toLowerCase()]).includes(q)});_(f)}catch(a){console.error(`Error fetching ${t} bookings:`,a)}finally{Y(!1)}},ae=m.useMemo(()=>{let s=[...x];const r=L[R];if(r&&(r.label!=="All"||S)&&(s=s.filter(a=>{const l=String(a.status||"").toLowerCase(),f=String(a.paymentStatus||"").toLowerCase();return r.filterFn(l,f,a)})),$.trim()){const a=$.toLowerCase();s=s.filter(l=>l._id&&l._id.toLowerCase().includes(a)||l.fullName&&l.fullName.toLowerCase().includes(a)||l.contactNumber&&String(l.contactNumber).includes(a)||l.emailAddress&&l.emailAddress.toLowerCase().includes(a))}return u.dateFrom&&(s=s.filter(a=>new Date(a.bookingDate)>=new Date(u.dateFrom))),u.dateTo&&(s=s.filter(a=>new Date(a.bookingDate)<=new Date(u.dateTo))),u.paymentStatus!=="all"&&(s=s.filter(a=>String(a.paymentStatus||"").toLowerCase()===u.paymentStatus.toLowerCase())),u.minAmount&&(s=s.filter(a=>parseFloat(a.finalPrice||0)>=parseFloat(u.minAmount))),u.maxAmount&&(s=s.filter(a=>parseFloat(a.finalPrice||0)<=parseFloat(u.maxAmount))),s.sort((a,l)=>{const f=new Date(a.bookingDate||0),A=new Date(l.bookingDate||0),q=parseFloat(a.finalPrice||0),Z=parseFloat(l.finalPrice||0),G=(a.fullName||"").toLowerCase(),oe=(l.fullName||"").toLowerCase();switch(Q){case"newest":return l._id.localeCompare(a._id);case"date_asc":return f-A||l._id.localeCompare(a._id);case"date_desc":return A-f||l._id.localeCompare(a._id);case"price_high":return Z-q||l._id.localeCompare(a._id);case"price_low":return q-Z||l._id.localeCompare(a._id);case"name_asc":return G.localeCompare(oe)||l._id.localeCompare(a._id);case"name_desc":return oe.localeCompare(G)||l._id.localeCompare(a._id);default:return l._id.localeCompare(a._id)}}),s},[x,R,$,Q,L,S,u]),k=m.useMemo(()=>{const s=x.length,r=x.filter(f=>String(f.status).toLowerCase()==="pending").length,a=x.filter(f=>["accepted","confirmed","approved"].includes(String(f.status).toLowerCase())).length,l=x.reduce((f,A)=>f+parseFloat(A.finalPrice||0),0);return{total:s,pending:r,confirmed:a,revenue:l}},[x]),ne=async(s,r,a)=>{a&&a.stopPropagation();try{let l="";if(r==="accepted"?l=`${B}/api/bookings/${s}/accept`:r==="rejected"&&(l=`${B}/api/bookings/${s}/reject`),!l)return;await ce.patch(l),_(f=>f.map(A=>A._id===s?{...A,status:r}:A)),alert(`Booking ${r==="accepted"?"Confirmed":"Rejected"}`)}catch(l){console.error("Status update error:",l),alert("Failed to update status")}},le=s=>{const r=String(s||"").toLowerCase();return["accepted","confirmed","approve","approved"].includes(r)?"#22c55e":r==="pending"?"#f59e0b":["cancelled","rejected"].includes(r)?"#ef4444":r==="completed"?"#3b82f6":"#64748b"},ie=s=>{if(!s)return null;if(s.startsWith("http"))return s;const r=s.toLowerCase();if(r.startsWith("/uploads/"))return`${B}${s}`;if(r.startsWith("uploads/"))return`${B}/${s}`;const l={transport:"vehicles",vehicle:"vehicles",cake:"cakes",photography:"photography",catering:"catering",makeup:"makeup",venue:"venues",venues:"venues",package:"packages"}[String(i).toLowerCase()]||i,f=s.split("/").pop();return`${B}/uploads/${l}/${f}`};return e.jsxs(o,{sx:{minHeight:"100vh",bgcolor:"#f8fafc",pb:6},children:[e.jsxs(o,{sx:{px:4,py:2,display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#fff",borderBottom:"1px solid #e2e8f0"},children:[e.jsxs(n,{variant:"h6",fontWeight:700,color:"text.primary",children:[L[R].label," ",t]}),e.jsxs(c,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(n,{variant:"caption",color:"text.secondary",children:"Bookings"}),e.jsx(n,{variant:"caption",color:"text.secondary",sx:{mb:.5},children:">"}),e.jsx(n,{variant:"caption",fontWeight:600,color:"#6366f1",children:L[R].label})]})]}),e.jsxs(o,{sx:{p:{xs:2,md:4}},children:[!S&&e.jsxs(T,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(H,{label:"Total Bookings",value:k.total,color:v,icon:e.jsx($e,{})}),e.jsx(H,{label:"Pending Orders",value:k.pending,color:"#f59e0b",icon:e.jsx(K,{})}),e.jsx(H,{label:"Confirmed",value:k.confirmed,color:"#22c55e",icon:e.jsx(pe,{})}),e.jsx(H,{label:"Total Revenue",value:`₹${k.revenue.toLocaleString()}`,color:fe,icon:e.jsx(ke,{})})]}),e.jsxs(ue,{elevation:0,sx:{borderRadius:"16px",border:"1px solid #e2e8f0",overflow:"hidden",bgcolor:"#fff"},children:[e.jsxs(o,{sx:{p:3,borderBottom:"1px solid #f1f5f9"},children:[e.jsxs(c,{direction:{xs:"column",md:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"stretch",md:"center"},children:[e.jsxs(n,{variant:"h6",fontWeight:800,sx:{color:"#1e293b"},children:[t," Bookings"]}),e.jsxs(c,{direction:{xs:"column",sm:"row"},spacing:2,flex:1,maxWidth:{md:700},children:[e.jsx(E,{placeholder:"Search by ID, Name...",size:"small",fullWidth:!0,value:$,onChange:s=>te(s.target.value),InputProps:{startAdornment:e.jsx(Ie,{position:"start",children:e.jsx(Ge,{fontSize:"small"})}),sx:{borderRadius:"12px",bgcolor:"#f8fafc"}}}),e.jsx(N,{variant:"outlined",size:"small",onClick:s=>J(s.currentTarget),startIcon:e.jsx(qe,{}),sx:{borderRadius:"12px",minWidth:100,borderColor:"#e2e8f0",color:"#64748b"},children:"Sort"}),e.jsx(De,{badgeContent:Object.values(u).filter(s=>s&&s!=="all").length,color:"error",children:e.jsx(N,{variant:O?"contained":"outlined",size:"small",onClick:()=>Ce(!O),startIcon:e.jsx(He,{}),sx:{borderRadius:"12px",minWidth:100,borderColor:"#e2e8f0",color:O?"#fff":"#64748b",bgcolor:O?v:"transparent"},children:"Filters"})})]})]}),e.jsx(Te,{in:O,children:e.jsxs(o,{sx:{mt:3,p:3,borderRadius:"16px",bgcolor:g(v,.03),border:`1px solid ${g(v,.1)}`},children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(n,{variant:"subtitle2",fontWeight:700,color:v,children:"Advanced Filters"}),e.jsx(N,{size:"small",startIcon:e.jsx(Ke,{}),onClick:()=>{F({dateFrom:"",dateTo:"",paymentStatus:"all",minAmount:"",maxAmount:""}),te("")},sx:{color:"#64748b"},children:"Clear All"})]}),e.jsxs(T,{container:!0,spacing:2,children:[e.jsx(T,{item:!0,xs:12,sm:6,md:3,children:e.jsx(E,{fullWidth:!0,size:"small",label:"From Date",type:"date",value:u.dateFrom,onChange:s=>F(r=>({...r,dateFrom:s.target.value})),InputLabelProps:{shrink:!0}})}),e.jsx(T,{item:!0,xs:12,sm:6,md:3,children:e.jsx(E,{fullWidth:!0,size:"small",label:"To Date",type:"date",value:u.dateTo,onChange:s=>F(r=>({...r,dateTo:s.target.value})),InputLabelProps:{shrink:!0}})}),e.jsx(T,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(We,{fullWidth:!0,size:"small",children:[e.jsx(Pe,{children:"Payment"}),e.jsxs(Le,{value:u.paymentStatus,label:"Payment",onChange:s=>F(r=>({...r,paymentStatus:s.target.value})),children:[e.jsx(M,{value:"all",children:"All"}),e.jsx(M,{value:"initiated",children:"Initiated"}),e.jsx(M,{value:"completed",children:"Completed"}),e.jsx(M,{value:"failed",children:"Failed"})]})]})}),e.jsx(T,{item:!0,xs:12,sm:6,md:2,children:e.jsx(E,{fullWidth:!0,size:"small",label:"Min ₹",type:"number",value:u.minAmount,onChange:s=>F(r=>({...r,minAmount:s.target.value}))})}),e.jsx(T,{item:!0,xs:12,sm:6,md:2,children:e.jsx(E,{fullWidth:!0,size:"small",label:"Max ₹",type:"number",value:u.maxAmount,onChange:s=>F(r=>({...r,maxAmount:s.target.value}))})})]})]})})]}),!S&&e.jsx(o,{sx:{px:3,borderBottom:"1px solid #f1f5f9"},children:e.jsx(Ve,{value:R,onChange:(s,r)=>je(r),sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:700,minWidth:100},"& .Mui-selected":{color:y+" !important"},"& .MuiTabs-indicator":{bgcolor:y}},children:L.map(s=>e.jsx(Ye,{label:s.label},s.key))})}),!D&&e.jsxs(o,{sx:{px:3,py:2,bgcolor:"#f8fafc",borderBottom:"1px solid #f1f5f9",display:"flex",gap:2,alignItems:"center"},children:[e.jsx(C,{flex:.5,label:"SI#"}),e.jsx(C,{flex:1.5,label:"Booking ID"}),e.jsx(C,{flex:2.5,label:t}),e.jsx(C,{flex:2,label:"Customer"}),e.jsx(C,{flex:2.5,label:"Email"}),e.jsx(C,{flex:1.5,label:"Booking Date"}),e.jsx(C,{flex:1.2,label:"Paid"}),e.jsx(C,{flex:1.3,label:"Total"}),e.jsx(C,{flex:1.5,label:"Status"}),e.jsx(C,{flex:1.2,label:"Payment"}),e.jsx(C,{flex:1.8,label:"Action",textAlign:"center"})]}),e.jsx(o,{sx:{minHeight:400},children:P?e.jsx(c,{alignItems:"center",justifyContent:"center",sx:{py:10},children:e.jsx(Fe,{size:32})}):ae.length===0?e.jsx(c,{alignItems:"center",justifyContent:"center",sx:{py:10,opacity:.5},children:e.jsx(n,{fontWeight:600,children:"No bookings found"})}):ae.map((s,r)=>e.jsx(Qe,{index:r+1,booking:s,isMobile:D,onUpdateStatus:ne,onView:a=>{ye(a),se(!0)},statusColor:le(s.status),getDataFn:w,getImageUrl:ie,ModuleIcon:W,moduleLabel:t},s._id))})]})]}),e.jsx(Ze,{open:be,onClose:()=>se(!1),booking:ve,onUpdateStatus:ne,getStatusColor:le,getDataFn:w,getImageUrl:ie,moduleLabel:t,moduleUrlName:i,primaryColor:y}),e.jsxs(Be,{anchorEl:re,open:!!re,onClose:()=>J(null),children:[e.jsx(o,{sx:{px:2,py:1},children:e.jsx(n,{variant:"caption",fontWeight:700,children:"SORT BY"})}),[{v:"newest",l:"Latest First",i:e.jsx(X,{fontSize:"small"})},{v:"date_desc",l:"Event Date (New)",i:e.jsx(X,{fontSize:"small"})},{v:"date_asc",l:"Event Date (Old)",i:e.jsx(xe,{fontSize:"small"})},{v:"price_high",l:"Price (High)",i:e.jsx(X,{fontSize:"small"})},{v:"price_low",l:"Price (Low)",i:e.jsx(xe,{fontSize:"small"})}].map(s=>e.jsxs(M,{onClick:()=>{ge(s.v),J(null)},selected:Q===s.v,sx:{gap:1.5},children:[s.i," ",e.jsx(n,{variant:"body2",children:s.l})]},s.v))]})]})},ee=(d,i)=>{const t=["Cake","Boutique","Boutiques","Ornament","Ornaments","boutique","ornament"],y=["completed","paid","success"].includes(String(d.paymentStatus||"").toLowerCase());return t.includes(i)&&y?d.finalPrice||0:d.advanceAmount||0},H=({label:d,value:i,color:t,icon:y})=>e.jsx(T,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(ue,{elevation:0,sx:{p:3,borderRadius:"24px",border:"1px solid #e2e8f0",display:"flex",alignItems:"center",gap:2.5,transition:"0.3s","&:hover":{transform:"translateY(-5px)",boxShadow:"0 12px 24px rgba(0,0,0,0.05)"}},children:[e.jsx(V,{sx:{bgcolor:g(t,.1),color:t,width:48,height:48,borderRadius:"14px"},children:y}),e.jsxs(o,{children:[e.jsx(n,{variant:"caption",fontWeight:700,color:"text.secondary",sx:{textTransform:"uppercase",fontSize:"0.65rem"},children:d}),e.jsx(n,{variant:"h5",fontWeight:900,sx:{color:t},children:i})]})]})}),C=({label:d,flex:i,textAlign:t="left"})=>e.jsx(n,{variant:"caption",fontWeight:800,color:"#64748b",sx:{flex:i,textAlign:t,fontSize:"0.7rem",textTransform:"uppercase"},children:d}),Qe=({index:d,booking:i,isMobile:t,onUpdateStatus:y,onView:W,statusColor:I,getDataFn:S,getImageUrl:w,ModuleIcon:j,moduleLabel:D})=>{var x,_;const b=String(i.status).toLowerCase()==="pending",p=S(i);return t?e.jsx(o,{sx:{p:2,borderBottom:"1px solid #f1f5f9"},onClick:()=>W(i),children:e.jsxs(c,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(V,{src:w(p.thumbnail),variant:"rounded",sx:{width:50,height:50,border:`1px solid ${g(v,.2)}`}}),e.jsxs(o,{flex:1,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",children:[e.jsxs(n,{variant:"caption",fontWeight:800,color:v,children:["#",(x=i._id)==null?void 0:x.slice(-6)]}),e.jsx(z,{label:i.status,size:"small",sx:{height:18,fontSize:"0.6rem",bgcolor:g(I,.1),color:I}})]}),e.jsx(n,{variant:"subtitle2",fontWeight:800,noWrap:!0,children:p.name}),e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(n,{variant:"caption",color:"text.secondary",children:i.fullName}),e.jsxs(o,{sx:{textAlign:"right"},children:[e.jsxs(n,{variant:"caption",sx:{display:"block",fontWeight:600,color:"#10b981"},children:["Paid: ₹",ee(i,D).toLocaleString()]}),e.jsxs(n,{variant:"caption",sx:{display:"block",fontWeight:800},children:["Total: ₹",(i.finalPrice||0).toLocaleString()]})]})]})]})]})}):e.jsxs(o,{onClick:()=>W(i),sx:{px:3,py:2,borderBottom:"1px solid #f1f5f9",display:"flex",alignItems:"center",gap:2,cursor:"pointer","&:hover":{bgcolor:g(v,.05)}},children:[e.jsx(n,{variant:"body2",sx:{flex:.5,fontWeight:600},children:d}),e.jsxs(n,{variant:"body2",sx:{flex:1.5,fontWeight:700,color:v},children:["#",(_=i._id)==null?void 0:_.slice(-6)]}),e.jsxs(o,{sx:{flex:2.5,display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(V,{src:w(p.thumbnail),variant:"rounded",sx:{width:44,height:44,border:`1px solid ${g(v,.2)}`},children:j&&e.jsx(j,{sx:{fontSize:20}})}),e.jsxs(o,{children:[e.jsx(n,{variant:"body2",fontWeight:700,noWrap:!0,sx:{maxWidth:150},children:p.name}),e.jsx(n,{variant:"caption",color:"text.secondary",children:p.category})]})]}),e.jsx(n,{variant:"body2",sx:{flex:2,fontWeight:700},children:i.fullName}),e.jsx(n,{variant:"body2",sx:{flex:2.5,color:"text.secondary",fontSize:"0.8rem"},noWrap:!0,children:i.emailAddress}),e.jsx(n,{variant:"body2",sx:{flex:1.5},children:new Date(i.bookingDate).toLocaleDateString()}),e.jsxs(n,{variant:"body2",sx:{flex:1.2,fontWeight:700,color:"#10b981"},children:["₹",ee(i,D).toLocaleString()]}),e.jsxs(n,{variant:"body2",sx:{flex:1.3,fontWeight:800},children:["₹",(i.finalPrice||0).toLocaleString()]}),e.jsx(o,{sx:{flex:1.5},children:e.jsx(z,{label:i.status,size:"small",sx:{fontWeight:800,bgcolor:g(I,.1),color:I}})}),e.jsx(o,{sx:{flex:1.2},children:e.jsx(n,{variant:"caption",fontWeight:700,sx:{textTransform:"capitalize"},children:i.paymentStatus||"Pending"})}),e.jsx(c,{direction:"row",spacing:1,sx:{flex:1.8},justifyContent:"center",children:b?e.jsxs(e.Fragment,{children:[e.jsx(U,{size:"small",color:"success",onClick:P=>y(i._id,"accepted",P),children:e.jsx(pe,{fontSize:"small"})}),e.jsx(U,{size:"small",color:"error",onClick:P=>y(i._id,"rejected",P),children:e.jsx(he,{fontSize:"small"})})]}):e.jsx(N,{onClick:P=>W(i,P),size:"small",variant:"outlined",children:"View"})})]})},Je=d=>{if(!d)return null;const i=t=>typeof t=="string"?t:typeof t=="object"&&t!==null&&(t.time||t.label)||"N/A";if(Array.isArray(d)){const t=d.map(i).filter(Boolean);return t.length>0?t.join(", "):"N/A"}return i(d)},Ze=({open:d,onClose:i,booking:t,getStatusColor:y,getDataFn:W,getImageUrl:I,moduleLabel:S,moduleUrlName:w,primaryColor:j})=>{if(!t)return null;const D=y(t.status),b=W(t);return e.jsxs(ze,{anchor:"right",open:d,onClose:i,PaperProps:{sx:{width:{xs:"100%",sm:500},borderRadius:"24px 0 0 24px",p:4}},children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:4,children:[e.jsx(n,{variant:"h5",fontWeight:800,children:"Booking Details"}),e.jsx(U,{onClick:i,children:e.jsx(he,{})})]}),e.jsxs(c,{spacing:4,children:[e.jsx(o,{sx:{p:3,borderRadius:"20px",bgcolor:g(D,.05),border:"1px solid",borderColor:g(D,.1)},children:e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(o,{children:[e.jsx(n,{variant:"caption",fontWeight:700,color:"text.secondary",sx:{textTransform:"uppercase"},children:"Current Status"}),e.jsx(n,{variant:"h6",fontWeight:800,color:D,sx:{textTransform:"capitalize"},children:t.status})]}),e.jsx(z,{label:t.bookingType||t.packageType||t.moduleType||S,sx:{fontWeight:700,bgcolor:"#fff",textTransform:"capitalize"}})]})}),e.jsxs(o,{sx:{p:3,borderRadius:"24px",bgcolor:g(v,.03),border:"1px solid",borderColor:g(v,.1)},children:[e.jsx(n,{variant:"caption",fontWeight:800,children:"PACKAGE INFO"}),e.jsxs(c,{direction:"row",spacing:3,mt:2,alignItems:"center",children:[e.jsx(V,{src:I(b.thumbnail),variant:"rounded",sx:{width:80,height:80,borderRadius:"16px"}}),e.jsxs(o,{flex:1,children:[e.jsx(n,{variant:"h6",fontWeight:800,children:b.name}),e.jsx(n,{variant:"body2",color:"text.secondary",children:b.category})]})]}),b.sizes&&b.sizes.length>0&&e.jsxs(o,{mt:2,children:[e.jsx(n,{variant:"caption",color:"text.secondary",fontWeight:700,children:"AVAILABLE SIZES"}),e.jsx(c,{direction:"row",spacing:.5,mt:.5,flexWrap:"wrap",children:b.sizes.map((p,x)=>e.jsx(z,{label:p,size:"small",sx:{height:20,fontSize:"0.65rem"}},x))})]}),b.colors&&b.colors.length>0&&e.jsxs(o,{mt:2,children:[e.jsx(n,{variant:"caption",color:"text.secondary",fontWeight:700,children:"AVAILABLE COLORS"}),e.jsx(c,{direction:"row",spacing:.5,mt:.5,flexWrap:"wrap",children:b.colors.map((p,x)=>e.jsx(z,{label:p,size:"small",sx:{height:20,fontSize:"0.65rem"}},x))})]})]}),(t.transportDetails||t.deliveryType||t.address||t.location)&&e.jsxs(o,{sx:{p:3,borderRadius:"24px",bgcolor:g(j,.03),border:"1px solid",borderColor:g(j,.1)},children:[e.jsx(n,{variant:"caption",fontWeight:800,color:"text.secondary",sx:{textTransform:"uppercase"},children:w==="transport"?"TRIP & LOCATION DETAILS":"DELIVERY & LOCATION DETAILS"}),e.jsxs(c,{spacing:2,sx:{mt:2},children:[w==="transport"&&t.transportDetails&&e.jsxs(e.Fragment,{children:[t.transportDetails.tripType&&e.jsx(h,{label:"Trip Type",value:t.transportDetails.tripType}),t.transportDetails.hours>0&&e.jsx(h,{label:"Duration (Hours)",value:t.transportDetails.hours}),t.transportDetails.days>0&&e.jsx(h,{label:"Duration (Days)",value:t.transportDetails.days}),t.transportDetails.distanceKm>0&&e.jsx(h,{label:"Distance (KM)",value:t.transportDetails.distanceKm}),t.transportDetails.decorationIncluded&&e.jsx(h,{label:"Decoration",value:`Included (+₹${t.transportDetails.decorationPrice||0})`})]}),t.deliveryType&&e.jsx(h,{label:"Delivery Mode",value:t.deliveryType}),t.shippingPrice>0&&e.jsx(h,{label:"Shipping Price",value:`₹${t.shippingPrice}`}),(()=>{const p=t.location&&t.location!=="N/A"?t.location:t.address&&t.address!=="N/A"?t.address:null;return p?e.jsx(h,{icon:e.jsx(de,{sx:{fontSize:18}}),label:w==="transport"?"Pickup Location":"Delivery Address",value:p}):e.jsx(h,{icon:e.jsx(de,{sx:{fontSize:18}}),label:w==="transport"?"Pickup Location":"Delivery Address",value:"N/A"})})(),t.pincode&&e.jsx(h,{label:"Pincode",value:t.pincode})]})]}),e.jsxs(o,{children:[e.jsx(n,{variant:"caption",fontWeight:800,color:"text.secondary",sx:{textTransform:"uppercase"},children:"Customer Info"}),e.jsxs(c,{spacing:2,sx:{mt:2},children:[e.jsx(h,{icon:e.jsx(_e,{}),label:"Full Name",value:t.fullName}),e.jsx(h,{icon:e.jsx(Re,{}),label:"Email",value:t.emailAddress}),e.jsx(h,{icon:e.jsx(Oe,{}),label:"Phone",value:t.contactNumber}),e.jsx(h,{icon:e.jsx(Ee,{}),label:"Event Date",value:new Date(t.bookingDate).toLocaleDateString()}),(()=>{const p=t.time||t.deliveryTime,x=t.timeSlot?Je(t.timeSlot):null;return p?e.jsxs(e.Fragment,{children:[e.jsx(h,{icon:e.jsx(K,{}),label:"Scheduled Time",value:p}),x&&x!==p&&e.jsx(h,{icon:e.jsx(K,{}),label:"Time Slot",value:x})]}):x?e.jsx(h,{icon:e.jsx(K,{}),label:"Time Slot",value:x}):null})()]})]}),e.jsxs(o,{sx:{p:3,borderRadius:"24px",background:fe,color:"#fff"},children:[e.jsx(n,{variant:"caption",sx:{opacity:.7,fontWeight:700,textTransform:"uppercase",letterSpacing:1},children:"Payment Breakdown"}),e.jsxs(c,{spacing:2,mt:2,children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(n,{variant:"body2",color:"rgba(255,255,255,0.7)",children:"Paid Amount"}),e.jsxs(n,{variant:"body1",sx:{fontWeight:700,color:"#10b981"},children:["₹",ee(t,S).toLocaleString()]})]}),e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(n,{variant:"body2",color:"rgba(255,255,255,0.7)",children:"Remaining Amount"}),e.jsxs(n,{variant:"subtitle1",fontWeight:700,sx:{color:"#f59e0b"},children:["₹",(["Cake","Boutique","Boutiques","Ornament","Ornaments"].includes(S)&&["completed","paid","success"].includes(String(t.paymentStatus||"").toLowerCase())?0:Math.max(0,(t.finalPrice||0)-(t.advanceAmount||0))).toLocaleString()]})]}),e.jsx(Me,{sx:{borderColor:"rgba(255,255,255,0.1)"}}),e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(o,{children:[e.jsx(n,{variant:"caption",sx:{opacity:.7},children:"GRAND TOTAL"}),e.jsxs(n,{variant:"h5",fontWeight:900,color:v,children:["₹",(t.finalPrice||0).toLocaleString()]})]}),e.jsx(z,{label:t.paymentStatus||"Pending",color:"primary",sx:{fontWeight:800,textTransform:"capitalize"}})]})]})]}),e.jsx(c,{direction:"row",spacing:2,children:e.jsx(N,{fullWidth:!0,variant:"soft",startIcon:e.jsx(Ne,{}),sx:{bgcolor:g("#25d366",.1),color:"#25d366"},onClick:()=>window.open(`https://wa.me/${t.contactNumber}`,"_blank"),children:"Chat"})})]})]})},h=({icon:d,label:i,value:t})=>e.jsxs(c,{direction:"row",spacing:1.5,alignItems:"flex-start",children:[e.jsx(o,{sx:{color:"text.secondary",mt:.3},children:d}),e.jsxs(o,{children:[e.jsx(n,{variant:"caption",color:"text.secondary",children:i}),e.jsx(n,{variant:"body2",fontWeight:600,children:t||"N/A"})]})]});export{ot as P};
