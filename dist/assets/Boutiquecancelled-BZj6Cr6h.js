import{r as i,j as t,B as c,T as n,t as k,a8 as A,S as f,ae as w,D as v,g as j,h as E}from"./index-CFKf5kR9.js";const b=()=>{try{const s=localStorage.getItem("user");if(!s)return null;const o=JSON.parse(s);return(o==null?void 0:o._id)||null}catch(s){return console.error("Error parsing user:",s),null}},P=()=>{const[s,o]=i.useState(null),[l,p]=i.useState([]),[m,d]=i.useState(!0),a=b(),y=e=>e?typeof e=="string"?e:Array.isArray(e)?e.map(r=>typeof r=="object"?r.label||r.time:r).join(", "):typeof e=="object"&&(e.label||e.time)||"N/A":"N/A",N=e=>{if(!e)return"N/A";const r=new Date(e);return isNaN(r.getTime())?"N/A":r.toDateString()},B=e=>Number(e)||0;i.useEffect(()=>{if(!a)return;(async()=>{var r;try{d(!0);const S=(((r=(await E.get(`https://api.bookmyevent.ae/api/bookings/provider/${a}`)).data)==null?void 0:r.data)||[]).filter(x=>{const h=String(x.status||"").toLowerCase(),g=String(x.moduleType||"").toLowerCase();return(h==="rejected"||h==="cancelled")&&(g==="boutique"||g==="boutique artist")});p(S)}catch(u){console.error("Failed to fetch canceled bookings",u)}finally{d(!1)}})()},[a]);const C=e=>{o(r=>r===e?null:e)};return t.jsxs(c,{p:2,children:[t.jsx(n,{variant:"h4",gutterBottom:!0,fontWeight:600,children:"Canceled / Rejected Boutique Bookings"}),m?t.jsx(k,{}):l.length===0?t.jsx(n,{children:"No canceled bookings found"}):l.map(e=>{var r;return t.jsxs(A,{elevation:3,sx:{p:2,mt:2,borderRadius:"12px",cursor:"pointer"},onClick:()=>C(e._id),children:[t.jsxs(f,{direction:"row",justifyContent:"space-between",children:[t.jsxs(c,{children:[t.jsxs(n,{fontWeight:600,children:["Booking ID: #",(r=e._id)==null?void 0:r.slice(-6)]}),t.jsx(n,{color:"gray",fontSize:14,children:N(e.bookingDate)}),t.jsx(n,{color:"gray",fontSize:13,children:y(e.timeSlot)})]}),t.jsxs(n,{fontWeight:700,color:"red",children:["â‚¹",B(e.finalPrice)]})]}),t.jsxs(w,{in:s===e._id,children:[t.jsx(v,{sx:{my:2}}),t.jsxs(c,{sx:{background:"#f8f8f8",p:2,borderRadius:"10px"},children:[t.jsxs(n,{fontSize:14,children:[t.jsx("strong",{children:"Customer:"})," ",e.fullName||"N/A"]}),t.jsxs(n,{fontSize:14,children:[t.jsx("strong",{children:"Email:"})," ",e.emailAddress||"N/A"]}),t.jsxs(n,{fontSize:14,children:[t.jsx("strong",{children:"Contact:"})," ",e.contactNumber||"N/A"]}),t.jsxs(n,{fontSize:14,children:[t.jsx("strong",{children:"Guests:"})," ",e.numberOfGuests||"N/A"]}),t.jsxs(n,{fontSize:14,mt:1,children:[t.jsx("strong",{children:"Status:"})," ",t.jsx("span",{style:{color:"red"},children:e.status||"N/A"})]}),t.jsxs(n,{fontSize:14,children:[t.jsx("strong",{children:"Payment:"})," ",e.paymentStatus||"N/A"]})]}),t.jsxs(f,{direction:"row",spacing:2,mt:2,justifyContent:"center",children:[t.jsx(j,{variant:"outlined",sx:{width:"120px",borderRadius:"30px",color:"#E15B65"},children:"Download"}),t.jsx(j,{variant:"contained",sx:{width:"120px",borderRadius:"30px",bgcolor:"#E15B65",color:"white"},children:"View"})]})]})]},e._id)})]})};export{P as default};
