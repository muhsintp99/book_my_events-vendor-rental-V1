import{a8 as Ne,a9 as Ue,r as p,w as Ve,u as Ge,i as qe,j as e,B as r,b as X,aa as Je,T as d,p as F,M as $,s as h,F as fe,I as be,ab as V,W as T,S as Ie,f as L,ac as H,a4 as Ke,ad as Qe,ae as Ee,g as K,af as ye,C as De,V as Be,ag as Ye,ah as Ze,ai as Xe,t as et,aj as tt,x as at}from"./index-DKDRBmg1.js";import{C as it}from"./CardMedia-iVkQ8zJS.js";import{C as le}from"./CloudUpload-U64zj0Na.js";import{A as nt}from"./Add-BROMpD3y.js";const de=Qe(r)(({theme:x})=>({border:"2px dashed #e0e0e0",borderRadius:x.shape.borderRadius,padding:x.spacing(3),textAlign:"center",backgroundColor:x.palette.grey[50],cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"150px","&:hover":{borderColor:"#E15B65"},'& input[type="file"]':{display:"none"}})),ve={monday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Pm",endTime:"12:00",endPeriod:"Am",price:""}},tuesday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},wednesday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},thursday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},friday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"00:00",startPeriod:"Am",endTime:"00:00",endPeriod:"Pm",price:""}},saturday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},sunday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}}},rt={monday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Pm",endTime:"12:00",endPeriod:"Am",price:""}},tuesday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},wednesday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},thursday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},friday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"00:00",startPeriod:"Am",endTime:"00:00",endPeriod:"Pm",price:""}},saturday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},sunday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}}},st=(x,A)=>{const y={};return["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].forEach(n=>{var ee,G;y[n]={morning:null,evening:null};const f=(ee=x[n])==null?void 0:ee.morning;if(f!=null&&f.enabled&&f.price.trim()){const R=parseFloat(f.price)||0;y[n].morning={startTime:f.startTime,startAmpm:f.startPeriod.toUpperCase(),endTime:f.endTime,endAmpm:f.endPeriod.toUpperCase(),perDay:A==="per_function"?R:0,perHour:A==="per_hour"?R:0,perPerson:A==="per_person"?R:0}}const v=(G=x[n])==null?void 0:G.evening;if(v!=null&&v.enabled&&v.price.trim()){const R=parseFloat(v.price)||0;y[n].evening={startTime:v.startTime,startAmpm:v.startPeriod.toUpperCase(),endTime:v.endTime,endAmpm:v.endPeriod.toUpperCase(),perDay:A==="per_function"?R:0,perHour:A==="per_hour"?R:0,perPerson:A==="per_person"?R:0}}}),y},ot=x=>{const A={...ve};return typeof x=="object"&&!Array.isArray(x)?Object.entries(x).forEach(([y,n])=>{const f=y.toLowerCase();if(A[f]){if(n.morning){const v=n.morning.perDay||n.morning.perHour||n.morning.perPerson||0;A[f].morning={enabled:!0,startTime:n.morning.startTime||"08:00",startPeriod:(n.morning.startAmpm||"AM").toLowerCase(),endTime:n.morning.endTime||"03:00",endPeriod:(n.morning.endAmpm||"PM").toLowerCase(),price:v.toString()}}if(n.evening){const v=n.evening.perDay||n.evening.perHour||n.evening.perPerson||0;A[f].evening={enabled:!0,startTime:n.evening.startTime||"08:00",startPeriod:(n.evening.startAmpm||"PM").toLowerCase(),endTime:n.evening.endTime||"12:00",endPeriod:(n.evening.endAmpm||"AM").toLowerCase(),price:v.toString()}}}}):Array.isArray(x)&&x.forEach(y=>{const n=y.day.toLowerCase(),f=y.slotType;if(A[n]&&A[n][f]){const v=y.perDay||y.perHour||y.perPerson||y.price||0;A[n][f]={...A[n][f],enabled:!0,startTime:y.startTime,startPeriod:y.startAmpm.toLowerCase(),endTime:y.endTime,endPeriod:y.endAmpm.toLowerCase(),price:v.toString()}}}),A},mt=()=>{const{id:x}=Ne(),A=Ue();p.useEffect(()=>{const t=x?`venue-refreshed-${x}`:"venue-create-refreshed";sessionStorage.getItem(t)?Object.keys(sessionStorage).filter(s=>s.startsWith("venue-refreshed-")||s==="venue-create-refreshed").forEach(s=>{s!==t&&sessionStorage.removeItem(s)}):(sessionStorage.setItem(t,"true"),setTimeout(()=>{window.location.reload()}))},[x]),p.useEffect(()=>{x&&(sessionStorage.getItem("from-package-selection")||Se(x))},[x]);const y=Ve(),n=Ge(),f=qe(n.breakpoints.down("md")),v="https://api.bookmyevent.ae/api",ee="https://bookmyevent.ae",G="AIzaSyAfLUm1kPmeMkHh1Hr5nbgNpQJOsNa7B78",R=p.useRef(null),E=p.useRef(null),ce=p.useRef(null),[_,je]=p.useState(x?"edit":"create"),[a,W]=p.useState({venueName:"",description:"",venueAddress:"",categories:"",latitude:"",longitude:"",openingHours:"",closingHours:"",holidayScheduling:"",parkingAvailability:!1,parkingCapacity:"",foodCateringAvailability:!1,stageLightingAudio:!1,wheelchairAccessibility:!1,securityArrangements:!1,wifiAvailability:!1,acAvailable:!1,nonAcAvailable:!1,nonAcDiscount:"",acType:"Not Specified",washroomsInfo:"",dressingRooms:"",venueType:"",discount:"",advanceDeposit:"",cancellationPolicy:"",extraCharges:"",seatingArrangement:"",maxGuestsSeated:"",maxGuestsStanding:"",multipleHalls:!1,nearbyTransport:"",accessibilityInfo:"",elderlyAccessibility:!1,searchTags:"",selectedPackageIds:[]}),[Re,ue]=p.useState([]),[me,Q]=p.useState([]),[Y,ge]=p.useState([]),[j,q]=p.useState({thumbnail:null,auditoriumImages:[],floorPlan:null,documents:null}),[P,pe]=p.useState({thumbnail:"",auditoriumImages:[],floorPlan:"",documents:""}),[b,he]=p.useState(ve),[xe,k]=p.useState({open:!1,message:"",severity:"success"}),[te,J]=p.useState(!1),[N,Ae]=p.useState(!1),[D,Pe]=p.useState(null),[We,ae]=p.useState(!1),[_e,Ce]=p.useState(""),m={"& .MuiOutlinedInput-root":{"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"#E15B65"}},"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"#E15B65"}}}};p.useEffect(()=>{He(),Fe()},[]),p.useEffect(()=>{x&&Se(x)},[x]),p.useEffect(()=>{const t=sessionStorage.getItem("tempFormData");t&&(W(s=>{var l,c,g,w;return{...JSON.parse(t),selectedPackageIds:((c=(l=A.state)==null?void 0:l.selectedPackages)==null?void 0:c.map(M=>M._id))||s.selectedPackageIds,foodCateringAvailability:((w=(g=A.state)==null?void 0:g.selectedPackages)==null?void 0:w.length)>0||s.foodCateringAvailability}}),sessionStorage.removeItem("tempFormData"));const i=A.state;i!=null&&i.selectedPackages&&i.selectedPackages.length>0&&(ge(i.selectedPackages),W(s=>({...s,selectedPackageIds:i.selectedPackages.map(l=>l._id),foodCateringAvailability:!0})),window.history.replaceState({},document.title))},[A.state]),p.useEffect(()=>{x&&me.length>0&&a.selectedPackageIds.length>0&&ge(me.filter(t=>a.selectedPackageIds.includes(t._id)))},[me,a.selectedPackageIds,x]);const Fe=async()=>{try{const t=localStorage.getItem("token"),i=localStorage.getItem("providerId")||localStorage.getItem("moduleId");if(!i){console.warn("Provider ID not available"),Q([]);return}if(!t){console.warn("Token not available"),Q([]);return}const s=await fetch(`${v}/packages/provider/${i}`,{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});if(!s.ok){console.error(`HTTP error! Status: ${s.status}`),Q([]);return}const l=await s.json();let c=[];l.packages&&Array.isArray(l.packages)?c=l.packages:l.success&&Array.isArray(l.data)&&(c=l.data),Q(c),c.length===0&&console.log("No packages found for this provider")}catch(t){console.error("Error fetching packages:",t),Q([])}};p.useEffect(()=>{if(window.google&&window.google.maps){Ae(!0);return}const t=document.createElement("script");return t.src=`https://maps.googleapis.com/maps/api/js?key=${G}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{Ae(!0)},document.head.appendChild(t),()=>{document.head.contains(t)&&document.head.removeChild(t)}},[G]),p.useEffect(()=>{N&&window.google&&window.google.maps&&$e()},[N]);const $e=p.useCallback(()=>{if(!window.google||!R.current||!N)return;const t=a.latitude&&a.longitude?parseFloat(a.latitude):20.5937,i=a.latitude&&a.longitude?parseFloat(a.longitude):78.9629,s={lat:t,lng:i},l=new window.google.maps.Map(R.current,{zoom:12,center:s});l.addListener("click",c=>{const g=c.latLng.lat(),w=c.latLng.lng();W(C=>({...C,latitude:g.toString(),longitude:w.toString()})),E.current&&E.current.setMap(null),E.current=new window.google.maps.Marker({position:{lat:g,lng:w},map:l}),new window.google.maps.Geocoder().geocode({location:{lat:g,lng:w}},(C,se)=>{se==="OK"&&C[0]?(W(o=>({...o,venueAddress:C[0].formatted_address})),k({open:!0,message:"Location set and address auto-filled!",severity:"success"})):k({open:!0,message:"Location set, but could not determine address.",severity:"info"})})}),Pe(l)},[N,a.latitude,a.longitude]);p.useEffect(()=>{if(!N||!D||!ce.current||!window.google)return;const t=new window.google.maps.places.Autocomplete(ce.current,{fields:["place_id","geometry","name","formatted_address"]}),i=t.addListener("place_changed",()=>{const s=t.getPlace();if(!s.geometry||!s.geometry.location)return;const l=s.geometry.location;s.geometry.viewport?D.fitBounds(s.geometry.viewport):(D.setCenter(l),D.setZoom(17)),E.current&&E.current.setMap(null),E.current=new window.google.maps.Marker({position:l,map:D}),W(c=>({...c,latitude:l.lat().toString(),longitude:l.lng().toString(),venueAddress:s.formatted_address||s.name})),k({open:!0,message:"Location selected!",severity:"success"})});return()=>{window.google&&window.google.maps.event&&window.google.maps.event.removeListener(i)}},[N,D]),p.useEffect(()=>{if(!D||!a.latitude||!a.longitude)return;const t={lat:parseFloat(a.latitude),lng:parseFloat(a.longitude)};D.setCenter(t),D.setZoom(12),E.current?E.current.setPosition(t):E.current=new window.google.maps.Marker({position:t,map:D})},[a.latitude,a.longitude,D]);const u=t=>{const{name:i,value:s,type:l,checked:c}=t.target;W(g=>({...g,[i]:l==="checkbox"?c:s}))},ie=t=>i=>{const s=Array.from(i.target.files);s.length>0&&q(t==="auditoriumImages"?l=>({...l,[t]:[...l[t],...s]}):l=>({...l,[t]:s[0]}))},ne=t=>i=>{i.preventDefault();const s=Array.from(i.dataTransfer.files);s.length>0&&q(t==="auditoriumImages"?l=>({...l,[t]:[...l[t],...s]}):l=>({...l,[t]:s[0]}))},Te=(t,i,s=!1)=>{s?pe(l=>({...l,[t]:l[t].filter((c,g)=>g!==i)})):q(l=>({...l,[t]:l[t].filter((c,g)=>g!==i)}))},B=(t,i,s,l)=>{he(c=>({...c,[t]:{...c[t],[i]:{...c[t][i],[s]:l}}}))},re=t=>t.preventDefault(),we=()=>{W({venueName:"",description:"",venueAddress:"",categories:"",latitude:"",longitude:"",openingHours:"",closingHours:"",holidayScheduling:"",parkingAvailability:!1,parkingCapacity:"",foodCateringAvailability:!1,stageLightingAudio:!1,wheelchairAccessibility:!1,securityArrangements:!1,wifiAvailability:!1,acAvailable:!1,nonAcAvailable:!1,acType:"Not Specified",washroomsInfo:"",dressingRooms:"",venueType:"",discount:"",advanceDeposit:"",cancellationPolicy:"",extraCharges:"",seatingArrangement:"",maxGuestsSeated:"",maxGuestsStanding:"",multipleHalls:!1,nearbyTransport:"",accessibilityInfo:"",elderlyAccessibility:!1,searchTags:"",selectedPackageIds:[]}),ge([]),he(rt),q({thumbnail:null,auditoriumImages:[],floorPlan:null,documents:null}),pe({thumbnail:"",auditoriumImages:[],floorPlan:"",documents:""}),je("create"),E.current&&(E.current.setMap(null),E.current=null),D&&Pe(null)},Le=()=>{const t=[];return a.venueName.trim()||t.push("Venue name is required"),a.venueAddress.trim()||t.push("Venue address is required"),a.categories||t.push("Category is required"),a.seatingArrangement||t.push("Seating arrangement is required"),a.maxGuestsSeated||t.push("Max guests seated is required"),a.venueType||t.push("Venue type is required"),_==="create"?(j.thumbnail||t.push("Thumbnail image is required"),j.auditoriumImages.length===0&&t.push("Auditorium image is required")):(!j.thumbnail&&!P.thumbnail&&t.push("Thumbnail image is required"),j.auditoriumImages.length===0&&P.auditoriumImages.length===0&&t.push("Auditorium image is required")),Object.values(b).some(s=>s.morning.enabled&&s.morning.price.trim()||s.evening.enabled&&s.evening.price.trim())||t.push("At least one time slot with price is required"),a.foodCateringAvailability&&(!a.selectedPackageIds||a.selectedPackageIds.length===0)&&t.push("At least one food package is required"),t},He=async()=>{try{const t=localStorage.getItem("token"),i=localStorage.getItem("moduleId"),s="https://api.bookmyevent.ae";if(!t){console.warn("No authentication token found.");return}if(!i){console.warn("No moduleId found in localStorage.");return}const l=await fetch(`${s}/api/categories/modules/${i}`,{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});if(!l.ok)throw new Error(`HTTP error! Status: ${l.status}`);const c=await l.json();if(c.success&&Array.isArray(c.data)){const g=c.data.map(w=>({id:w.categories||w._id||"",name:(w==null?void 0:w.title)||w.name||"Unnamed Category"}));ue(g)}else k({open:!0,message:"No categories found.",severity:"warning"}),ue([])}catch(t){console.error("Error fetching categories:",t),k({open:!0,message:"Failed to fetch categories. Please try again.",severity:"error"}),ue([])}},Se=async t=>{var i,s,l,c,g,w,M;J(!0);try{const C=localStorage.getItem("token");if(!C)throw new Error("No authentication token found. Please log in.");const o=await(await fetch(`${v}/venues/${t}`,{headers:{Authorization:`Bearer ${C}`}})).json();if(!o.success)throw new Error(o.message||"Failed to fetch venue");let O="",S="";if(o.data.discount)try{const U=typeof o.data.discount=="string"?JSON.parse(o.data.discount):o.data.discount;O=((i=U.packageDiscount)==null?void 0:i.toString())||"",S=((s=U.nonAc)==null?void 0:s.toString())||""}catch{O=o.data.discount.toString()||""}W({venueName:o.data.venueName||"",description:o.data.shortDescription||"",venueAddress:o.data.venueAddress||"",categories:((g=(c=(l=o==null?void 0:o.data)==null?void 0:l.categories)==null?void 0:c[0])==null?void 0:g._id)||"",latitude:((w=o.data.latitude)==null?void 0:w.toString())||"",longitude:((M=o.data.longitude)==null?void 0:M.toString())||"",openingHours:o.data.openingHours||"",closingHours:o.data.closingHours||"",holidayScheduling:o.data.holidaySchedule||"",parkingAvailability:!!o.data.parkingAvailability,parkingCapacity:o.data.parkingCapacity||"",foodCateringAvailability:!!o.data.foodCateringAvailability,stageLightingAudio:!!o.data.stageLightingAudio,wheelchairAccessibility:!!o.data.wheelchairAccessibility,securityArrangements:!!o.data.securityArrangements,wifiAvailability:!!o.data.wifiAvailability,acAvailable:!!o.data.acAvailable,nonAcAvailable:!!o.data.nonAcAvailable,acType:o.data.acType||"Not Specified",washroomsInfo:o.data.washroomsInfo||"",dressingRooms:o.data.dressingRooms||"",venueType:o.data.venueType||"",discount:O,nonAcDiscount:S,advanceDeposit:o.data.advanceDeposit||"",cancellationPolicy:o.data.cancellationPolicy||"",extraCharges:o.data.extraCharges||"",seatingArrangement:o.data.seatingArrangement||"",maxGuestsSeated:o.data.maxGuestsSeated||"",maxGuestsStanding:o.data.maxGuestsStanding||"",multipleHalls:!!o.data.multipleHalls,nearbyTransport:o.data.nearbyTransport||"",accessibilityInfo:o.data.accessibilityInfo||"",elderlyAccessibility:!!o.data.accessibilityInfo,searchTags:Array.isArray(o.data.searchTags)?o.data.searchTags.join(", "):o.data.searchTags||"",selectedPackageIds:Array.isArray(o.data.packages)?o.data.packages.map(U=>typeof U=="string"?U:U._id):[]}),console.log("hello",a==null?void 0:a.categories),he(ot(o.data.pricingSchedule)||ve);const I=o.data.images||[];let oe=[],z="";I.length>1?(oe=I.slice(0,-1),z=I[I.length-1]):I.length===1&&(oe=[I[0]]),pe({thumbnail:o.data.thumbnail||"",auditoriumImages:oe,floorPlan:z,documents:o.data.documents||""}),je("edit")}catch(C){console.error("Error fetching venue:",C),k({open:!0,message:C.message.includes("expired")?"Session expired. Please log in again.":`Error fetching venue: ${C.message}`,severity:"error"}),C.message.includes("expired")&&y("/login")}finally{J(!1)}},Me=t=>{const i=parseFloat(t)||0;return i<0?0:i>100?(k({open:!0,message:"Discount capped at 100%.",severity:"warning"}),100):i},Oe=t=>{const i=parseFloat(t)||0;return i<0?(k({open:!0,message:"Fixed discount must be a positive number.",severity:"warning"}),0):i},ze=async t=>{var l;t.preventDefault(),J(!0),k({open:!1,message:"",severity:"success"});const i=localStorage.getItem("token");if(!i){k({open:!0,message:"No authentication token found. Please log in.",severity:"error"}),J(!1);return}const s=Le();if(s.length>0){k({open:!0,message:s.join(", "),severity:"error"}),J(!1);return}try{let c=x;const g=new FormData,w=["parkingAvailability","foodCateringAvailability","stageLightingAudio","wheelchairAccessibility","securityArrangements","wifiAvailability","acAvailable","nonAcAvailable","multipleHalls","elderlyAccessibility"];let M={packageDiscount:Me(a.discount),nonAc:a.nonAcAvailable?Oe(a.nonAcDiscount):0};const C={...a,shortDescription:a.description||"",holidaySchedule:a.holidayScheduling||"",categories:a.categories||"",accessibilityInfo:a.accessibilityInfo||"",discount:JSON.stringify(M)};delete C.description,delete C.holidayScheduling,delete C.venueType,delete C.selectedPackageIds,delete C.nonAcDiscount,Object.entries(C).forEach(([S,I])=>{S==="searchTags"&&I?I.split(",").map(z=>z.trim()).filter(z=>z).forEach(z=>g.append(S,z)):w.includes(S)?g.append(S,I.toString()):g.append(S,I||"")}),g.append("venueType",a.venueType||"");const se=st(b,a.venueType);g.append("pricingSchedule",JSON.stringify(se)),a.selectedPackageIds&&a.selectedPackageIds.length>0&&g.append("packages",JSON.stringify(a.selectedPackageIds)),j.thumbnail&&g.append("thumbnail",j.thumbnail),P.auditoriumImages&&P.auditoriumImages.length>0&&P.auditoriumImages.forEach(S=>g.append("images",S)),j.auditoriumImages&&j.auditoriumImages.length>0&&j.auditoriumImages.forEach(S=>g.append("images",S)),j.floorPlan?g.append("images",j.floorPlan):P.floorPlan&&g.append("images",P.floorPlan);let o;_==="create"?o=await fetch(`${v}/venues/`,{method:"POST",body:g,headers:{Authorization:`Bearer ${i}`}}):o=await fetch(`${v}/venues/${x}`,{method:"PUT",body:g,headers:{Authorization:`Bearer ${i}`}});const O=await o.json();if(!o.ok||!O.success)throw new Error(O.message||"Failed to create/update venue");if(c=((l=O.data)==null?void 0:l._id)||O._id,console.log("âœ… Venue created/updated with discount:",M),a.selectedPackageIds&&a.selectedPackageIds.length>0&&_==="edit"){const S=await fetch(`${v}/venues/${c}`,{method:"PUT",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({packages:a.selectedPackageIds})}),I=await S.json();S.ok||console.error("Failed to link package to venue:",I.message)}k({open:!0,message:_==="edit"?"Venue updated successfully":"Venue created successfully",severity:"success"}),_==="edit"?setTimeout(()=>y("/venue-setup/lists"),2e3):we()}catch(c){console.error("Error submitting form:",c),k({open:!0,message:c.message.includes("expired")?"Session expired. Please log in again.":`Error ${_==="edit"?"updating":"creating"} venue: ${c.message}`,severity:"error"}),c.message.includes("expired")&&y("/login")}finally{J(!1)}},ke=(t,i)=>{i!=="clickaway"&&k({open:!1,message:"",severity:"success"})},Z=t=>t?`${ee}/${t}`:"";return e.jsx(r,{sx:{p:f?2:3,backgroundColor:n.palette.grey[100],minHeight:"100vh",width:"100%"},children:e.jsxs(r,{sx:{maxWidth:"lg",margin:"auto",backgroundColor:"white",borderRadius:n.shape.borderRadius,boxShadow:n.shadows[1],p:f?2:3,overflowX:"hidden"},children:[e.jsx(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[_==="edit"&&e.jsx(X,{onClick:()=>y("/venue-setup/lists"),color:"primary",children:e.jsx(Je,{})}),e.jsx(d,{variant:"h4",component:"h1",children:_==="edit"?"Edit Venue":"Add New Venue"})]})}),e.jsx(d,{variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Insert the venue details"}),e.jsxs(r,{component:"form",onSubmit:ze,children:[e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${n.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(d,{variant:"h4",gutterBottom:!0,children:"Venue Details"}),e.jsx(h,{fullWidth:!0,label:"Venue Name*",name:"venueName",value:a.venueName,onChange:u,placeholder:"Type venue name",sx:{mb:2,...m},required:!0}),e.jsx(h,{fullWidth:!0,label:"Description",name:"description",value:a.description,onChange:u,placeholder:"Describe your auditorium",multiline:!0,rows:4,sx:{mb:2,...m}}),e.jsxs(fe,{fullWidth:!0,variant:"outlined",required:!0,sx:{mb:2,...m},children:[e.jsx(be,{id:"category-label",children:"Category*"}),e.jsxs(V,{labelId:"category-label",name:"categories",value:a.categories,label:"Category",onChange:u,children:[e.jsx(T,{value:"",children:"Select category"}),Re.map(t=>e.jsx(T,{value:t.id,children:t.name},t.id))]})]}),e.jsx(h,{fullWidth:!0,label:"Search Location",inputRef:ce,variant:"outlined",placeholder:"Enter a location",sx:{mb:2,...m}}),N&&G?e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Click on the map below to select a location"}),e.jsx(r,{ref:R,sx:{height:300,width:"100%",borderRadius:n.shape.borderRadius,border:`1px solid ${n.palette.grey[300]}`,mb:2}})]}):e.jsx(r,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${n.palette.grey[300]}`,borderRadius:n.shape.borderRadius,mb:2},children:e.jsx(d,{variant:"body2",color:"text.secondary",children:"Map loading..."})}),e.jsxs(r,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(h,{sx:{flex:1,...m},label:"Latitude*",name:"latitude",value:a.latitude,onChange:u,placeholder:"e.g., 25.2048",type:"number",inputProps:{step:"0.0001"},required:!0}),e.jsx(h,{sx:{flex:1,...m},label:"Longitude*",name:"longitude",value:a.longitude,onChange:u,placeholder:"e.g., 55.2708",type:"number",inputProps:{step:"0.0001"},required:!0})]}),e.jsx(h,{fullWidth:!0,label:"Venue Address*",name:"venueAddress",value:a.venueAddress,onChange:u,placeholder:"Enter complete address",multiline:!0,rows:2,sx:{mb:2,...m},required:!0}),e.jsxs(r,{sx:{mb:4},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Operating Hours"}),e.jsxs(r,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(h,{fullWidth:!0,label:"Opening Hours",name:"openingHours",value:a.openingHours,onChange:u,placeholder:"e.g., 09:00 AM",sx:m}),e.jsx(h,{fullWidth:!0,label:"Closing Hours",name:"closingHours",value:a.closingHours,onChange:u,placeholder:"e.g., 11:00 PM",sx:m})]}),e.jsx(h,{fullWidth:!0,label:"Holiday Scheduling",name:"holidayScheduling",value:a.holidayScheduling,onChange:u,placeholder:"Describe holiday hours or closures",multiline:!0,rows:2,sx:m})]})]})})}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${n.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Venue Facilities"}),e.jsx(d,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Specify available facilities"}),e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:f?"1fr":"repeat(2, 1fr)",gap:n.spacing(3)},children:[e.jsxs(Ie,{spacing:2,children:[e.jsx(L,{control:e.jsx(H,{name:"parkingAvailability",checked:a.parkingAvailability,onChange:u}),label:"Parking Availability"}),e.jsx(L,{control:e.jsx(H,{name:"foodCateringAvailability",checked:a.foodCateringAvailability,onChange:u}),label:"Food & Catering Availability"}),a.foodCateringAvailability&&e.jsxs(e.Fragment,{children:[e.jsx(r,{sx:{backgroundColor:"#fce4ec",border:"1px solid #f8bbd9",borderRadius:1,p:2,mt:1,cursor:"pointer","&:hover":{backgroundColor:"#f8bbd9"}},onClick:()=>{sessionStorage.setItem("tempFormData",JSON.stringify(a)),y("/venue-setup/foodmenu",{state:{selectingForVenue:!0,preSelected:Y}})},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(d,{variant:"h5",color:"#E15B65",children:"ðŸ´"}),e.jsx(d,{variant:"subtitle1",color:"#E15B65",children:"Menu Selection"})]}),Y.length>0&&e.jsx(Ke,{label:Y.length,color:"primary",size:"small"})]})}),Y.length>0&&e.jsx(r,{sx:{mt:2,display:"flex",gap:2,flexWrap:"wrap"},children:Y.map(t=>{const i=t.thumbnail?`https://api.bookmyevent.ae/${t.thumbnail}`:"/placeholder.jpg";return e.jsxs(F,{sx:{width:150,height:160},children:[e.jsx(it,{component:"img",height:"120",image:i,alt:t.title,sx:{objectFit:"cover"},onError:s=>{console.error("Image failed to load:",i),s.target.src="/placeholder.jpg"}}),e.jsx($,{sx:{p:1},children:e.jsx(d,{variant:"body2",noWrap:!0,sx:{fontSize:"0.75rem"},children:t.title})})]},t._id)})})]}),e.jsx(L,{control:e.jsx(H,{name:"stageLightingAudio",checked:a.stageLightingAudio,onChange:u}),label:"Stage / Lighting / Audio System"}),e.jsx(L,{control:e.jsx(H,{name:"acAvailable",checked:a.acAvailable,onChange:u}),label:"AC Available"}),a.acAvailable&&e.jsxs(fe,{fullWidth:!0,variant:"outlined",sx:{mt:1,...m},children:[e.jsx(be,{id:"ac-type-label",children:"AC Type"}),e.jsxs(V,{labelId:"ac-type-label",name:"acType",value:a.acType,label:"AC Type",onChange:u,children:[e.jsx(T,{value:"Not Specified",children:"Not Specified"}),e.jsx(T,{value:"Central AC",children:"Central AC"}),e.jsx(T,{value:"Split AC",children:"Split AC"}),e.jsx(T,{value:"Window AC",children:"Window AC"}),e.jsx(T,{value:"Coolers",children:"Coolers"})]})]}),e.jsx(h,{fullWidth:!0,label:"Parking Capacity",name:"parkingCapacity",value:a.parkingCapacity,onChange:u,placeholder:"Number of spots",type:"number",sx:m}),e.jsx(h,{fullWidth:!0,label:"Dressing Rooms/Green Rooms",name:"dressingRooms",value:a.dressingRooms,onChange:u,placeholder:"Details about dressing rooms",sx:m})]}),e.jsxs(Ie,{spacing:2,children:[e.jsx(L,{control:e.jsx(H,{name:"wheelchairAccessibility",checked:a.wheelchairAccessibility,onChange:u}),label:"Wheelchair Accessibility"}),e.jsx(L,{control:e.jsx(H,{name:"securityArrangements",checked:a.securityArrangements,onChange:u}),label:"Security Arrangements"}),e.jsx(L,{control:e.jsx(H,{name:"wifiAvailability",checked:a.wifiAvailability,onChange:u}),label:"Wi-Fi Availability"}),e.jsx(L,{control:e.jsx(H,{name:"nonAcAvailable",checked:a.nonAcAvailable,onChange:u}),label:"Non AC Available"}),a.nonAcAvailable&&e.jsxs(r,{sx:{backgroundColor:"#fce4ec",border:"1px solid #f8bbd9",borderRadius:1,p:2,mt:1},children:[e.jsx(d,{variant:"subtitle1",gutterBottom:!0,sx:{color:"#c2185b",fontWeight:600},children:"Non-AC Discount Pricing"}),e.jsx(h,{fullWidth:!0,label:"Fixed Discount Amount (â‚¹)",name:"nonAcDiscount",value:a.nonAcDiscount,onChange:u,placeholder:"e.g., 500, 1000, 2000",type:"number",inputProps:{min:0},sx:{mb:2,...m}}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"Note: You can set either percentage or fixed amount as discount for Non-AC bookings"})]}),e.jsx(h,{fullWidth:!0,label:"Washrooms/Restrooms Info",name:"washroomsInfo",value:a.washroomsInfo,onChange:u,placeholder:"Details about washrooms",sx:m})]})]})]})})}),e.jsxs(r,{sx:{display:"flex",flexDirection:f?"column":"row",gap:3,mb:4},children:[e.jsx(F,{sx:{flex:f?"auto":1,p:2,boxShadow:"none",border:`1px solid ${n.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Venue Thumbnail*"}),e.jsx(d,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Choose the main image that represents your venue."}),e.jsxs(de,{onDragOver:re,onDrop:ne("thumbnail"),onClick:()=>document.getElementById("thumbnail-upload").click(),children:[j.thumbnail?e.jsxs(r,{children:[e.jsx("img",{src:URL.createObjectURL(j.thumbnail),alt:"Thumbnail preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:n.spacing(1)}}),e.jsx(d,{variant:"body2",color:"text.secondary",children:j.thumbnail.name})]}):P.thumbnail?e.jsxs(r,{children:[e.jsx("img",{src:Z(P.thumbnail),alt:"Existing thumbnail",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:n.spacing(1)}}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"Existing thumbnail. Upload to replace."})]}):e.jsxs(r,{children:[e.jsx(le,{sx:{fontSize:40,color:n.palette.grey[400],mb:1}}),e.jsx(d,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(d,{variant:"body2",color:"#f59299ff",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"thumbnail-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:ie("thumbnail")})]})]})}),e.jsx(F,{sx:{flex:f?"auto":1,p:2,boxShadow:"none",border:`1px solid ${n.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Auditorium Image*"}),e.jsx(d,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 2MB"}),e.jsxs(de,{onDragOver:re,onDrop:ne("auditoriumImages"),onClick:t=>{t.target.closest(".delete-btn")||document.getElementById("auditorium-image-upload").click()},sx:{cursor:"pointer",p:2,minHeight:120},children:[e.jsx("input",{type:"file",id:"auditorium-image-upload",hidden:!0,multiple:!0,accept:"image/jpeg,image/png,image/jpg",onChange:ie("auditoriumImages")}),j.auditoriumImages.length>0||P.auditoriumImages.length>0?e.jsxs(r,{sx:{display:"flex",gap:1,flexWrap:"wrap",width:"100%",justifyContent:"center"},children:[P.auditoriumImages.map((t,i)=>e.jsxs(r,{sx:{position:"relative",width:80,height:80},children:[e.jsx("img",{src:Z(t),alt:"Existing",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:4}}),e.jsx(X,{className:"delete-btn",size:"small",onClick:s=>{s.stopPropagation(),Te("auditoriumImages",i,!0)},sx:{position:"absolute",top:-8,right:-8,bgcolor:"rgba(255,255,255,0.8)","&:hover":{bgcolor:"#fff"}},children:e.jsx(Ee,{color:"error",fontSize:"small"})})]},`existing-${i}`)),j.auditoriumImages.map((t,i)=>e.jsxs(r,{sx:{position:"relative",width:80,height:80},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:"New preview",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:4}}),e.jsx(X,{className:"delete-btn",size:"small",onClick:s=>{s.stopPropagation(),Te("auditoriumImages",i,!1)},sx:{position:"absolute",top:-8,right:-8,bgcolor:"rgba(255,255,255,0.8)","&:hover":{bgcolor:"#fff"}},children:e.jsx(Ee,{color:"error",fontSize:"small"})})]},`new-${i}`)),e.jsx(r,{sx:{width:80,height:80,border:"2px dashed #ccc",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc"},children:e.jsx(nt,{color:"inherit"})})]}):e.jsxs(r,{children:[e.jsx(le,{sx:{fontSize:40,color:n.palette.grey[400],mb:1}}),e.jsx(d,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload multiple images"}),e.jsx(d,{variant:"body2",color:"#f59299ff",children:"Or drag and drop"})]})]})]})})]}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${n.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Pricing & Booking Options"}),e.jsx(d,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert The Pricing & Discount Information"}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(d,{variant:"subtitle1",gutterBottom:!0,fontWeight:600,children:"Pricing Details"}),e.jsxs(r,{sx:{display:"flex",gap:2,mb:3},children:[e.jsx(K,{variant:a.venueType==="per_person"?"contained":"outlined",onClick:()=>W(t=>({...t,venueType:"per_person"})),startIcon:e.jsx(ye,{checked:a.venueType==="per_person",sx:{color:a.venueType==="per_person"?"#fff":"#E15B65","&.Mui-checked":{color:a.venueType==="per_person"?"#fff":"#E15B65"}}}),sx:{borderRadius:2,textTransform:"none",px:3,color:a.venueType==="per_person"?"#fff":"#E15B65",backgroundColor:a.venueType==="per_person"?"#E15B65":"transparent",borderColor:"#E15B65","&:hover":{backgroundColor:a.venueType==="per_person"?"#c94a57":"rgba(225,91,101,0.08)",borderColor:"#E15B65"}},children:"Per Person"}),e.jsx(K,{variant:a.venueType==="per_hour"?"contained":"outlined",onClick:()=>W(t=>({...t,venueType:"per_hour"})),startIcon:e.jsx(ye,{checked:a.venueType==="per_hour",sx:{color:a.venueType==="per_hour"?"#fff":"#E15B65","&.Mui-checked":{color:a.venueType==="per_hour"?"#fff":"#E15B65"}}}),sx:{borderRadius:2,textTransform:"none",px:3,color:a.venueType==="per_hour"?"#fff":"#E15B65",backgroundColor:a.venueType==="per_hour"?"#E15B65":"transparent",borderColor:"#E15B65","&:hover":{backgroundColor:a.venueType==="per_hour"?"#c94a57":"rgba(225,91,101,0.08)",borderColor:"#E15B65"}},children:"Per Hour"}),e.jsx(K,{variant:a.venueType==="per_function"?"contained":"outlined",onClick:()=>W(t=>({...t,venueType:"per_function"})),startIcon:e.jsx(ye,{checked:a.venueType==="per_function",sx:{color:a.venueType==="per_function"?"#fff":"#E15B65","&.Mui-checked":{color:a.venueType==="per_function"?"#fff":"#E15B65"}}}),sx:{borderRadius:2,textTransform:"none",px:3,color:a.venueType==="per_function"?"#fff":"#E15B65",backgroundColor:a.venueType==="per_function"?"#E15B65":"transparent",borderColor:"#E15B65","&:hover":{backgroundColor:a.venueType==="per_function"?"#c94a57":"rgba(225,91,101,0.08)",borderColor:"#E15B65"}},children:" Per Function"})]}),a.venueType&&e.jsxs(r,{sx:{border:`1px solid ${n.palette.grey[300]}`,borderRadius:1,overflow:"hidden"},children:[e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:"150px 1fr 1fr",backgroundColor:n.palette.grey[100],borderBottom:`1px solid ${n.palette.grey[300]}`},children:[e.jsx(r,{sx:{p:2,borderRight:`1px solid ${n.palette.grey[300]}`,fontWeight:600},children:" Day"}),e.jsx(r,{sx:{p:2,borderRight:`1px solid ${n.palette.grey[300]}`,fontWeight:600},children:"Time Slots"}),e.jsx(r,{sx:{p:2,fontWeight:600},children:"Pricing "})]}),["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(t=>e.jsxs(r,{children:[e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:"150px 1fr 1fr",borderBottom:`1px solid ${n.palette.grey[300]}`},children:[e.jsx(r,{sx:{p:2,borderRight:`1px solid ${n.palette.grey[300]}`,display:"flex",alignItems:"flex-start",textTransform:"capitalize",fontWeight:500},children:t.charAt(0).toUpperCase()+t.slice(1)}),e.jsxs(r,{sx:{p:2,borderRight:`1px solid ${n.palette.grey[300]}`,borderBottom:`1px solid ${n.palette.grey[300]}`},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(De,{size:"small",checked:b[t].morning.enabled,onChange:i=>B(t,"morning","enabled",i.target.checked),sx:{p:0}}),e.jsx(d,{variant:"body2",children:"Morning Slot"})]}),e.jsxs(r,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(h,{size:"small",value:b[t].morning.startTime,onChange:i=>B(t,"morning","startTime",i.target.value),disabled:!b[t].morning.enabled,sx:{width:"80px",...m},inputProps:{style:{textAlign:"center"}}}),e.jsxs(V,{size:"small",value:b[t].morning.startPeriod,onChange:i=>B(t,"morning","startPeriod",i.target.value),disabled:!b[t].morning.enabled,sx:{width:"70px"},children:[e.jsx(T,{value:"Am",children:"Am"}),e.jsx(T,{value:"Pm",children:"Pm"})]}),e.jsx(h,{size:"small",value:b[t].morning.endTime,onChange:i=>B(t,"morning","endTime",i.target.value),disabled:!b[t].morning.enabled,sx:{width:"80px",...m},inputProps:{style:{textAlign:"center"}}}),e.jsxs(V,{size:"small",value:b[t].morning.endPeriod,onChange:i=>B(t,"morning","endPeriod",i.target.value),disabled:!b[t].morning.enabled,sx:{width:"70px"},children:[e.jsx(T,{value:"Am",children:"Am"}),e.jsx(T,{value:"Pm",children:"Pm"})]})]})]}),e.jsx(r,{sx:{p:2,borderBottom:`1px solid ${n.palette.grey[300]}`},children:e.jsx(h,{fullWidth:!0,size:"small",value:b[t].morning.price,onChange:i=>B(t,"morning","price",i.target.value),disabled:!b[t].morning.enabled,placeholder:"Enter price",type:"number",inputProps:{step:"0.01",min:"0"},sx:m})})]}),e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:"150px 1fr 1fr",borderBottom:`1px solid ${n.palette.grey[300]}`},children:[e.jsx(r,{sx:{p:2,borderRight:`1px solid ${n.palette.grey[300]}`,display:"flex",alignItems:"flex-start",textTransform:"capitalize",fontWeight:500},children:t.charAt(0).toUpperCase()+t.slice(1)}),e.jsxs(r,{sx:{p:2,borderRight:`1px solid ${n.palette.grey[300]}`},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(De,{size:"small",checked:b[t].evening.enabled,onChange:i=>B(t,"evening","enabled",i.target.checked),sx:{p:0}}),e.jsx(d,{variant:"body2",children:"Evening Slot"})]}),e.jsxs(r,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(h,{size:"small",value:b[t].evening.startTime,onChange:i=>B(t,"evening","startTime",i.target.value),disabled:!b[t].evening.enabled,sx:{width:"80px",...m},inputProps:{style:{textAlign:"center"}}}),e.jsxs(V,{size:"small",value:b[t].evening.startPeriod,onChange:i=>B(t,"evening","startPeriod",i.target.value),disabled:!b[t].evening.enabled,sx:{width:"70px"},children:[e.jsx(T,{value:"Am",children:"Am"}),e.jsx(T,{value:"Pm",children:"Pm"})]}),e.jsx(h,{size:"small",value:b[t].evening.endTime,onChange:i=>B(t,"evening","endTime",i.target.value),disabled:!b[t].evening.enabled,sx:{width:"80px",...m},inputProps:{style:{textAlign:"center"}}}),e.jsxs(V,{size:"small",value:b[t].evening.endPeriod,onChange:i=>B(t,"evening","endPeriod",i.target.value),disabled:!b[t].evening.enabled,sx:{width:"70px"},children:[e.jsx(T,{value:"Am",children:"Am"}),e.jsx(T,{value:"Pm",children:"Pm"})]})]})]}),e.jsx(r,{sx:{p:2},children:e.jsx(h,{fullWidth:!0,size:"small",value:b[t].evening.price,onChange:i=>B(t,"evening","price",i.target.value),disabled:!b[t].evening.enabled,placeholder:"Enter price",type:"number",inputProps:{step:"0.01",min:"0"},sx:m})})]})]},t))]})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(d,{variant:"subtitle1",gutterBottom:!0,children:"Give Discount"}),e.jsx(d,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Set a discount that applies to all pricing typesâ€”hourly, daily, and distance-based"}),e.jsx(h,{fullWidth:!0,label:"Discount (%)",name:"discount",value:a.discount,onChange:u,placeholder:"Ex: 10",type:"number",inputProps:{min:0,max:100},sx:m})]}),e.jsx(h,{fullWidth:!0,label:"Advance Payment / Deposit (â‚¹)",name:"advanceDeposit",value:a.advanceDeposit,onChange:u,placeholder:"Enter advance amount",type:"number",inputProps:{min:0},sx:{mb:2,...m}}),e.jsx(h,{fullWidth:!0,label:"Cancellation Policy",name:"cancellationPolicy",value:a.cancellationPolicy,onChange:u,placeholder:"e.g., Free cancellation 48 hours before",multiline:!0,rows:2,sx:{mb:2,...m}}),e.jsx(h,{fullWidth:!0,label:"Extra Charges (e.g., Cleaning fee)",name:"extraCharges",value:a.extraCharges,onChange:u,placeholder:"Describe extra charges",multiline:!0,rows:2,sx:m})]})})}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${n.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Capacity & Layout"}),e.jsx(d,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Specify capacity and layout details"}),e.jsxs(fe,{fullWidth:!0,variant:"outlined",required:!0,sx:{mb:2,...m},children:[e.jsx(be,{id:"seating-arrangement-label",children:"Seating Arrangement*"}),e.jsxs(V,{labelId:"seating-arrangement-label",name:"seatingArrangement",value:a.seatingArrangement,label:"Seating Arrangement",onChange:u,children:[e.jsx(T,{value:"",children:"Select seating arrangement"}),e.jsx(T,{value:"Amphitheater",children:"Amphitheater"}),e.jsx(T,{value:"Balcony auditorium",children:"Balcony auditorium"}),e.jsx(T,{value:"Flat floor auditorium",children:"Flat floor auditorium"})]})]}),e.jsxs(r,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(h,{fullWidth:!0,label:"Max Guest Count (Seated)*",name:"maxGuestsSeated",value:a.maxGuestsSeated,onChange:u,placeholder:"e.g., 200",type:"number",required:!0,sx:m}),e.jsx(h,{fullWidth:!0,label:"Max Guest Count (Standing)",name:"maxGuestsStanding",value:a.maxGuestsStanding,onChange:u,placeholder:"e.g., 300",type:"number",sx:m})]}),e.jsxs(de,{onDragOver:re,onDrop:ne("floorPlan"),onClick:()=>document.getElementById("floor-plan-upload").click(),sx:{mb:2},children:[j.floorPlan?e.jsx(r,{children:e.jsx(d,{variant:"body2",color:"text.secondary",children:j.floorPlan.name})}):P.floorPlan?e.jsxs(r,{children:[P.floorPlan.endsWith(".pdf")?e.jsxs(r,{children:[e.jsxs(d,{variant:"body2",color:"text.secondary",children:["Existing floor plan (PDF): ",P.floorPlan.split("/").pop()]}),e.jsx("a",{href:Z(P.floorPlan),target:"_blank",rel:"noopener noreferrer",children:"View PDF"})]}):e.jsx("img",{src:Z(P.floorPlan),alt:"Existing floor plan",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:n.spacing(1)}}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"Upload new to replace."})]}):e.jsxs(r,{children:[e.jsx(le,{sx:{fontSize:40,color:n.palette.grey[400],mb:1}}),e.jsx(d,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload Floor Plan (Image/jpg)"}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"floor-plan-upload",hidden:!0,accept:"image/*,application/pdf",onChange:ie("floorPlan")})]}),e.jsx(L,{control:e.jsx(H,{name:"multipleHalls",checked:a.multipleHalls,onChange:u}),label:"Multiple Halls/Sections Under One Venue"})]})})}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${n.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Location & Accessibility"}),e.jsx(h,{fullWidth:!0,label:"Nearby Transport Details",name:"nearbyTransport",value:a.nearbyTransport,onChange:u,placeholder:"Describe nearby metro, bus stops, etc.",sx:{mb:2,...m}}),e.jsx(h,{fullWidth:!0,label:"Accessibility Information",name:"accessibilityInfo",value:a.accessibilityInfo,onChange:u,placeholder:"Describe accessibility features",sx:{mb:2,...m}}),e.jsx(L,{control:e.jsx(H,{name:"elderlyAccessibility",checked:a.elderlyAccessibility,onChange:u}),label:"Accessibility for Elderly & Differently Abled",sx:{mb:3}})]})})}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${n.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Venue Documents"}),e.jsx(d,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Upload relevant documents (licenses, permits, etc.)"}),e.jsxs(de,{onDragOver:re,onDrop:ne("documents"),onClick:()=>document.getElementById("documents-upload").click(),children:[j.documents?e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[j.documents.name,e.jsx(X,{size:"small",onClick:()=>{Ce(URL.createObjectURL(j.documents)),ae(!0)},sx:{color:n.palette.primary.main},children:e.jsx(Be,{fontSize:"small"})})]}):P.documents?e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[P.documents.split("/").pop(),e.jsx(X,{size:"small",onClick:()=>{Ce(Z(P.documents)),ae(!0)},sx:{color:n.palette.primary.main},children:e.jsx(Be,{fontSize:"small"})})]}):e.jsxs(r,{children:[e.jsx(le,{sx:{fontSize:40,color:n.palette.grey[400],mb:1}}),e.jsx(d,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"documents-upload",hidden:!0,accept:"application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:ie("documents")})]}),e.jsxs(Ye,{open:We,onClose:()=>ae(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"80vh",p:2}},children:[e.jsx(Ze,{sx:{p:0,height:"100%"},children:e.jsx(r,{sx:{height:"100%"},children:e.jsx("iframe",{src:_e,title:"Document Preview",style:{width:"100%",height:"100%",border:"none"}})})}),e.jsx(Xe,{children:e.jsx(K,{onClick:()=>ae(!1),color:"primary",children:"Close"})})]})]})})}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${n.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(d,{variant:"subtitle1",gutterBottom:!0,children:"Search Tags"}),e.jsx(h,{fullWidth:!0,label:"Search Tags",name:"searchTags",value:a.searchTags,onChange:u,placeholder:"Enter tags separated by commas (e.g., Auditorium, Wedding, Conference)",sx:{mb:1,...m}}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"Add relevant keywords to help users find this venue easily"})]})})}),e.jsxs(r,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(K,{variant:"outlined",color:"inherit",size:"large",onClick:we,disabled:te,children:_==="edit"?"Cancel":"Reset"}),e.jsx(K,{variant:"contained",type:"submit",size:"large",disabled:te,startIcon:te?e.jsx(et,{size:20}):null,sx:{backgroundColor:"#E15B65"},children:te?"Submitting...":_==="edit"?"Update":"Submit"})]})]}),e.jsx(tt,{open:xe.open,autoHideDuration:6e3,onClose:ke,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{"& .MuiSnackbarContent-root":{minWidth:"600px",maxWidth:"600px",width:"auto"}},children:e.jsx(at,{onClose:ke,severity:xe.severity,sx:{width:"100%","& .MuiAlert-message":{whiteSpace:"pre-line",wordBreak:"break-word",fontSize:"1rem",lineHeight:1.5}},children:xe.message})})]})})};export{mt as default};
