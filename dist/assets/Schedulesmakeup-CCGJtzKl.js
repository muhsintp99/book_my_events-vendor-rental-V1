import{r as c,j as e,B as s,x as N,t as L,b as T,aE as te,T as a,aF as Te,a9 as We,ar as Pe,aG as se,aH as oe,aJ as E,g as re,ab as ze,ac as Be,G as l,P as ne,s as h,a as k,aI as Fe,F as ae,I as ie,ag as le,$ as W,aK as Re,aL as Le,f as de,C as xe,D as Ee,aM as Oe,aN as $e,aO as Ye,aP as _e,Z as Ge}from"./index-ClBsW6WP.js";const C="https://api.bookmyevent.ae";function Ze(){const[p,ce]=c.useState(new Date),[j,pe]=c.useState(new Date().getDate()),[fe,O]=c.useState(!1),[$,Y]=c.useState([]),[He,Ue]=c.useState([]),[v,P]=c.useState([]),[I,_]=c.useState([]),[ue,G]=c.useState(!1),[D,d]=c.useState(null),[H,U]=c.useState(!1),[q,J]=c.useState(null),[r,y]=c.useState({fullName:"",contactNumber:"",emailAddress:"",address:"",numberOfGuests:"",additionalNotes:"",venueId:"",moduleId:"",packageId:"",bookingDate:new Date().toISOString().split("T")[0],timeSlot:[],paymentType:"Cash",bookingType:"Direct"}),g=(()=>{let t=localStorage.getItem("providerId")||localStorage.getItem("userId");if(!t){const o=localStorage.getItem("user");if(o)try{const n=JSON.parse(o);t=n._id||n.id||n.userId}catch(n){console.error("Error parsing user from localStorage:",n)}}return t})();c.useEffect(()=>{g&&(K(),he(),ge())},[p,g]),c.useEffect(()=>{I.length===1&&!r.moduleId&&y(t=>({...t,moduleId:I[0]._id}))},[I]);const K=async()=>{if(!g){d("Provider ID is required");return}G(!0),d(null);try{const o=await(await fetch(`${C}/api/bookings/provider/${g}`)).json();o.success?Y(o.data||[]):d(o.message||"Failed to fetch bookings")}catch(t){d("Error connecting to server"),console.error("Fetch error:",t)}finally{G(!1)}},he=async()=>{try{const o=await(await fetch(`${C}/api/modules`)).json();let n=[];o.success&&o.data&&Array.isArray(o.data)?n=o.data:o.success&&o.modules&&Array.isArray(o.modules)?n=o.modules:Array.isArray(o)&&(n=o),console.log("All modules fetched:",n);const i=n.filter(x=>(x.title||x.name||"").toLowerCase()==="makeup artist");console.log("Filtered modules for provider:",i),_(i),i.length===0&&console.warn("No modules available for this provider")}catch(t){console.error("Fetch modules error:",t),d("Failed to fetch modules: "+t.message),_([])}},ge=async()=>{try{const o=await(await fetch(`${C}/api/makeup-packages/provider/${g}`)).json();o.success?P(o.data||[]):P([])}catch(t){console.error("Fetch makeup packages error:",t),P([])}},me=async t=>{if(window.confirm("Are you sure you want to delete this booking?")){J(t),d(null);try{const n=await(await fetch(`${C}/api/bookings/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).json();n.success?(Y(i=>i.filter(x=>x._id!==t)),alert("Booking deleted successfully!")):d(n.message||"Failed to delete booking")}catch(o){d("Error deleting booking: "+o.message),console.error("Delete error:",o)}finally{J(null)}}},z=new Date,be=z.getDate(),je=z.getMonth(),ye=z.getFullYear(),V=(()=>{const t=p.getFullYear(),o=p.getMonth(),n=new Date(t,o+1,0).getDate(),i={};for(let x=1;x<=n;x++){const ee=$.filter(A=>{const b=new Date(A.bookingDate);return b.getDate()===x&&b.getMonth()===o&&b.getFullYear()===t&&A.bookingType==="Direct"}).reduce((A,b)=>A+(Array.isArray(b.timeSlot)?b.timeSlot.length:1),0);ee===0?i[x]="free":ee>=2?i[x]="booked":i[x]="available"}return i})(),m=$.filter(t=>{const o=new Date(t.bookingDate);return o.getDate()===j&&o.getMonth()===p.getMonth()&&o.getFullYear()===p.getFullYear()&&t.bookingType==="Direct"}),Se=t=>{const o=t.getFullYear(),n=t.getMonth(),i=new Date(o,n,1).getDay(),x=new Date(o,n+1,0).getDate();return{firstDay:i,daysInMonth:x}},{firstDay:ke,daysInMonth:Ce}=Se(p),ve=p.toLocaleDateString("en-US",{month:"long",year:"numeric"}),B=t=>{switch(t){case"booked":return"#ef5350";case"available":return"#ffd54f";case"free":return"#66bb6a";default:return"#66bb6a"}},S=t=>{switch(t){case"Accepted":return"#7e57c2";case"Pending":return"#ffd54f";case"Rejected":return"#e57373";default:return"#ef5350"}},Z=t=>{ce(new Date(p.getFullYear(),p.getMonth()+t,1))},Ie=()=>{const t=[];["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(n=>t.push(e.jsx(s,{sx:{textAlign:"center",padding:{xs:"8px 4px",md:"16px"},color:"#777",fontSize:{xs:"11px",md:"14px"},fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px"},children:n},n)));for(let n=0;n<ke;n++)t.push(e.jsx(s,{sx:{display:{xs:"none",md:"block"},backgroundColor:"#f9f9f9",borderRadius:"12px"}},`empty-${n}`));for(let n=1;n<=Ce;n++){const i=V[n]||"free",x=n===be&&p.getMonth()===je&&p.getFullYear()===ye,u=n===j;t.push(e.jsxs(s,{onClick:()=>pe(n),sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:{xs:"50px",md:"100px"},cursor:"pointer",borderRadius:{xs:"8px",md:"16px"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:u?"rgba(239, 83, 80, 0.05)":"#fff",border:u?"1px solid #ef5350":"1px solid #f0f0f0",boxShadow:u?"0 4px 12px rgba(239, 83, 80, 0.15)":"none","&:hover":{transform:{md:"translateY(-4px)"},boxShadow:"0 6px 16px rgba(0,0,0,0.08)",borderColor:"#ef5350",zIndex:1}},children:[e.jsx(s,{sx:{fontSize:{xs:"14px",md:"22px"},fontWeight:x||u?"600":"400",color:x?"#fff":u?"#ef5350":"#333",width:{xs:"28px",md:"48px"},height:{xs:"28px",md:"48px"},display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:x?"#ef5350":"transparent",marginBottom:{xs:"2px",md:"8px"},transition:"all 0.2s"},children:n}),e.jsx(s,{sx:{width:{xs:"6px",md:"10px"},height:{xs:"6px",md:"10px"},borderRadius:"50%",backgroundColor:B(i),boxShadow:`0 0 8px ${B(i)}80`}}),i!=="free"&&e.jsx(a,{sx:{display:{xs:"none",md:"block"},fontSize:"10px",mt:1,color:"#999",fontWeight:500},children:i==="booked"?"FULL":"SLOTS"})]},n))}return t},F=V[j]||"free",De=()=>m.length===0?"No bookings - All slots available":F==="booked"?`${m.length} bookings - Fully booked`:F==="available"?`${m.length} booking - Some slots available`:"All slots available",we=()=>new Date(p.getFullYear(),p.getMonth(),j).toLocaleDateString("en-US",{weekday:"short"}),f=t=>{const{name:o,value:n}=t.target;y(i=>({...i,[o]:n}))},Q=t=>{y(o=>{const n=o.timeSlot.includes(t)?o.timeSlot.filter(i=>i!==t):[...o.timeSlot,t];return{...o,timeSlot:n}})},Me=async()=>{U(!0),d(null);try{if(!r.fullName.trim()){d("Full Name is required");return}if(!r.contactNumber.trim()){d("Contact Number is required");return}if(!r.moduleId){d("Please select a module");return}if(!r.packageId){d("Please select a package");return}if(!r.bookingDate){d("Please select booking date");return}if(!r.timeSlot.length){d("Please select at least one time slot");return}if(!r.numberOfGuests||Number(r.numberOfGuests)<=0){d("Please enter a valid number of guests");return}const t={moduleId:r.moduleId,makeupId:r.packageId,fullName:r.fullName,contactNumber:r.contactNumber,bookingDate:r.bookingDate,timeSlot:r.timeSlot,paymentType:r.paymentType,bookingType:"Direct"};r.emailAddress&&(t.emailAddress=r.emailAddress),r.address&&(t.address=r.address),r.emailAddress&&(t.emailAddress=r.emailAddress),r.address&&(t.address=r.address),r.additionalNotes&&(t.additionalNotes=r.additionalNotes),r.numberOfGuests&&(t.numberOfGuests=Number(r.numberOfGuests)),r.additionalNotes&&(t.additionalNotes=r.additionalNotes);const n=await(await fetch(`${C}/api/bookings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();n.success?(alert("Booking created successfully!"),R(),K(),Ae()):d(n.message||"Failed to create booking")}catch{d("Error creating booking")}finally{U(!1)}},Ae=()=>{y({fullName:"",contactNumber:"",emailAddress:"",address:"",numberOfGuests:"",additionalNotes:"",venueId:"",moduleId:"",packageId:"",bookingDate:new Date().toISOString().split("T")[0],timeSlot:[],paymentType:"Cash",bookingType:"Direct"})},Ne=()=>{O(!0)},R=()=>{O(!1),d(null)},X=v.find(t=>t._id===r.packageId),w={display:"flex",alignItems:"center",gap:1,mb:2,color:"#ef5350",fontWeight:600},M={color:"#ef5350",fontSize:24};return e.jsxs(s,{sx:{width:"100%",margin:"0 auto",padding:{xs:"8px",md:"40px"},backgroundColor:"#fafafa",minHeight:"100vh",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[!g&&e.jsx(N,{severity:"warning",sx:{mb:3},children:"Provider ID not found. Please make sure you're logged in. You may need to log out and log in again."}),ue&&e.jsx(s,{display:"flex",justifyContent:"center",mb:3,children:e.jsx(L,{})}),D&&e.jsx(N,{severity:"error",sx:{mb:3},children:D}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:{xs:"16px",md:"32px"},padding:{xs:"0 4px",md:"0 20px"}},children:[e.jsx(T,{onClick:()=>Z(-1),sx:{backgroundColor:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"1px solid #f0f0f0","&:hover":{backgroundColor:"#f5f5f5",transform:"scale(1.1)"},transition:"all 0.2s"},children:e.jsx(te,{})}),e.jsx(a,{sx:{fontSize:{xs:"20px",md:"32px"},fontWeight:"600",color:"#333",letterSpacing:"-0.5px"},children:ve}),e.jsx(T,{onClick:()=>Z(1),sx:{backgroundColor:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"1px solid #f0f0f0","&:hover":{backgroundColor:"#f5f5f5",transform:"scale(1.1)"},transition:"all 0.2s"},children:e.jsx(Te,{})})]}),e.jsx(s,{sx:{backgroundColor:"#fff",borderRadius:{xs:"16px",md:"24px"},marginBottom:{xs:"24px",md:"40px"},padding:{xs:"12px 8px",md:"40px"},boxShadow:"0 10px 30px rgba(0,0,0,0.04)",border:"1px solid #f0f0f0"},children:e.jsx(s,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:{xs:"4px",md:"16px"}},children:Ie()})}),e.jsx(s,{sx:{backgroundColor:"#fff",borderRadius:{xs:"8px",md:"12px"},padding:{xs:"12px 8px",md:"24px"},marginBottom:{xs:"16px",md:"32px"},boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"12px",md:"24px"},flexWrap:"wrap",flexDirection:"row"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(s,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#ef5350"}}),e.jsx(a,{sx:{fontSize:"15px",color:"#666"},children:"Fully Booked"})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(s,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#ffd54f"}}),e.jsx(a,{sx:{fontSize:"15px",color:"#666"},children:"Slots Available"})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(s,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#66bb6a"}}),e.jsx(a,{sx:{fontSize:"15px",color:"#666"},children:"Fully Free"})]})]})}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:{xs:2,md:4},backgroundColor:"#fff",borderRadius:"24px",padding:{xs:"20px",md:"32px"},marginBottom:"32px",boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0"},children:[e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:{xs:"70px",md:"100px"},height:{xs:"70px",md:"100px"},backgroundColor:"#ef5350",borderRadius:"20px",color:"#fff",boxShadow:"0 8px 16px rgba(239, 83, 80, 0.2)"},children:[e.jsx(a,{sx:{fontSize:{xs:"12px",md:"14px"},fontWeight:"600",textTransform:"uppercase",opacity:.9},children:we()}),e.jsx(a,{sx:{fontSize:{xs:"28px",md:"40px"},fontWeight:"700",lineHeight:1},children:j})]}),e.jsxs(s,{sx:{flex:1},children:[e.jsx(a,{sx:{fontSize:{xs:"18px",md:"28px"},fontWeight:"600",color:"#1a1a1a",marginBottom:"4px"},children:"Schedule Details"}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(s,{sx:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:B(F)}}),e.jsx(a,{sx:{fontSize:{xs:"14px",md:"16px"},color:"#666",fontWeight:"500"},children:De()})]})]})]}),e.jsxs(s,{sx:{mb:4},children:[e.jsx(a,{sx:{fontSize:{xs:"20px",md:"24px"},fontWeight:"700",color:"#1a1a1a",mb:3,pl:1},children:"Today's Appointments"}),m.length>0?e.jsx(s,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:m.map(t=>e.jsxs(s,{sx:{backgroundColor:"#fff",borderRadius:"24px",border:"1px solid #f0f0f0",padding:{xs:"20px",md:"32px"},position:"relative",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0,0,0,0.02)",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 30px rgba(0,0,0,0.06)",borderColor:"#ef5350"},"&::before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:"6px",backgroundColor:S(t.status)}},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[e.jsxs(s,{children:[e.jsx(a,{sx:{fontSize:{xs:"12px",md:"13px"},fontWeight:"700",textTransform:"uppercase",color:S(t.status),letterSpacing:"1px",mb:.5},children:Array.isArray(t.timeSlot)?t.timeSlot.map((o,n)=>e.jsxs("span",{children:[typeof o=="string"?o:`${o.label} (${o.time})`,n<t.timeSlot.length-1?", ":""]},n)):typeof t.timeSlot=="string"?t.timeSlot:"All Day"}),e.jsx(a,{sx:{fontSize:{xs:"18px",md:"22px"},fontWeight:"700",color:"#1a1a1a"},children:t.fullName})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(We,{label:t.status,sx:{fontWeight:"600",fontSize:"12px",backgroundColor:`${S(t.status)}15`,color:S(t.status),border:`1px solid ${S(t.status)}30`}}),e.jsx(T,{onClick:()=>me(t._id),disabled:q===t._id,sx:{backgroundColor:"#fff1f1",color:"#ef5350","&:hover":{backgroundColor:"#ef5350",color:"#fff"}},children:q===t._id?e.jsx(L,{size:20,color:"inherit"}):e.jsx(Pe,{fontSize:"small"})})]})]}),e.jsxs(s,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"repeat(3, 1fr)"},gap:3,pt:3,borderTop:"1px solid #f8f8f8"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(s,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(se,{fontSize:"small"})}),e.jsxs(s,{children:[e.jsx(a,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Contact"}),e.jsx(a,{sx:{fontSize:"14px",fontWeight:"500"},children:t.contactNumber})]})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(s,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(oe,{fontSize:"small"})}),e.jsxs(s,{children:[e.jsx(a,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Email"}),e.jsx(a,{sx:{fontSize:"14px",fontWeight:"500"},children:t.emailAddress||"N/A"})]})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(s,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(E,{fontSize:"small"})}),e.jsxs(s,{children:[e.jsx(a,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Type"}),e.jsxs(a,{sx:{fontSize:"14px",fontWeight:"500"},children:[t.bookingType," Appointment"]})]})]})]})]},t._id))}):e.jsx(s,{sx:{textAlign:"center",py:8,backgroundColor:"#fff",borderRadius:"24px",border:"2px dashed #eee"},children:e.jsx(a,{sx:{color:"#999",fontSize:"16px"},children:"No appointments scheduled for this date."})})]}),m.length===0&&e.jsxs(s,{sx:{backgroundColor:"#f5f5f5",borderRadius:{xs:"12px",md:"20px"},padding:{xs:"24px",md:"48px"},textAlign:"center",mt:3},children:[e.jsx("div",{style:{margin:"0 auto 20px",width:"100px",height:"100px"},children:e.jsxs("svg",{width:"100",height:"100",viewBox:"0 0 80 80",fill:"none",children:[e.jsx("rect",{x:"10",y:"15",width:"60",height:"50",rx:"4",stroke:"#ccc",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M25 15 L25 10 M55 15 L55 10",stroke:"#ccc",strokeWidth:"2"}),e.jsx("path",{d:"M20 25 L60 25",stroke:"#ccc",strokeWidth:"2"}),e.jsx("path",{d:"M35 45 L45 45 M35 45 L40 40 M35 45 L40 50",stroke:"#66bb6a",strokeWidth:"2",strokeLinecap:"round"})]})}),e.jsx(a,{sx:{fontSize:{xs:"18px",md:"24px"},fontWeight:"500",marginBottom:{xs:"8px",md:"10px"},color:"#333"},children:"No Bookings Today"}),e.jsx(a,{sx:{fontSize:{xs:"14px",md:"16px"},color:"#666"},children:"All slots are available for booking"})]}),e.jsx(re,{variant:"contained",sx:{position:"fixed",bottom:{xs:"16px",md:"32px"},right:{xs:"16px",md:"32px"},backgroundColor:"#ef5350",color:"#fff",borderRadius:"50%",width:{xs:"56px",md:"64px"},height:{xs:"56px",md:"64px"},minWidth:"unset",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 6px 16px rgba(0,0,0,0.3)","&:hover":{backgroundColor:"#e53935"}},onClick:Ne,children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 5v14M5 12h14"})})}),e.jsx(ze,{fullScreen:!0,open:fe,onClose:R,PaperProps:{sx:{backgroundColor:"#fafafa"}},children:e.jsxs(s,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(s,{sx:{px:{xs:2,md:4},py:2.5,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#fff",borderBottom:"1px solid #f0f0f0",position:"sticky",top:0,zIndex:10},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(T,{onClick:R,sx:{color:"#333"},children:e.jsx(te,{})}),e.jsx(a,{variant:"h5",sx:{fontWeight:800,color:"#1a1a1a",letterSpacing:"-0.5px"},children:"Create New Booking"})]})}),e.jsx(Be,{sx:{flex:1,p:0,backgroundColor:"#f8f9fa"},children:e.jsxs(s,{sx:{maxWidth:"1200px",margin:"0 auto",p:{xs:2,md:4}},children:[D&&e.jsx(N,{severity:"error",sx:{mb:4,borderRadius:"16px",border:"1px solid #ffcdd2",boxShadow:"0 4px 12px rgba(239, 83, 80, 0.1)"},children:D}),e.jsxs(l,{container:!0,spacing:4,children:[e.jsx(l,{item:!0,xs:12,children:e.jsxs(s,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...w,mb:3},children:[e.jsx(ne,{sx:M}),"Client Information"]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(h,{fullWidth:!0,name:"fullName",label:"Full Name",variant:"outlined",value:r.fullName,onChange:f,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(ne,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(h,{fullWidth:!0,name:"contactNumber",label:"Contact Number",variant:"outlined",value:r.contactNumber,onChange:f,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(se,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(h,{fullWidth:!0,name:"emailAddress",label:"Email Address (Optional)",variant:"outlined",value:r.emailAddress,onChange:f,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(oe,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(h,{fullWidth:!0,name:"address",label:"Service Address (Optional)",variant:"outlined",value:r.address,onChange:f,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(Fe,{sx:{color:"#999",fontSize:20}})})}})})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(s,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...w,mb:3},children:[e.jsx(E,{sx:M}),"Service Selection"]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,children:e.jsxs(ae,{fullWidth:!0,variant:"outlined",children:[e.jsx(ie,{shrink:!0,children:"Module"}),e.jsxs(le,{name:"moduleId",value:r.moduleId,onChange:f,label:"Module",displayEmpty:!0,MenuProps:{PaperProps:{sx:{maxHeight:300,borderRadius:2,boxShadow:"0 8px 24px rgba(0,0,0,0.15)"}}},children:[e.jsx(W,{value:"",disabled:!0,children:e.jsx("span",{style:{color:"#999"},children:"Select Module"})}),I.map(t=>e.jsx(W,{value:t._id,children:t.title||t.name},t._id))]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(ae,{fullWidth:!0,variant:"outlined",children:[e.jsx(ie,{shrink:!0,children:"Package"}),e.jsxs(le,{name:"packageId",value:r.packageId,onChange:f,label:"Package",disabled:v.length===0,displayEmpty:!0,MenuProps:{PaperProps:{sx:{maxHeight:300,borderRadius:2,boxShadow:"0 8px 24px rgba(0,0,0,0.15)"}}},children:[e.jsx(W,{value:"",disabled:!0,children:e.jsx("span",{style:{color:"#999"},children:v.length===0?"No packages available":"Select Package"})}),v.map(t=>e.jsx(W,{value:t._id,children:t.packageTitle||t.packageName||t.name||t.title},t._id))]})]})}),X&&e.jsx(l,{item:!0,xs:12,children:e.jsxs(N,{severity:"info",icon:!1,sx:{borderRadius:"16px",backgroundColor:"rgba(239, 83, 80, 0.05)",color:"#ef5350",border:"1px solid rgba(239, 83, 80, 0.1)","& .MuiAlert-message":{fontWeight:600}},children:["Price: AED ",X.price||"Contact for Price"]})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(h,{fullWidth:!0,name:"numberOfGuests",label:"Number of Guests",type:"number",variant:"outlined",value:r.numberOfGuests,onChange:f,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(Re,{sx:{color:"#999",fontSize:20}})})}})})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(s,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...w,mb:3},children:[e.jsx(Le,{sx:M}),"Scheduling"]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsxs(l,{item:!0,xs:12,md:6,children:[e.jsx(h,{fullWidth:!0,name:"bookingDate",label:"Booking Date",type:"date",variant:"outlined",value:r.bookingDate,onChange:f,InputLabelProps:{shrink:!0},sx:{mb:2}}),e.jsx(a,{variant:"subtitle2",sx:{mb:2,mt:1,fontWeight:700,color:"#555"},children:"Select Time Slots"}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1.5,p:2,backgroundColor:"#fcfcfc",borderRadius:"16px",border:"1px solid #f5f5f5"},children:[e.jsx(de,{control:e.jsx(xe,{checked:r.timeSlot.includes("Morning"),onChange:()=>Q("Morning"),sx:{color:"#ef5350","&.Mui-checked":{color:"#ef5350"}}}),label:e.jsxs(s,{sx:{ml:1},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:600},children:"Morning Session"}),e.jsx(a,{variant:"caption",sx:{color:"#999"},children:"9:00 AM - 1:00 PM"})]})}),e.jsx(Ee,{sx:{my:1,opacity:.5}}),e.jsx(de,{control:e.jsx(xe,{checked:r.timeSlot.includes("Evening"),onChange:()=>Q("Evening"),sx:{color:"#ef5350","&.Mui-checked":{color:"#ef5350"}}}),label:e.jsxs(s,{sx:{ml:1},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:600},children:"Evening Session"}),e.jsx(a,{variant:"caption",sx:{color:"#999"},children:"6:00 PM - 10:00 PM"})]})})]})]}),e.jsxs(l,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"subtitle2",sx:{mb:2,fontWeight:700,color:"#555"},children:"Payment Method"}),e.jsx(l,{container:!0,spacing:2,children:[{id:"Cash",label:"Cash",icon:e.jsx(Oe,{})},{id:"Card",label:"Card",icon:e.jsx($e,{})},{id:"UPI",label:"UPI",icon:e.jsx(Ye,{})},{id:"Bank Transfer",label:"Bank",icon:e.jsx(_e,{})},{id:"Other",label:"Other",icon:e.jsx(Ge,{})}].map(t=>e.jsx(l,{item:!0,xs:6,children:e.jsxs(s,{onClick:()=>y(o=>({...o,paymentType:t.id})),sx:{p:1.5,display:"flex",flexDirection:"column",alignItems:"center",gap:.5,borderRadius:"12px",border:"2px solid",borderColor:r.paymentType===t.id?"#ef5350":"#f0f0f0",backgroundColor:r.paymentType===t.id?"#fff5f5":"#fff",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{borderColor:"#ef5350",transform:"translateY(-2px)"}},children:[e.jsx(s,{sx:{color:r.paymentType===t.id?"#ef5350":"#666",transform:"scale(0.8)"},children:t.icon}),e.jsx(a,{variant:"caption",sx:{fontWeight:700,color:r.paymentType===t.id?"#ef5350":"#666",fontSize:"10px"},children:t.label})]})},t.id))})]})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(s,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...w,mb:3},children:[e.jsx(E,{sx:M}),"Additional Notes"]}),e.jsx(h,{fullWidth:!0,name:"additionalNotes",label:"Special Notes",multiline:!0,rows:10,variant:"outlined",value:r.additionalNotes,onChange:f,placeholder:"E.g. Full day duty, specific routes..."})]})})]})]})}),e.jsx(s,{sx:{p:2.5,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderTop:"1px solid #f0f0f0",display:"flex",justifyContent:"center",zIndex:1e3},children:e.jsx(re,{onClick:Me,disabled:H,variant:"contained",sx:{backgroundColor:"#ef5350",px:8,py:1.8,borderRadius:"16px",fontWeight:700},children:H?e.jsx(L,{size:24,color:"inherit"}):"Confirm & Save Booking"})})]})})]})}export{Ze as default};
