import{r as o,j as e,B as g,T as p,a7 as k,S as x,q as C,f as t,g as w}from"./index-BJXhio1F.js";import{T as B}from"./TableContainer-DEw3QlpJ.js";import{T,a as S,b as l,c as s,d as y}from"./TableRow-DJhHHfsF.js";const b=()=>{const[h,j]=o.useState([]),[r,m]=o.useState(""),u=async()=>{try{const a=((await w.get("https://api.bookmyevent.ae/api/bookings")).data.bookings||[]).filter(f=>{var d;return((d=f.status)==null?void 0:d.toLowerCase())==="accepted"});j(a)}catch(i){console.error("Error loading confirmed bookings:",i)}};o.useEffect(()=>{u()},[]);const c=h.filter(i=>{var n,a;return i._id.includes(r)||((n=i.fullName)==null?void 0:n.toLowerCase().includes(r.toLowerCase()))||((a=i.emailAddress)==null?void 0:a.toLowerCase().includes(r.toLowerCase()))});return e.jsxs(g,{p:2,children:[e.jsx(p,{variant:"h4",gutterBottom:!0,children:"Confirmed Bookings"}),e.jsxs(k,{sx:{mt:2},children:[e.jsxs(x,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",p:2,children:[e.jsx(C,{label:"Search Booking ID, Name, Email",value:r,onChange:i=>m(i.target.value),size:"small",sx:{maxWidth:300}}),e.jsx(t,{variant:"contained",color:"primary",children:"Export"})]}),e.jsx(B,{children:e.jsxs(T,{stickyHeader:!0,children:[e.jsx(S,{children:e.jsxs(l,{children:[e.jsx(s,{children:"S#"}),e.jsx(s,{children:"Booking ID"}),e.jsx(s,{children:"Name"}),e.jsx(s,{children:"Email"}),e.jsx(s,{children:"Guests"}),e.jsx(s,{children:"Booking Date"}),e.jsx(s,{children:"Amount"}),e.jsx(s,{children:"Status"}),e.jsx(s,{children:"Action"})]})}),e.jsxs(y,{children:[c.map((i,n)=>e.jsxs(l,{children:[e.jsx(s,{children:n+1}),e.jsx(s,{children:i._id}),e.jsx(s,{children:i.fullName}),e.jsx(s,{children:i.emailAddress}),e.jsx(s,{children:i.numberOfGuests}),e.jsx(s,{children:new Date(i.bookingDate).toLocaleDateString()}),e.jsxs(s,{children:["â‚¹",i.finalPrice]}),e.jsx(s,{children:i.status}),e.jsx(s,{children:e.jsxs(x,{direction:"row",spacing:1,children:[e.jsx(t,{variant:"outlined",size:"small",children:"View"}),e.jsx(t,{variant:"outlined",size:"small",children:"Download"})]})})]},i._id)),c.length===0&&e.jsx(l,{children:e.jsx(s,{colSpan:9,align:"center",children:"No Confirmed Bookings Found"})})]})]})})]})]})};export{b as default};
