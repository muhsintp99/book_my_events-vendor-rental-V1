import{ad as Oe,ae as Me,r as g,x as Ne,u as ze,i as Ue,j as e,B as r,b as pe,af as Ve,T as l,p as F,N as L,s as p,F as he,I as xe,ab as z,W as P,S as Se,f as H,ag as Ge,ah as qe,g as q,ai as fe,C as ke,V as Ie,a8 as Je,aa as Ke,t as Qe,aj as Ye,w as Ze}from"./index-DQsvxoBn.js";import{S as O}from"./Switch-gu_dasGE.js";import{C as Xe}from"./CardMedia-5yNoGftg.js";import{C as ie}from"./CloudUpload-DHYLNvVb.js";import{D as et}from"./DialogActions-TAHLOrYN.js";const re=qe(r)(({theme:h})=>({border:"2px dashed #e0e0e0",borderRadius:h.shape.borderRadius,padding:h.spacing(3),textAlign:"center",backgroundColor:h.palette.grey[50],cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"150px","&:hover":{borderColor:"#E15B65"},'& input[type="file"]':{display:"none"}})),be={monday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Pm",endTime:"12:00",endPeriod:"Am",price:""}},tuesday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},wednesday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},thursday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},friday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"00:00",startPeriod:"Am",endTime:"00:00",endPeriod:"Pm",price:""}},saturday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},sunday:{morning:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}}},tt={monday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Pm",endTime:"12:00",endPeriod:"Am",price:""}},tuesday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},wednesday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},thursday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},friday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!1,startTime:"00:00",startPeriod:"Am",endTime:"00:00",endPeriod:"Pm",price:""}},saturday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}},sunday:{morning:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""},evening:{enabled:!0,startTime:"08:00",startPeriod:"Am",endTime:"03:00",endPeriod:"Pm",price:""}}},at=(h,A)=>{const y={};return["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].forEach(i=>{var Z,U;y[i]={morning:null,evening:null};const f=(Z=h[i])==null?void 0:Z.morning;if(f!=null&&f.enabled&&f.price.trim()){const W=parseFloat(f.price)||0;y[i].morning={startTime:f.startTime,startAmpm:f.startPeriod.toUpperCase(),endTime:f.endTime,endAmpm:f.endPeriod.toUpperCase(),perDay:A==="per_function"?W:0,perHour:A==="per_hour"?W:0,perPerson:A==="per_person"?W:0}}const v=(U=h[i])==null?void 0:U.evening;if(v!=null&&v.enabled&&v.price.trim()){const W=parseFloat(v.price)||0;y[i].evening={startTime:v.startTime,startAmpm:v.startPeriod.toUpperCase(),endTime:v.endTime,endAmpm:v.endPeriod.toUpperCase(),perDay:A==="per_function"?W:0,perHour:A==="per_hour"?W:0,perPerson:A==="per_person"?W:0}}}),y},nt=h=>{const A={...be};return typeof h=="object"&&!Array.isArray(h)?Object.entries(h).forEach(([y,i])=>{const f=y.toLowerCase();if(A[f]){if(i.morning){const v=i.morning.perDay||i.morning.perHour||i.morning.perPerson||0;A[f].morning={enabled:!0,startTime:i.morning.startTime||"08:00",startPeriod:(i.morning.startAmpm||"AM").toLowerCase(),endTime:i.morning.endTime||"03:00",endPeriod:(i.morning.endAmpm||"PM").toLowerCase(),price:v.toString()}}if(i.evening){const v=i.evening.perDay||i.evening.perHour||i.evening.perPerson||0;A[f].evening={enabled:!0,startTime:i.evening.startTime||"08:00",startPeriod:(i.evening.startAmpm||"PM").toLowerCase(),endTime:i.evening.endTime||"12:00",endPeriod:(i.evening.endAmpm||"AM").toLowerCase(),price:v.toString()}}}}):Array.isArray(h)&&h.forEach(y=>{const i=y.day.toLowerCase(),f=y.slotType;if(A[i]&&A[i][f]){const v=y.perDay||y.perHour||y.perPerson||y.price||0;A[i][f]={...A[i][f],enabled:!0,startTime:y.startTime,startPeriod:y.startAmpm.toLowerCase(),endTime:y.endTime,endPeriod:y.endAmpm.toLowerCase(),price:v.toString()}}}),A},dt=()=>{const{id:h}=Oe(),A=Me();g.useEffect(()=>{const t=h?`venue-refreshed-${h}`:"venue-create-refreshed";sessionStorage.getItem(t)?Object.keys(sessionStorage).filter(o=>o.startsWith("venue-refreshed-")||o==="venue-create-refreshed").forEach(o=>{o!==t&&sessionStorage.removeItem(o)}):(sessionStorage.setItem(t,"true"),setTimeout(()=>{window.location.reload()}))},[h]),g.useEffect(()=>{h&&(sessionStorage.getItem("from-package-selection")||Te(h))},[h]);const y=Ne(),i=ze(),f=Ue(i.breakpoints.down("md")),v="https://api.bookmyevent.ae/api",Z="https://bookmyevent.ae",U="AIzaSyAfLUm1kPmeMkHh1Hr5nbgNpQJOsNa7B78",W=g.useRef(null),E=g.useRef(null),se=g.useRef(null),[_,ye]=g.useState(h?"edit":"create"),[a,R]=g.useState({venueName:"",description:"",venueAddress:"",categories:"",latitude:"",longitude:"",openingHours:"",closingHours:"",holidayScheduling:"",parkingAvailability:!1,parkingCapacity:"",foodCateringAvailability:!1,stageLightingAudio:!1,wheelchairAccessibility:!1,securityArrangements:!1,wifiAvailability:!1,acAvailable:!1,nonAcAvailable:!1,nonAcDiscount:"",acType:"Not Specified",washroomsInfo:"",dressingRooms:"",venueType:"",discount:"",advanceDeposit:"",cancellationPolicy:"",extraCharges:"",seatingArrangement:"",maxGuestsSeated:"",maxGuestsStanding:"",multipleHalls:!1,nearbyTransport:"",accessibilityInfo:"",elderlyAccessibility:!1,searchTags:"",selectedPackageIds:[]}),[Ee,oe]=g.useState([]),[le,J]=g.useState([]),[K,de]=g.useState([]),[j,ce]=g.useState({thumbnail:null,auditoriumImage:null,floorPlan:null,documents:null}),[T,ve]=g.useState({thumbnail:"",auditoriumImage:"",floorPlan:"",documents:""}),[b,ue]=g.useState(be),[me,w]=g.useState({open:!1,message:"",severity:"success"}),[X,V]=g.useState(!1),[N,je]=g.useState(!1),[B,Ae]=g.useState(null),[Be,ee]=g.useState(!1),[De,Pe]=g.useState(""),m={"& .MuiOutlinedInput-root":{"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"#E15B65"}},"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"#E15B65"}}}};g.useEffect(()=>{$e(),We()},[]),g.useEffect(()=>{h&&Te(h)},[h]),g.useEffect(()=>{const t=sessionStorage.getItem("tempFormData");t&&(R(o=>{var d,u,x,C;return{...JSON.parse(t),selectedPackageIds:((u=(d=A.state)==null?void 0:d.selectedPackages)==null?void 0:u.map(M=>M._id))||o.selectedPackageIds,foodCateringAvailability:((C=(x=A.state)==null?void 0:x.selectedPackages)==null?void 0:C.length)>0||o.foodCateringAvailability}}),sessionStorage.removeItem("tempFormData"));const n=A.state;n!=null&&n.selectedPackages&&n.selectedPackages.length>0&&(de(n.selectedPackages),R(o=>({...o,selectedPackageIds:n.selectedPackages.map(d=>d._id),foodCateringAvailability:!0})),window.history.replaceState({},document.title))},[A.state]),g.useEffect(()=>{h&&le.length>0&&a.selectedPackageIds.length>0&&de(le.filter(t=>a.selectedPackageIds.includes(t._id)))},[le,a.selectedPackageIds,h]);const We=async()=>{try{const t=localStorage.getItem("token"),n=localStorage.getItem("providerId")||localStorage.getItem("moduleId");if(!n){console.warn("Provider ID not available"),J([]);return}if(!t){console.warn("Token not available"),J([]);return}const o=await fetch(`${v}/packages/provider/${n}`,{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});if(!o.ok){console.error(`HTTP error! Status: ${o.status}`),J([]);return}const d=await o.json();let u=[];d.packages&&Array.isArray(d.packages)?u=d.packages:d.success&&Array.isArray(d.data)&&(u=d.data),J(u),u.length===0&&console.log("No packages found for this provider")}catch(t){console.error("Error fetching packages:",t),J([])}};g.useEffect(()=>{if(window.google&&window.google.maps){je(!0);return}const t=document.createElement("script");return t.src=`https://maps.googleapis.com/maps/api/js?key=${U}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{je(!0)},document.head.appendChild(t),()=>{document.head.contains(t)&&document.head.removeChild(t)}},[U]),g.useEffect(()=>{N&&window.google&&window.google.maps&&Re()},[N]);const Re=g.useCallback(()=>{if(!window.google||!W.current||!N)return;const t=a.latitude&&a.longitude?parseFloat(a.latitude):20.5937,n=a.latitude&&a.longitude?parseFloat(a.longitude):78.9629,o={lat:t,lng:n},d=new window.google.maps.Map(W.current,{zoom:12,center:o});d.addListener("click",u=>{const x=u.latLng.lat(),C=u.latLng.lng();R(S=>({...S,latitude:x.toString(),longitude:C.toString()})),E.current&&E.current.setMap(null),E.current=new window.google.maps.Marker({position:{lat:x,lng:C},map:d}),new window.google.maps.Geocoder().geocode({location:{lat:x,lng:C}},(S,G)=>{G==="OK"&&S[0]?(R(k=>({...k,venueAddress:S[0].formatted_address})),w({open:!0,message:"Location set and address auto-filled!",severity:"success"})):w({open:!0,message:"Location set, but could not determine address.",severity:"info"})})}),Ae(d)},[N,a.latitude,a.longitude]);g.useEffect(()=>{if(!N||!B||!se.current||!window.google)return;const t=new window.google.maps.places.Autocomplete(se.current,{fields:["place_id","geometry","name","formatted_address"]}),n=t.addListener("place_changed",()=>{const o=t.getPlace();if(!o.geometry||!o.geometry.location)return;const d=o.geometry.location;o.geometry.viewport?B.fitBounds(o.geometry.viewport):(B.setCenter(d),B.setZoom(17)),E.current&&E.current.setMap(null),E.current=new window.google.maps.Marker({position:d,map:B}),R(u=>({...u,latitude:d.lat().toString(),longitude:d.lng().toString(),venueAddress:o.formatted_address||o.name})),w({open:!0,message:"Location selected!",severity:"success"})});return()=>{window.google&&window.google.maps.event&&window.google.maps.event.removeListener(n)}},[N,B]),g.useEffect(()=>{if(!B||!a.latitude||!a.longitude)return;const t={lat:parseFloat(a.latitude),lng:parseFloat(a.longitude)};B.setCenter(t),B.setZoom(12),E.current?E.current.setPosition(t):E.current=new window.google.maps.Marker({position:t,map:B})},[a.latitude,a.longitude,B]);const c=t=>{const{name:n,value:o,type:d,checked:u}=t.target;R(x=>({...x,[n]:d==="checkbox"?u:o}))},te=t=>n=>{const o=n.target.files[0];o&&ce(d=>({...d,[t]:o}))},ae=t=>n=>{n.preventDefault();const o=n.dataTransfer.files[0];o&&ce(d=>({...d,[t]:o}))},D=(t,n,o,d)=>{ue(u=>({...u,[t]:{...u[t],[n]:{...u[t][n],[o]:d}}}))},ne=t=>t.preventDefault(),Ce=()=>{R({venueName:"",description:"",venueAddress:"",categories:"",latitude:"",longitude:"",openingHours:"",closingHours:"",holidayScheduling:"",parkingAvailability:!1,parkingCapacity:"",foodCateringAvailability:!1,stageLightingAudio:!1,wheelchairAccessibility:!1,securityArrangements:!1,wifiAvailability:!1,acAvailable:!1,nonAcAvailable:!1,acType:"Not Specified",washroomsInfo:"",dressingRooms:"",venueType:"",discount:"",advanceDeposit:"",cancellationPolicy:"",extraCharges:"",seatingArrangement:"",maxGuestsSeated:"",maxGuestsStanding:"",multipleHalls:!1,nearbyTransport:"",accessibilityInfo:"",elderlyAccessibility:!1,searchTags:"",selectedPackageIds:[]}),de([]),ue(tt),ce({thumbnail:null,auditoriumImage:null,floorPlan:null,documents:null}),ve({thumbnail:"",auditoriumImage:"",floorPlan:"",documents:""}),ye("create"),E.current&&(E.current.setMap(null),E.current=null),B&&Ae(null)},_e=()=>{const t=[];return a.venueName.trim()||t.push("Venue name is required"),a.venueAddress.trim()||t.push("Venue address is required"),a.categories||t.push("Category is required"),a.seatingArrangement||t.push("Seating arrangement is required"),a.maxGuestsSeated||t.push("Max guests seated is required"),a.venueType||t.push("Venue type is required"),_==="create"?(j.thumbnail||t.push("Thumbnail image is required"),j.auditoriumImage||t.push("Auditorium image is required")):(!j.thumbnail&&!T.thumbnail&&t.push("Thumbnail image is required"),!j.auditoriumImage&&!T.auditoriumImage&&t.push("Auditorium image is required")),Object.values(b).some(o=>o.morning.enabled&&o.morning.price.trim()||o.evening.enabled&&o.evening.price.trim())||t.push("At least one time slot with price is required"),a.foodCateringAvailability&&(!a.selectedPackageIds||a.selectedPackageIds.length===0)&&t.push("At least one food package is required"),t},$e=async()=>{try{const t=localStorage.getItem("token"),n=localStorage.getItem("moduleId"),o="https://api.bookmyevent.ae";if(!t){console.warn("No authentication token found.");return}if(!n){console.warn("No moduleId found in localStorage.");return}const d=await fetch(`${o}/api/categories/modules/${n}`,{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});if(!d.ok)throw new Error(`HTTP error! Status: ${d.status}`);const u=await d.json();if(u.success&&Array.isArray(u.data)){const x=u.data.map(C=>({id:C.categories||C._id||"",name:(C==null?void 0:C.title)||C.name||"Unnamed Category"}));oe(x)}else w({open:!0,message:"No categories found.",severity:"warning"}),oe([])}catch(t){console.error("Error fetching categories:",t),w({open:!0,message:"Failed to fetch categories. Please try again.",severity:"error"}),oe([])}},Te=async t=>{var n,o,d,u,x,C,M,S,G;V(!0);try{const k=localStorage.getItem("token");if(!k)throw new Error("No authentication token found. Please log in.");const s=await(await fetch(`${v}/venues/${t}`,{headers:{Authorization:`Bearer ${k}`}})).json();if(!s.success)throw new Error(s.message||"Failed to fetch venue");let $="",ge="";if(s.data.discount)try{const I=typeof s.data.discount=="string"?JSON.parse(s.data.discount):s.data.discount;$=((n=I.packageDiscount)==null?void 0:n.toString())||"",ge=((o=I.nonAc)==null?void 0:o.toString())||""}catch{$=s.data.discount.toString()||""}R({venueName:s.data.venueName||"",description:s.data.shortDescription||"",venueAddress:s.data.venueAddress||"",categories:((x=(u=(d=s==null?void 0:s.data)==null?void 0:d.categories)==null?void 0:u[0])==null?void 0:x._id)||"",latitude:((C=s.data.latitude)==null?void 0:C.toString())||"",longitude:((M=s.data.longitude)==null?void 0:M.toString())||"",openingHours:s.data.openingHours||"",closingHours:s.data.closingHours||"",holidayScheduling:s.data.holidaySchedule||"",parkingAvailability:!!s.data.parkingAvailability,parkingCapacity:s.data.parkingCapacity||"",foodCateringAvailability:!!s.data.foodCateringAvailability,stageLightingAudio:!!s.data.stageLightingAudio,wheelchairAccessibility:!!s.data.wheelchairAccessibility,securityArrangements:!!s.data.securityArrangements,wifiAvailability:!!s.data.wifiAvailability,acAvailable:!!s.data.acAvailable,nonAcAvailable:!!s.data.nonAcAvailable,acType:s.data.acType||"Not Specified",washroomsInfo:s.data.washroomsInfo||"",dressingRooms:s.data.dressingRooms||"",venueType:s.data.venueType||"",discount:$,nonAcDiscount:ge,advanceDeposit:s.data.advanceDeposit||"",cancellationPolicy:s.data.cancellationPolicy||"",extraCharges:s.data.extraCharges||"",seatingArrangement:s.data.seatingArrangement||"",maxGuestsSeated:s.data.maxGuestsSeated||"",maxGuestsStanding:s.data.maxGuestsStanding||"",multipleHalls:!!s.data.multipleHalls,nearbyTransport:s.data.nearbyTransport||"",accessibilityInfo:s.data.accessibilityInfo||"",elderlyAccessibility:!!s.data.accessibilityInfo,searchTags:Array.isArray(s.data.searchTags)?s.data.searchTags.join(", "):s.data.searchTags||"",selectedPackageIds:Array.isArray(s.data.packages)?s.data.packages.map(I=>typeof I=="string"?I:I._id):[]}),console.log("hello",a==null?void 0:a.categories),ue(nt(s.data.pricingSchedule)||be),ve({thumbnail:s.data.thumbnail||"",auditoriumImage:((S=s.data.images)==null?void 0:S[0])||"",floorPlan:((G=s.data.images)==null?void 0:G[1])||"",documents:s.data.documents||""}),ye("edit")}catch(k){console.error("Error fetching venue:",k),w({open:!0,message:k.message.includes("expired")?"Session expired. Please log in again.":`Error fetching venue: ${k.message}`,severity:"error"}),k.message.includes("expired")&&y("/login")}finally{V(!1)}},Fe=t=>{const n=parseFloat(t)||0;return n<0?0:n>100?(w({open:!0,message:"Discount capped at 100%.",severity:"warning"}),100):n},Le=t=>{const n=parseFloat(t)||0;return n<0?(w({open:!0,message:"Fixed discount must be a positive number.",severity:"warning"}),0):n},He=async t=>{var d;t.preventDefault(),V(!0),w({open:!1,message:"",severity:"success"});const n=localStorage.getItem("token");if(!n){w({open:!0,message:"No authentication token found. Please log in.",severity:"error"}),V(!1);return}const o=_e();if(o.length>0){w({open:!0,message:o.join(", "),severity:"error"}),V(!1);return}try{let u=h;const x=new FormData,C=["parkingAvailability","foodCateringAvailability","stageLightingAudio","wheelchairAccessibility","securityArrangements","wifiAvailability","acAvailable","nonAcAvailable","multipleHalls","elderlyAccessibility"];let M={packageDiscount:Fe(a.discount),nonAc:a.nonAcAvailable?Le(a.nonAcDiscount):0};const S={...a,shortDescription:a.description||"",holidaySchedule:a.holidayScheduling||"",categories:a.categories||"",accessibilityInfo:a.accessibilityInfo||"",discount:JSON.stringify(M)};delete S.description,delete S.holidayScheduling,delete S.venueType,delete S.selectedPackageIds,delete S.nonAcDiscount,Object.entries(S).forEach(([s,$])=>{s==="searchTags"&&$?$.split(",").map(I=>I.trim()).filter(I=>I).forEach(I=>x.append(s,I)):C.includes(s)?x.append(s,$.toString()):x.append(s,$||"")}),x.append("venueType",a.venueType||"");const G=at(b,a.venueType);x.append("pricingSchedule",JSON.stringify(G)),a.selectedPackageIds&&a.selectedPackageIds.length>0&&x.append("packages",JSON.stringify(a.selectedPackageIds)),j.thumbnail&&x.append("thumbnail",j.thumbnail),j.auditoriumImage&&x.append("images",j.auditoriumImage),j.floorPlan&&x.append("images",j.floorPlan);let k;_==="create"?k=await fetch(`${v}/venues/`,{method:"POST",body:x,headers:{Authorization:`Bearer ${n}`}}):k=await fetch(`${v}/venues/${h}`,{method:"PUT",body:x,headers:{Authorization:`Bearer ${n}`}});const Y=await k.json();if(!k.ok||!Y.success)throw new Error(Y.message||"Failed to create/update venue");if(u=((d=Y.data)==null?void 0:d._id)||Y._id,console.log("âœ… Venue created/updated with discount:",M),a.selectedPackageIds&&a.selectedPackageIds.length>0&&_==="edit"){const s=await fetch(`${v}/venues/${u}`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({packages:a.selectedPackageIds})}),$=await s.json();s.ok||console.error("Failed to link package to venue:",$.message)}w({open:!0,message:_==="edit"?"Venue updated successfully":"Venue created successfully",severity:"success"}),_==="edit"?setTimeout(()=>y("/venue-setup/lists"),2e3):Ce()}catch(u){console.error("Error submitting form:",u),w({open:!0,message:u.message.includes("expired")?"Session expired. Please log in again.":`Error ${_==="edit"?"updating":"creating"} venue: ${u.message}`,severity:"error"}),u.message.includes("expired")&&y("/login")}finally{V(!1)}},we=(t,n)=>{n!=="clickaway"&&w({open:!1,message:"",severity:"success"})},Q=t=>t?`${Z}/${t}`:"";return e.jsx(r,{sx:{p:f?2:3,backgroundColor:i.palette.grey[100],minHeight:"100vh",width:"100%"},children:e.jsxs(r,{sx:{maxWidth:"lg",margin:"auto",backgroundColor:"white",borderRadius:i.shape.borderRadius,boxShadow:i.shadows[1],p:f?2:3,overflowX:"hidden"},children:[e.jsx(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[_==="edit"&&e.jsx(pe,{onClick:()=>y("/venue-setup/lists"),color:"primary",children:e.jsx(Ve,{})}),e.jsx(l,{variant:"h4",component:"h1",children:_==="edit"?"Edit Venue":"Add New Venue"})]})}),e.jsx(l,{variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Insert the venue details"}),e.jsxs(r,{component:"form",onSubmit:He,children:[e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${i.palette.grey[200]}`},children:e.jsxs(L,{sx:{"&:last-child":{pb:2}},children:[e.jsx(l,{variant:"h4",gutterBottom:!0,children:"Venue Details"}),e.jsx(p,{fullWidth:!0,label:"Venue Name*",name:"venueName",value:a.venueName,onChange:c,placeholder:"Type venue name",sx:{mb:2,...m},required:!0}),e.jsx(p,{fullWidth:!0,label:"Description",name:"description",value:a.description,onChange:c,placeholder:"Describe your auditorium",multiline:!0,rows:4,sx:{mb:2,...m}}),e.jsxs(he,{fullWidth:!0,variant:"outlined",required:!0,sx:{mb:2,...m},children:[e.jsx(xe,{id:"category-label",children:"Category*"}),e.jsxs(z,{labelId:"category-label",name:"categories",value:a.categories,label:"Category",onChange:c,children:[e.jsx(P,{value:"",children:"Select category"}),Ee.map(t=>e.jsx(P,{value:t.id,children:t.name},t.id))]})]}),e.jsx(p,{fullWidth:!0,label:"Search Location",inputRef:se,variant:"outlined",placeholder:"Enter a location",sx:{mb:2,...m}}),N&&U?e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Click on the map below to select a location"}),e.jsx(r,{ref:W,sx:{height:300,width:"100%",borderRadius:i.shape.borderRadius,border:`1px solid ${i.palette.grey[300]}`,mb:2}})]}):e.jsx(r,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${i.palette.grey[300]}`,borderRadius:i.shape.borderRadius,mb:2},children:e.jsx(l,{variant:"body2",color:"text.secondary",children:"Map loading..."})}),e.jsxs(r,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(p,{sx:{flex:1,...m},label:"Latitude*",name:"latitude",value:a.latitude,onChange:c,placeholder:"e.g., 25.2048",type:"number",inputProps:{step:"0.0001"},required:!0}),e.jsx(p,{sx:{flex:1,...m},label:"Longitude*",name:"longitude",value:a.longitude,onChange:c,placeholder:"e.g., 55.2708",type:"number",inputProps:{step:"0.0001"},required:!0})]}),e.jsx(p,{fullWidth:!0,label:"Venue Address*",name:"venueAddress",value:a.venueAddress,onChange:c,placeholder:"Enter complete address",multiline:!0,rows:2,sx:{mb:2,...m},required:!0}),e.jsxs(r,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Operating Hours"}),e.jsxs(r,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(p,{fullWidth:!0,label:"Opening Hours",name:"openingHours",value:a.openingHours,onChange:c,placeholder:"e.g., 09:00 AM",sx:m}),e.jsx(p,{fullWidth:!0,label:"Closing Hours",name:"closingHours",value:a.closingHours,onChange:c,placeholder:"e.g., 11:00 PM",sx:m})]}),e.jsx(p,{fullWidth:!0,label:"Holiday Scheduling",name:"holidayScheduling",value:a.holidayScheduling,onChange:c,placeholder:"Describe holiday hours or closures",multiline:!0,rows:2,sx:m})]})]})})}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${i.palette.grey[200]}`},children:e.jsxs(L,{sx:{"&:last-child":{pb:2}},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Venue Facilities"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Specify available facilities"}),e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:f?"1fr":"repeat(2, 1fr)",gap:i.spacing(3)},children:[e.jsxs(Se,{spacing:2,children:[e.jsx(H,{control:e.jsx(O,{name:"parkingAvailability",checked:a.parkingAvailability,onChange:c}),label:"Parking Availability"}),e.jsx(H,{control:e.jsx(O,{name:"foodCateringAvailability",checked:a.foodCateringAvailability,onChange:c}),label:"Food & Catering Availability"}),a.foodCateringAvailability&&e.jsxs(e.Fragment,{children:[e.jsx(r,{sx:{backgroundColor:"#fce4ec",border:"1px solid #f8bbd9",borderRadius:1,p:2,mt:1,cursor:"pointer","&:hover":{backgroundColor:"#f8bbd9"}},onClick:()=>{sessionStorage.setItem("tempFormData",JSON.stringify(a)),y("/venue-setup/foodmenu",{state:{selectingForVenue:!0,preSelected:K}})},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{variant:"h5",color:"#E15B65",children:"ðŸ´"}),e.jsx(l,{variant:"subtitle1",color:"#E15B65",children:"Menu Selection"})]}),K.length>0&&e.jsx(Ge,{label:K.length,color:"primary",size:"small"})]})}),K.length>0&&e.jsx(r,{sx:{mt:2,display:"flex",gap:2,flexWrap:"wrap"},children:K.map(t=>{const n=t.thumbnail?`https://api.bookmyevent.ae/${t.thumbnail}`:"/placeholder.jpg";return e.jsxs(F,{sx:{width:150,height:160},children:[e.jsx(Xe,{component:"img",height:"120",image:n,alt:t.title,sx:{objectFit:"cover"},onError:o=>{console.error("Image failed to load:",n),o.target.src="/placeholder.jpg"}}),e.jsx(L,{sx:{p:1},children:e.jsx(l,{variant:"body2",noWrap:!0,sx:{fontSize:"0.75rem"},children:t.title})})]},t._id)})})]}),e.jsx(H,{control:e.jsx(O,{name:"stageLightingAudio",checked:a.stageLightingAudio,onChange:c}),label:"Stage / Lighting / Audio System"}),e.jsx(H,{control:e.jsx(O,{name:"acAvailable",checked:a.acAvailable,onChange:c}),label:"AC Available"}),a.acAvailable&&e.jsxs(he,{fullWidth:!0,variant:"outlined",sx:{mt:1,...m},children:[e.jsx(xe,{id:"ac-type-label",children:"AC Type"}),e.jsxs(z,{labelId:"ac-type-label",name:"acType",value:a.acType,label:"AC Type",onChange:c,children:[e.jsx(P,{value:"Not Specified",children:"Not Specified"}),e.jsx(P,{value:"Central AC",children:"Central AC"}),e.jsx(P,{value:"Split AC",children:"Split AC"}),e.jsx(P,{value:"Window AC",children:"Window AC"}),e.jsx(P,{value:"Coolers",children:"Coolers"})]})]}),e.jsx(p,{fullWidth:!0,label:"Parking Capacity",name:"parkingCapacity",value:a.parkingCapacity,onChange:c,placeholder:"Number of spots",type:"number",sx:m}),e.jsx(p,{fullWidth:!0,label:"Dressing Rooms/Green Rooms",name:"dressingRooms",value:a.dressingRooms,onChange:c,placeholder:"Details about dressing rooms",sx:m})]}),e.jsxs(Se,{spacing:2,children:[e.jsx(H,{control:e.jsx(O,{name:"wheelchairAccessibility",checked:a.wheelchairAccessibility,onChange:c}),label:"Wheelchair Accessibility"}),e.jsx(H,{control:e.jsx(O,{name:"securityArrangements",checked:a.securityArrangements,onChange:c}),label:"Security Arrangements"}),e.jsx(H,{control:e.jsx(O,{name:"wifiAvailability",checked:a.wifiAvailability,onChange:c}),label:"Wi-Fi Availability"}),e.jsx(H,{control:e.jsx(O,{name:"nonAcAvailable",checked:a.nonAcAvailable,onChange:c}),label:"Non AC Available"}),a.nonAcAvailable&&e.jsxs(r,{sx:{backgroundColor:"#fce4ec",border:"1px solid #f8bbd9",borderRadius:1,p:2,mt:1},children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,sx:{color:"#c2185b",fontWeight:600},children:"Non-AC Discount Pricing"}),e.jsx(p,{fullWidth:!0,label:"Fixed Discount Amount (â‚¹)",name:"nonAcDiscount",value:a.nonAcDiscount,onChange:c,placeholder:"e.g., 500, 1000, 2000",type:"number",inputProps:{min:0},sx:{mb:2,...m}}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Note: You can set either percentage or fixed amount as discount for Non-AC bookings"})]}),e.jsx(p,{fullWidth:!0,label:"Washrooms/Restrooms Info",name:"washroomsInfo",value:a.washroomsInfo,onChange:c,placeholder:"Details about washrooms",sx:m})]})]})]})})}),e.jsxs(r,{sx:{display:"flex",flexDirection:f?"column":"row",gap:3,mb:4},children:[e.jsx(F,{sx:{flex:f?"auto":1,p:2,boxShadow:"none",border:`1px solid ${i.palette.grey[200]}`},children:e.jsxs(L,{sx:{"&:last-child":{pb:2}},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Venue Thumbnail*"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Choose the main image that represents your venue."}),e.jsxs(re,{onDragOver:ne,onDrop:ae("thumbnail"),onClick:()=>document.getElementById("thumbnail-upload").click(),children:[j.thumbnail?e.jsxs(r,{children:[e.jsx("img",{src:URL.createObjectURL(j.thumbnail),alt:"Thumbnail preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:i.spacing(1)}}),e.jsx(l,{variant:"body2",color:"text.secondary",children:j.thumbnail.name})]}):T.thumbnail?e.jsxs(r,{children:[e.jsx("img",{src:Q(T.thumbnail),alt:"Existing thumbnail",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:i.spacing(1)}}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Existing thumbnail. Upload to replace."})]}):e.jsxs(r,{children:[e.jsx(ie,{sx:{fontSize:40,color:i.palette.grey[400],mb:1}}),e.jsx(l,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(l,{variant:"body2",color:"#f59299ff",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"thumbnail-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:te("thumbnail")})]})]})}),e.jsx(F,{sx:{flex:f?"auto":1,p:2,boxShadow:"none",border:`1px solid ${i.palette.grey[200]}`},children:e.jsxs(L,{sx:{"&:last-child":{pb:2}},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Auditorium Image*"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 2MB"}),e.jsxs(re,{onDragOver:ne,onDrop:ae("auditoriumImage"),onClick:()=>document.getElementById("auditorium-image-upload").click(),children:[j.auditoriumImage?e.jsxs(r,{children:[e.jsx("img",{src:URL.createObjectURL(j.auditoriumImage),alt:"Auditorium image preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:i.spacing(1)}}),e.jsx(l,{variant:"body2",color:"text.secondary",children:j.auditoriumImage.name})]}):T.auditoriumImage?e.jsxs(r,{children:[e.jsx("img",{src:Q(T.auditoriumImage),alt:"Existing auditorium image",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:i.spacing(1)}}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Existing auditorium image. Upload to replace."})]}):e.jsxs(r,{children:[e.jsx(ie,{sx:{fontSize:40,color:i.palette.grey[400],mb:1}}),e.jsx(l,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(l,{variant:"body2",color:"#f59299ff",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"auditorium-image-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:te("auditoriumImage")})]})]})})]}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${i.palette.grey[200]}`},children:e.jsxs(L,{sx:{"&:last-child":{pb:2}},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Pricing & Booking Options"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert The Pricing & Discount Information"}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,fontWeight:600,children:"Pricing Details"}),e.jsxs(r,{sx:{display:"flex",gap:2,mb:3},children:[e.jsx(q,{variant:a.venueType==="per_person"?"contained":"outlined",onClick:()=>R(t=>({...t,venueType:"per_person"})),startIcon:e.jsx(fe,{checked:a.venueType==="per_person",sx:{color:a.venueType==="per_person"?"#fff":"#E15B65","&.Mui-checked":{color:a.venueType==="per_person"?"#fff":"#E15B65"}}}),sx:{borderRadius:2,textTransform:"none",px:3,color:a.venueType==="per_person"?"#fff":"#E15B65",backgroundColor:a.venueType==="per_person"?"#E15B65":"transparent",borderColor:"#E15B65","&:hover":{backgroundColor:a.venueType==="per_person"?"#c94a57":"rgba(225,91,101,0.08)",borderColor:"#E15B65"}},children:"Per Person"}),e.jsx(q,{variant:a.venueType==="per_hour"?"contained":"outlined",onClick:()=>R(t=>({...t,venueType:"per_hour"})),startIcon:e.jsx(fe,{checked:a.venueType==="per_hour",sx:{color:a.venueType==="per_hour"?"#fff":"#E15B65","&.Mui-checked":{color:a.venueType==="per_hour"?"#fff":"#E15B65"}}}),sx:{borderRadius:2,textTransform:"none",px:3,color:a.venueType==="per_hour"?"#fff":"#E15B65",backgroundColor:a.venueType==="per_hour"?"#E15B65":"transparent",borderColor:"#E15B65","&:hover":{backgroundColor:a.venueType==="per_hour"?"#c94a57":"rgba(225,91,101,0.08)",borderColor:"#E15B65"}},children:"Per Hour"}),e.jsx(q,{variant:a.venueType==="per_function"?"contained":"outlined",onClick:()=>R(t=>({...t,venueType:"per_function"})),startIcon:e.jsx(fe,{checked:a.venueType==="per_function",sx:{color:a.venueType==="per_function"?"#fff":"#E15B65","&.Mui-checked":{color:a.venueType==="per_function"?"#fff":"#E15B65"}}}),sx:{borderRadius:2,textTransform:"none",px:3,color:a.venueType==="per_function"?"#fff":"#E15B65",backgroundColor:a.venueType==="per_function"?"#E15B65":"transparent",borderColor:"#E15B65","&:hover":{backgroundColor:a.venueType==="per_function"?"#c94a57":"rgba(225,91,101,0.08)",borderColor:"#E15B65"}},children:" Per Function"})]}),a.venueType&&e.jsxs(r,{sx:{border:`1px solid ${i.palette.grey[300]}`,borderRadius:1,overflow:"hidden"},children:[e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:"150px 1fr 1fr",backgroundColor:i.palette.grey[100],borderBottom:`1px solid ${i.palette.grey[300]}`},children:[e.jsx(r,{sx:{p:2,borderRight:`1px solid ${i.palette.grey[300]}`,fontWeight:600},children:" Day"}),e.jsx(r,{sx:{p:2,borderRight:`1px solid ${i.palette.grey[300]}`,fontWeight:600},children:"Time Slots"}),e.jsx(r,{sx:{p:2,fontWeight:600},children:"Pricing "})]}),["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(t=>e.jsxs(r,{children:[e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:"150px 1fr 1fr",borderBottom:`1px solid ${i.palette.grey[300]}`},children:[e.jsx(r,{sx:{p:2,borderRight:`1px solid ${i.palette.grey[300]}`,display:"flex",alignItems:"flex-start",textTransform:"capitalize",fontWeight:500},children:t.charAt(0).toUpperCase()+t.slice(1)}),e.jsxs(r,{sx:{p:2,borderRight:`1px solid ${i.palette.grey[300]}`,borderBottom:`1px solid ${i.palette.grey[300]}`},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(ke,{size:"small",checked:b[t].morning.enabled,onChange:n=>D(t,"morning","enabled",n.target.checked),sx:{p:0}}),e.jsx(l,{variant:"body2",children:"Morning Slot"})]}),e.jsxs(r,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(p,{size:"small",value:b[t].morning.startTime,onChange:n=>D(t,"morning","startTime",n.target.value),disabled:!b[t].morning.enabled,sx:{width:"80px",...m},inputProps:{style:{textAlign:"center"}}}),e.jsxs(z,{size:"small",value:b[t].morning.startPeriod,onChange:n=>D(t,"morning","startPeriod",n.target.value),disabled:!b[t].morning.enabled,sx:{width:"70px"},children:[e.jsx(P,{value:"Am",children:"Am"}),e.jsx(P,{value:"Pm",children:"Pm"})]}),e.jsx(p,{size:"small",value:b[t].morning.endTime,onChange:n=>D(t,"morning","endTime",n.target.value),disabled:!b[t].morning.enabled,sx:{width:"80px",...m},inputProps:{style:{textAlign:"center"}}}),e.jsxs(z,{size:"small",value:b[t].morning.endPeriod,onChange:n=>D(t,"morning","endPeriod",n.target.value),disabled:!b[t].morning.enabled,sx:{width:"70px"},children:[e.jsx(P,{value:"Am",children:"Am"}),e.jsx(P,{value:"Pm",children:"Pm"})]})]})]}),e.jsx(r,{sx:{p:2,borderBottom:`1px solid ${i.palette.grey[300]}`},children:e.jsx(p,{fullWidth:!0,size:"small",value:b[t].morning.price,onChange:n=>D(t,"morning","price",n.target.value),disabled:!b[t].morning.enabled,placeholder:"Enter price",type:"number",inputProps:{step:"0.01",min:"0"},sx:m})})]}),e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:"150px 1fr 1fr",borderBottom:`1px solid ${i.palette.grey[300]}`},children:[e.jsx(r,{sx:{p:2,borderRight:`1px solid ${i.palette.grey[300]}`,display:"flex",alignItems:"flex-start",textTransform:"capitalize",fontWeight:500},children:t.charAt(0).toUpperCase()+t.slice(1)}),e.jsxs(r,{sx:{p:2,borderRight:`1px solid ${i.palette.grey[300]}`},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(ke,{size:"small",checked:b[t].evening.enabled,onChange:n=>D(t,"evening","enabled",n.target.checked),sx:{p:0}}),e.jsx(l,{variant:"body2",children:"Evening Slot"})]}),e.jsxs(r,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(p,{size:"small",value:b[t].evening.startTime,onChange:n=>D(t,"evening","startTime",n.target.value),disabled:!b[t].evening.enabled,sx:{width:"80px",...m},inputProps:{style:{textAlign:"center"}}}),e.jsxs(z,{size:"small",value:b[t].evening.startPeriod,onChange:n=>D(t,"evening","startPeriod",n.target.value),disabled:!b[t].evening.enabled,sx:{width:"70px"},children:[e.jsx(P,{value:"Am",children:"Am"}),e.jsx(P,{value:"Pm",children:"Pm"})]}),e.jsx(p,{size:"small",value:b[t].evening.endTime,onChange:n=>D(t,"evening","endTime",n.target.value),disabled:!b[t].evening.enabled,sx:{width:"80px",...m},inputProps:{style:{textAlign:"center"}}}),e.jsxs(z,{size:"small",value:b[t].evening.endPeriod,onChange:n=>D(t,"evening","endPeriod",n.target.value),disabled:!b[t].evening.enabled,sx:{width:"70px"},children:[e.jsx(P,{value:"Am",children:"Am"}),e.jsx(P,{value:"Pm",children:"Pm"})]})]})]}),e.jsx(r,{sx:{p:2},children:e.jsx(p,{fullWidth:!0,size:"small",value:b[t].evening.price,onChange:n=>D(t,"evening","price",n.target.value),disabled:!b[t].evening.enabled,placeholder:"Enter price",type:"number",inputProps:{step:"0.01",min:"0"},sx:m})})]})]},t))]})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,children:"Give Discount"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Set a discount that applies to all pricing typesâ€”hourly, daily, and distance-based"}),e.jsx(p,{fullWidth:!0,label:"Discount (%)",name:"discount",value:a.discount,onChange:c,placeholder:"Ex: 10",type:"number",inputProps:{min:0,max:100},sx:m})]}),e.jsx(p,{fullWidth:!0,label:"Advance Payment / Deposit (â‚¹)",name:"advanceDeposit",value:a.advanceDeposit,onChange:c,placeholder:"Enter advance amount",type:"number",inputProps:{min:0},sx:{mb:2,...m}}),e.jsx(p,{fullWidth:!0,label:"Cancellation Policy",name:"cancellationPolicy",value:a.cancellationPolicy,onChange:c,placeholder:"e.g., Free cancellation 48 hours before",multiline:!0,rows:2,sx:{mb:2,...m}}),e.jsx(p,{fullWidth:!0,label:"Extra Charges (e.g., Cleaning fee)",name:"extraCharges",value:a.extraCharges,onChange:c,placeholder:"Describe extra charges",multiline:!0,rows:2,sx:m})]})})}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${i.palette.grey[200]}`},children:e.jsxs(L,{sx:{"&:last-child":{pb:2}},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Capacity & Layout"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Specify capacity and layout details"}),e.jsxs(he,{fullWidth:!0,variant:"outlined",required:!0,sx:{mb:2,...m},children:[e.jsx(xe,{id:"seating-arrangement-label",children:"Seating Arrangement*"}),e.jsxs(z,{labelId:"seating-arrangement-label",name:"seatingArrangement",value:a.seatingArrangement,label:"Seating Arrangement",onChange:c,children:[e.jsx(P,{value:"",children:"Select seating arrangement"}),e.jsx(P,{value:"Amphitheater",children:"Amphitheater"}),e.jsx(P,{value:"Balcony auditorium",children:"Balcony auditorium"}),e.jsx(P,{value:"Flat floor auditorium",children:"Flat floor auditorium"})]})]}),e.jsxs(r,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(p,{fullWidth:!0,label:"Max Guest Count (Seated)*",name:"maxGuestsSeated",value:a.maxGuestsSeated,onChange:c,placeholder:"e.g., 200",type:"number",required:!0,sx:m}),e.jsx(p,{fullWidth:!0,label:"Max Guest Count (Standing)",name:"maxGuestsStanding",value:a.maxGuestsStanding,onChange:c,placeholder:"e.g., 300",type:"number",sx:m})]}),e.jsxs(re,{onDragOver:ne,onDrop:ae("floorPlan"),onClick:()=>document.getElementById("floor-plan-upload").click(),sx:{mb:2},children:[j.floorPlan?e.jsx(r,{children:e.jsx(l,{variant:"body2",color:"text.secondary",children:j.floorPlan.name})}):T.floorPlan?e.jsxs(r,{children:[T.floorPlan.endsWith(".pdf")?e.jsxs(r,{children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:["Existing floor plan (PDF): ",T.floorPlan.split("/").pop()]}),e.jsx("a",{href:Q(T.floorPlan),target:"_blank",rel:"noopener noreferrer",children:"View PDF"})]}):e.jsx("img",{src:Q(T.floorPlan),alt:"Existing floor plan",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:i.spacing(1)}}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Upload new to replace."})]}):e.jsxs(r,{children:[e.jsx(ie,{sx:{fontSize:40,color:i.palette.grey[400],mb:1}}),e.jsx(l,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload Floor Plan (Image/jpg)"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"floor-plan-upload",hidden:!0,accept:"image/*,application/pdf",onChange:te("floorPlan")})]}),e.jsx(H,{control:e.jsx(O,{name:"multipleHalls",checked:a.multipleHalls,onChange:c}),label:"Multiple Halls/Sections Under One Venue"})]})})}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${i.palette.grey[200]}`},children:e.jsxs(L,{sx:{"&:last-child":{pb:2}},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Location & Accessibility"}),e.jsx(p,{fullWidth:!0,label:"Nearby Transport Details",name:"nearbyTransport",value:a.nearbyTransport,onChange:c,placeholder:"Describe nearby metro, bus stops, etc.",sx:{mb:2,...m}}),e.jsx(p,{fullWidth:!0,label:"Accessibility Information",name:"accessibilityInfo",value:a.accessibilityInfo,onChange:c,placeholder:"Describe accessibility features",sx:{mb:2,...m}}),e.jsx(H,{control:e.jsx(O,{name:"elderlyAccessibility",checked:a.elderlyAccessibility,onChange:c}),label:"Accessibility for Elderly & Differently Abled",sx:{mb:3}})]})})}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${i.palette.grey[200]}`},children:e.jsxs(L,{sx:{"&:last-child":{pb:2}},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Venue Documents"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Upload relevant documents (licenses, permits, etc.)"}),e.jsxs(re,{onDragOver:ne,onDrop:ae("documents"),onClick:()=>document.getElementById("documents-upload").click(),children:[j.documents?e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[j.documents.name,e.jsx(pe,{size:"small",onClick:()=>{Pe(URL.createObjectURL(j.documents)),ee(!0)},sx:{color:i.palette.primary.main},children:e.jsx(Ie,{fontSize:"small"})})]}):T.documents?e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[T.documents.split("/").pop(),e.jsx(pe,{size:"small",onClick:()=>{Pe(Q(T.documents)),ee(!0)},sx:{color:i.palette.primary.main},children:e.jsx(Ie,{fontSize:"small"})})]}):e.jsxs(r,{children:[e.jsx(ie,{sx:{fontSize:40,color:i.palette.grey[400],mb:1}}),e.jsx(l,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"documents-upload",hidden:!0,accept:"application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:te("documents")})]}),e.jsxs(Je,{open:Be,onClose:()=>ee(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"80vh",p:2}},children:[e.jsx(Ke,{sx:{p:0,height:"100%"},children:e.jsx(r,{sx:{height:"100%"},children:e.jsx("iframe",{src:De,title:"Document Preview",style:{width:"100%",height:"100%",border:"none"}})})}),e.jsx(et,{children:e.jsx(q,{onClick:()=>ee(!1),color:"primary",children:"Close"})})]})]})})}),e.jsx(r,{sx:{mb:4},children:e.jsx(F,{sx:{p:2,boxShadow:"none",border:`1px solid ${i.palette.grey[200]}`},children:e.jsxs(L,{sx:{"&:last-child":{pb:2}},children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,children:"Search Tags"}),e.jsx(p,{fullWidth:!0,label:"Search Tags",name:"searchTags",value:a.searchTags,onChange:c,placeholder:"Enter tags separated by commas (e.g., Auditorium, Wedding, Conference)",sx:{mb:1,...m}}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Add relevant keywords to help users find this venue easily"})]})})}),e.jsxs(r,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(q,{variant:"outlined",color:"inherit",size:"large",onClick:Ce,disabled:X,children:_==="edit"?"Cancel":"Reset"}),e.jsx(q,{variant:"contained",type:"submit",size:"large",disabled:X,startIcon:X?e.jsx(Qe,{size:20}):null,sx:{backgroundColor:"#E15B65"},children:X?"Submitting...":_==="edit"?"Update":"Submit"})]})]}),e.jsx(Ye,{open:me.open,autoHideDuration:6e3,onClose:we,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{"& .MuiSnackbarContent-root":{minWidth:"600px",maxWidth:"600px",width:"auto"}},children:e.jsx(Ze,{onClose:we,severity:me.severity,sx:{width:"100%","& .MuiAlert-message":{whiteSpace:"pre-line",wordBreak:"break-word",fontSize:"1rem",lineHeight:1.5}},children:me.message})})]})})};export{dt as default};
