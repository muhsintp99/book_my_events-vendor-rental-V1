import{a0 as O,j as e,r as n,B as r,W as Ve,X as $e,T as i,b as m,l as ye,S as f,a as Fe,$ as Be,F as _e,q as He,M as Se,c as Ne,K as j,J as Oe,ao as H,y as z,V as Me,Y as Ue,n as we,p as ke,G as c,A as k,o as Ye,s as Ge,U as Xe,e as qe}from"./index-h_u9Mcwm.js";import{A as Je}from"./Add-SRpeMNfL.js";import{S as Ke}from"./Search-4PDc1ceL.js";import{R as Qe,D as Ze}from"./Refresh-TxgOo5iJ.js";import{T as et}from"./TableContainer-Cwa-fL8p.js";import{T as tt,a as R,b as a,c as st}from"./TableRow-CyenUsQJ.js";import{T as ot}from"./TableHead-Bms2ssg0.js";import{E as rt}from"./Edit-CDvMAPj_.js";import{C as Ce}from"./Close-X7QIWrh1.js";import{C as it}from"./CardMedia-BqcQI3q_.js";import{S as at}from"./Schedule-C6oaJQ4s.js";import{I as nt}from"./Info-Dv0iij0j.js";import{D as lt}from"./DialogContentText-BquJAqJd.js";import{S as ct}from"./Skeleton-DczftH70.js";const We=O(e.jsx("path",{d:"M12 6c1.11 0 2-.9 2-2 0-.38-.1-.73-.29-1.03L12 0l-1.71 2.97c-.19.3-.29.65-.29 1.03 0 1.1.9 2 2 2m4.6 9.99-1.07-1.07-1.08 1.07c-1.3 1.3-3.58 1.31-4.89 0l-1.07-1.07-1.09 1.07C6.75 16.64 5.88 17 4.96 17c-.73 0-1.4-.23-1.96-.61V21c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-4.61c-.56.38-1.23.61-1.96.61-.92 0-1.79-.36-2.44-1.01M18 9h-5V7h-2v2H6c-1.66 0-3 1.34-3 3v1.54c0 1.08.88 1.96 1.96 1.96.52 0 1.02-.2 1.38-.57l2.14-2.13 2.13 2.13c.74.74 2.03.74 2.77 0l2.14-2.13 2.13 2.13c.37.37.86.57 1.38.57 1.08 0 1.96-.88 1.96-1.96V12C21 10.34 19.66 9 18 9"})),xt=O(e.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"})),dt=O(e.jsx("path",{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48z"})),N="https://api.bookmyevent.ae/api/cakes";function Wt(){var X,q,J,K,Q,Z,ee,te,se,oe,re,ie,ae,ne,le,ce,xe,de,he,pe,ge,fe,be,me,je,ue;const[g,b]=n.useState([]),[C,L]=n.useState(!0),[W,u]=n.useState({open:!1,message:"",severity:"success"}),[v,M]=n.useState({search:"",category:""}),[P,Ee]=n.useState(""),[Ie,E]=n.useState(!1),[Te,I]=n.useState(!1),[s,U]=n.useState(null),[Y,G]=n.useState(null),[T,V]=n.useState(0),w=localStorage.getItem("token"),$=JSON.parse(localStorage.getItem("vendor")||localStorage.getItem("user")||"{}"),F=$==null?void 0:$._id,y=t=>t?t.startsWith("http")?t:`https://api.bookmyevent.ae/${t.startsWith("/")?t.slice(1):t}`:null,Ae=({src:t,alt:o,title:l})=>{var A;const[h,p]=n.useState(!1),[x,d]=n.useState(!0);return!t||h?e.jsx(k,{variant:"rounded",sx:{width:70,height:70,bgcolor:"#E91E63",fontSize:"1.8rem",fontWeight:"bold",color:"white"},children:((A=l==null?void 0:l[0])==null?void 0:A.toUpperCase())||"C"}):e.jsxs(r,{sx:{position:"relative"},children:[x&&e.jsx(ct,{variant:"rectangular",width:70,height:70,sx:{borderRadius:2}}),e.jsx(k,{variant:"rounded",src:t,alt:o,sx:{width:70,height:70,borderRadius:2,display:x?"none":"block"},imgProps:{onLoad:()=>d(!1),onError:()=>{p(!0),d(!1)}}})]})},B=n.useCallback(async()=>{if(!F||!w){u({open:!0,message:"Please login again",severity:"error"}),L(!1);return}L(!0);try{const t=await fetch(`${N}/provider/${F}`,{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to load cake packages");const o=await t.json();o.success&&b(o.data||[])}catch(t){u({open:!0,message:t.message,severity:"error"})}finally{L(!1)}},[F,w]);n.useEffect(()=>{B()},[B]),n.useEffect(()=>{const t=setTimeout(()=>M(o=>({...o,search:P})),400);return()=>clearTimeout(t)},[P]);const ze=t=>{U(t),V(0),E(!0)},Re=async(t,o)=>{try{(await(await fetch(`${N}/${t}/toggle-active`,{method:"PATCH",headers:{Authorization:`Bearer ${w}`}})).json()).success&&(b(p=>p.map(x=>x._id===t?{...x,isActive:!o}:x)),u({open:!0,message:"Status updated",severity:"success"}))}catch{u({open:!0,message:"Failed to update status",severity:"error"})}},De=async()=>{try{(await(await fetch(`${N}/${Y}`,{method:"DELETE",headers:{Authorization:`Bearer ${w}`}})).json()).success&&(b(l=>l.filter(h=>h._id!==Y)),u({open:!0,message:"Cake package deleted",severity:"success"}))}catch{u({open:!0,message:"Delete failed",severity:"error"})}finally{I(!1),G(null)}},_=n.useMemo(()=>g.filter(t=>{var h,p;const o=!v.search||((h=t.name)==null?void 0:h.toLowerCase().includes(v.search.toLowerCase())),l=!v.category||((p=t.category)==null?void 0:p._id)===v.category;return o&&l}),[g,v]),Le=n.useMemo(()=>{const t=new Map;return g.forEach(o=>{o.category&&t.set(o.category._id,o.category)}),Array.from(t.values())},[g]),Pe=()=>{const t=["No","Name","Category","Type","Unit","Weight","Base Price","Final Price","Status"],o=_.map((d,A)=>{var ve;return[A+1,d.name||"",((ve=d.category)==null?void 0:ve.title)||"",d.itemType||"",d.uom||"",d.weight||"",d.basePrice||0,d.finalPrice||0,d.isActive?"Active":"Inactive"]}),l=[t.join(","),...o.map(d=>d.join(","))].join(`
`),h=new Blob([l],{type:"text/csv"}),p=URL.createObjectURL(h),x=document.createElement("a");x.href=p,x.download=`cake_packages_${new Date().toISOString().slice(0,10)}.csv`,x.click()};return e.jsxs(r,{sx:{bgcolor:"#fafafa",minHeight:"100vh",p:3},children:[e.jsx(Ve,{position:"static",color:"transparent",elevation:0,children:e.jsxs($e,{sx:{px:"0 !important"},children:[e.jsxs(i,{variant:"h5",sx:{flexGrow:1,fontWeight:900,color:"#111827",letterSpacing:"-0.5px"},children:["My Cake Packages ",e.jsxs(r,{component:"span",sx:{color:"#E91E63",fontSize:"18px"},children:["(",g.length,")"]})]}),e.jsx(m,{variant:"contained",startIcon:e.jsx(Je,{}),sx:{bgcolor:"#E91E63",borderRadius:"12px",px:3,py:1,fontWeight:800,boxShadow:"0 8px 20px rgba(233, 30, 99, 0.2)","&:hover":{bgcolor:"#c2185b",boxShadow:"0 10px 25px rgba(233, 30, 99, 0.3)"}},onClick:()=>window.location.href="/cake/addpackage",children:"Add New Package"})]})}),e.jsx(ye,{sx:{p:2,mt:3,borderRadius:"16px",border:"1px solid #f0f0f0",boxShadow:"0 4px 20px rgba(0,0,0,0.03)"},children:e.jsxs(f,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",children:[e.jsx(Fe,{size:"small",placeholder:"Search cake packages...",value:P,onChange:t=>Ee(t.target.value),InputProps:{startAdornment:e.jsx(Be,{position:"start",children:e.jsx(Ke,{sx:{color:"#94a3b8"}})}),sx:{borderRadius:"10px",bgcolor:"#f8fafc"}},sx:{width:{xs:"100%",sm:300}}}),e.jsx(_e,{size:"small",sx:{minWidth:180},children:e.jsxs(He,{value:v.category,onChange:t=>M(o=>({...o,category:t.target.value})),displayEmpty:!0,sx:{borderRadius:"10px",bgcolor:"#f8fafc"},children:[e.jsx(Se,{value:"",children:"All Categories"}),Le.map(t=>e.jsx(Se,{value:t._id,children:t.title},t._id))]})}),e.jsxs(r,{sx:{ml:"auto",gap:1,display:"flex"},children:[e.jsx(m,{variant:"outlined",startIcon:e.jsx(Qe,{}),onClick:B,sx:{borderRadius:"10px",fontWeight:700},children:"Refresh"}),e.jsx(m,{variant:"outlined",startIcon:e.jsx(Ze,{}),onClick:Pe,sx:{borderRadius:"10px",fontWeight:700},children:"Export CSV"})]})]})}),e.jsx(ye,{sx:{mt:3,borderRadius:"16px",overflow:"hidden",border:"1px solid #f0f0f0",boxShadow:"0 4px 20px rgba(0,0,0,0.03)"},children:e.jsx(et,{sx:{maxHeight:"70vh"},children:e.jsxs(tt,{stickyHeader:!0,children:[e.jsx(ot,{children:e.jsxs(R,{children:[e.jsx(a,{sx:{fontWeight:800,color:"#64748b"},children:"#"}),e.jsx(a,{sx:{fontWeight:800,color:"#64748b"},children:"Image"}),e.jsx(a,{sx:{fontWeight:800,color:"#64748b"},children:"Cake Name"}),e.jsx(a,{sx:{fontWeight:800,color:"#64748b"},children:"Category"}),e.jsx(a,{sx:{fontWeight:800,color:"#64748b"},children:"Type"}),e.jsx(a,{align:"right",sx:{fontWeight:800,color:"#64748b"},children:"Price"}),e.jsx(a,{sx:{fontWeight:800,color:"#64748b"},children:"Status"}),e.jsx(a,{align:"center",sx:{fontWeight:800,color:"#64748b"},children:"Actions"})]})}),e.jsxs(st,{children:[C&&e.jsx(R,{children:e.jsx(a,{colSpan:8,align:"center",sx:{py:10},children:e.jsx(Ne,{sx:{color:"#E91E63"}})})}),!C&&_.length===0&&e.jsx(R,{children:e.jsx(a,{colSpan:8,align:"center",sx:{py:8},children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(We,{sx:{fontSize:60,color:"#e2e8f0",mb:2}}),e.jsx(i,{variant:"h6",color:"text.secondary",sx:{fontWeight:700},children:g.length===0?"No cake packages created yet":"No packages match your search"}),e.jsx(m,{variant:"contained",sx:{mt:2,bgcolor:"#E91E63",borderRadius:"10px"},onClick:()=>window.location.href="/cake/addpackage",children:"Create Your First Cake Package"})]})})}),_.map((t,o)=>{var l,h,p,x;return e.jsxs(R,{hover:!0,children:[e.jsx(a,{sx:{color:"#64748b",fontWeight:600},children:o+1}),e.jsx(a,{children:e.jsx(Ae,{src:y(t.thumbnail),alt:t.name,title:t.name})}),e.jsxs(a,{children:[e.jsx(i,{sx:{fontWeight:800,color:"#1e293b"},children:t.name}),e.jsxs(i,{variant:"caption",sx:{color:"#64748b",fontWeight:600},children:["ID: ",t.cakeId]})]}),e.jsx(a,{children:e.jsx(j,{label:((l=t.category)==null?void 0:l.title)||"N/A",size:"small",sx:{borderRadius:"8px",fontWeight:700,bgcolor:"#f1f5f9",color:"#475569"}})}),e.jsx(a,{children:e.jsx(j,{label:t.itemType||"N/A",size:"small",sx:{borderRadius:"8px",fontWeight:700,bgcolor:t.itemType==="Eggless"?"#f0fdf4":"#fef2f2",color:t.itemType==="Eggless"?"#16a34a":"#dc2626"}})}),e.jsx(a,{align:"right",children:e.jsxs(r,{children:[t.discountValue>0&&e.jsxs(i,{sx:{fontSize:"12px",color:"#94a3b8",textDecoration:"line-through",fontWeight:600},children:["₹",(h=t.basePrice)==null?void 0:h.toLocaleString()]}),e.jsxs(i,{sx:{fontWeight:900,color:"#E91E63",fontSize:"16px"},children:["₹",((p=t.finalPrice)==null?void 0:p.toLocaleString())||((x=t.basePrice)==null?void 0:x.toLocaleString())||"0"]})]})}),e.jsx(a,{children:e.jsx(Oe,{checked:t.isActive,onChange:()=>Re(t._id,t.isActive),color:"success"})}),e.jsx(a,{align:"center",children:e.jsxs(f,{direction:"row",spacing:1,justifyContent:"center",children:[e.jsx(H,{title:"View Details",children:e.jsx(z,{size:"small",onClick:()=>ze(t),sx:{bgcolor:"#eff6ff",color:"#3b82f6","&:hover":{bgcolor:"#dbeafe"}},children:e.jsx(Me,{fontSize:"small"})})}),e.jsx(H,{title:"Edit Package",children:e.jsx(z,{size:"small",sx:{bgcolor:"#f8fafc",color:"#64748b","&:hover":{bgcolor:"#f1f5f9"}},onClick:()=>{window.location.href=`/cake/addpackage?id=${t._id}`},children:e.jsx(rt,{fontSize:"small"})})}),e.jsx(H,{title:"Delete",children:e.jsx(z,{size:"small",sx:{bgcolor:"#fef2f2",color:"#dc2626","&:hover":{bgcolor:"#fee2e2"}},onClick:()=>{G(t._id),I(!0)},children:e.jsx(Ue,{fontSize:"small"})})})]})})]},t._id)})]})]})})}),e.jsx(we,{open:Ie,onClose:()=>E(!1),maxWidth:"lg",fullWidth:!0,scroll:"paper",PaperProps:{sx:{borderRadius:"32px",overflow:"hidden",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.15)",maxHeight:"90vh"}},children:e.jsx(ke,{sx:{p:0,bgcolor:"#fff"},children:s&&e.jsxs(r,{children:[e.jsx(z,{sx:{position:"absolute",right:24,top:24,zIndex:10,bgcolor:"rgba(255,255,255,0.9)",backdropFilter:"blur(8px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)","&:hover":{bgcolor:"#fff",transform:"rotate(90deg)"},transition:"all 0.3s"},onClick:()=>E(!1),children:e.jsx(Ce,{})}),e.jsxs(c,{container:!0,children:[e.jsx(c,{item:!0,xs:12,md:5,lg:5,sx:{position:"relative",bgcolor:"#fbfbfb",borderRight:"1px solid #f1f5f9"},children:e.jsxs(r,{sx:{p:4,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(r,{sx:{width:"100%",maxHeight:"450px",aspectRatio:"0.85/1",borderRadius:"28px",overflow:"hidden",boxShadow:"0 20px 40px rgba(0,0,0,0.08)",mb:3,position:"relative",bgcolor:"#fff"},children:[e.jsx(it,{component:"img",image:y(((X=s.images)==null?void 0:X[T])||s.thumbnail),alt:s.name,sx:{width:"100%",height:"100%",objectFit:"contain",transition:"transform 0.5s ease","&:hover":{transform:"scale(1.05)"}}}),e.jsxs(r,{sx:{position:"absolute",top:20,left:20,display:"flex",gap:1},children:[e.jsx(j,{label:s.itemType,sx:{bgcolor:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",fontWeight:800,color:s.itemType==="Eggless"?"#10b981":"#ef4444",boxShadow:"0 4px 10px rgba(0,0,0,0.1)",border:"none"}}),s.isHalal&&e.jsx(j,{icon:e.jsx(dt,{sx:{fontSize:"16px !important",color:"#10b981 !important"}}),label:"HALAL",sx:{bgcolor:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",fontWeight:800,color:"#10b981",boxShadow:"0 4px 10px rgba(0,0,0,0.1)",border:"none"}}),e.jsx(j,{label:s.isActive?"LIVE":"HIDDEN",sx:{bgcolor:s.isActive?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",backdropFilter:"blur(10px)",fontWeight:800,color:s.isActive?"#10b981":"#ef4444",border:`1px solid ${s.isActive?"#10b981":"#ef4444"}`,fontSize:"10px"}})]})]}),((q=s.images)==null?void 0:q.length)>1&&e.jsx(f,{direction:"row",spacing:2,sx:{overflowX:"auto",py:1,px:.5},children:s.images.map((t,o)=>e.jsx(r,{onClick:()=>V(o),sx:{width:80,height:80,borderRadius:"16px",overflow:"hidden",cursor:"pointer",flexShrink:0,border:T===o?"3px solid #E91E63":"3px solid transparent",boxShadow:T===o?"0 8px 16px rgba(233, 30, 99, 0.2)":"none",transition:"all 0.2s",transform:T===o?"translateY(-4px)":"none","&:hover":{opacity:1,transform:"translateY(-2px)"}},children:e.jsx("img",{src:y(t),alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})},o))}),e.jsxs(r,{sx:{mt:"auto",pt:3},children:[e.jsx(i,{variant:"caption",sx:{color:"#94a3b8",fontWeight:700,letterSpacing:"1px"},children:"PRODUCT TAGS"}),e.jsx(r,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1,mb:2},children:(J=s.searchTags)==null?void 0:J.map((t,o)=>e.jsx(j,{label:`#${t}`,size:"small",sx:{bgcolor:"#f1f5f9",fontWeight:600,color:"#475569"}},o))}),e.jsxs(i,{variant:"caption",sx:{color:"#94a3b8",fontWeight:700,letterSpacing:"0.5px",fontSize:"10px"},children:["LAST UPDATED: ",new Date(s.updatedAt).toLocaleDateString()]})]})]})}),e.jsx(c,{item:!0,xs:12,md:7,lg:7,children:e.jsxs(r,{sx:{p:{xs:3,md:4},height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(r,{sx:{mb:4},children:[e.jsxs(i,{variant:"overline",sx:{color:"#E91E63",fontWeight:900,fontSize:"12px",letterSpacing:"2px"},children:[(K=s.category)==null?void 0:K.title,((Q=s.subCategories)==null?void 0:Q.length)>0&&e.jsxs("span",{style:{color:"#94a3b8",fontWeight:500},children:[" / ",s.subCategories.map(t=>t.title).join(", ")]})]}),e.jsx(i,{variant:"h3",sx:{fontWeight:900,color:"#111827",mt:1,fontSize:{xs:"28px",md:"36px"},letterSpacing:"-1px"},children:s.name}),e.jsx(i,{variant:"body1",sx:{color:"#64748b",mt:2,lineHeight:1.6,fontSize:"15px"},children:s.shortDescription})]}),e.jsxs(c,{container:!0,spacing:2,sx:{mb:4},children:[e.jsx(c,{item:!0,xs:6,sm:3,children:e.jsx(D,{icon:e.jsx(at,{sx:{color:"#3b82f6"}}),label:"Prep Time",value:s.prepTime||"None"})}),e.jsx(c,{item:!0,xs:6,sm:3,children:e.jsx(D,{icon:e.jsx(nt,{sx:{color:"#8b5cf6"}}),label:"Weight",value:`${s.weight} ${s.uom}`})}),e.jsx(c,{item:!0,xs:6,sm:3,children:e.jsx(D,{icon:e.jsx(xt,{sx:{color:"#10b981"}}),label:"Available",value:s.availableTime||"All Day"})}),e.jsx(c,{item:!0,xs:6,sm:3,children:e.jsx(D,{icon:e.jsx(We,{sx:{color:"#f59e0b"}}),label:"Cake ID",value:(Z=s.cakeId)==null?void 0:Z.split("-").pop()})})]}),e.jsxs(r,{sx:{p:3,borderRadius:"24px",bgcolor:"#111827",color:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",mb:4,boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},children:[e.jsxs(r,{children:[e.jsx(i,{variant:"caption",sx:{opacity:.6,fontWeight:700,letterSpacing:"1px"},children:"TOTAL PRICE"}),e.jsxs(f,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsxs(i,{variant:"h4",sx:{fontWeight:900,color:"#fff"},children:["₹",(ee=s.finalPrice)==null?void 0:ee.toLocaleString()]}),s.discountValue>0&&e.jsx(j,{label:`${s.discountType==="percentage"?s.discountValue+"%":"₹"+s.discountValue} OFF`,size:"small",sx:{bgcolor:"#E91E63",color:"#fff",fontWeight:900,fontSize:"10px"}})]})]}),e.jsxs(f,{spacing:1,sx:{textAlign:"right"},children:[e.jsxs(r,{children:[e.jsx(i,{variant:"caption",sx:{opacity:.6,fontWeight:700,letterSpacing:"1px",textTransform:"uppercase"},children:"Delivery"}),e.jsx(i,{sx:{fontWeight:800,color:(te=s.shipping)!=null&&te.free?"#10b981":"#fff"},children:(se=s.shipping)!=null&&se.free?"FREE":(oe=s.shipping)!=null&&oe.flatRate?`+ ₹${(re=s.shipping)==null?void 0:re.price}`:"NOT AVAILABLE"})]}),((ie=s.shipping)==null?void 0:ie.takeaway)&&e.jsxs(r,{children:[e.jsx(i,{variant:"caption",sx:{opacity:.6,fontWeight:700,letterSpacing:"1px",textTransform:"uppercase"},children:"Takeaway"}),e.jsx(i,{sx:{fontWeight:800,color:"#10b981"},children:"AVAILABLE"}),((ae=s.shipping)==null?void 0:ae.takeawayLocation)&&e.jsx(i,{variant:"caption",sx:{color:"#64748b",display:"block",maxWidth:"200px",fontSize:"11px",mt:.5},children:s.shipping.takeawayLocation})]})]})]}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[((ne=s.variations)==null?void 0:ne.length)>0&&e.jsxs(r,{children:[e.jsx(S,{title:"Available Variations",count:s.variations.length}),e.jsx(f,{direction:"row",spacing:2,sx:{overflowX:"auto",pb:1},children:s.variations.map((t,o)=>e.jsxs(r,{sx:{p:2,borderRadius:"20px",bgcolor:"#fff",border:"1px solid #e2e8f0",minWidth:"180px",transition:"all 0.3s",display:"flex",alignItems:"center",gap:2,"&:hover":{borderColor:"#E91E63",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"}},children:[t.image&&e.jsx(k,{src:y(t.image),variant:"rounded",sx:{width:45,height:45,borderRadius:"12px",bgcolor:"#f1f5f9"}}),e.jsxs(r,{sx:{minWidth:0},children:[e.jsx(i,{variant:"caption",sx:{fontWeight:700,color:"#64748b",display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.name}),e.jsxs(i,{sx:{fontWeight:900,fontSize:"16px",color:"#111827"},children:["₹",t.price]})]})]},o))})]}),((le=s.addons)==null?void 0:le.length)>0&&e.jsxs(r,{children:[e.jsx(S,{title:"Boosters & Add-ons",count:s.addons.length}),e.jsx(c,{container:!0,spacing:2,children:s.addons.map((t,o)=>{var l;return e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsxs(r,{sx:{p:2,borderRadius:"16px",bgcolor:"#f8fafc",border:"1px solid #f1f5f9",display:"flex",alignItems:"center",gap:2},children:[e.jsx(k,{src:y(t.icon),sx:{width:44,height:44,borderRadius:"12px",bgcolor:"#fff",border:"1px solid #e2e8f0"}}),e.jsxs(r,{children:[e.jsx(i,{sx:{fontWeight:800,fontSize:"13px"},children:t.title}),e.jsxs(i,{variant:"caption",sx:{color:"#94a3b8",fontWeight:600},children:[(l=t.priceList)==null?void 0:l.length," options available"]})]})]})},o)})})]}),(((ce=s.nutrition)==null?void 0:ce.length)>0||((xe=s.allergenIngredients)==null?void 0:xe.length)>0)&&e.jsxs(c,{container:!0,spacing:3,children:[((de=s.nutrition)==null?void 0:de.length)>0&&e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(S,{title:"Nutrition Facts"}),e.jsx(f,{spacing:1,children:s.nutrition.map((t,o)=>e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",borderBottom:"1px dashed #e2e8f0",pb:.5},children:[e.jsx(i,{variant:"body2",sx:{color:"#64748b"},children:t.split(":")[0]}),e.jsx(i,{variant:"body2",sx:{fontWeight:700},children:t.split(":")[1]||"-"})]},o))})]}),((he=s.allergenIngredients)==null?void 0:he.length)>0&&e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(S,{title:"Allergens"}),e.jsxs(r,{sx:{p:2,borderRadius:"16px",bgcolor:"#fff5f5",border:"1px solid #feb2b2"},children:[e.jsx(i,{variant:"caption",sx:{color:"#c53030",fontWeight:800,textTransform:"uppercase"},children:"Warning: Contains"}),e.jsx(i,{variant:"body2",sx:{color:"#742a2a",mt:.5,fontWeight:600},children:s.allergenIngredients.join(", ")})]})]})]}),((pe=s.attributes)==null?void 0:pe.length)>0&&e.jsxs(r,{children:[e.jsx(S,{title:"Specifications"}),e.jsx(c,{container:!0,spacing:2,children:s.attributes.map((t,o)=>e.jsx(c,{item:!0,xs:12,sm:6,children:e.jsxs(f,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(r,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#E91E63"}}),e.jsxs(i,{variant:"body2",sx:{fontWeight:800,color:"#475569"},children:[t.name,":"]}),e.jsx(i,{variant:"body2",sx:{color:"#64748b"},children:t.values.join(", ")})]})},o))})]}),(((fe=(ge=s.relatedItems)==null?void 0:ge.items)==null?void 0:fe.length)>0||Array.isArray(s.relatedItems)&&s.relatedItems.length>0)&&e.jsxs(r,{children:[e.jsx(S,{title:"Frequently Bought Together",count:((me=(be=s.relatedItems)==null?void 0:be.items)==null?void 0:me.length)||((je=s.relatedItems)==null?void 0:je.length)}),e.jsx(f,{direction:"row",spacing:2,sx:{overflowX:"auto",pb:1},children:(((ue=s.relatedItems)==null?void 0:ue.items)||s.relatedItems).map((t,o)=>!t||typeof t!="object"?null:e.jsxs(r,{sx:{p:1.5,borderRadius:"20px",bgcolor:"#fff",border:"1px solid #e2e8f0",minWidth:"220px",display:"flex",alignItems:"center",gap:2,cursor:"pointer","&:hover":{borderColor:"#E91E63",transform:"translateY(-2px)"},transition:"all 0.3s"},onClick:()=>{U(t),V(0)},children:[e.jsx(k,{src:y(t.thumbnail||t.image),variant:"rounded",sx:{width:50,height:50,borderRadius:"12px"}}),e.jsxs(r,{sx:{minWidth:0,flex:1},children:[e.jsx(i,{variant:"body2",sx:{fontWeight:800,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"13px"},children:t.name||t.title}),e.jsxs(i,{variant:"caption",sx:{color:"#E91E63",fontWeight:900},children:["₹",(t.finalPrice||t.basePrice||t.price||0).toLocaleString()]})]})]},o))})]})]}),e.jsxs(r,{sx:{mt:"auto",pt:5,display:"flex",gap:2},children:[e.jsx(m,{fullWidth:!0,variant:"contained",sx:{bgcolor:"#E91E63",color:"#fff",height:"56px",borderRadius:"16px",fontWeight:900,fontSize:"16px",textTransform:"none",boxShadow:"0 10px 20px rgba(233, 30, 99, 0.2)","&:hover":{bgcolor:"#c2185b"}},onClick:()=>window.location.href=`/cake/addpackage?id=${s._id}`,children:"Edit This Package"}),e.jsx(m,{variant:"outlined",sx:{minWidth:"56px",height:"56px",borderRadius:"16px",borderColor:"#e2e8f0",color:"#64748b","&:hover":{bgcolor:"#f1f5f9",borderColor:"#cbd5e1"}},onClick:()=>E(!1),children:e.jsx(Ce,{})})]})]})})]})]})})}),e.jsxs(we,{open:Te,onClose:()=>I(!1),children:[e.jsx(Ye,{children:"Delete Cake Package?"}),e.jsx(ke,{children:e.jsx(lt,{children:"This action cannot be undone. This cake package will be permanently deleted."})}),e.jsxs(Ge,{children:[e.jsx(m,{onClick:()=>I(!1),children:"Cancel"}),e.jsx(m,{color:"error",variant:"contained",onClick:De,children:"Delete Permanently"})]})]}),e.jsx(Xe,{open:W.open,autoHideDuration:4e3,onClose:()=>u({...W,open:!1}),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(qe,{severity:W.severity,variant:"filled",children:W.message})})]})}const D=({icon:g,label:b,value:C})=>e.jsxs(r,{sx:{p:2,borderRadius:"20px",bgcolor:"#f8fafc",border:"1px solid #f1f5f9",textAlign:"center"},children:[e.jsx(r,{sx:{mb:1,display:"flex",justifyContent:"center"},children:g}),e.jsx(i,{variant:"caption",sx:{color:"#94a3b8",fontWeight:800,textTransform:"uppercase",letterSpacing:"0.5px",fontSize:"10px"},children:b}),e.jsx(i,{sx:{color:"#111827",fontWeight:900,fontSize:"14px",mt:.2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:C})]}),S=({title:g,count:b})=>e.jsxs(f,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:2},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:900,color:"#1e293b",fontSize:"18px",letterSpacing:"-0.5px"},children:g}),b>0&&e.jsx(j,{label:b,size:"small",sx:{bgcolor:"#f1f5f9",fontWeight:900,color:"#475569",height:"20px",fontSize:"11px"}})]});export{Wt as default};
