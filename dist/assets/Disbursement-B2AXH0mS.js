import{r as n,j as e,B as i,T as x,q as d,g as p,am as O,ac as P,af as R,b4 as L,ab as z,U as D}from"./index-s0QLBFc1.js";import{A as H}from"./Add-CaxTzTke.js";import{T as G,a as N,b as s,c as J}from"./TableRow-CB0N1NYI.js";import{T as K}from"./TableHead-sL7Y86j8.js";const _=()=>{const[u,b]=n.useState([]),[C,w]=n.useState(""),[r,v]=n.useState(""),[Q,I]=n.useState(""),[B,y]=n.useState(!1),[l,j]=n.useState(""),[o,f]=n.useState(""),[h,M]=n.useState(""),[a,T]=n.useState({}),[E,A]=n.useState(""),U=()=>{y(!0)},g=()=>{y(!1),v(""),I(""),j(""),f(""),M(""),T({})},k=()=>{const t={};return r||(t.paymentMethodName="Payment method is required"),r==="Card"&&!l&&(t.accountName="Account name is required"),r==="Card"&&!o&&(t.accountNumber="Account number is required"),r==="Card"&&!h?t.email="Email is required":r==="Card"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)&&(t.email="Email is invalid"),r==="6cash"&&!l&&(t.accountName="Account name is required"),r==="6cash"&&!o&&(t.accountNumber="Account number is required"),t},q=()=>{const t=k();Object.keys(t).length===0?(b([...u,{id:Date.now(),name:r,info:`${l?`Account Name: ${l}
`:""}${o?`Account Number: ${o}
`:""}${h?`Email: ${h.replace(/(.{2}).*?(?=@)/,"â‚¹1****")}
`:""}`.trim(),default:!1}]),g()):T(t)},F=t=>{b(u.filter(m=>m.id!==t))},W=t=>{const m=u.map(c=>c.id===t?{...c,default:!c.default}:{...c,default:!1});b(m),A("Default method updated"),setTimeout(()=>A(""),3e3)},S=u.filter(t=>t.name.toLowerCase().includes(C.toLowerCase()));return e.jsxs(i,{sx:{p:3},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,children:"Disbursement Method Setup"}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsxs(x,{variant:"subtitle1",children:["Disbursement Methods ",u.length]}),e.jsxs(i,{children:[e.jsx(d,{placeholder:"Ex: Search by name",variant:"outlined",size:"small",value:C,onChange:t=>w(t.target.value),sx:{mr:2}}),e.jsx(p,{variant:"contained",color:"primary",startIcon:e.jsx(H,{}),sx:{textTransform:"none",bgcolor:"#E15B65"},onClick:U,children:"Add New Method"})]})]}),E&&e.jsx(i,{sx:{mb:2,p:1,backgroundColor:"#2196F3",color:"white",borderRadius:1,display:"flex",alignItems:"center"},children:E}),e.jsx(O,{sx:{width:"100%",overflow:"hidden"},children:e.jsxs(G,{sx:{minWidth:650},"aria-label":"disbursement methods table",children:[e.jsx(K,{children:e.jsxs(N,{children:[e.jsx(s,{children:"SI"}),e.jsx(s,{children:"Payment Method Name"}),e.jsx(s,{children:"Payment Info"}),e.jsx(s,{children:"Default"}),e.jsx(s,{children:"Action"})]})}),e.jsx(J,{children:S.length===0?e.jsx(N,{children:e.jsx(s,{colSpan:5,align:"center",children:e.jsxs(i,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:5},children:[e.jsx("img",{src:"https://via.placeholder.com/100",alt:"No Data Found",style:{marginBottom:"10px"}}),e.jsx(x,{color:"error",children:"No Data Found"})]})})}):S.map((t,m)=>e.jsxs(N,{children:[e.jsx(s,{children:m+1}),e.jsx(s,{children:t.name}),e.jsx(s,{children:t.info.split(`
`).map((c,$)=>e.jsx("div",{children:c},$))}),e.jsx(s,{children:e.jsx(P,{checked:t.default,onChange:()=>W(t.id),color:"primary"})}),e.jsx(s,{children:e.jsx(p,{variant:"outlined",size:"small",onClick:()=>F(t.id),startIcon:e.jsx(R,{}),sx:{color:"red"},children:"Delete"})})]},t.id))})]})}),e.jsx(L,{open:B,onClose:g,children:e.jsxs(i,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,children:"Add method"}),e.jsxs(z,{fullWidth:!0,value:r,onChange:t=>v(t.target.value),sx:{mb:2},error:!!a.paymentMethodName,helperText:a.paymentMethodName,children:[e.jsx(D,{value:"Card",children:"Card"}),e.jsx(D,{value:"6cash",children:"6cash"})]}),r==="Card"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{fullWidth:!0,label:"ACCOUNT NAME",value:l,onChange:t=>j(t.target.value),placeholder:"Enter your card holder name",sx:{mb:2},error:!!a.accountName,helperText:a.accountName}),e.jsx(d,{fullWidth:!0,label:"ACCOUNT NUMBER",value:o,onChange:t=>f(t.target.value),placeholder:"Enter your account number",sx:{mb:2},error:!!a.accountNumber,helperText:a.accountNumber}),e.jsx(d,{fullWidth:!0,label:"EMAIL",value:h,onChange:t=>M(t.target.value),placeholder:"Enter your account email",sx:{mb:2},error:!!a.email,helperText:a.email})]}),r==="6cash"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{fullWidth:!0,label:"ACCOUNT NAME",value:l,onChange:t=>j(t.target.value),placeholder:"Enter your account name",sx:{mb:2},error:!!a.accountName,helperText:a.accountName}),e.jsx(d,{fullWidth:!0,label:"ACCOUNT NUMBER",value:o,onChange:t=>f(t.target.value),placeholder:"Enter your account Number",sx:{mb:2},error:!!a.accountNumber,helperText:a.accountNumber})]}),e.jsx(p,{onClick:g,sx:{mr:2},children:"Cancel"}),e.jsx(p,{variant:"contained",color:"primary",onClick:q,sx:{color:"white",bgcolor:"#E15B65"},children:"Submit"})]})})]})};export{_ as default};
