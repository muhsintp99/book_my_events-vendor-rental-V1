import{u as $,r,j as e,B as i,T as w,a as A,b as E,Q as L,M as S}from"./index-CyX4fgy4.js";import{A as U}from"./ArrowDropDown-ON-C_goy.js";import{S as F}from"./Search-BGHCO8-H.js";import{T as _,a as H,b as v,c as o,d as M}from"./TableRow-L6X5KmFO.js";const z=()=>{const l=$(),[h,I]=r.useState(""),[T,y]=r.useState([]),[x,m]=r.useState([]),[u,g]=r.useState(null),[j,p]=r.useState(null);localStorage.getItem("moduleId");const d="https://api.bookmyevent.ae";r.useEffect(()=>{(async()=>{try{const t=await fetch(`${d}/api/vehicle-categories`,{headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const n=await t.json();if(n.success&&Array.isArray(n.data)){const c=n.data.map(a=>({id:a.vehicleCategoryId||a._id,name:a.title,image:a.image?`${d}${a.image}`:""}));y(c),m(c)}else g("No categories found for this module")}catch(t){console.error("Error fetching categories:",t.message),g(`Failed to fetch categories: ${t.message}`)}})()},[]);const k=()=>{const s=T.filter(t=>t.name.toLowerCase().includes(h.toLowerCase()));m(s)},B=s=>p(s.currentTarget),C=()=>p(null),f=s=>{let t=`SI,Category Id,Category Name
`;x.forEach((b,R)=>{t+=`${R+1},${b.id},${b.name}
`});const n=new Blob([t],{type:s==="excel"?"application/vnd.ms-excel":"text/csv"}),c=window.URL.createObjectURL(n),a=document.createElement("a");a.href=c,a.download=`category_list.${s}`,a.click(),window.URL.revokeObjectURL(c),C()};return e.jsx(i,{sx:{p:3,backgroundColor:l.palette.grey[100],minHeight:"100vh"},children:e.jsxs(i,{sx:{maxWidth:"lg",margin:"auto",backgroundColor:"white",borderRadius:l.shape.borderRadius,boxShadow:l.shadows[1],p:3},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(w,{variant:"h5",component:"h1",children:"Category List"}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(A,{variant:"outlined",placeholder:"Search categories",value:h,onChange:s=>I(s.target.value),size:"small"}),e.jsx(E,{variant:"outlined",color:"#E15B65",startIcon:e.jsx(F,{}),onClick:k,sx:{color:"#E15B65"},children:"Search"}),e.jsx(E,{variant:"outlined",color:"#E15B65",endIcon:e.jsx(U,{}),onClick:B,sx:{color:"#E15B65"},children:"Export"}),e.jsxs(L,{anchorEl:j,open:!!j,onClose:C,children:[e.jsx(S,{onClick:()=>f("excel"),children:"Excel"}),e.jsx(S,{onClick:()=>f("csv"),children:"CSV"})]})]})]}),u&&e.jsx(w,{color:"error",sx:{mb:2},children:u}),e.jsxs(_,{children:[e.jsx(H,{children:e.jsxs(v,{children:[e.jsx(o,{children:"SI"}),e.jsx(o,{children:"Category Name"}),e.jsx(o,{children:"Category Id"}),e.jsx(o,{children:"Category Image"})]})}),e.jsx(M,{children:x.map((s,t)=>e.jsxs(v,{children:[e.jsx(o,{children:t+1}),e.jsx(o,{children:s.name}),e.jsx(o,{children:s.id}),e.jsx(o,{children:e.jsx("img",{src:s.image,alt:s.name,style:{width:100,height:50,objectFit:"contain"}})})]},s.id))})]})]})})};export{z as default};
