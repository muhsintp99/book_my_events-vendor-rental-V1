import{u as A,r as c,j as e,B as i,T as w,s as L,g as E,_ as U,$ as S}from"./index-WcA1ekzu.js";import{A as F}from"./ArrowDropDown-DbURs8_K.js";import{S as N}from"./Search-bbMt8icn.js";import{T as _,a as H,b as y,c as r,d as O}from"./TableRow-DgyBKRCV.js";const J=()=>{const d=A(),[x,C]=c.useState(""),[T,I]=c.useState([]),[m,p]=c.useState([]),[u,j]=c.useState(null),v=localStorage.getItem("moduleId"),h="https://api.bookmyevent.ae";c.useEffect(()=>{(async()=>{try{const n=await fetch(`${h}/api/brands/module/${v}`,{headers:{Accept:"application/json"}});if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);const l=n.headers.get("content-type");if(!l||!l.includes("application/json"))throw new Error("Response is not JSON");const t=await n.json();if(Array.isArray(t)&&t.length>0){const o=t.map(a=>({id:a.brandId,image:`${h}/${a.icon}`,name:a.title}));I(o),p(o)}else j("No brands found for this module")}catch(n){console.error("Error fetching brands:",n.message),j(`Failed to fetch brands: ${n.message}`)}})()},[]);const[f,g]=c.useState(null),k=s=>g(s.currentTarget),B=()=>g(null),b=s=>{let n=`Sr,Brand Id,Brand Name
`;m.forEach((a,R)=>{n+=`${R+1},${a.id},${a.name}
`});const l=new Blob([n],{type:s==="excel"?"application/vnd.ms-excel":"text/csv"}),t=window.URL.createObjectURL(l),o=document.createElement("a");o.href=t,o.download=`brand_list.${s}`,o.click(),window.URL.revokeObjectURL(t),B()},$=()=>{const s=T.filter(n=>n.name.toLowerCase().includes(x.toLowerCase()));p(s)};return e.jsx(i,{sx:{p:3,backgroundColor:d.palette.grey[100],minHeight:"100vh"},children:e.jsxs(i,{sx:{maxWidth:"lg",margin:"auto",backgroundColor:"white",borderRadius:d.shape.borderRadius,boxShadow:d.shadows[1],p:3},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(w,{variant:"h5",component:"h1",children:"Brand List"}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(L,{variant:"outlined",color:"#E15B65",placeholder:"Search by brand name",value:x,onChange:s=>C(s.target.value),size:"small"}),e.jsx(E,{variant:"outlined",color:"#E15B65",startIcon:e.jsx(N,{}),onClick:$,sx:{color:"#E15B65"},children:"Search"}),e.jsx(E,{variant:"outlined",color:"#E15B65",endIcon:e.jsx(F,{}),onClick:k,sx:{color:"#E15B65"},children:"Export"}),e.jsxs(U,{anchorEl:f,open:!!f,onClose:B,children:[e.jsx(S,{onClick:()=>b("excel"),children:"Excel"}),e.jsx(S,{onClick:()=>b("csv"),children:"CSV"})]})]})]}),u&&e.jsx(w,{color:"error",sx:{mb:2},children:u}),e.jsxs(_,{children:[e.jsx(H,{children:e.jsxs(y,{children:[e.jsx(r,{children:"Sr"}),e.jsx(r,{children:"Brand Name"}),e.jsx(r,{children:"Brand Id"}),e.jsx(r,{children:"Brand Image"})]})}),e.jsx(O,{children:m.map((s,n)=>e.jsxs(y,{children:[e.jsx(r,{children:n+1}),e.jsx(r,{children:s.name}),e.jsx(r,{children:s.id}),e.jsx(r,{children:e.jsx("img",{src:s.image,alt:s.name,style:{width:100,height:50,objectFit:"contain"}})})]},s.id))})]})]})})};export{J as default};
