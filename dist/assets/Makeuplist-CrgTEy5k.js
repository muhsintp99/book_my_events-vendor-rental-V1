import{c as oe,j as e,w as xe,r as c,B as o,a7 as he,S as m,T as r,g as u,p as k,M as U,s as pe,a as ge,t as fe,bf as z,G as p,a4 as x,D as P,V as ue,b as M,ae as Y,ac as je,ag as q,aq as J,ah as Q,q as me,bg as be,a1 as ve,ax as ye,a2 as we,ai as K,aj as Ce,x as Se}from"./index-DBuvesX3.js";import{A as X}from"./Add-DRZHXbjW.js";import{S as Ie}from"./Search-CIan0Lwy.js";import{C as Z}from"./CardMedia-DhikCA7T.js";import{E as ee}from"./EventAvailable-CpskcoB1.js";import{E as ke}from"./Edit-C-8Te_Nh.js";import{C as Pe}from"./Close-jZDldzgB.js";import{C as Be}from"./Category-CN8r6PyT.js";import{P as Ee}from"./Palette-62qQxEon.js";import{S as Ae}from"./Schedule-Dr2EtXuR.js";import{C as te}from"./CheckCircle-Bxhbg_16.js";import{I as Te}from"./Info-cv4m-oR1.js";import{A as se}from"./AttachMoney-2C2YTkty.js";import{L as We}from"./LocalOffer-DteGuxW4.js";import{P as ze}from"./Policy-DQkxuejr.js";import{D as Me}from"./DirectionsCar-Cr078ibT.js";import{A as De,a as Le,E as Ne,b as $e}from"./ExpandMore-D8GIy5Do.js";import{L as Fe}from"./ListItem-BMczEDJh.js";const Ve=oe(e.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"})),_e=oe([e.jsx("path",{d:"M8.55 12c-1.07-.71-2.25-1.27-3.53-1.61 1.28.34 2.46.9 3.53 1.61m10.43-1.61c-1.29.34-2.49.91-3.57 1.64 1.08-.73 2.28-1.3 3.57-1.64"},"0"),e.jsx("path",{d:"M15.49 9.63c-.18-2.79-1.31-5.51-3.43-7.63-2.14 2.14-3.32 4.86-3.55 7.63 1.28.68 2.46 1.56 3.49 2.63 1.03-1.06 2.21-1.94 3.49-2.63m-6.5 2.65c-.14-.1-.3-.19-.45-.29.15.11.31.19.45.29m6.42-.25c-.13.09-.27.16-.4.26.13-.1.27-.17.4-.26M12 15.45C9.85 12.17 6.18 10 2 10c0 5.32 3.36 9.82 8.03 11.49.63.23 1.29.4 1.97.51.68-.12 1.33-.29 1.97-.51C18.64 19.82 22 15.32 22 10c-4.18 0-7.85 2.17-10 5.45"},"1")]),D="https://api.bookmyevent.ae/api/makeup-packages";function at(){var R,H,O,G;const w=xe(),[g,B]=c.useState([]),[L,E]=c.useState(!0),[C,f]=c.useState({open:!1,message:"",severity:"success"}),[j,ie]=c.useState(""),[re,b]=c.useState(!1),[ae,S]=c.useState(!1),[s,ne]=c.useState(null),[N,$]=c.useState(null),[I,F]=c.useState(0),v=localStorage.getItem("token"),A=JSON.parse(localStorage.getItem("user")||"{}"),T=A==null?void 0:A._id,W=t=>t?`https://api.bookmyevent.ae/${t.startsWith("/")?t.slice(1):t}`:null,y=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(t||0),V=c.useCallback(async()=>{if(!T||!v){f({open:!0,message:"Please login again",severity:"error"}),E(!1);return}E(!0);try{const t=await fetch(`${D}/provider/${T}`,{headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to load packages");const i=await t.json();i.success&&B(i.data||[])}catch(t){f({open:!0,message:t.message,severity:"error"})}finally{E(!1)}},[T,v]);c.useEffect(()=>{V()},[V]);const le=t=>{ne(t),F(0),b(!0)},ce=async(t,i)=>{try{(await(await fetch(`${D}/${t}/toggle-active`,{method:"PATCH",headers:{Authorization:`Bearer ${v}`}})).json()).success&&(B(l=>l.map(h=>h._id===t?{...h,isActive:!i}:h)),f({open:!0,message:"Status updated",severity:"success"}))}catch{f({open:!0,message:"Failed to update status",severity:"error"})}},de=async()=>{try{(await(await fetch(`${D}/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${v}`}})).json()).success&&(B(a=>a.filter(n=>n._id!==N)),f({open:!0,message:"Package deleted",severity:"success"}))}catch{f({open:!0,message:"Delete failed",severity:"error"})}finally{S(!1),$(null)}},_=c.useMemo(()=>g.filter(t=>{var a,n,l;return!j||((a=t.packageTitle)==null?void 0:a.toLowerCase().includes(j.toLowerCase()))||((n=t.makeupType)==null?void 0:n.toLowerCase().includes(j.toLowerCase()))||((l=t.description)==null?void 0:l.toLowerCase().includes(j.toLowerCase()))}),[g,j]),d=({icon:t,label:i,value:a,chip:n,success:l,error:h})=>e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",gap:2,py:1.5,borderBottom:"1px solid #f0f0f0"},children:[e.jsx(o,{sx:{color:"#E15B65",mt:.5},children:t}),e.jsxs(o,{sx:{flex:1},children:[e.jsx(r,{variant:"caption",color:"text.secondary",sx:{fontWeight:500},children:i}),n?e.jsx(x,{label:a,size:"small",color:l?"success":h?"error":"default",sx:{mt:.5}}):e.jsx(r,{variant:"body2",sx:{fontWeight:500,mt:.3},children:a||"Not specified"})]})]});return e.jsxs(o,{sx:{bgcolor:"#f5f7fa",minHeight:"100vh",pb:4},children:[e.jsx(o,{sx:{background:"linear-gradient(135deg, #E15B65 0%, #c14a54 100%)",color:"white",py:4,px:3,borderRadius:"0 0 24px 24px",boxShadow:"0 4px 20px rgba(225, 91, 101, 0.3)"},children:e.jsx(he,{maxWidth:"xl",children:e.jsxs(m,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(o,{children:[e.jsx(r,{variant:"h4",sx:{fontWeight:700,mb:.5},children:"My Makeup Packages"}),e.jsxs(r,{variant:"body2",sx:{opacity:.9},children:[g.length," total packages â€¢ ",g.filter(t=>t.isActive).length," active"]})]}),e.jsx(u,{variant:"contained",size:"large",startIcon:e.jsx(X,{}),onClick:()=>w("/makeupartist/addpackage"),sx:{bgcolor:"white",color:"#E15B65",fontWeight:600,px:3,"&:hover":{bgcolor:"#f5f5f5",transform:"translateY(-2px)"},transition:"all 0.3s",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:"Add New Package"})]})})}),e.jsxs(o,{sx:{width:"100%",px:2,mt:4},children:[e.jsx(k,{sx:{mb:3,borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",overflow:"visible"},children:e.jsx(U,{children:e.jsx(pe,{fullWidth:!0,size:"medium",placeholder:"Search by package name, type, or description...",value:j,onChange:t=>ie(t.target.value),InputProps:{startAdornment:e.jsx(ge,{position:"start",children:e.jsx(Ie,{sx:{color:"#E15B65",fontSize:28}})}),sx:{borderRadius:2,fontSize:"1.1rem","& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#E15B65"},"&.Mui-focused fieldset":{borderColor:"#E15B65"}}}})})}),L&&e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(fe,{size:60,sx:{color:"#E15B65"}})}),!L&&_.length===0&&e.jsxs(k,{sx:{borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",textAlign:"center",py:8},children:[e.jsx(z,{sx:{fontSize:80,color:"#ddd",mb:2}}),e.jsx(r,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:g.length===0?"No packages yet":"No packages match your search"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:g.length===0?"Create your first makeup package to get started":"Try adjusting your search terms"}),g.length===0&&e.jsx(u,{variant:"contained",size:"large",startIcon:e.jsx(X,{}),sx:{bgcolor:"#E15B65","&:hover":{bgcolor:"#c14a54"}},onClick:()=>w("/makeupartist/addpackage"),children:"Create Your First Package"})]}),e.jsx(p,{container:!0,spacing:3,children:_.map(t=>{var i,a,n;return e.jsx(p,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2.4,children:e.jsxs(k,{sx:{height:"100%",borderRadius:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",transition:"all 0.3s","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 24px rgba(225, 91, 101, 0.2)"},minWidth:280},children:[e.jsxs(o,{sx:{position:"relative",paddingTop:"75%",bgcolor:"#f5f5f5"},children:[(i=t.gallery)!=null&&i[0]?e.jsx(Z,{component:"img",image:W(t.gallery[0]),alt:t.packageTitle,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(o,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#f0f0f0"},children:e.jsx(z,{sx:{fontSize:60,color:"#ccc"}})}),e.jsx(o,{sx:{position:"absolute",top:12,right:12},children:e.jsx(x,{label:t.isActive?"Active":"Inactive",size:"small",sx:{bgcolor:t.isActive?"#4caf50":"#757575",color:"white",fontWeight:600,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}})}),t.isTopPick&&e.jsx(o,{sx:{position:"absolute",top:12,left:12},children:e.jsx(x,{icon:e.jsx(ee,{sx:{color:"white !important"}}),label:"Top Pick",size:"small",sx:{bgcolor:"#ff9800",color:"white",fontWeight:600,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}})})]}),e.jsxs(U,{sx:{p:2.5},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:700,mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#2c3e50"},children:t.packageTitle}),e.jsxs(m,{direction:"row",spacing:.5,flexWrap:"wrap",sx:{mb:2,minHeight:28},children:[(a=t.categories)==null?void 0:a.slice(0,2).map((l,h)=>e.jsx(x,{label:typeof l=="string"?"Category":l.title,size:"small",sx:{bgcolor:"#E15B6510",color:"#E15B65",fontWeight:500,height:24,fontSize:"0.75rem"}},l._id||h)),((n=t.categories)==null?void 0:n.length)>2&&e.jsx(x,{label:`+${t.categories.length-2}`,size:"small",sx:{bgcolor:"#E15B6510",color:"#E15B65",fontWeight:500,height:24,fontSize:"0.75rem"}})]}),e.jsx(P,{sx:{my:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(r,{variant:"h5",sx:{fontWeight:700,color:"#E15B65",mb:.5},children:y(t.finalPrice)}),t.basePrice>t.finalPrice&&e.jsxs(m,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through"},children:y(t.basePrice)}),e.jsx(x,{label:`${Math.round((t.basePrice-t.finalPrice)/t.basePrice*100)}% OFF`,size:"small",sx:{bgcolor:"#4caf50",color:"white",fontWeight:600,height:20,fontSize:"0.7rem"}})]})]}),e.jsxs(m,{direction:"row",spacing:1,children:[e.jsx(u,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(ue,{}),onClick:()=>le(t),sx:{borderColor:"#E15B65",color:"#E15B65","&:hover":{borderColor:"#c14a54",bgcolor:"#E15B6505"}},children:"View"}),e.jsx(M,{color:"primary",onClick:()=>w(`/makeupartist/edit/${t._id}`),sx:{border:"1px solid #e0e0e0","&:hover":{bgcolor:"#f5f5f5"}},children:e.jsx(ke,{})}),e.jsx(M,{color:"error",onClick:()=>{$(t._id),S(!0)},sx:{border:"1px solid #e0e0e0","&:hover":{bgcolor:"#ffebee"}},children:e.jsx(Y,{})})]}),e.jsxs(o,{sx:{mt:2,pt:2,borderTop:"1px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(r,{variant:"body2",fontWeight:500,children:"Package Status"}),e.jsx(je,{checked:t.isActive,onChange:()=>ce(t._id,t.isActive),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4caf50"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#4caf50"}}})]})]})]})},t._id)})})]}),e.jsxs(q,{open:re,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,scroll:"paper",children:[e.jsxs(J,{sx:{bgcolor:"#E15B65",color:"white",pr:6},children:[e.jsx(r,{variant:"h6",children:s==null?void 0:s.packageTitle}),e.jsx(M,{sx:{position:"absolute",right:8,top:8,color:"white"},onClick:()=>b(!1),children:e.jsx(Pe,{})})]}),e.jsx(Q,{dividers:!0,sx:{p:0},children:s&&e.jsxs(o,{children:[e.jsxs(o,{sx:{bgcolor:"#1a1a1a",p:2},children:[e.jsx(o,{sx:{display:"flex",justifyContent:"center",mb:2},children:(R=s.gallery)!=null&&R[I]?e.jsx(k,{elevation:3,sx:{maxWidth:500},children:e.jsx(Z,{component:"img",height:"300",image:W(s.gallery[I]),alt:s.packageTitle,sx:{objectFit:"cover"}})}):e.jsx(o,{sx:{height:300,width:"100%",maxWidth:500,bgcolor:"#333",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:2},children:e.jsx(z,{sx:{fontSize:80,color:"#666"}})})}),((H=s.gallery)==null?void 0:H.length)>1&&e.jsx(o,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:s.gallery.map((t,i)=>e.jsx(me,{variant:"rounded",src:W(t),onClick:()=>F(i),sx:{width:60,height:60,cursor:"pointer",border:I===i?"3px solid #E15B65":"3px solid transparent",opacity:I===i?1:.7,"&:hover":{opacity:1}}},i))})]}),e.jsx(o,{sx:{p:3},children:e.jsxs(p,{container:!0,spacing:3,children:[e.jsxs(p,{item:!0,xs:12,md:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Basic Information"}),e.jsx(d,{icon:e.jsx(Be,{}),label:"Categories",value:((O=s.categories)==null?void 0:O.map(t=>t.title).join(", "))||"None"}),e.jsx(d,{icon:e.jsx(Ee,{}),label:"Makeup Type",value:s.makeupType}),e.jsx(d,{icon:e.jsx(Ae,{}),label:"Duration",value:s.duration}),e.jsx(d,{icon:e.jsx(te,{}),label:"Status",value:s.isActive?"Active":"Inactive",chip:!0,success:s.isActive,error:!s.isActive}),e.jsx(d,{icon:e.jsx(Te,{}),label:"Description",value:s.description})]}),e.jsxs(p,{item:!0,xs:12,md:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Pricing & Policies"}),e.jsx(d,{icon:e.jsx(se,{}),label:"Base Price",value:y(s.basePrice)}),e.jsx(d,{icon:e.jsx(We,{}),label:"Offer Discount",value:s.offerPrice?y(s.offerPrice):"No offer"}),e.jsx(d,{icon:e.jsx(se,{}),label:"Final Price",value:e.jsx(r,{sx:{color:"#E15B65",fontWeight:"bold"},children:y(s.finalPrice)})}),e.jsx(d,{icon:e.jsx(be,{}),label:"Advance Booking Amount",value:s.advanceBookingAmount?`AED ${s.advanceBookingAmount}`:"Not specified"}),e.jsx(d,{icon:e.jsx(ze,{}),label:"Cancellation Policy",value:s.cancellationPolicy})]}),e.jsxs(p,{item:!0,xs:12,children:[e.jsx(P,{sx:{my:2}}),e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Additional Features"}),e.jsxs(m,{direction:"row",spacing:2,flexWrap:"wrap",useFlexGap:!0,children:[e.jsx(x,{icon:e.jsx(_e,{}),label:s.trialMakeupIncluded?"Trial Makeup Included":"No Trial Makeup",color:s.trialMakeupIncluded?"success":"default",variant:s.trialMakeupIncluded?"filled":"outlined"}),e.jsx(x,{icon:e.jsx(Me,{}),label:s.travelToVenue?"Travel to Venue Included":"No Travel to Venue",color:s.travelToVenue?"success":"default",variant:s.travelToVenue?"filled":"outlined"}),e.jsx(x,{icon:e.jsx(ee,{}),label:s.isTopPick?"Top Pick":"Not a Top Pick",color:s.isTopPick?"warning":"default",variant:s.isTopPick?"filled":"outlined"})]})]}),((G=s.includedServices)==null?void 0:G.length)>0&&e.jsxs(p,{item:!0,xs:12,children:[e.jsx(P,{sx:{my:2}}),e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"#E15B65"},children:"Included Services"}),s.includedServices.map((t,i)=>{var a,n;return e.jsxs(De,{defaultExpanded:i===0,sx:{mb:1,"&:before":{display:"none"},boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx(Le,{expandIcon:e.jsx(Ne,{}),sx:{bgcolor:"#f8f9fa"},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ve,{sx:{color:"#E15B65"}}),e.jsx(r,{fontWeight:500,children:t.title}),e.jsx(x,{label:`${((a=t.items)==null?void 0:a.length)||0} items`,size:"small",sx:{ml:1}})]})}),e.jsx($e,{children:e.jsx(ve,{dense:!0,children:(n=t.items)==null?void 0:n.map((l,h)=>e.jsxs(Fe,{children:[e.jsx(ye,{sx:{minWidth:32},children:e.jsx(te,{sx:{fontSize:18,color:"success.main"}})}),e.jsx(we,{primary:l})]},h))})})]},i)})]}),e.jsxs(p,{item:!0,xs:12,children:[e.jsx(P,{sx:{my:2}}),e.jsxs(m,{direction:"row",spacing:4,sx:{color:"text.secondary"},children:[e.jsxs(r,{variant:"caption",children:["Created: ",new Date(s.createdAt).toLocaleString()]}),e.jsxs(r,{variant:"caption",children:["Updated: ",new Date(s.updatedAt).toLocaleString()]})]})]})]})})]})}),e.jsxs(K,{sx:{p:2},children:[e.jsx(u,{onClick:()=>{b(!1),w(`/makeupartist/edit/${s._id}`)},variant:"outlined",sx:{borderColor:"#E15B65",color:"#E15B65"},children:"Edit Package"}),e.jsx(u,{variant:"contained",sx:{bgcolor:"#E15B65","&:hover":{bgcolor:"#c14a54"}},onClick:()=>b(!1),children:"Close"})]})]}),e.jsxs(q,{open:ae,onClose:()=>S(!1),maxWidth:"xs",fullWidth:!0,children:[e.jsx(J,{sx:{fontWeight:600},children:"Delete Package?"}),e.jsx(Q,{children:e.jsxs(o,{sx:{textAlign:"center",py:2},children:[e.jsx(Y,{sx:{fontSize:60,color:"#f44336",mb:2}}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"This action cannot be undone. This package will be permanently deleted from your account."})]})}),e.jsxs(K,{sx:{p:2,gap:1},children:[e.jsx(u,{onClick:()=>S(!1),variant:"outlined",fullWidth:!0,sx:{borderColor:"#e0e0e0",color:"text.secondary"},children:"Cancel"}),e.jsx(u,{color:"error",variant:"contained",onClick:de,fullWidth:!0,sx:{fontWeight:600},children:"Delete Permanently"})]})]}),e.jsx(Ce,{open:C.open,autoHideDuration:4e3,onClose:()=>f({...C,open:!1}),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(Se,{severity:C.severity,variant:"filled",sx:{minWidth:300,boxShadow:"0 4px 12px rgba(0,0,0,0.15)","& .MuiAlert-icon":{fontSize:24}},children:C.message})})]})}export{at as default};
