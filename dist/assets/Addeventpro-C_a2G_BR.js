import{l as z,d as L,r as s,j as e,aF as M,aG as O,aH as U,B as c,Y as q,aI as G,s as g,A as J,T as w,c as N,a as l,Z as y,b as P,y as Y,o as Z,N as _,e as K}from"./index-DQO8S-Hd.js";import{A as Q,R as V}from"./RotateLeft-CkxLoTpn.js";import{C as X}from"./Close-DxdnvH5I.js";const ee=O({palette:{primary:{main:"#4527A0",dark:"#311B92",light:"#D1C4E9",contrastText:"#fff"},secondary:{main:"#6A1B9A"},background:{default:"#f8fafc",paper:"#fff"},text:{primary:"#0f172a",secondary:"#475569"}},typography:{fontFamily:"'DM Sans', sans-serif",h4:{fontFamily:"'Playfair Display', serif"}},shape:{borderRadius:14},components:{MuiCssBaseline:{styleOverrides:"@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,500&family=DM+Sans:wght@300;400;500;600&display=swap');"},MuiOutlinedInput:{styleOverrides:{root:{borderRadius:12,backgroundColor:"#F8F5FF",fontFamily:"'DM Sans', sans-serif",fontSize:"14.5px","& fieldset":{borderColor:"rgba(69,39,160,0.2)"},"&:hover fieldset":{borderColor:"rgba(69,39,160,0.5) !important"},"&.Mui-focused fieldset":{borderColor:"#4527A0 !important",borderWidth:2},transition:"box-shadow .3s","&.Mui-focused":{boxShadow:"0 0 0 4px rgba(69,39,160,0.10)"}}}}}}),m="https://api.bookmyevent.ae";function se(){const{id:d}=z(),F=L(),r=!!d,h=JSON.parse(localStorage.getItem("user")||"{}"),R=h==null?void 0:h._id,W=localStorage.getItem("moduleId"),j=localStorage.getItem("token"),[t,f]=s.useState({packageName:"",description:"",packagePrice:"",advanceBookingAmount:"",additionalHourPrice:""}),[A,x]=s.useState(null),[C,p]=s.useState(null),[k,S]=s.useState(!1),[H,I]=s.useState(!1),[n,v]=s.useState({}),[u,b]=s.useState({open:!1,message:"",severity:"success"});s.useEffect(()=>{r&&(I(!0),fetch(`${m}/api/eventprofessionals/${d}`,{headers:{Authorization:`Bearer ${j}`}}).then(a=>a.json()).then(a=>{const o=a.data||a;f({packageName:o.packageName||"",description:o.description||"",packagePrice:o.packagePrice||"",advanceBookingAmount:o.advanceBookingAmount||"",additionalHourPrice:o.additionalHourPrice||""}),o.image&&p(`${m}/${o.image}`)}).catch(console.error).finally(()=>I(!1)))},[d]);const i=a=>{f({...t,[a.target.name]:a.target.value}),v({...n,[a.target.name]:""})},T=a=>{var B;const o=(B=a.target.files)==null?void 0:B[0];o&&(x(o),p(URL.createObjectURL(o)))},D=()=>{const a={};return t.packageName.trim()||(a.packageName="Required"),t.packagePrice||(a.packagePrice="Required"),v(a),!Object.keys(a).length},E=async()=>{if(D()){S(!0);try{const a=new FormData;a.append("packageName",t.packageName),a.append("description",t.description),a.append("packagePrice",t.packagePrice),a.append("advanceBookingAmount",t.advanceBookingAmount),a.append("additionalHourPrice",t.additionalHourPrice),a.append("providerId",R),a.append("module",W),A&&a.append("image",A);const o=r?`${m}/api/eventprofessionals/${d}`:`${m}/api/eventprofessionals`;await fetch(o,{method:r?"PUT":"POST",headers:{Authorization:`Bearer ${j}`},body:a}),b({open:!0,message:r?"Package updated!":"Package created!",severity:"success"}),setTimeout(()=>F("/eventprofessionals/packagelist"),1200)}catch{b({open:!0,message:"Failed to save package",severity:"error"})}finally{S(!1)}}},$=()=>{f({packageName:"",description:"",packagePrice:"",advanceBookingAmount:"",additionalHourPrice:""}),x(null),p(null),v({})};return e.jsxs(M,{theme:ee,children:[e.jsx(U,{}),e.jsxs(c,{sx:{maxWidth:800,mx:"auto",p:3},children:[e.jsxs(q,{sx:{p:4,borderRadius:4,boxShadow:"0 8px 32px rgba(0,0,0,0.08)"},children:[k&&e.jsx(G,{sx:{mb:2,borderRadius:2}}),e.jsxs(g,{direction:"row",alignItems:"center",spacing:2,sx:{mb:4},children:[e.jsx(J,{sx:{bgcolor:"#4527A0",width:56,height:56},children:e.jsx(Q,{})}),e.jsxs(c,{children:[e.jsx(w,{variant:"h4",fontWeight:700,color:"primary",children:r?"Edit Professional Package":"Create Professional Package"}),e.jsx(w,{variant:"body2",color:"text.secondary",children:r?"Update your event professional package details":"Add a new event professional service package"})]})]}),H?e.jsx(c,{sx:{display:"flex",justifyContent:"center",py:6},children:e.jsx(N,{sx:{color:"#4527A0"}})}):e.jsxs(g,{spacing:3,children:[e.jsx(l,{fullWidth:!0,label:"Package Name",name:"packageName",placeholder:"Enter event professional package name",value:t.packageName,onChange:i,error:!!n.packageName,helperText:n.packageName}),e.jsx(l,{fullWidth:!0,multiline:!0,rows:4,label:"Description",name:"description",placeholder:"Describe your event professional services...",value:t.description,onChange:i}),e.jsxs(g,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(l,{fullWidth:!0,label:"Package Price",name:"packagePrice",type:"number",value:t.packagePrice,onChange:i,InputProps:{startAdornment:e.jsx(y,{position:"start",children:"₹"})},error:!!n.packagePrice,helperText:n.packagePrice}),e.jsx(l,{fullWidth:!0,label:"Advance Amount",name:"advanceBookingAmount",type:"number",value:t.advanceBookingAmount,onChange:i,InputProps:{startAdornment:e.jsx(y,{position:"start",children:"₹"})}})]}),e.jsx(l,{fullWidth:!0,label:"Additional Hour Price",name:"additionalHourPrice",type:"number",value:t.additionalHourPrice,onChange:i,InputProps:{startAdornment:e.jsx(y,{position:"start",children:"₹"})}}),e.jsxs(c,{children:[e.jsxs(P,{component:"label",variant:"outlined",startIcon:e.jsx(Y,{}),sx:{borderColor:"#4527A0",color:"#4527A0","&:hover":{borderColor:"#311B92",bgcolor:"rgba(69,39,160,0.04)"}},children:["Upload Package Image",e.jsx("input",{hidden:!0,type:"file",accept:"image/*",onChange:T})]}),C&&e.jsxs(c,{sx:{mt:2,position:"relative",display:"inline-block"},children:[e.jsx("img",{src:C,alt:"preview",style:{width:200,height:140,borderRadius:12,objectFit:"cover"}}),e.jsx(Z,{size:"small",onClick:()=>{x(null),p(null)},sx:{position:"absolute",top:-8,right:-8,bgcolor:"#ef5350",color:"#fff","&:hover":{bgcolor:"#c62828"}},children:e.jsx(X,{fontSize:"small"})})]})]}),e.jsxs(g,{direction:"row",spacing:2,children:[e.jsx(P,{fullWidth:!0,variant:"contained",onClick:E,disabled:k,sx:{py:1.5,fontWeight:700,fontSize:"1rem"},children:k?e.jsx(N,{size:24,sx:{color:"#fff"}}):r?"Update Package":"Create Package"}),e.jsx(P,{fullWidth:!0,variant:"outlined",onClick:$,startIcon:e.jsx(V,{}),sx:{py:1.5,fontWeight:700},children:"Reset"})]})]})]}),e.jsx(_,{open:u.open,autoHideDuration:3e3,onClose:()=>b({...u,open:!1}),children:e.jsx(K,{severity:u.severity,children:u.message})})]})]})}export{se as default};
