import{r as c,j as e,B as o,x as F,b as y,aK as se,T as a,ar as Be,a4 as Pe,t as oe,aq as Re,au as re,av as ne,aL as ae,g as ie,a9 as Fe,ab as Ne,G as l,P as le,s as h,a as T,aM as de,F as Le,I as _e,ac as Ee,W as xe,C as N,aO as Oe,f as ce,bb as Ye,aP as $e,aQ as He,aR as qe,aS as Ge}from"./index-BMB9GWE2.js";const D="https://api.bookmyevent.ae";function Xe(){const[f,fe]=c.useState(new Date),[k,pe]=c.useState(new Date().getDate()),[ue,W]=c.useState(!1),[L,_]=c.useState([]),[E,he]=c.useState([]),[O,ge]=c.useState([]),[A,z]=c.useState([]),[I,Y]=c.useState([]),[Ue,$]=c.useState(!1),[w,x]=c.useState(null),[H,q]=c.useState(!1),[G,U]=c.useState(null),[i,g]=c.useState({fullName:"",contactNumber:"",emailAddress:"",address:"",numberOfGuests:"",cakeId:"",deliveryType:"Home Delivery",customerMessage:"",bookingDate:new Date().toISOString().split("T")[0],timeSlot:[],paymentType:"COD",bookingType:"Direct"}),m=(()=>{let t=localStorage.getItem("providerId")||localStorage.getItem("userId");if(!t){const s=localStorage.getItem("user");if(s)try{const r=JSON.parse(s);t=r._id||r.id||r.userId}catch(r){console.error("Error parsing user from localStorage:",r)}}return t})();c.useEffect(()=>{m&&(V(),me(),be())},[f,m]),c.useEffect(()=>{I.length===1&&!i.moduleId&&g(t=>({...t,moduleId:I[0]._id}))},[I]);const V=async()=>{if(!m){x("Provider ID is required");return}$(!0),x(null);try{const s=await(await fetch(`${D}/api/bookings/provider/${m}`)).json();s.success?_(s.data||[]):x(s.message||"Failed to fetch bookings")}catch(t){x("Error connecting to server"),console.error("Fetch error:",t)}finally{$(!1)}},me=async()=>{try{const s=await(await fetch(`${D}/api/modules`)).json();let r=[];s.success&&s.data&&Array.isArray(s.data)?r=s.data:s.success&&s.modules&&Array.isArray(s.modules)?r=s.modules:Array.isArray(s)&&(r=s),console.log("All modules fetched:",r);const n=r.filter(d=>(d.title||d.name||"").toLowerCase()==="cake");console.log("Filtered modules for provider:",n),Y(n),n.length===0&&console.warn("No modules available for this provider")}catch(t){console.error("Fetch modules error:",t),x("Failed to fetch modules: "+t.message),Y([])}},be=async()=>{try{const s=await(await fetch(`${D}/api/cakes/provider/${m}?moduleId=68e5fc09651cc12c1fc0f9c9`)).json();s.success&&he(s.data||[])}catch(t){console.error("Fetch cakes error:",t)}},je=async t=>{if(window.confirm("Are you sure you want to delete this booking?")){U(t),x(null);try{const r=await(await fetch(`${D}/api/bookings/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).json();r.success?(_(n=>n.filter(d=>d._id!==t)),alert("Booking deleted successfully!")):x(r.message||"Failed to delete booking")}catch(s){x("Error deleting booking: "+s.message),console.error("Delete error:",s)}finally{U(null)}}},B=new Date,ye=B.getDate(),ke=B.getMonth(),Se=B.getFullYear(),J=(()=>{const t=f.getFullYear(),s=f.getMonth(),r=new Date(t,s+1,0).getDate(),n={};for(let d=1;d<=r;d++){const te=L.filter(M=>{const j=new Date(M.bookingDate);return j.getDate()===d&&j.getMonth()===s&&j.getFullYear()===t&&M.bookingType==="Direct"}).reduce((M,j)=>M+(Array.isArray(j.timeSlot)?j.timeSlot.length:1),0);te===0?n[d]="free":te>=2?n[d]="booked":n[d]="available"}return n})(),b=L.filter(t=>{const s=new Date(t.bookingDate);return s.getDate()===k&&s.getMonth()===f.getMonth()&&s.getFullYear()===f.getFullYear()&&t.bookingType==="Direct"}),Ce=t=>{const s=t.getFullYear(),r=t.getMonth(),n=new Date(s,r,1).getDay(),d=new Date(s,r+1,0).getDate();return{firstDay:n,daysInMonth:d}},{firstDay:ve,daysInMonth:De}=Ce(f),Ie=f.toLocaleDateString("en-US",{month:"long",year:"numeric"}),P=t=>{switch(t){case"booked":return"#ef5350";case"available":return"#ffd54f";case"free":return"#66bb6a";default:return"#66bb6a"}},S=t=>{switch(t){case"Accepted":return"#7e57c2";case"Pending":return"#ffd54f";case"Rejected":return"#e57373";default:return"#ef5350"}},Q=t=>{fe(new Date(f.getFullYear(),f.getMonth()+t,1))},we=()=>{const t=[];["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(r=>t.push(e.jsx(o,{sx:{textAlign:"center",padding:{xs:"8px 4px",md:"16px"},color:"#777",fontSize:{xs:"11px",md:"14px"},fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px"},children:r},r)));for(let r=0;r<ve;r++)t.push(e.jsx(o,{sx:{display:{xs:"none",md:"block"},backgroundColor:"#f9f9f9",borderRadius:"12px"}},`empty-${r}`));for(let r=1;r<=De;r++){const n=J[r]||"free",d=r===ye&&f.getMonth()===ke&&f.getFullYear()===Se,u=r===k;t.push(e.jsxs(o,{onClick:()=>pe(r),sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:{xs:"50px",md:"100px"},cursor:"pointer",borderRadius:{xs:"8px",md:"16px"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:u?"rgba(239, 83, 80, 0.05)":"#fff",border:u?"1px solid #ef5350":"1px solid #f0f0f0",boxShadow:u?"0 4px 12px rgba(239, 83, 80, 0.15)":"none","&:hover":{transform:{md:"translateY(-4px)"},boxShadow:"0 6px 16px rgba(0,0,0,0.08)",borderColor:"#ef5350",zIndex:1}},children:[e.jsx(o,{sx:{fontSize:{xs:"14px",md:"22px"},fontWeight:d||u?"600":"400",color:d?"#fff":u?"#ef5350":"#333",width:{xs:"28px",md:"48px"},height:{xs:"28px",md:"48px"},display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:d?"#ef5350":"transparent",marginBottom:{xs:"2px",md:"8px"},transition:"all 0.2s"},children:r}),e.jsx(o,{sx:{width:{xs:"6px",md:"10px"},height:{xs:"6px",md:"10px"},borderRadius:"50%",backgroundColor:P(n),boxShadow:`0 0 8px ${P(n)}80`}}),n!=="free"&&e.jsx(a,{sx:{display:{xs:"none",md:"block"},fontSize:"10px",mt:1,color:"#999",fontWeight:500},children:n==="booked"?"FULL":"SLOTS"})]},r))}return t},R=J[k]||"free",Me=()=>b.length===0?"No bookings - All slots available":R==="booked"?`${b.length} bookings - Fully booked`:R==="available"?`${b.length} booking - Some slots available`:"All slots available",Te=()=>new Date(f.getFullYear(),f.getMonth(),k).toLocaleDateString("en-US",{weekday:"short"}),p=t=>{const{name:s,value:r}=t.target;g(n=>({...n,[s]:r}))},K=t=>{g(s=>{const r=s.timeSlot.includes(t)?s.timeSlot.filter(n=>n!==t):[...s.timeSlot,t];return{...s,timeSlot:r}})},We=t=>{const s=t.target.value;g(n=>({...n,cakeId:s}));const r=E.find(n=>n._id===s);ge((r==null?void 0:r.variations)||[]),z([])},X=t=>{z(s=>s.find(n=>n._id===t._id)?s.filter(n=>n._id!==t._id):[...s,{...t,quantity:1}])},Z=(t,s)=>{z(r=>r.map(n=>n._id===t?{...n,quantity:Math.max(1,s)}:n))},Ae=async()=>{q(!0),x(null);try{if(!i.fullName.trim()){x("Full Name is required");return}if(!i.contactNumber.trim()){x("Contact Number is required");return}if(!i.cakeId){x("Please select a cake");return}if(!A.length){x("Please select at least one cake variation");return}if(!i.bookingDate){x("Please select booking date");return}if(!i.timeSlot.length){x("Please select time slot");return}const t={moduleId:I[0]._id,moduleType:"Cake",cakeId:i.cakeId,variations:A,deliveryType:i.deliveryType,customerMessage:i.customerMessage,fullName:i.fullName,contactNumber:i.contactNumber,emailAddress:i.emailAddress,address:i.address,numberOfGuests:i.numberOfGuests?Number(i.numberOfGuests):1,bookingDate:i.bookingDate,timeSlot:i.timeSlot,paymentType:i.paymentType,bookingType:"Direct"},r=await(await fetch(`${D}/api/bookings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();r.success?(alert("Cake booking created successfully!"),W(!1),V()):x(r.message||"Booking failed")}catch{x("Error creating booking")}finally{q(!1)}},ze=()=>{W(!0)},ee=()=>{W(!1),x(null)},C={display:"flex",alignItems:"center",gap:1,mb:2,color:"#ef5350",fontWeight:600},v={color:"#ef5350",fontSize:24};return e.jsxs(o,{sx:{width:"100%",margin:"0 auto",padding:{xs:"8px",md:"40px"},backgroundColor:"#fafafa",minHeight:"100vh",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[!m&&e.jsx(F,{severity:"warning",sx:{mb:3},children:"Provider ID not found. Please make sure you're logged in. You may need to log out and log in again."}),w&&e.jsx(F,{severity:"error",sx:{mb:3},children:w}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:{xs:"16px",md:"32px"},padding:{xs:"0 4px",md:"0 20px"}},children:[e.jsx(y,{onClick:()=>Q(-1),sx:{backgroundColor:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"1px solid #f0f0f0","&:hover":{backgroundColor:"#f5f5f5",transform:"scale(1.1)"},transition:"all 0.2s"},children:e.jsx(se,{})}),e.jsx(a,{sx:{fontSize:{xs:"20px",md:"32px"},fontWeight:"600",color:"#333",letterSpacing:"-0.5px"},children:Ie}),e.jsx(y,{onClick:()=>Q(1),sx:{backgroundColor:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"1px solid #f0f0f0","&:hover":{backgroundColor:"#f5f5f5",transform:"scale(1.1)"},transition:"all 0.2s"},children:e.jsx(Be,{})})]}),e.jsx(o,{sx:{backgroundColor:"#fff",borderRadius:{xs:"16px",md:"24px"},marginBottom:{xs:"24px",md:"40px"},padding:{xs:"12px 8px",md:"40px"},boxShadow:"0 10px 30px rgba(0,0,0,0.04)",border:"1px solid #f0f0f0"},children:e.jsx(o,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:{xs:"4px",md:"16px"}},children:we()})}),e.jsx(o,{sx:{backgroundColor:"#fff",borderRadius:{xs:"8px",md:"12px"},padding:{xs:"12px 8px",md:"24px"},marginBottom:{xs:"16px",md:"32px"},boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"12px",md:"24px"},flexWrap:"wrap",flexDirection:{xs:"row",md:"row"}},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(o,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#ef5350"}}),e.jsx(a,{sx:{fontSize:"15px",color:"#666"},children:"Fully Booked"})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(o,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#ffd54f"}}),e.jsx(a,{sx:{fontSize:"15px",color:"#666"},children:"Slots Available"})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(o,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#66bb6a"}}),e.jsx(a,{sx:{fontSize:"15px",color:"#666"},children:"Fully Free"})]})]})}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:{xs:2,md:4},backgroundColor:"#fff",borderRadius:"24px",padding:{xs:"20px",md:"32px"},marginBottom:"32px",boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0"},children:[e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:{xs:"70px",md:"100px"},height:{xs:"70px",md:"100px"},backgroundColor:"#ef5350",borderRadius:"20px",color:"#fff",boxShadow:"0 8px 16px rgba(239, 83, 80, 0.2)"},children:[e.jsx(a,{sx:{fontSize:{xs:"12px",md:"14px"},fontWeight:"600",textTransform:"uppercase",opacity:.9},children:Te()}),e.jsx(a,{sx:{fontSize:{xs:"28px",md:"40px"},fontWeight:"700",lineHeight:1},children:k})]}),e.jsxs(o,{sx:{flex:1},children:[e.jsx(a,{sx:{fontSize:{xs:"18px",md:"28px"},fontWeight:"600",color:"#1a1a1a",marginBottom:"4px"},children:"Schedule Details"}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(o,{sx:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:P(R)}}),e.jsx(a,{sx:{fontSize:{xs:"14px",md:"16px"},color:"#666",fontWeight:"500"},children:Me()})]})]})]}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{sx:{fontSize:{xs:"20px",md:"24px"},fontWeight:"700",color:"#1a1a1a",mb:3,pl:1},children:"Today's Appointments"}),b.length>0?e.jsx(o,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:b.map(t=>{var s,r;return e.jsxs(o,{sx:{backgroundColor:"#fff",borderRadius:"24px",border:"1px solid #f0f0f0",padding:{xs:"20px",md:"32px"},position:"relative",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0,0,0,0.02)",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 30px rgba(0,0,0,0.06)",borderColor:"#ef5350"},"&::before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:"6px",backgroundColor:S(t.status)}},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[e.jsxs(o,{children:[e.jsx(a,{sx:{fontSize:{xs:"12px",md:"13px"},fontWeight:"700",textTransform:"uppercase",color:S(t.status),letterSpacing:"1px",mb:.5},children:Array.isArray(t.timeSlot)?t.timeSlot.map((n,d)=>e.jsxs("span",{children:[n.label," (",n.time,")",d<t.timeSlot.length-1?", ":""]},d)):(s=t.timeSlot)!=null&&s.label?`${t.timeSlot.label} (${t.timeSlot.time})`:"All Day"}),e.jsx(a,{sx:{fontSize:{xs:"18px",md:"22px"},fontWeight:"700",color:"#1a1a1a"},children:t.fullName})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Pe,{label:t.status,sx:{fontWeight:"600",fontSize:"12px",backgroundColor:`${S(t.status)}15`,color:S(t.status),border:`1px solid ${S(t.status)}30`}}),e.jsx(y,{onClick:()=>je(t._id),disabled:G===t._id,sx:{backgroundColor:"#fff1f1",color:"#ef5350","&:hover":{backgroundColor:"#ef5350",color:"#fff"}},children:G===t._id?e.jsx(oe,{size:20,color:"inherit"}):e.jsx(Re,{fontSize:"small"})})]})]}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"repeat(3, 1fr)"},gap:3,pt:3,borderTop:"1px solid #f8f8f8"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(o,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(re,{fontSize:"small"})}),e.jsxs(o,{children:[e.jsx(a,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Contact"}),e.jsx(a,{sx:{fontSize:"14px",fontWeight:"500"},children:t.contactNumber})]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(o,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(ne,{fontSize:"small"})}),e.jsxs(o,{children:[e.jsx(a,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Email"}),e.jsx(a,{sx:{fontSize:"14px",fontWeight:"500"},children:t.emailAddress||"N/A"})]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(o,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(ae,{fontSize:"small"})}),e.jsxs(o,{children:[e.jsx(a,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Cake"}),e.jsx(a,{sx:{fontSize:"14px",fontWeight:"500"},children:((r=t.cakeId)==null?void 0:r.name)||"Cake Booking"})]})]})]})]},t._id)})}):e.jsx(o,{sx:{textAlign:"center",py:8,backgroundColor:"#fff",borderRadius:"24px",border:"2px dashed #eee"},children:e.jsx(a,{sx:{color:"#999",fontSize:"16px"},children:"No appointments scheduled for this date."})})]}),b.length===0&&e.jsxs(o,{sx:{backgroundColor:"#f5f5f5",borderRadius:{xs:"12px",md:"20px"},padding:{xs:"24px",md:"48px"},textAlign:"center"},children:[e.jsx("div",{style:{margin:"0 auto 20px",width:"100px",height:"100px"},children:e.jsxs("svg",{width:"100",height:"100",viewBox:"0 0 80 80",fill:"none",children:[e.jsx("rect",{x:"10",y:"15",width:"60",height:"50",rx:"4",stroke:"#ccc",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M25 15 L25 10 M55 15 L55 10",stroke:"#ccc",strokeWidth:"2"}),e.jsx("path",{d:"M20 25 L60 25",stroke:"#ccc",strokeWidth:"2"}),e.jsx("path",{d:"M35 45 L45 45 M35 45 L40 40 M35 45 L40 50",stroke:"#66bb6a",strokeWidth:"2",strokeLinecap:"round"})]})}),e.jsx(a,{sx:{fontSize:{xs:"18px",md:"24px"},fontWeight:"500",marginBottom:{xs:"8px",md:"10px"},color:"#333"},children:"No Bookings Today"}),e.jsx(a,{sx:{fontSize:{xs:"14px",md:"16px"},color:"#666"},children:"All slots are available for booking"})]}),e.jsx(ie,{variant:"contained",sx:{position:"fixed",bottom:{xs:"16px",md:"32px"},right:{xs:"16px",md:"32px"},backgroundColor:"#ef5350",color:"#fff",borderRadius:"50%",width:{xs:"56px",md:"64px"},height:{xs:"56px",md:"64px"},minWidth:"unset",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 6px 16px rgba(0,0,0,0.3)","&:hover":{backgroundColor:"#e53935"}},onClick:ze,children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 5v14M5 12h14"})})}),e.jsx(Fe,{fullScreen:!0,open:ue,onClose:ee,PaperProps:{sx:{backgroundColor:"#fafafa"}},children:e.jsxs(o,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(o,{sx:{px:{xs:2,md:4},py:2.5,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#fff",borderBottom:"1px solid #f0f0f0",position:"sticky",top:0,zIndex:10},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(y,{onClick:ee,sx:{color:"#333"},children:e.jsx(se,{})}),e.jsx(a,{variant:"h5",sx:{fontWeight:800,color:"#1a1a1a",letterSpacing:"-0.5px"},children:"Create New Booking"})]})}),e.jsx(Ne,{sx:{flex:1,p:0,backgroundColor:"#f8f9fa"},children:e.jsxs(o,{sx:{maxWidth:"1200px",margin:"0 auto",p:{xs:2,md:4}},children:[w&&e.jsx(F,{severity:"error",sx:{mb:4,borderRadius:"16px",border:"1px solid #ffcdd2",boxShadow:"0 4px 12px rgba(239, 83, 80, 0.1)"},children:w}),e.jsxs(l,{container:!0,spacing:4,children:[e.jsx(l,{item:!0,xs:12,children:e.jsxs(o,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...C,mb:3},children:[e.jsx(le,{sx:v}),"Client Information"]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(h,{fullWidth:!0,name:"fullName",label:"Full Name",variant:"outlined",value:i.fullName,onChange:p,InputProps:{startAdornment:e.jsx(T,{position:"start",children:e.jsx(le,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(h,{fullWidth:!0,name:"contactNumber",label:"Contact Number",variant:"outlined",value:i.contactNumber,onChange:p,InputProps:{startAdornment:e.jsx(T,{position:"start",children:e.jsx(re,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(h,{fullWidth:!0,name:"emailAddress",label:"Email Address (Optional)",variant:"outlined",value:i.emailAddress,onChange:p,InputProps:{startAdornment:e.jsx(T,{position:"start",children:e.jsx(ne,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(h,{fullWidth:!0,name:"address",label:"Delivery Address (Optional)",variant:"outlined",value:i.address,onChange:p,InputProps:{startAdornment:e.jsx(T,{position:"start",children:e.jsx(ae,{sx:{color:"#999",fontSize:20}})})}})})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(o,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...C,mb:3},children:[e.jsx(de,{sx:v}),"Cake Selection"]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,children:e.jsxs(Le,{fullWidth:!0,variant:"outlined",children:[e.jsx(_e,{shrink:!0,children:"Select Cake"}),e.jsxs(Ee,{name:"cakeId",value:i.cakeId,onChange:We,label:"Select Cake",displayEmpty:!0,MenuProps:{disablePortal:!0,PaperProps:{sx:{maxHeight:300,borderRadius:2,boxShadow:"0 8px 24px rgba(0,0,0,0.15)"}}},children:[e.jsx(xe,{value:"",disabled:!0,children:e.jsx("span",{style:{color:"#999"},children:"Select Cake"})}),E.map(t=>e.jsx(xe,{value:t._id,children:t.cakeTitle||t.packageName||t.name},t._id))]})]})}),O.length>0&&e.jsxs(l,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle2",sx:{mb:2,fontWeight:700,color:"#555"},children:"Select Variations"}),e.jsx(o,{sx:{maxHeight:"300px",overflowY:"auto",pr:1},children:e.jsx(l,{container:!0,spacing:2,children:O.map(t=>{const s=A.find(r=>r._id===t._id);return e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(o,{sx:{p:2,borderRadius:"16px",border:"1px solid",borderColor:s?"#ef5350":"#f0f0f0",backgroundColor:s?"#fff5f5":"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s",cursor:"pointer","&:hover":{borderColor:"#ef5350"}},onClick:()=>!s&&X(t),children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(N,{checked:!!s,onChange:r=>{r.stopPropagation(),X(t)},sx:{color:"#ef5350","&.Mui-checked":{color:"#ef5350"}}}),e.jsxs(o,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:600},children:t.name}),e.jsxs(a,{variant:"caption",sx:{color:"#ef5350",fontWeight:700},children:["AED ",t.price]})]})]}),s&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},onClick:r=>r.stopPropagation(),children:[e.jsx(y,{size:"small",onClick:()=>Z(t._id,s.quantity-1),sx:{border:"1px solid #ef5350",color:"#ef5350",p:.5},children:e.jsx(a,{variant:"body2",sx:{fontWeight:900,lineHeight:1},children:"-"})}),e.jsx(a,{sx:{minWidth:"24px",textAlign:"center",fontWeight:600},children:s.quantity}),e.jsx(y,{size:"small",onClick:()=>Z(t._id,s.quantity+1),sx:{backgroundColor:"#ef5350",color:"#fff","&:hover":{backgroundColor:"#e53935"},p:.5},children:e.jsx(a,{variant:"body2",sx:{fontWeight:900,lineHeight:1},children:"+"})})]})]})},t._id)})})})]})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(o,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...C,mb:3},children:[e.jsx(Oe,{sx:v}),"Scheduling & Delivery"]}),e.jsxs(l,{container:!0,spacing:4,children:[e.jsxs(l,{item:!0,xs:12,md:6,children:[e.jsx(h,{fullWidth:!0,name:"bookingDate",label:"Booking Date",type:"date",variant:"outlined",value:i.bookingDate,onChange:p,InputLabelProps:{shrink:!0},sx:{mb:3}}),e.jsx(a,{variant:"subtitle2",sx:{mb:1,fontWeight:700,color:"#555"},children:"Select Time Slots"}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(ce,{control:e.jsx(N,{checked:i.timeSlot.includes("Morning"),onChange:()=>K("Morning"),sx:{color:"#ef5350","&.Mui-checked":{color:"#ef5350"}}}),label:"Morning (9:00 AM - 1:00 PM)"}),e.jsx(ce,{control:e.jsx(N,{checked:i.timeSlot.includes("Evening"),onChange:()=>K("Evening"),sx:{color:"#ef5350","&.Mui-checked":{color:"#ef5350"}}}),label:"Evening (6:00 PM - 10:00 PM)"})]})]}),e.jsxs(l,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"subtitle2",sx:{mb:2,fontWeight:700,color:"#555"},children:"Delivery Type"}),e.jsx(o,{sx:{display:"flex",gap:2,mb:3},children:["Home Delivery","Store Pickup"].map(t=>e.jsx(o,{onClick:()=>g(s=>({...s,deliveryType:t})),sx:{flex:1,p:2,textAlign:"center",borderRadius:"12px",border:"2px solid",borderColor:i.deliveryType===t?"#ef5350":"#eee",backgroundColor:i.deliveryType===t?"#fff5f5":"#fff",color:i.deliveryType===t?"#ef5350":"#666",cursor:"pointer",fontWeight:600},children:t},t))}),e.jsx(h,{fullWidth:!0,name:"numberOfGuests",label:"Number of Guests (Optional)",type:"number",variant:"outlined",value:i.numberOfGuests||"",onChange:p})]})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(o,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...C,mb:3},children:[e.jsx(Ye,{sx:v}),"Payment Method"]}),e.jsx(l,{container:!0,spacing:2,children:[{id:"COD",label:"Cash on Delivery",icon:e.jsx($e,{})},{id:"Card",label:"Card Payment",icon:e.jsx(He,{})},{id:"UPI",label:"UPI / Wallet",icon:e.jsx(qe,{})},{id:"Bank Transfer",label:"Bank Transfer",icon:e.jsx(Ge,{})}].map(t=>e.jsx(l,{item:!0,xs:6,md:3,children:e.jsxs(o,{onClick:()=>g(s=>({...s,paymentType:t.id})),sx:{p:2,display:"flex",flexDirection:"column",alignItems:"center",gap:1,borderRadius:"16px",border:"2px solid",borderColor:i.paymentType===t.id?"#ef5350":"#eee",backgroundColor:i.paymentType===t.id?"#fff5f5":"#fff",cursor:"pointer",transition:"all 0.2s","&:hover":{borderColor:"#ef5350"}},children:[e.jsx(o,{sx:{color:i.paymentType===t.id?"#ef5350":"#666"},children:t.icon}),e.jsx(a,{variant:"caption",sx:{fontWeight:600,color:i.paymentType===t.id?"#ef5350":"#666"},children:t.label})]})},t.id))})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(o,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(a,{variant:"h6",sx:{...C,mb:3},children:[e.jsx(de,{sx:v}),"Additional Requests"]}),e.jsx(h,{fullWidth:!0,name:"customerMessage",label:"Message on Cake / Special Instructions",multiline:!0,rows:3,variant:"outlined",value:i.customerMessage,onChange:p})]})})]})]})}),e.jsx(o,{sx:{p:2.5,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderTop:"1px solid #f0f0f0",display:"flex",justifyContent:"center",zIndex:1e3},children:e.jsx(ie,{onClick:Ae,disabled:H,variant:"contained",sx:{backgroundColor:"#ef5350",px:8,py:1.8,borderRadius:"16px",fontWeight:700,fontSize:"16px",textTransform:"none",boxShadow:"0 8px 24px rgba(239, 83, 80, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"#e53935",transform:"translateY(-2px)",boxShadow:"0 12px 30px rgba(239, 83, 80, 0.4)"},"&:active":{transform:"translateY(0)"}},children:H?e.jsx(oe,{size:24,color:"inherit"}):"Confirm & Save Booking"})})]})})]})}export{Xe as default};
