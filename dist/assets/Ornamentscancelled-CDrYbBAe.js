import{r as t,j as n,B as a,T as r,t as A,a8 as w,S as x,ae as B,D as S,g as u,h as z}from"./index-BLyHJTuX.js";const O=()=>{const[f,h]=t.useState(null),[i,j]=t.useState([]),[g,p]=t.useState(!0),m=e=>e?typeof e=="string"?e:Array.isArray(e)?e.join(", "):typeof e=="object"?e.label?e.label:e.name?e.name:Object.values(e).filter(s=>typeof s=="string").join(", "):"N/A":"N/A",y=e=>{if(!e)return"N/A";const s=new Date(e);return isNaN(s.getTime())?"N/A":s.toDateString()},C=e=>Number(e)||0;t.useEffect(()=>{(async()=>{var s;try{const k=(((s=(await z.get("https://api.bookmyevent.ae/api/bookings")).data)==null?void 0:s.bookings)||[]).filter(d=>{const o=String(d.status||"").toLowerCase(),l=String(d.moduleType||"").toLowerCase();return(o==="rejected"||o==="cancelled"||o==="rejected")&&(l==="ornament"||l==="ornaments")});j(k)}catch(c){console.error("Failed to fetch canceled bookings",c)}finally{p(!1)}})()},[]);const N=e=>{h(s=>s===e?null:e)};return n.jsxs(a,{p:2,children:[n.jsx(r,{variant:"h4",gutterBottom:!0,children:"Canceled / Rejected Ornaments Bookings"}),g?n.jsx(A,{}):i.length===0?n.jsx(r,{children:"No canceled bookings found"}):i.map(e=>{var s;return n.jsxs(w,{elevation:3,sx:{p:2,mt:2,borderRadius:"12px",cursor:"pointer"},onClick:()=>N(e._id),children:[n.jsxs(x,{direction:"row",justifyContent:"space-between",children:[n.jsxs(a,{children:[n.jsxs(r,{fontWeight:600,children:["Booking ID: #",(s=e._id)==null?void 0:s.slice(-6)]}),n.jsx(r,{color:"gray",fontSize:14,children:y(e.bookingDate)}),n.jsx(r,{color:"gray",fontSize:13,children:m(e.timeSlot)})]}),n.jsxs(r,{fontWeight:700,color:"red",children:["â‚¹",C(e.finalPrice)]})]}),n.jsxs(B,{in:f===e._id,children:[n.jsx(S,{sx:{my:2}}),n.jsxs(a,{sx:{background:"#f8f8f8",p:2,borderRadius:"10px"},children:[n.jsxs(r,{fontSize:14,children:[n.jsx("strong",{children:"Customer:"})," ",e.fullName||"N/A"]}),n.jsxs(r,{fontSize:14,children:[n.jsx("strong",{children:"Email:"})," ",e.emailAddress||"N/A"]}),n.jsxs(r,{fontSize:14,children:[n.jsx("strong",{children:"Contact:"})," ",e.contactNumber||"N/A"]}),n.jsxs(r,{fontSize:14,children:[n.jsx("strong",{children:"Guests:"})," ",e.numberOfGuests||"N/A"]}),n.jsxs(r,{fontSize:14,mt:1,children:[n.jsx("strong",{children:"Status:"})," ",n.jsx("span",{style:{color:"red"},children:e.status||"N/A"})]}),n.jsxs(r,{fontSize:14,children:[n.jsx("strong",{children:"Payment:"})," ",e.paymentStatus||"N/A"]})]}),n.jsxs(x,{direction:"row",spacing:2,mt:2,justifyContent:"center",children:[n.jsx(u,{variant:"outlined",sx:{width:"120px",borderRadius:"30px",color:"#E15B65"},children:"Download"}),n.jsx(u,{variant:"contained",sx:{width:"120px",borderRadius:"30px",bgcolor:"#E15B65",color:"white"},children:"View"})]})]})]},e._id)})]})};export{O as default};
