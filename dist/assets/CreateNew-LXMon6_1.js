import{u as ra,i as sa,aj as na,w as oa,ai as ia,r as a,h as M,j as e,B as i,b as ut,ak as la,T as o,t as At,p as A,W as $,s as f,am as da,S as pt,F,I as J,ag as K,$ as S,at as ca,f as se,an as ne,al as ua,g as Bt,ao as pa,x as ga}from"./index-BADBtUzL.js";import{D as ha}from"./DirectionsCar-C2ZynchU.js";import{C as Pt}from"./CloudUpload-CobADRYp.js";const Tt=da(i)(({theme:l})=>({border:"2px dashed #e0e0e0",borderRadius:l.shape.borderRadius,padding:l.spacing(3),textAlign:"center",backgroundColor:l.palette.grey[50],cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"150px","&:hover":{borderColor:l.palette.primary.main},'& input[type="file"]':{display:"none"}})),Ba=()=>{const l=ra(),W=sa(l.breakpoints.down("md")),N=na(),Ie=oa(),{id:Q}=ia(),Ee=a.useRef(null),y=a.useRef(null),Ae=a.useRef(null),[gt,Dt]=a.useState(""),[Be,Mt]=a.useState(""),w="https://api.bookmyevent.ae/api",Pe="AIzaSyAfLUm1kPmeMkHh1Hr5nbgNpQJOsNa7B78",U=localStorage.getItem("moduleId");a.useMemo(()=>{var t;return(t=N.state)==null?void 0:t.vehicle},[N.state]);const ht=a.useMemo(()=>{var t,r;return(r=(t=N.state)==null?void 0:t.vehicle)==null?void 0:r._id},[N.state]),Y=a.useMemo(()=>{var t,r;return Q||((r=(t=N.state)==null?void 0:t.vehicle)==null?void 0:r._id)||""},[Q,ht]),Wt=a.useMemo(()=>Y?"edit":"create",[Y]),[Te,De]=a.useState(Wt),[oe,Me]=a.useState(""),[xt,We]=a.useState(""),[V,_e]=a.useState(null),[T,ie]=a.useState([]),[le,Le]=a.useState(""),[de,ze]=a.useState(""),[_t,mt]=a.useState(""),[ce,Re]=a.useState(""),[X,$e]=a.useState(""),[ue,Fe]=a.useState(""),[Ve,Oe]=a.useState("yes"),[ee,He]=a.useState(""),[bt,Ne]=a.useState(""),[u,_]=a.useState("hourly"),[pe,Ue]=a.useState(""),[ge,qe]=a.useState(""),[he,Ze]=a.useState(""),[xe,Ge]=a.useState(""),[te,Je]=a.useState({driverIncluded:!1,sunroof:!1,decorationAvailable:!1}),[Ke,me]=a.useState([]),[be,Qe]=a.useState(""),[Lt,b]=a.useState(!1),[zt,j]=a.useState(""),[ft,v]=a.useState("success"),[Ye,Xe]=a.useState([]),[et,yt]=a.useState([]),[Rt,$t]=a.useState([]),[tt,Ft]=a.useState({}),[xa,ma]=a.useState(""),[ba,fa]=a.useState(""),[ya,ja]=a.useState(""),[va,Ca]=a.useState(""),[Sa,wa]=a.useState(""),[ka,Vt]=a.useState({}),[Ot,at]=a.useState([]),[Ht,ae]=a.useState([]),[re,jt]=a.useState(""),[fe,rt]=a.useState(""),[O,st]=a.useState([]),[nt,vt]=a.useState(!1),[ye,B]=a.useState(!1),[je,ot]=a.useState(""),[H,it]=a.useState([]),[ve,q]=a.useState(""),[k,Z]=a.useState(""),[I,G]=a.useState(""),[Ce,lt]=a.useState(""),[D,Ct]=a.useState(!1),[m,St]=a.useState(null);a.useEffect(()=>{if(window.google&&window.google.maps){Ct(!0);return}const t=document.createElement("script");return t.src=`https://maps.googleapis.com/maps/api/js?key=${Pe}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{Ct(!0)},document.head.appendChild(t),()=>{document.head.contains(t)&&document.head.removeChild(t)}},[Pe]),a.useEffect(()=>{D&&window.google&&window.google.maps&&Nt()},[D]);const Nt=a.useCallback(()=>{if(!window.google||!Ee.current||!D)return;const t=k&&I?parseFloat(k):20.5937,r=k&&I?parseFloat(I):78.9629,n={lat:t,lng:r},s=new window.google.maps.Map(Ee.current,{zoom:12,center:n});s.addListener("click",p=>{const g=p.latLng.lat(),d=p.latLng.lng();Z(g.toString()),G(d.toString()),y.current&&y.current.setMap(null),y.current=new window.google.maps.Marker({position:{lat:g,lng:d},map:s}),new window.google.maps.Geocoder().geocode({location:{lat:g,lng:d}},(E,P)=>{P==="OK"&&E[0]?(q(E[0].formatted_address),j("Location set and address auto-filled!"),v("success"),b(!0)):(j("Location set, but could not determine address."),v("info"),b(!0))})}),St(s)},[D,k,I]);a.useEffect(()=>{if(!D||!m||!Ae.current||!window.google)return;const t=new window.google.maps.places.Autocomplete(Ae.current,{fields:["place_id","geometry","name","formatted_address"]}),r=t.addListener("place_changed",()=>{const n=t.getPlace();if(!n.geometry||!n.geometry.location)return;const s=n.geometry.location;n.geometry.viewport?m.fitBounds(n.geometry.viewport):(m.setCenter(s),m.setZoom(17)),y.current&&y.current.setMap(null),y.current=new window.google.maps.Marker({position:s,map:m}),Z(s.lat().toString()),G(s.lng().toString()),q(n.formatted_address||n.name),j("Location selected!"),v("success"),b(!0)});return()=>{window.google&&window.google.maps.event&&window.google.maps.event.removeListener(r)}},[D,m]),a.useEffect(()=>{if(!m||!k||!I)return;const t={lat:parseFloat(k),lng:parseFloat(I)};m.setCenter(t),m.setZoom(12),y.current?y.current.setPosition(t):y.current=new window.google.maps.Marker({position:t,map:m})},[k,I,m]),a.useEffect(()=>{if(!X||!D||!window.google||!window.google.maps)return;new window.google.maps.Geocoder().geocode({address:X},(r,n)=>{if(n==="OK"&&r[0]){const s=r[0].geometry.location,p=s.lat().toString(),g=s.lng().toString();Z(p),G(g),q(r[0].formatted_address),m&&(m.setCenter({lat:s.lat(),lng:s.lng()}),m.setZoom(12),y.current&&y.current.setMap(null),y.current=new window.google.maps.Marker({position:{lat:s.lat(),lng:s.lng()},map:m})),j(`Location set for ${X}!`),v("success"),b(!0)}else j(`Could not find location for ${X}`),v("warning"),b(!0)})},[X,D,m]);const Se=a.useCallback(t=>{var p,g,d,C,E,P,L,z,R,c,x,ke,It,Et;if(console.log("Setting vehicle data:",t),t.brand&&t.brand._id&&!Ye.some(h=>h._id===t.brand._id)&&Xe(h=>[...h,{_id:t.brand._id,title:t.brand.title||t.brand.name||"Unknown Brand"}]),(g=(p=t.category)==null?void 0:p.parentCategory)!=null&&g._id){const h=t.category.parentCategory._id;jt(h),rt(t.category._id),M.get(`${w}/categories/parents/${h}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(aa=>ae(aa.data.data||[])).catch(()=>ae([]))}let r="";Array.isArray(t.category)&&t.category.length>0?(r=t.category[0]._id,et.some(h=>h._id===r)||yt(h=>[...h,{_id:r,title:t.category[0].title||"Unknown Category"}])):t.category&&typeof t.category=="object"&&t.category._id?(r=t.category._id,et.some(h=>h._id===r)||yt(h=>[...h,{_id:r,title:t.category.title||"Unknown Category"}])):typeof t.category=="string"&&(r=t.category),t.zone&&t.zone._id&&!O.some(h=>h._id===t.zone._id)&&st(h=>[...h,{_id:t.zone._id,name:t.zone.name||"Unknown Zone"}]),Me(t.name||""),We(t.description||""),Le(((d=t.brand)==null?void 0:d._id)||""),mt(r),console.log("Category ID being set:",r);const n=((C=t.zone)==null?void 0:C._id)||"";Re(n);const s=O.find(h=>h._id===n)||t.zone&&{name:t.zone.name};$e(s?s.name:""),ze(t.model||""),Fe(((E=t.seatingCapacity)==null?void 0:E.toString())||""),Oe(t.airCondition?"yes":"no"),He(t.licensePlateNumber||""),me(t.searchTags||[]),q(t.venueAddress||""),Z(((P=t.latitude)==null?void 0:P.toString())||""),G(((L=t.longitude)==null?void 0:L.toString())||""),lt(t.operatingHours||""),console.log("Operating hours being set:",t.operatingHours),t.pricing&&(_(t.pricing.type||"hourly"),Ue(((z=t.pricing.hourly)==null?void 0:z.toString())||""),qe(((R=t.pricing.perDay)==null?void 0:R.toString())||""),Ze(((c=t.pricing.distanceWise)==null?void 0:c.toString())||"")),Ge(((x=t.discount)==null?void 0:x.toString())||""),Je({driverIncluded:((ke=t.features)==null?void 0:ke.driverIncluded)??!1,sunroof:((It=t.features)==null?void 0:It.sunroof)??!1,decorationAvailable:((Et=t.features)==null?void 0:Et.decorationAvailable)??!1})},[Ye,et,O]);a.useEffect(()=>()=>{T.forEach(t=>URL.revokeObjectURL(t))},[T]),a.useEffect(()=>{(async()=>{var r,n,s,p,g;try{if(!U)throw new Error("Module ID is not defined. Please log in or set moduleId in localStorage.");const d=localStorage.getItem("token"),[C,E,P]=await Promise.all([M.get(`${w}/brands/module/${U}`,{headers:{Authorization:`Bearer ${d}`}}),M.get(`${w}/categories/parents/${U}`,{headers:{Authorization:`Bearer ${d}`}}),M.get(`${w}/zones`,{headers:{Authorization:`Bearer ${d}`,Accept:"application/json"}})]);at(((r=E.data)==null?void 0:r.data)||[]);const L=Array.isArray(C.data)?C.data:C.data.data||[];Xe(L);const z=((n=E.data)==null?void 0:n.data)||[];at(z);const R=P.data.data||P.data||[],c=Array.isArray(R)?R.filter(x=>x.isActive).map(x=>({_id:x._id,name:x.name})):[];st(c),console.log("Module ID:",U),console.log("Brands:",L),console.log("Parent Categories:",z),console.log("Zones:",c),vt(!0)}catch(d){console.error("Error fetching brands/categories/zones:",((s=d.response)==null?void 0:s.data)||d),Xe([]),at([]),st([]),vt(!0),j(((g=(p=d.response)==null?void 0:p.data)==null?void 0:g.message)||"Failed to fetch brands, categories, or zones"),v("error"),b(!0)}})()},[U,w]),a.useEffect(()=>{(async()=>{var r;try{const p=(((r=(await M.get(`${w}/vehicle-attributes`)).data)==null?void 0:r.data)||[]).filter(d=>d.status),g={};p.forEach(d=>{g[d.title.toLowerCase()]=d.values||[]}),$t(p),Vt(g),console.log("✅ Vehicle Attributes Loaded:",p)}catch(n){console.error("❌ Failed to load vehicle attributes",n)}})()},[w]),a.useEffect(()=>{var r;if(!nt)return;const t=(r=N.state)==null?void 0:r.vehicle;t?(Se(t),ot(t.thumbnail||""),it(t.images||[]),De("edit")):Q&&(async()=>{var s,p,g;B(!0);try{const d=await M.get(`${w}/vehicles/${Q}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),C=d.data.data||d.data;console.log("Vehicle data fetched for edit:",C),Se(C),ot(C.thumbnail||""),it(C.images||[]),De("edit")}catch(d){j(((p=(s=d.response)==null?void 0:s.data)==null?void 0:p.message)||"Failed to fetch vehicle data"),v("error"),b(!0),console.error("Error fetching vehicle:",((g=d.response)==null?void 0:g.data)||d)}finally{B(!1)}})()},[nt,Q,Se]);const Ut=async t=>{const r=t.target.value;if(jt(r),rt(""),ae([]),!!r)try{const n=await M.get(`${w}/categories/parents/${r}/subcategories`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});ae(n.data.data||[])}catch(n){console.error("Failed to fetch sub categories",n),ae([])}},qt=a.useCallback(t=>{const r=t.target.files[0];r&&_e(r)},[]),wt=a.useCallback(t=>{t.preventDefault()},[]),Zt=a.useCallback(t=>{t.preventDefault();const r=t.dataTransfer.files[0];r&&_e(r)},[]),Gt=a.useCallback(t=>{const r=Array.from(t.target.files);ie(n=>[...n,...r])},[]),Jt=a.useCallback(t=>{t.preventDefault();const r=Array.from(t.dataTransfer.files);ie(n=>[...n,...r])},[]),Kt=a.useCallback(t=>{Qe(t.target.value)},[]),Qt=(t,r)=>{Ft(n=>({...n,[t]:r}))},Yt=a.useCallback(t=>{t.key==="Enter"&&be.trim()&&(me(r=>[...r,be.trim()]),Qe(""),t.preventDefault())},[be]),Xt=a.useCallback(t=>{me(r=>r.filter(n=>n!==t))},[]),dt=a.useCallback(t=>/^[A-Z0-9]{6,8}$/.test(t)?(Ne(""),!0):(Ne("License plate must be 6-8 alphanumeric characters"),!1),[]),ct=a.useCallback(()=>{Me(""),We(""),q(""),Le(""),ze(""),mt(""),Re(""),$e(""),_e(null),ie([]),ot(""),it([]),Fe(""),Oe("yes"),He(""),Ne(""),Je({driverIncluded:!1,sunroof:!1,decorationAvailable:!1}),_("hourly"),Ue(""),qe(""),Ze(""),Ge(""),me([]),Qe(""),Z(""),G(""),lt(""),De("create"),y.current&&(y.current.setMap(null),y.current=null),m&&St(null)},[]),ea=a.useCallback(async t=>{var g,d,C,E,P,L,z,R;t.preventDefault();const r=Te==="edit";if(B(!0),!oe||!le||!de||!re||!fe||!ce||!ue||!ee||!u||!ve||!k||!I){j("Please fill all required fields."),v("error"),b(!0),B(!1);return}if(u==="hourly"&&!pe||u==="perDay"&&!ge||u==="distanceWise"&&!he){j(`Please provide a price for ${u} trip type.`),v("error"),b(!0),B(!1);return}if(!V&&!je&&!r){j("Please upload a thumbnail image."),v("error"),b(!0),B(!1);return}if(T.length===0&&H.length===0&&!r){j("Please upload at least one vehicle image."),v("error"),b(!0),B(!1);return}if(!dt(ee)){j("Invalid license plate number."),v("error"),b(!0),B(!1);return}const n=localStorage.getItem("token");if(!n){j("No authentication token found. Please log in."),v("error"),b(!0),B(!1);return}const s=new FormData;s.append("transmissionType",gt),s.append("enginePower",Be?parseInt(Be):""),s.append("name",oe),s.append("description",xt),s.append("brand",le),s.append("category",re),s.append("subCategories[]",fe),s.append("zone",ce),s.append("model",de),s.append("seatingCapacity",parseInt(ue)),s.append("airCondition",Ve==="yes"),s.append("features[driverIncluded]",te.driverIncluded),s.append("features[sunroof]",te.sunroof),s.append("features[decorationAvailable]",te.decorationAvailable),s.append("attributes",JSON.stringify(tt)),s.append("licensePlateNumber",ee),s.append("venueAddress",ve),s.append("latitude",parseFloat(k)),s.append("longitude",parseFloat(I)),Ce&&s.append("operatingHours",Ce),s.append("pricing[type]",u),s.append("pricing[hourly]",u==="hourly"&&parseFloat(pe)||0),s.append("pricing[perDay]",u==="perDay"&&parseFloat(ge)||0),s.append("pricing[distanceWise]",u==="distanceWise"&&parseFloat(he)||0),xe&&s.append("discount",parseFloat(xe)),Ke.forEach(c=>s.append("searchTags[]",c)),V&&s.append("thumbnail",V),T.forEach(c=>s.append("images",c));const p={};for(let[c,x]of s.entries())p[c]=x instanceof File?x.name:x;console.log("FormData:",p);try{let c,x;if(r){if(!Y)throw new Error("Invalid vehicle ID for update");c=await M.put(`${w}/vehicles/${Y}`,s,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}}),x=c.data.data||c.data}else c=await M.post(`${w}/vehicles`,s,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}}),x=c.data.data||c.data;console.log("API Response:",c.data),j(r?"Vehicle updated successfully!":"Vehicle added successfully!"),v("success"),b(!0),ct(),r&&Ie("/vehicle-setup/lists",{state:{vehicle:x}})}catch(c){console.error("API Error:",{status:(g=c.response)==null?void 0:g.status,statusText:(d=c.response)==null?void 0:d.statusText,data:(C=c.response)==null?void 0:C.data,headers:(E=c.response)==null?void 0:E.headers,message:c.message});let x=((L=(P=c.response)==null?void 0:P.data)==null?void 0:L.message)||"Failed to save vehicle";(R=(z=c.response)==null?void 0:z.data)!=null&&R.errors&&(x=c.response.data.errors.map(ke=>ke.msg).join(", ")),j(x),v("error"),b(!0)}finally{B(!1)}},[Te,Y,oe,le,de,_t,ce,ue,Ve,te,ee,u,pe,ge,he,xe,Ke,V,T,je,H,dt,ct,Ie,w,U,nt,ht,Se,ve,k,I,Ce,re,fe,tt]),kt=a.useCallback((t,r)=>{r!=="clickaway"&&b(!1)},[]),we=Te==="edit",ta=a.useCallback(t=>{const r=t.target.value;Re(r);const n=O.find(s=>s._id===r);$e(n?n.name:"")},[O]);return e.jsxs(i,{sx:{p:W?2:3,backgroundColor:l.palette.grey[100],minHeight:"100vh",width:"100%"},children:[e.jsxs(i,{sx:{maxWidth:"lg",margin:"auto",backgroundColor:"white",borderRadius:l.shape.borderRadius,boxShadow:l.shadows[1],p:W?2:3,overflowX:"hidden"},children:[e.jsx(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[we&&e.jsx(ut,{onClick:()=>Ie("/vehicle-setup/lists"),color:"primary",children:e.jsx(la,{})}),e.jsx(ha,{sx:{fontSize:24,mr:1}}),e.jsx(o,{variant:"h5",component:"h1",children:we?"Edit Vehicle":"Add New Vehicle"})]})}),e.jsx(o,{variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Insert the basic information of the vehicle"}),ye&&e.jsx(i,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.jsx(At,{})}),e.jsxs(i,{component:"form",onSubmit:ea,children:[e.jsxs(i,{sx:{display:"flex",flexDirection:W?"column":"row",gap:3,mb:4},children:[e.jsx(A,{sx:{flex:W?"auto":2,p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"General Information"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the basic information of the vehicle"}),e.jsx(f,{fullWidth:!0,label:"Vehicle Name*",variant:"outlined",value:oe,onChange:t=>Me(t.target.value),placeholder:"Type vehicle name",sx:{mb:2},required:!0}),e.jsx(f,{fullWidth:!0,label:"Short Description",variant:"outlined",multiline:!0,rows:4,value:xt,onChange:t=>We(t.target.value),placeholder:"Type short description",sx:{mb:2}})]})}),e.jsx(A,{sx:{flex:W?"auto":1,p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Thumbnail*"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs(Tt,{onDragOver:wt,onDrop:Zt,onClick:()=>document.getElementById("thumbnail-upload").click(),children:[V?e.jsxs(i,{children:[e.jsx("img",{src:URL.createObjectURL(V),alt:"Thumbnail preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:l.spacing(1)}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:V.name})]}):je?e.jsxs(i,{children:[e.jsx("img",{src:je,alt:"Existing thumbnail",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain",marginBottom:l.spacing(1),borderColor:"#E15B65"}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Existing thumbnail. Upload to replace."})]}):e.jsxs(i,{children:[e.jsx(Pt,{sx:{fontSize:40,color:"#E15B65",mb:1}}),e.jsx(o,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(o,{variant:"body2",color:"#E15B65",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"thumbnail-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:qt})]})]})})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(A,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Images*"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs(Tt,{onDragOver:wt,onDrop:Jt,onClick:()=>document.getElementById("images-upload").click(),children:[e.jsxs(i,{sx:{display:"flex",flexWrap:"wrap",gap:1,justifyContent:"center",width:"100%"},children:[H.length>0&&e.jsx(e.Fragment,{children:H.map((t,r)=>e.jsxs(i,{sx:{position:"relative"},children:[e.jsx("img",{src:t,alt:`Existing vehicle image ${r+1}`,style:{maxWidth:80,maxHeight:80,objectFit:"cover",borderRadius:l.shape.borderRadius}}),e.jsx(o,{variant:"caption",sx:{position:"absolute",top:0,right:0,backgroundColor:"rgba(0,0,0,0.5)",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"Existing"})]},`existing-${r}`))}),T.length>0&&e.jsx(e.Fragment,{children:T.map((t,r)=>e.jsxs(i,{sx:{position:"relative"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`New vehicle image ${r+1}`,style:{maxWidth:80,maxHeight:80,objectFit:"cover",borderRadius:l.shape.borderRadius}}),e.jsx(ut,{size:"small",onClick:()=>ie(n=>n.filter((s,p)=>p!==r)),sx:{position:"absolute",top:-4,right:-4,backgroundColor:"white",width:24,height:24},children:e.jsx(o,{sx:{fontSize:14,color:"red"},children:"×"})})]},`new-${r}`))}),H.length===0&&T.length===0&&e.jsxs(e.Fragment,{children:[e.jsx(Pt,{sx:{fontSize:40,color:"#E15B65",mb:1}}),e.jsx(o,{variant:"body2",color:"#E15B65",sx:{mb:.5,fontWeight:"medium",borderColor:"#E15B65"},children:"Click to upload"}),e.jsx(o,{variant:"body2",color:"#E15B65",children:"Or drag and drop"})]})]}),e.jsxs(o,{variant:"body2",color:"text.secondary",sx:{mt:1,width:"100%",textAlign:"center"},children:[H.length+T.length," image(s) ",H.length>0?"(including existing)":"",". Upload to add more."]}),e.jsx("input",{type:"file",id:"images-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",multiple:!0,onChange:Gt})]})]})})}),e.jsx(i,{sx:{mb:4},children:e.jsxs(A,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:[e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Information"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the vehicle's general information"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:W?"1fr":"repeat(3, 1fr)",gap:l.spacing(3)},children:[e.jsxs(pt,{spacing:2,children:[e.jsxs(F,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(J,{id:"brand-label",children:"Brand*"}),e.jsxs(K,{labelId:"brand-label",id:"brand-select",value:le,label:"Brand",onChange:t=>Le(t.target.value),children:[e.jsx(S,{value:"",children:"Select vehicle brand"}),Ye.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]}),e.jsx(F,{fullWidth:!0,variant:"outlined",required:!0,children:e.jsx(f,{id:"seating-capacity-input",label:"Seating Capacity*",variant:"outlined",value:ue,onChange:t=>Fe(t.target.value),placeholder:"Input how many persons can seat",type:"number",inputProps:{min:1}})})]}),e.jsxs(pt,{spacing:2,children:[e.jsx(f,{fullWidth:!0,label:"Model*",variant:"outlined",value:de,onChange:t=>ze(t.target.value),placeholder:"Model Name",required:!0}),e.jsxs(F,{fullWidth:!0,required:!0,children:[e.jsx(J,{children:"Transmission Type"}),e.jsxs(K,{value:gt,label:"Transmission Type",onChange:t=>Dt(t.target.value),children:[e.jsx(S,{value:"",children:"Select Transmission"}),e.jsx(S,{value:"manual",children:"Manual"}),e.jsx(S,{value:"automatic",children:"Automatic"}),e.jsx(S,{value:"semi-automatic",children:"Semi-Automatic"})]})]}),e.jsx(f,{fullWidth:!0,label:"Engine Power (HP)",variant:"outlined",type:"number",value:Be,onChange:t=>Mt(t.target.value),placeholder:"e.g. 180",inputProps:{min:0}})]}),e.jsxs(pt,{spacing:2,children:[e.jsxs(F,{fullWidth:!0,required:!0,children:[e.jsx(J,{children:"Parent Category"}),e.jsxs(K,{value:re,label:"Parent Category",onChange:Ut,children:[e.jsx(S,{value:"",children:"Select Parent Category"}),Ot.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]}),e.jsxs(F,{fullWidth:!0,required:!0,disabled:!re,children:[e.jsx(J,{children:"Sub Category"}),e.jsxs(K,{value:fe,label:"Sub Category",onChange:t=>rt(t.target.value),children:[e.jsx(S,{value:"",children:"Select Sub Category"}),Ht.map(t=>e.jsx(S,{value:t._id,children:t.title},t._id))]})]})]})]}),e.jsxs(F,{component:"fieldset",fullWidth:!0,children:[e.jsx(o,{variant:"body1",color:"text.secondary",sx:{mb:1},children:"Air Condition"}),e.jsxs(ca,{row:!0,value:Ve,onChange:t=>Oe(t.target.value),children:[e.jsx(se,{value:"yes",control:e.jsx(ne,{}),label:"Yes"}),e.jsx(se,{value:"no",control:e.jsx(ne,{}),label:"No"})]})]}),e.jsx(i,{sx:{mt:3},children:e.jsxs(F,{fullWidth:!0,variant:"outlined",required:!0,children:[e.jsx(J,{id:"zone-label",children:"Zone*"}),e.jsxs(K,{labelId:"zone-label",id:"zone-select",value:ce,label:"Zone",onChange:ta,children:[e.jsx(S,{value:"",children:"Select zone"}),O.length>0?O.map(t=>e.jsx(S,{value:t._id,children:t.name},t._id)):e.jsx(S,{disabled:!0,children:"No zones available"})]})]})}),e.jsx(i,{sx:{mt:3},children:e.jsx(f,{fullWidth:!0,label:"Vihicles Address*",variant:"outlined",value:ve,onChange:t=>q(t.target.value),placeholder:"Enter venue address",required:!0})}),e.jsxs(i,{sx:{mt:3},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Location and Operating Hours"}),e.jsx(f,{fullWidth:!0,label:"Search Location",inputRef:Ae,variant:"outlined",placeholder:"Enter a location",sx:{mb:2}}),e.jsxs(i,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(f,{sx:{flex:1},label:"Latitude*",variant:"outlined",value:k,onChange:t=>Z(t.target.value),placeholder:"e.g., 25.2048",required:!0}),e.jsx(f,{sx:{flex:1},label:"Longitude*",variant:"outlined",value:I,onChange:t=>G(t.target.value),placeholder:"e.g., 55.2708",required:!0})]}),D&&Pe?e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Click on the map below to select a location"}),e.jsx(i,{ref:Ee,sx:{height:300,width:"100%",borderRadius:l.shape.borderRadius,border:`1px solid ${l.palette.grey[300]}`,mb:2}})]}):e.jsx(i,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${l.palette.grey[300]}`,borderRadius:l.shape.borderRadius,mb:2},children:e.jsx(o,{variant:"body2",color:"text.secondary",children:"Map loading..."})}),e.jsx(f,{fullWidth:!0,label:"Operating Hours",variant:"outlined",value:Ce,onChange:t=>lt(t.target.value),placeholder:"e.g., 9:00 AM - 6:00 PM",multiline:!0,rows:2})]})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(A,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs($,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Attributes"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Select additional attributes for the vehicle"}),e.jsx(i,{sx:{display:"grid",gridTemplateColumns:W?"1fr":"repeat(3, 1fr)",gap:3},children:Rt.map(t=>e.jsxs(F,{fullWidth:!0,children:[e.jsx(J,{children:t.title}),e.jsxs(K,{value:tt[t._id]||"",label:t.title,onChange:r=>Qt(t._id,r.target.value),children:[e.jsxs(S,{value:"",children:["Select ",t.title]}),t.values.map(r=>e.jsx(S,{value:r,children:r},r))]})]},t._id))})]})})})]})}),e.jsxs(i,{sx:{mt:3,p:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"#fafafa"},children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Vehicle Features"}),e.jsx(i,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},gap:4},children:[{key:"driverIncluded",label:"Driver Included"},{key:"sunroof",label:"Sunroof"},{key:"decorationAvailable",label:"Decoration Available"}].map(t=>e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:3,py:2,border:"1px solid",borderColor:"grey.300",borderRadius:2,backgroundColor:"white",minHeight:56},children:[e.jsx(o,{fontSize:14,fontWeight:500,children:t.label}),e.jsx(ua,{checked:te[t.key],onChange:r=>Je(n=>({...n,[t.key]:r.target.checked})),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#E15B65"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})]},t.key))})]}),e.jsx(i,{sx:{mb:4},children:e.jsx(A,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Vehicle Identity"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert the vehicle's license plate number"}),e.jsx(f,{fullWidth:!0,label:"License Plate Number*",variant:"outlined",value:ee,onChange:t=>{He(t.target.value),dt(t.target.value)},placeholder:"Type license plate number (6-8 alphanumeric)",required:!0,error:!!bt,helperText:bt})]})})}),e.jsx(i,{sx:{mb:4},children:e.jsx(A,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Pricing & Discounts"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert pricing and discount information"}),e.jsxs(i,{sx:{mb:3},children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Trip Type"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Choose the trip type you prefer"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:W?"1fr":"repeat(3, 1fr)",gap:l.spacing(2)},children:[e.jsxs(A,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:u==="hourly"?"#E15B65":void 0,borderWidth:u==="hourly"?2:1},onClick:()=>_("hourly"),children:[e.jsx(se,{control:e.jsx(ne,{checked:u==="hourly",onChange:()=>_("hourly"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"Hourly",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Set your hourly rental price"})]}),e.jsxs(A,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:u==="perDay"?"#E15B65":void 0,borderWidth:u==="perDay"?2:1},onClick:()=>_("perDay"),children:[e.jsx(se,{control:e.jsx(ne,{checked:u==="perDay",onChange:()=>_("perDay"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"Per Day",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Set your per day rental price"})]}),e.jsxs(A,{variant:"outlined",sx:{p:2,cursor:"pointer",borderColor:u==="distanceWise"?"#E15B65":void 0,borderWidth:u==="distanceWise"?2:1},onClick:()=>_("distanceWise"),children:[e.jsx(se,{control:e.jsx(ne,{checked:u==="distanceWise",onChange:()=>_("distanceWise"),sx:{color:"#E15B65","&.Mui-checked":{color:"#E15B65"}}}),label:"DistanceWise",labelPlacement:"start",sx:{m:0,".MuiFormControlLabel-label":{ml:"auto"}}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Set your distance wise rental price"})]})]})]}),u==="hourly"&&e.jsx(i,{sx:{mb:3},children:e.jsx(f,{fullWidth:!0,label:"Hourly Price (₹/per hour)*",variant:"outlined",value:pe,onChange:t=>Ue(t.target.value),placeholder:"Ex: 2500.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),u==="perDay"&&e.jsx(i,{sx:{mb:3},children:e.jsx(f,{fullWidth:!0,label:"Per Day Price (₹/per day)*",variant:"outlined",value:ge,onChange:t=>qe(t.target.value),placeholder:"Ex: 15000.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),u==="distanceWise"&&e.jsx(i,{sx:{mb:3},children:e.jsx(f,{fullWidth:!0,label:"Distance Price (₹/per km)*",variant:"outlined",value:he,onChange:t=>Ze(t.target.value),placeholder:"Ex: 100.00",type:"number",inputProps:{step:"0.01",min:0},required:!0})}),e.jsxs(i,{children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Discount"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Set a discount amount (e.g., 10 for 10%)"}),e.jsx(f,{fullWidth:!0,label:"Discount (%)",variant:"outlined",value:xe,onChange:t=>Ge(t.target.value),placeholder:"Ex: 10",type:"number",inputProps:{step:"any",min:0,max:100}})]})]})})}),e.jsx(i,{sx:{mb:4},children:e.jsx(A,{sx:{p:2,boxShadow:"none",border:`1px solid ${l.palette.grey[200]}`},children:e.jsxs($,{sx:{"&:last-child":{pb:2}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Search Tags"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Insert tags for appearing in user search results"}),e.jsx(f,{fullWidth:!0,label:"Type and press Enter",variant:"outlined",value:be,onChange:Kt,onKeyPress:Yt,placeholder:"Type and press Enter",sx:{mb:2}}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Ke.map((t,r)=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",backgroundColor:l.palette.grey[200],borderRadius:l.shape.borderRadius,px:1,py:.5},children:[e.jsx(o,{variant:"body2",children:t}),e.jsx(ut,{size:"small",onClick:()=>Xt(t),children:e.jsx(o,{sx:{fontSize:14},children:"×"})})]},r))})]})})}),e.jsxs(i,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(Bt,{variant:"outlined",color:"#E15B65",size:"large",onClick:ct,sx:{color:"#E15B65"},children:we?"Cancel":"Reset"}),e.jsx(Bt,{variant:"contained",type:"submit",size:"large",disabled:ye,startIcon:ye?e.jsx(At,{size:20,color:"inherit"}):null,sx:{color:"white",bgcolor:"#E15B65"},children:ye?"Submitting...":we?"Update":"Submit"})]})]})]}),e.jsx(pa,{open:Lt,autoHideDuration:6e3,onClose:kt,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{"& .MuiSnackbarContent-root":{minWidth:"600px",maxWidth:"600px",width:"auto"}},children:e.jsx(ga,{onClose:kt,severity:ft,sx:{width:"100%",backgroundColor:ft==="success"?"#1976d2":"#d32f2f",color:"white","& .MuiAlert-message":{whiteSpace:"pre-line",wordBreak:"break-word",fontSize:"1rem",lineHeight:1.5}},children:zt})})]})};export{Ba as default};
