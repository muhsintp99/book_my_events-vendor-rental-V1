import{r as c,j as e,B as g,T as l,t as D,a8 as I,S as p,a4 as E,ae as _,D as m,G as o,g as k,h as f}from"./index-4okDMdnD.js";const R=()=>{try{const s=localStorage.getItem("user");if(!s)return null;const i=JSON.parse(s);return(i==null?void 0:i._id)||null}catch(s){return console.error("Error parsing user:",s),null}},N=()=>{const[s,i]=c.useState([]),[v,b]=c.useState(!0),[y,P]=c.useState(null),[h,S]=c.useState(null);c.useEffect(()=>{S(R())},[]),c.useEffect(()=>{if(!h)return;(async()=>{var a;try{const u=(((a=(await f.get(`https://api.bookmyevent.ae/api/bookings/provider/${h}`)).data)==null?void 0:a.data)||[]).filter(x=>{var j;return((j=x.status)==null?void 0:j.toLowerCase())==="pending"});i(u)}catch(r){console.error("Error fetching pending bookings:",r)}finally{b(!1)}})()},[h]);const C=t=>{P(a=>a===t?null:t)},w=async(t,a)=>{a.stopPropagation();try{await f.patch(`https://api.bookmyevent.ae/api/bookings/${t}/accept`),i(r=>r.filter(d=>d._id!==t)),alert("Booking Confirmed ✔️")}catch{alert("Failed to confirm booking")}},B=async(t,a)=>{a.stopPropagation();try{await f.patch(`https://api.bookmyevent.ae/api/bookings/${t}/reject`),i(r=>r.filter(d=>d._id!==t)),alert("Booking Rejected ❌")}catch{alert("Failed to reject booking")}};return e.jsx(g,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #eef2ff 0%, #f8fafc 50%, #f1f5f9 100%)",py:5},children:e.jsxs(g,{sx:{maxWidth:"950px",margin:"0 auto",px:2},children:[e.jsx(l,{variant:"h4",fontWeight:700,mb:4,children:"Pending Bookings"}),v?e.jsx(g,{display:"flex",justifyContent:"center",mt:4,children:e.jsx(D,{})}):s.length===0?e.jsx(l,{children:"No Pending Bookings Found"}):s.map(t=>{var a,r,d,u;return e.jsxs(I,{elevation:0,sx:{mt:3,p:3,borderRadius:"20px",background:"#ffffffcc",backdropFilter:"blur(12px)",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 15px 40px rgba(0,0,0,0.08)"}},onClick:()=>C(t._id),children:[e.jsxs(p,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(g,{children:[e.jsxs(l,{fontWeight:700,fontSize:17,children:["#",t._id.slice(-6)]}),e.jsx(l,{fontSize:14,color:"text.secondary",children:((a=t.venueId)==null?void 0:a.venueName)||((r=t.packageId)==null?void 0:r.title)||((d=t.makeupId)==null?void 0:d.name)||((u=t.photographyId)==null?void 0:u.name)||"Event Booking"}),e.jsx(l,{fontSize:13,color:"text.secondary",children:new Date(t.bookingDate).toDateString()})]}),e.jsxs(p,{alignItems:"flex-end",children:[e.jsxs(l,{fontWeight:700,fontSize:18,sx:{color:"#16a34a"},children:["₹",t.finalPrice]}),e.jsx(E,{label:"Pending",sx:{mt:1,background:"#fef3c7",color:"#92400e",fontWeight:600}})]})]}),e.jsxs(_,{in:y===t._id,children:[e.jsx(m,{sx:{my:3}}),e.jsxs(g,{sx:{background:"#f8fafc",p:3,borderRadius:"16px",border:"1px solid #e5e7eb"},children:[e.jsxs(o,{container:!0,spacing:2,children:[e.jsxs(o,{item:!0,xs:12,md:6,children:[e.jsx(n,{label:"Full Booking ID",value:t._id}),e.jsx(n,{label:"Created At",value:new Date(t.createdAt).toLocaleString()}),e.jsx(n,{label:"Booking Date",value:new Date(t.bookingDate).toDateString()}),e.jsx(n,{label:"Status",value:t.status})]}),e.jsxs(o,{item:!0,xs:12,md:6,children:[e.jsx(n,{label:"Customer Name",value:t.fullName}),e.jsx(n,{label:"Email",value:t.emailAddress}),e.jsx(n,{label:"Phone",value:t.contactNumber}),e.jsx(n,{label:"Guests",value:t.numberOfGuests})]})]}),e.jsx(m,{sx:{my:2}}),e.jsx(l,{fontWeight:700,mb:1,children:"Payment Details"}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:6,children:e.jsx(n,{label:"Base Price",value:`₹${t.basePrice||0}`})}),e.jsx(o,{item:!0,xs:6,children:e.jsx(n,{label:"Advance Paid",value:`₹${t.advanceAmount||0}`})}),e.jsx(o,{item:!0,xs:6,children:e.jsx(n,{label:"Final Price",value:`₹${t.finalPrice}`})}),e.jsx(o,{item:!0,xs:6,children:e.jsx(n,{label:"Payment Status",value:t.paymentStatus||"Pending"})})]}),e.jsxs(p,{direction:"row",spacing:2,justifyContent:"center",mt:3,children:[e.jsx(k,{variant:"outlined",sx:{width:140,borderRadius:"30px",fontWeight:600,borderColor:"#ef4444",color:"#ef4444","&:hover":{background:"#fee2e2"}},onClick:x=>B(t._id,x),children:"Reject"}),e.jsx(k,{variant:"contained",sx:{width:140,borderRadius:"30px",fontWeight:600,background:"linear-gradient(135deg,#22c55e,#16a34a)",boxShadow:"0 8px 20px rgba(22,163,74,0.3)","&:hover":{background:"linear-gradient(135deg,#16a34a,#15803d)"}},onClick:x=>w(t._id,x),children:"Confirm"})]})]})]})]},t._id)})]})})},n=({label:s,value:i})=>e.jsxs(l,{fontSize:14,sx:{mb:1},children:[e.jsxs("strong",{children:[s,":"]})," ",i||"N/A"]});export{N as default};
