import{r as o,j as e,B as r,T as t,t as S,a8 as k,S as x,ae as y,D as C,g as h,h as w}from"./index-BMB9GWE2.js";const E=()=>{const[i,j]=o.useState(null),[a,g]=o.useState([]),[u,p]=o.useState(!0);o.useEffect(()=>{(async()=>{try{const m=((await w.get("https://api.bookmyevent.ae/api/bookings")).data.bookings||[]).filter(c=>{var l,d;return((l=c.status)==null?void 0:l.toLowerCase())==="rejected"||((d=c.status)==null?void 0:d.toLowerCase())==="cancelled"});g(m)}catch(n){console.error("Failed to fetch canceled bookings",n)}finally{p(!1)}})()},[]);const f=s=>{j(i===s?null:s)};return e.jsxs(r,{p:2,children:[e.jsx(t,{variant:"h4",gutterBottom:!0,children:"Canceled / Rejected Bookings"}),u?e.jsx(S,{}):a.length===0?e.jsx(t,{children:"No canceled bookings found"}):a.map(s=>{var n;return e.jsxs(k,{elevation:3,sx:{p:2,mt:2,borderRadius:"12px",cursor:"pointer"},onClick:()=>f(s._id),children:[e.jsxs(x,{direction:"row",justifyContent:"space-between",children:[e.jsxs(r,{children:[e.jsxs(t,{fontWeight:600,children:["Booking ID: #",(n=s._id)==null?void 0:n.slice(-6)]}),e.jsx(t,{color:"gray",fontSize:14,children:new Date(s.bookingDate).toDateString()}),e.jsx(t,{color:"gray",fontSize:13,children:s.timeSlot||"N/A"})]}),e.jsxs(t,{fontWeight:700,color:"red",children:["â‚¹",s.finalPrice]})]}),e.jsxs(y,{in:i===s._id,children:[e.jsx(C,{sx:{my:2}}),e.jsxs(r,{sx:{background:"#f8f8f8",p:2,borderRadius:"10px"},children:[e.jsxs(t,{fontSize:14,children:[e.jsx("strong",{children:"Customer:"})," ",s.fullName]}),e.jsxs(t,{fontSize:14,children:[e.jsx("strong",{children:"Email:"})," ",s.emailAddress]}),e.jsxs(t,{fontSize:14,children:[e.jsx("strong",{children:"Contact:"})," ",s.contactNumber]}),e.jsxs(t,{fontSize:14,children:[e.jsx("strong",{children:"Guests:"})," ",s.numberOfGuests]}),e.jsxs(t,{fontSize:14,mt:1,children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{color:"red"},children:s.status})]}),e.jsxs(t,{fontSize:14,children:[e.jsx("strong",{children:"Payment:"})," ",s.paymentStatus]})]}),e.jsxs(x,{direction:"row",spacing:2,mt:2,justifyContent:"center",children:[e.jsx(h,{variant:"outlined",sx:{width:"120px",borderRadius:"30px",color:"#E15B65"},children:"Download"}),e.jsx(h,{variant:"contained",sx:{width:"120px",borderRadius:"30px",bgcolor:"#E15B65",color:"white"},children:"View"})]})]})]},s._id)})]})};export{E as default};
