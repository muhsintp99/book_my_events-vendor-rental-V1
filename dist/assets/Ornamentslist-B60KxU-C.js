import{w as pe,u as ge,r as c,j as e,B as r,a1 as h,a7 as M,S as g,T as s,a4 as ue,o as A,g as b,am as K,q as me,a as fe,D as R,ap as J,b as T,t as be,an as je,G as l,ao as ve,n as ye,a3 as W,V as Ce,aq as Q,af as X,K as we,ac as Se,ah as Z,ai as Ie,ak as Ae,x as We}from"./index-BaHW6ngD.js";import{D as ke}from"./Diamond-UJS-W4_S.js";import{A as De}from"./Add-CR1CSiqT.js";import{S as ze}from"./Search-LBCG66CL.js";import{C as ee}from"./Category-MrdCOE05.js";import{I as te}from"./Inventory-CcicXxbD.js";import{C as Fe}from"./CardMedia-My6iwOZL.js";import{C as Pe}from"./Close-DGg8Eddr.js";import{I as Ee}from"./Info-BB_Ii_ps.js";import{P as Re}from"./Palette-DpwRsD32.js";import{L as Te}from"./LocalOffer-DRfP6i3S.js";const O="https://api.bookmyevent.ae/api/ornaments",i="#E15B65",se="#c14a54",Oe="#FFD700",Be="rgba(255, 255, 255, 0.9)",Le="#1A202C";function Je(){var U,V,Y,G,H,q;const v=pe();ge();const[u,k]=c.useState([]),[re,D]=c.useState(!0),[y,m]=c.useState({open:!1,message:"",severity:"success"}),[f,ie]=c.useState(""),[oe,C]=c.useState(!1),[ne,w]=c.useState(!1),[o,ae]=c.useState(null),[B,L]=c.useState(null),[z,$]=c.useState(0),j=localStorage.getItem("token"),F=JSON.parse(localStorage.getItem("user")||"{}"),P=F==null?void 0:F._id,E=t=>t?t.startsWith("http")?t:`https://api.bookmyevent.ae/${t.startsWith("/")?t.slice(1):t}`:null,S=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(t||0),N=c.useCallback(async()=>{if(!P||!j){m({open:!0,message:"Please login again",severity:"error"}),D(!1);return}D(!0);try{const t=await fetch(`${O}?provider=${P}`,{headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to load ornaments");const n=await t.json();n.success&&k(n.data||[])}catch(t){m({open:!0,message:t.message,severity:"error"})}finally{D(!1)}},[P,j]);c.useEffect(()=>{N()},[N]);const le=t=>{ae(t),$(0),C(!0)},ce=async(t,n)=>{try{(await(await fetch(`${O}/${t}/toggle-active`,{method:"PATCH",headers:{Authorization:`Bearer ${j}`}})).json()).success&&(k(p=>p.map(a=>a._id===t?{...a,isActive:!n}:a)),m({open:!0,message:"Status updated successfully",severity:"success"}))}catch{m({open:!0,message:"Failed to update status",severity:"error"})}},xe=async()=>{try{(await(await fetch(`${O}/${B}`,{method:"DELETE",headers:{Authorization:`Bearer ${j}`}})).json()).success&&(k(x=>x.filter(d=>d._id!==B)),m({open:!0,message:"Ornament deleted successfully",severity:"success"}))}catch{m({open:!0,message:"Delete failed",severity:"error"})}finally{w(!1),L(null)}},_=c.useMemo(()=>u.filter(t=>{var x,d,p;return!f||((x=t.name)==null?void 0:x.toLowerCase().includes(f.toLowerCase()))||((d=t.material)==null?void 0:d.toLowerCase().includes(f.toLowerCase()))||((p=t.description)==null?void 0:p.toLowerCase().includes(f.toLowerCase()))}),[u,f]),I=({icon:t,label:n,value:x,chip:d,success:p,error:a})=>e.jsxs(r,{sx:{display:"flex",alignItems:"flex-start",gap:2,py:1.5,borderBottom:"1px solid #f0f0f0","&:hover":{bgcolor:h(i,.02)},transition:"0.2s"},children:[e.jsx(r,{sx:{color:i,mt:.5,display:"flex"},children:t}),e.jsxs(r,{sx:{flex:1},children:[e.jsx(s,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,textTransform:"uppercase",letterSpacing:.5},children:n}),d?e.jsx(r,{sx:{mt:.5},children:e.jsx(W,{label:x,size:"small",color:p?"success":a?"error":"default",sx:{fontWeight:700}})}):e.jsx(s,{variant:"body2",sx:{fontWeight:600,mt:.3,color:"#2D3748"},children:x||"Not specified"})]})]});return e.jsxs(r,{sx:{bgcolor:"#F0F2F5",minHeight:"100vh",pb:8},children:[e.jsxs(r,{sx:{position:"relative",height:"350px",background:"linear-gradient(135deg, #2D3748 0%, #1A202C 100%)",color:"white",pt:8,px:4,overflow:"hidden"},children:[e.jsx(r,{sx:{position:"absolute",top:"-10%",right:"-5%",width:"400px",height:"400px",background:`radial-gradient(circle, ${h(i,.15)} 0%, transparent 70%)`,borderRadius:"50%",zIndex:0}}),e.jsx(r,{sx:{position:"absolute",bottom:"-20%",left:"10%",width:"300px",height:"300px",background:`radial-gradient(circle, ${h(Oe,.1)} 0%, transparent 70%)`,borderRadius:"50%",zIndex:0}}),e.jsx(M,{maxWidth:"xl",sx:{position:"relative",zIndex:1},children:e.jsxs(g,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},spacing:3,children:[e.jsxs(r,{children:[e.jsx(s,{variant:"h2",sx:{fontWeight:900,mb:1,letterSpacing:"-1px",textShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:"Ornaments Collection"}),e.jsx(s,{variant:"h6",sx:{opacity:.8,fontWeight:400,mb:4,maxWidth:600},children:"Manage your luxury inventory with precision. Track styles, stock, and value in one professional dashboard."}),e.jsx(g,{direction:"row",spacing:3,children:[{label:"Total Pieces",value:u.length,icon:e.jsx(ke,{})},{label:"Active Items",value:u.filter(t=>t.isActive).length,icon:e.jsx(ue,{})}].map((t,n)=>e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(A,{sx:{bgcolor:h(i,.2),color:i,width:56,height:56},children:t.icon}),e.jsxs(r,{children:[e.jsx(s,{variant:"h4",sx:{fontWeight:800,lineHeight:1},children:t.value}),e.jsx(s,{variant:"caption",sx:{opacity:.7,fontWeight:600,textTransform:"uppercase"},children:t.label})]})]},n))})]}),e.jsx(b,{variant:"contained",size:"large",startIcon:e.jsx(De,{}),onClick:()=>v("/ornaments/addpackage"),sx:{bgcolor:i,color:"white",fontWeight:700,fontSize:"1rem",px:4,py:1.8,borderRadius:"16px",textTransform:"none",boxShadow:`0 12px 24px ${h(i,.3)}`,"&:hover":{bgcolor:se,transform:"translateY(-4px)",boxShadow:`0 16px 32px ${h(i,.4)}`},transition:"all 0.3s"},children:"Add New Piece"})]})})]}),e.jsxs(M,{maxWidth:"xl",sx:{mt:-8,position:"relative",zIndex:10},children:[e.jsxs(K,{elevation:4,sx:{borderRadius:"24px",p:1,mb:6,background:Be,backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.3)",display:"flex",alignItems:"center"},children:[e.jsx(me,{fullWidth:!0,variant:"standard",placeholder:"Search by name, SKU, or material...",value:f,onChange:t=>ie(t.target.value),InputProps:{disableUnderline:!0,startAdornment:e.jsx(fe,{position:"start",sx:{pl:3},children:e.jsx(ze,{sx:{color:"#718096",fontSize:28}})}),sx:{height:70,fontSize:"1.1rem",fontWeight:500,color:"#2D3748"}}}),e.jsx(R,{orientation:"vertical",flexItem:!0,sx:{mx:2,my:1}}),e.jsx(r,{sx:{pr:2},children:e.jsx(J,{title:"Filter Collections",children:e.jsx(T,{sx:{bgcolor:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:e.jsx(ee,{sx:{color:i}})})})})]}),re?e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:15},children:[e.jsx(be,{size:64,thickness:4,sx:{color:i}}),e.jsx(s,{variant:"h6",sx:{mt:3,fontWeight:600,color:"text.secondary"},children:"Loading your collection..."})]}):_.length===0?e.jsx(je,{in:!0,children:e.jsxs(K,{sx:{borderRadius:"32px",textAlign:"center",py:12,px:orientation==="vertical"?4:8,bgcolor:"white",border:"2px dashed #E2E8F0"},children:[e.jsx(A,{sx:{bgcolor:"#F7FAFC",width:120,height:120,mx:"auto",mb:4},children:e.jsx(te,{sx:{fontSize:60,color:"#CBD5E0"}})}),e.jsx(s,{variant:"h3",sx:{fontWeight:800,color:"#2D3748",mb:2},children:u.length===0?"Inventory is Empty":"No Results Found"}),e.jsx(s,{variant:"h6",color:"text.secondary",sx:{mb:6,maxWidth:500,mx:"auto",fontWeight:400},children:u.length===0?"Start building your digital showroom by adding your first ornament piece.":"We couldn't find any ornaments matching your search. Please try different keywords."}),u.length===0&&e.jsx(b,{variant:"contained",onClick:()=>v("/ornaments/addpackage"),sx:{bgcolor:i,px:6,py:2,borderRadius:"16px",fontWeight:700,fontSize:"1.1rem","&:hover":{bgcolor:se}},children:"Create Your First Piece"})]})}):e.jsx(l,{container:!0,spacing:4,children:_.map((t,n)=>{var x,d,p;return e.jsx(l,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,children:e.jsx(ve,{in:!0,style:{transitionDelay:`${n*40}ms`},children:e.jsxs(ye,{sx:{height:"100%",borderRadius:"28px",bgcolor:"white",overflow:"hidden",transition:"all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1)",position:"relative",border:"1px solid #E2E8F0","&:hover":{transform:"translateY(-12px)",boxShadow:"0 30px 60px rgba(0,0,0,0.12)",borderColor:i,"& .action-btns":{opacity:1,transform:"translateY(0)"}}},children:[e.jsx(r,{sx:{position:"absolute",top:16,left:16,zIndex:5},children:e.jsx(W,{label:t.isActive?"Active":"Hidden",size:"small",sx:{bgcolor:t.isActive?h("#48BB78",.9):h("#A0AEC0",.9),color:"white",fontWeight:800,fontSize:"0.65rem",textTransform:"uppercase",letterSpacing:.5,backdropFilter:"blur(4px)"}})}),e.jsxs(r,{sx:{position:"relative",paddingTop:"100%",bgcolor:"#F7FAFC"},children:[e.jsx(Fe,{component:"img",image:E(t.thumbnail),alt:t.name,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}),e.jsx(g,{direction:"row",className:"action-btns",spacing:1,sx:{position:"absolute",bottom:16,left:"50%",transform:"translateX(-50%) translateY(20px)",opacity:0,transition:"0.3s all",zIndex:5},children:[{icon:e.jsx(Ce,{fontSize:"small"}),color:Le,onClick:()=>le(t),tip:"Quick View"},{icon:e.jsx(Q,{fontSize:"small"}),color:"#2B6CB0",onClick:()=>v(`/ornaments/edit/${t._id}`),tip:"Edit"},{icon:e.jsx(X,{fontSize:"small"}),color:"#C53030",onClick:()=>{L(t._id),w(!0)},tip:"Delete"}].map((a,de)=>e.jsx(J,{title:a.tip,children:e.jsx(T,{size:"small",onClick:he=>{he.stopPropagation(),a.onClick()},sx:{bgcolor:"white",color:a.color,boxShadow:"0 4px 12px rgba(0,0,0,0.15)","&:hover":{bgcolor:a.color,color:"white"}},children:a.icon})},de))})]}),e.jsxs(we,{sx:{p:3},children:[e.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",sx:{mb:1},children:[e.jsx(s,{variant:"h5",sx:{fontWeight:800,color:"#2D3748",flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.name}),e.jsx(Se,{size:"small",checked:t.isActive,onChange:a=>{a.stopPropagation(),ce(t._id,t.isActive)},color:"success"})]}),e.jsxs(g,{direction:"row",spacing:1,sx:{mb:3},children:[e.jsx(W,{label:t.material||"Gold",size:"small",variant:"outlined",sx:{borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,height:20}}),e.jsx(W,{label:((x=t.category)==null?void 0:x.title)||"Jewelry",size:"small",sx:{borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,height:20,bgcolor:h(i,.1),color:i}})]}),e.jsx(R,{sx:{mb:2,borderStyle:"dashed"}}),e.jsxs(l,{container:!0,spacing:1,children:[e.jsxs(l,{item:!0,xs:6,children:[e.jsx(s,{variant:"caption",sx:{color:"#A0AEC0",fontWeight:700,textTransform:"uppercase",letterSpacing:.5},children:"Purchase"}),e.jsx(s,{variant:"h6",sx:{fontWeight:900,color:i},children:S((d=t.buyPricing)==null?void 0:d.totalPrice)})]}),e.jsxs(l,{item:!0,xs:6,sx:{textAlign:"right"},children:[e.jsx(s,{variant:"caption",sx:{color:"#A0AEC0",fontWeight:700,textTransform:"uppercase",letterSpacing:.5},children:"Rental / Day"}),e.jsx(s,{variant:"h6",sx:{fontWeight:900,color:"#48BB78"},children:S((p=t.rentalPricing)==null?void 0:p.pricePerDay)})]})]})]})]})})},t._id)})})]}),e.jsx(Z,{open:oe,onClose:()=>C(!1),maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:"32px",overflow:"hidden"}},children:e.jsx(Ie,{sx:{p:0},children:o&&e.jsxs(l,{container:!0,children:[e.jsxs(l,{item:!0,xs:12,md:6,sx:{bgcolor:"#F7FAFC",p:4,display:"flex",flexDirection:"column"},children:[e.jsxs(r,{sx:{position:"relative",borderRadius:"24px",overflow:"hidden",flex:1,mb:3,boxShadow:"0 8px 32px rgba(0,0,0,0.05)"},children:[e.jsx("img",{src:E(z===0?o.thumbnail:o.galleryImages[z-1]),style:{width:"100%",height:"100%",objectFit:"contain",background:"white"},alt:"Ornament View"}),e.jsx(T,{onClick:()=>C(!1),sx:{position:"absolute",top:16,right:16,bgcolor:"rgba(255,255,255,0.8)","&:hover":{bgcolor:"white"}},children:e.jsx(Pe,{})})]}),e.jsx(g,{direction:"row",spacing:2,sx:{overflowX:"auto",pb:1},children:[o.thumbnail,...o.galleryImages||[]].map((t,n)=>e.jsx(A,{variant:"rounded",src:E(t),onClick:()=>$(n),sx:{width:70,height:70,cursor:"pointer",border:z===n?`3px solid ${i}`:"3px solid transparent",transition:"0.2s","&:hover":{opacity:.8}}},n))})]}),e.jsxs(l,{item:!0,xs:12,md:6,sx:{p:{xs:4,md:6},bgcolor:"white"},children:[e.jsxs(r,{sx:{mb:4},children:[e.jsx(s,{variant:"caption",sx:{color:i,fontWeight:800,textTransform:"uppercase",letterSpacing:2},children:"Product Specification"}),e.jsx(s,{variant:"h3",sx:{fontWeight:900,color:"#2D3748",mt:1,mb:2},children:o.name}),e.jsx(s,{variant:"body1",sx:{color:"#718096",lineHeight:1.8},children:o.description||"No description provided."})]}),e.jsxs(l,{container:!0,spacing:3,sx:{mb:5},children:[e.jsx(l,{item:!0,xs:6,children:e.jsx(I,{icon:e.jsx(Ee,{}),label:"SKU ID",value:o.ornamentId||"N/A"})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(I,{icon:e.jsx(ee,{}),label:"Category",value:(U=o.category)==null?void 0:U.title})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(I,{icon:e.jsx(Re,{}),label:"Material",value:o.material})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(I,{icon:e.jsx(te,{}),label:"Stock Status",value:((V=o.stock)==null?void 0:V.quantity)>0?`${o.stock.quantity} Units`:"Out of Stock",success:((Y=o.stock)==null?void 0:Y.quantity)>0,error:((G=o.stock)==null?void 0:G.quantity)<=0,chip:!0})})]}),e.jsxs(r,{sx:{p:4,bgcolor:"#F7FAFC",borderRadius:"24px",mb:5},children:[e.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[e.jsxs(r,{children:[e.jsx(s,{variant:"caption",sx:{fontWeight:800,color:"#A0AEC0"},children:"BUYING VALUE"}),e.jsx(s,{variant:"h3",sx:{fontWeight:900,color:i},children:S((H=o.buyPricing)==null?void 0:H.totalPrice)})]}),e.jsxs(r,{sx:{textAlign:"right"},children:[e.jsx(s,{variant:"caption",sx:{fontWeight:800,color:"#A0AEC0"},children:"RENTAL / DAY"}),e.jsx(s,{variant:"h4",sx:{fontWeight:900,color:"#2F855A"},children:S((q=o.rentalPricing)==null?void 0:q.pricePerDay)})]})]}),e.jsx(R,{sx:{mb:2}}),e.jsxs(s,{variant:"caption",sx:{fontWeight:600,color:"#718096",display:"flex",alignItems:"center",gap:1},children:[e.jsx(Te,{fontSize:"inherit"})," Pricing includes applicable taxes and service charges."]})]}),e.jsxs(g,{direction:"row",spacing:2,children:[e.jsx(b,{fullWidth:!0,variant:"contained",size:"large",startIcon:e.jsx(Q,{}),onClick:()=>v(`/ornaments/edit/${o._id}`),sx:{bgcolor:"#2D3748",color:"white",borderRadius:"16px",py:2,fontWeight:700,"&:hover":{bgcolor:"#1A202C"}},children:"Edit Piece"}),e.jsx(b,{fullWidth:!0,variant:"outlined",size:"large",onClick:()=>C(!1),sx:{borderRadius:"16px",py:2,fontWeight:700,borderColor:"#E2E8F0",color:"#4A5568"},children:"Close"})]})]})]})})}),e.jsx(Z,{open:ne,onClose:()=>w(!1),PaperProps:{sx:{borderRadius:"28px",p:3,maxWidth:400}},children:e.jsxs(r,{sx:{textAlign:"center",py:2},children:[e.jsx(A,{sx:{width:80,height:80,bgcolor:h("#C53030",.1),color:"#C53030",mx:"auto",mb:3},children:e.jsx(X,{sx:{fontSize:40}})}),e.jsx(s,{variant:"h4",sx:{fontWeight:800,mb:1.5},children:"Delete Ornament?"}),e.jsx(s,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Are you sure you want to permanently remove this piece from your collection? This action is irreversible."}),e.jsxs(g,{direction:"row",spacing:2,children:[e.jsx(b,{fullWidth:!0,onClick:()=>w(!1),sx:{color:"#718096",fontWeight:700},children:"Cancel"}),e.jsx(b,{fullWidth:!0,variant:"contained",onClick:xe,sx:{bgcolor:"#C53030",color:"white",borderRadius:"12px",fontWeight:700,"&:hover":{bgcolor:"#9B2C2C"}},children:"Confirm Delete"})]})]})}),e.jsx(Ae,{open:y.open,autoHideDuration:4e3,onClose:()=>m({...y,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(We,{severity:y.severity,variant:"filled",sx:{borderRadius:"12px",fontWeight:600},children:y.message})})]})}export{Je as default};
