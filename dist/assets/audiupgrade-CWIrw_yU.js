import{r as o,j as e,B as n,t as T,T as t,a5 as U,G as h,p as u,K as f,af as g,D as p,S as j,g as c,ai as D,h as b}from"./index-D6ZxiBOA.js";import{C as y}from"./CheckCircle-BRp8tfpt.js";import{W as F}from"./WorkspacePremium-leXB9C4_.js";const B=120,C=3;function N(){const[S,v]=o.useState([]),[E,k]=o.useState(!0),[R,W]=o.useState(null),[P,_]=o.useState(null),[m,l]=o.useState({open:!1,message:""}),d=localStorage.getItem("moduleId"),x=JSON.parse(localStorage.getItem("user")),w=x==null?void 0:x._id;o.useEffect(()=>{(async()=>{try{const r=await b.get(`https://api.bookmyevent.ae/api/subscription/plan/module/${d}`);v(r.data.plans||[])}catch{l({open:!0,message:"Failed to load plans"})}finally{k(!1)}})()},[d]);const I=async s=>{var r,a;try{const i=await b.post("https://api.bookmyevent.ae/api/payment/create-order",{userId:w,moduleId:d,planId:s,amount:50});(a=(r=i.data)==null?void 0:r.payment_links)!=null&&a.web&&(window.location.href=i.data.payment_links.web)}catch{l({open:!0,message:"Payment failed"})}};return E?e.jsx(n,{sx:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(T,{sx:{color:"#c62828"}})}):e.jsxs(n,{sx:{minHeight:"100vh",bgcolor:"#f9fafc",py:6},children:[e.jsxs(n,{maxWidth:"lg",mx:"auto",children:[e.jsx(t,{variant:"h4",fontWeight:800,textAlign:"center",children:"Upgrade Your Plan"}),e.jsx(t,{textAlign:"center",color:"text.secondary",mb:3,children:"Choose the best plan for your business"}),e.jsxs(U,{severity:"success",sx:{mb:4,border:"1px solid #c62828",color:"#c62828"},children:["Current Plan: ",e.jsx("b",{children:"FREE"})]}),e.jsxs(h,{container:!0,spacing:4,justifyContent:"center",children:[e.jsx(h,{item:!0,xs:12,md:6,lg:4,children:e.jsx(u,{sx:{height:"100%",borderRadius:4,border:"2px solid #c62828"},children:e.jsxs(f,{children:[e.jsx(g,{label:"CURRENT PLAN",sx:{bgcolor:"#c62828",color:"#fff",mb:2}}),e.jsx(t,{variant:"h6",fontWeight:800,children:"FREE"}),e.jsx(t,{color:"text.secondary",children:"Basic access to get started on the platform"}),e.jsx(t,{variant:"h4",fontWeight:900,color:"#c62828",mt:2,children:"â‚¹0"}),e.jsx(p,{sx:{my:2}}),e.jsx(j,{spacing:1,children:["Limited listings","Basic visibility","Standard support"].map(s=>e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(y,{sx:{color:"#c62828",mr:1}}),e.jsx(t,{variant:"body2",children:s})]},s))}),e.jsx(c,{fullWidth:!0,disabled:!0,sx:{mt:3,bgcolor:"#e57373",color:"#fff"},children:"Current Plan"})]})})}),S.map(s=>{const r=R===s._id,a=P===s._id;return e.jsx(h,{item:!0,xs:12,md:6,lg:4,children:e.jsx(u,{sx:{height:"100%",borderRadius:4,border:"2px solid #c62828",boxShadow:"0 12px 30px rgba(198,40,40,.2)"},children:e.jsxs(f,{children:[e.jsx(g,{icon:e.jsx(F,{}),label:"BEST VALUE",sx:{bgcolor:"#c62828",color:"#fff",mb:2}}),e.jsx(t,{variant:"h6",fontWeight:800,children:s.name}),e.jsxs(t,{color:"text.secondary",children:[r?s.description:`${s.description.slice(0,B)}...`,e.jsx(c,{size:"small",onClick:()=>W(r?null:s._id),sx:{textTransform:"none",fontWeight:600,color:"#c62828"},children:r?"Read less":"Read more"})]}),e.jsxs(t,{variant:"h4",fontWeight:900,color:"#c62828",mt:2,children:["â‚¹",s.price," ",e.jsx("span",{style:{fontSize:14},children:"/ year"})]}),e.jsx(p,{sx:{my:2}}),e.jsx(j,{spacing:1,children:(a?s.features:s.features.slice(0,C)).map((i,A)=>e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(y,{sx:{color:"#c62828",mr:1}}),e.jsx(t,{variant:"body2",children:i})]},A))}),s.features.length>C&&e.jsx(c,{size:"small",onClick:()=>_(a?null:s._id),sx:{mt:1,textTransform:"none",fontWeight:600,color:"#c62828"},children:a?"Show less":"Read more"}),e.jsx(c,{fullWidth:!0,onClick:()=>I(s._id),sx:{mt:3,bgcolor:"#c62828",color:"#fff",fontWeight:800,borderRadius:3,"&:hover":{bgcolor:"#b71c1c"}},children:"Upgrade To Premium"})]})})},s._id)})]})]}),e.jsx(D,{open:m.open,autoHideDuration:4e3,onClose:()=>l({open:!1,message:""}),message:m.message})]})}export{N as default};
