import{r as a,w as R,j as e,B as r,q as v,T as c,g as x,G as g,a8 as C,b as N,t as U,a9 as T,aa as F,ab as L,s as h,ad as $,ai as z}from"./index-BMB9GWE2.js";import{D as G}from"./DirectionsCar-ZSVrbzQl.js";import{E as H}from"./Edit-Dubzz-AJ.js";import{S as _}from"./Settings-DbH-6Ndy.js";const Y=()=>{const[y,p]=a.useState(!1),[n,m]=a.useState({name:"",phone:"",address:"",logo:"https://via.placeholder.com/100?text=Logo",coverPhoto:"https://images.unsplash.com/photo-1560472355-536de3962603?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2326&q=80"}),[i,E]=a.useState(n),[l,k]=a.useState(null),[d,B]=a.useState(null),[S,f]=a.useState(!0),w=R(),b="https://api.bookmyevent.ae/api";a.useEffect(()=>{const o=localStorage.getItem("user");if(console.log("Stored user from localStorage:",o),o){const t=JSON.parse(o);console.log("Parsed user:",t),k(t),P(t._id||t.id),I(t._id||t.id)}else console.log("No user found in localStorage"),f(!1)},[]);const P=async o=>{try{console.log("Fetching user data for ID:",o);const s=await(await fetch(`${b}/users/${o}`)).json();console.log("User API Response:",s),s.user?(B(s.user),console.log("User data set:",s.user)):console.error("Failed to fetch user data:",s.message)}catch(t){console.error("Error fetching user data:",t)}},I=async o=>{try{f(!0),console.log("Fetching provider data for ID:",o);const s=await(await fetch(`${b}/providerprofiles/${o}`)).json();console.log("Provider API Response:",s),s.success&&s.data?(m(s.data),console.log("Provider data set:",s.data)):console.error("Failed to fetch provider data:",s.message)}catch(t){console.error("Error fetching provider data:",t)}finally{f(!1)}},j=()=>{p(!1)},D=()=>{m(i),p(!1)},u=o=>t=>{E({...i,[o]:t.target.value})},A=()=>{w("/business/editpro")},W=o=>{if(!o)return"Not provided";if(typeof o=="string")return o;const t=[o.street,o.city,o.state,o.zipCode].filter(Boolean);return t.length>0?t.join(", "):o.fullAddress||"Not provided"},M=()=>{const o=(d==null?void 0:d.email)||(l==null?void 0:l.email);return o?o.charAt(0).toUpperCase():"P"};return e.jsxs(r,{sx:{p:3,backgroundColor:"#f5f5f5",minHeight:"100vh"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(v,{sx:{backgroundColor:"#E15B65"},children:e.jsx(G,{})}),e.jsx(c,{variant:"h5",fontWeight:"600",color:"#E15B65",children:"My Info"})]}),e.jsx(x,{variant:"contained",startIcon:e.jsx(H,{}),onClick:A,sx:{backgroundColor:"#E15B65","&:hover":{backgroundColor:"#e32c38ff"},textTransform:"none",px:3,py:1,borderRadius:2},children:"Edit Provider Information"})]}),e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,md:8,children:e.jsxs(C,{sx:{position:"relative",height:400,backgroundImage:`url(${n.coverPhoto})`,backgroundSize:"cover",backgroundPosition:"center",borderRadius:2,overflow:"hidden"},children:[e.jsx(N,{sx:{position:"absolute",top:16,right:16,backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:e.jsx(_,{})}),e.jsx(r,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(171, 33, 33, 0.8))",p:3,color:"white"},children:e.jsx(c,{variant:"h6",fontWeight:"600",gutterBottom:!0,children:n.name})})]})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsxs(C,{sx:{p:3,height:400,width:500,borderRadius:2},children:[e.jsx(r,{sx:{display:"flex",justifyContent:"center",mb:3},children:e.jsx(v,{sx:{width:80,height:80,bgcolor:"#E15B65",color:"white",fontSize:32,fontWeight:600},children:M()})}),S?e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:e.jsx(U,{})}):e.jsxs(r,{sx:{space:2},children:[e.jsx(r,{sx:{mb:2},children:e.jsxs(c,{variant:"body2",color:"black",gutterBottom:!0,children:["Email : ",(d==null?void 0:d.email)||(l==null?void 0:l.email)||"Not provided"]})}),e.jsx(r,{sx:{mb:2},children:e.jsxs(c,{variant:"body2",color:"black",gutterBottom:!0,children:["Phone : ",n.phone||"Not provided"]})}),e.jsx(r,{sx:{mb:2},children:e.jsxs(c,{variant:"body2",color:"black",gutterBottom:!0,children:["Address : ",n.address?W(n.address):"Not provided"]})})]})]})})]}),e.jsxs(T,{open:y,onClose:j,maxWidth:"sm",fullWidth:!0,children:[e.jsx(F,{children:"Edit Provider Information"}),e.jsx(L,{sx:{pt:2},children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(h,{label:"Email",value:i.email||"",onChange:u("email"),fullWidth:!0,variant:"outlined"}),e.jsx(h,{label:"Name",value:i.name,onChange:u("name"),fullWidth:!0,variant:"outlined"}),e.jsx(h,{label:"Phone",value:i.phone,onChange:u("phone"),fullWidth:!0,variant:"outlined"}),e.jsx(h,{label:"Address",value:i.address,onChange:u("address"),fullWidth:!0,variant:"outlined"})]})}),e.jsxs($,{sx:{p:3},children:[e.jsx(x,{onClick:j,color:"inherit",children:"Cancel"}),e.jsx(x,{onClick:D,variant:"contained",sx:{backgroundColor:"#E15B65","&:hover":{backgroundColor:"#e42f3bff"}},children:"Save Changes"})]})]}),e.jsxs(r,{sx:{mt:5,mb:3,p:2,borderLeft:"6px solid #E15B65",backgroundColor:"#fff",borderRadius:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(c,{variant:"subtitle1",color:"#E15B65",fontWeight:"600",children:["Announcement ",e.jsx("span",{style:{fontSize:"0.75rem",color:"#E15B65"},children:"i"})]}),e.jsx(r,{children:e.jsx(z,{defaultChecked:!0,sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#b42a33ff"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#E15B65"}}})})]}),e.jsx(h,{placeholder:"Ex: ABC Company",fullWidth:!0,variant:"outlined",sx:{mt:1,"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(x,{variant:"contained",sx:{backgroundColor:"#E15B65","&:hover":{backgroundColor:"#d1333dff"},textTransform:"none",mt:3,paddingLeft:20,px:2,py:.5,borderRadius:2},children:"Publish"})]})]})};export{Y as default};
