import{c as X,j as e,ah as xe,w as fe,ai as he,r as i,h as J,B as o,t as W,g as p,aj as K,x as Q,T as n,q as pe,aq as ge,ap as ue,p as be,N as me,G as x,H as ee,P as je,a6 as ye,a7 as ve,a8 as Se,am as ze}from"./index-1PfbYpor.js";import{D as T}from"./DirectionsCar-DtWoMQi8.js";import{L as A}from"./LocalOffer-CMtdvA2b.js";import{E as Ie}from"./Event-NAeIXEeJ.js";import{L as we}from"./LocationOn-D8gpmqet.js";import{A as Ce}from"./AcUnit-GyFcM60Y.js";import{D as ke}from"./DialogActions-BqZeVoHf.js";const Ae=X(e.jsx("path",{d:"m19.77 7.23.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77M12 10H6V5h6zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"})),S=X(e.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"})),De=ee("img")(({theme:a,active:f})=>({width:80,height:60,objectFit:"cover",borderRadius:8,cursor:"pointer",border:f?"3px solid #d9505d":"2px solid #e0e0e0",opacity:f?1:.6,transition:"all 0.3s ease","&:hover":{opacity:1,transform:"scale(1.05)"}})),D=ee(o)(({theme:a})=>({background:"#ffffff",borderRadius:16,padding:"24px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",height:"100%",border:"1px solid #f0f0f0",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 20px rgba(0,0,0,0.12)",transform:"translateY(-2px)"}})),We=({loading:a})=>e.jsx(o,{sx:{width:"100%",height:{xs:240,md:300},background:a?"linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%)":"#f5f5f5",borderRadius:3,display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"14px",border:"2px dashed #ccc"},children:a?e.jsx(W,{size:40,sx:{color:"#d9505d"}}):e.jsxs(e.Fragment,{children:[e.jsx(T,{sx:{fontSize:48,opacity:.5}}),e.jsx(n,{variant:"body2",sx:{mt:1,opacity:.7},children:"No Image Available"})]})}),Le=()=>{var _,M,U,O,G,q,Y;const{id:a}=xe(),f=fe(),z=he(),I="https://api.bookmyevent.ae/api",[g,N]=i.useState(0),[s,E]=i.useState(null),[se,j]=i.useState(!0),[V,w]=i.useState(""),[oe,h]=i.useState(!1),[te,u]=i.useState(""),[R,b]=i.useState("success"),[re,y]=i.useState(!1),[C,k]=i.useState(!0),[$,B]=i.useState(new Set),ne=I.replace(/\/api\/?$/,""),L=t=>t?`${ne}/Uploads/vehicles/${t}`:"";i.useEffect(()=>{var t;if((t=z.state)!=null&&t.vehicle){const r=z.state.vehicle;E(r),j(!1)}else a&&a!=="undefined"?ie():(w("No vehicle ID provided"),j(!1))},[a,z.state]);let v=[];s&&s.images&&s.images.length>0?v=s.images.map(L).filter(t=>t):s&&s.thumbnail&&(v=[L(s.thumbnail)].filter(t=>t));const l=v.length>0?v:[];i.useEffect(()=>{k(!0),B(new Set),l.length>0&&N(0)},[s,l.length]);const ie=async()=>{var t,r,c;j(!0);try{const d=localStorage.getItem("token");if(!d)throw new Error("No authentication token found");console.log("Fetching vehicle with ID:",a);const m=await J.get(`${I}/vehicles/${a}`,{headers:{Authorization:`Bearer ${d}`}}),Z=m.data.data||m.data;console.log("Vehicle data received:",Z),E(Z),w("")}catch(d){console.error("Error fetching vehicle:",d),console.error("Error response:",(t=d.response)==null?void 0:t.data);const m=((c=(r=d.response)==null?void 0:r.data)==null?void 0:c.message)||d.message||"Failed to load vehicle data";w(m),u(m),b("error"),h(!0)}finally{j(!1)}},P=t=>{console.error(`Image load error for index ${t}:`,l[t]),B(r=>new Set([...r,t])),k(!1)},ae=()=>{y(!0)},le=async()=>{var t,r;if(!(s!=null&&s._id)){u("Vehicle ID not found"),b("error"),h(!0);return}try{const c=localStorage.getItem("token");await J.delete(`${I}/vehicles/${s._id}`,{headers:{Authorization:`Bearer ${c}`}}),u("Vehicle deleted successfully"),b("success"),h(!0),setTimeout(()=>f("/vehicle-setup/lists"),1500)}catch(c){console.error("Error deleting vehicle:",c),u(((r=(t=c.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to delete vehicle"),b("error"),h(!0)}finally{y(!1)}},ce=()=>{if(!(s!=null&&s._id)){u("Vehicle ID not found"),b("error"),h(!0);return}f(`/vehicle-setup/leads/${s._id}`,{state:{vehicle:s}})},F=(t,r)=>{r!=="clickaway"&&h(!1)},H=()=>{f("/vehicle-setup/lists")};if(se)return e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%)"},children:e.jsx(W,{sx:{color:"#d9505d"}})});if(V||!s)return e.jsxs(o,{sx:{maxWidth:1400,mx:"auto",p:3,background:"linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%)",minHeight:"100vh"},children:[e.jsx(o,{sx:{mb:2},children:e.jsx(p,{startIcon:e.jsx(K,{}),onClick:H,sx:{mb:2,color:"#666","&:hover":{bgcolor:"rgba(0,0,0,0.04)"}},children:"Back to Vehicles"})}),e.jsxs(Q,{severity:"error",children:[V||"Vehicle not found",e.jsx("br",{}),e.jsxs(n,{variant:"caption",sx:{mt:1,display:"block"},children:["Vehicle ID: ",a||"Not provided"]})]})]});l.length>0&&$.has(g);const de=l.length===0||$.has(g);return e.jsxs(o,{sx:{width:"100%",mx:"auto",p:{xs:2,md:3},background:"linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%)",minHeight:"100vh"},children:[e.jsx(o,{sx:{mb:3},children:e.jsx(p,{startIcon:e.jsx(K,{}),onClick:H,sx:{color:"#666",fontSize:"14px","&:hover":{bgcolor:"rgba(0,0,0,0.04)"}},children:"Back to Vehicles"})}),e.jsxs(o,{sx:{background:"#ffffff",borderRadius:3,p:3,mb:3,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(pe,{sx:{background:"linear-gradient(135deg, #d9505d 0%, #ed081f 100%)",width:56,height:56,boxShadow:"0 4px 12px rgba(217, 80, 93, 0.3)"},children:e.jsx(T,{sx:{fontSize:30}})}),e.jsxs(o,{children:[e.jsx(n,{variant:"h4",fontWeight:"700",sx:{color:"#2c3e50",fontSize:{xs:"22px",md:"28px"}},children:s.name||"Vehicle Details"}),s.discount&&e.jsxs(o,{sx:{display:"inline-flex",alignItems:"center",gap:.5,mt:.5,px:2,py:.5,bgcolor:"#d4edda",borderRadius:2,border:"1px solid #c3e6cb"},children:[e.jsx(A,{sx:{fontSize:14,color:"#155724"}}),e.jsxs(n,{sx:{fontSize:"13px",fontWeight:600,color:"#155724"},children:[s.discount,"% OFF"]})]})]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(p,{variant:"outlined",startIcon:e.jsx(ge,{}),onClick:ae,sx:{color:"#dc3545",borderColor:"#dc3545",bgcolor:"#fff5f5",textTransform:"none",fontSize:"14px",px:3,py:1,fontWeight:500,borderRadius:2,"&:hover":{bgcolor:"#fee",borderColor:"#ff0019ff"}},children:"Delete"}),e.jsx(p,{variant:"contained",startIcon:e.jsx(ue,{}),onClick:ce,sx:{background:"linear-gradient(135deg, #E15B65 0%, #e98e8eff 100%)",textTransform:"none",fontSize:"14px",px:3,py:1,fontWeight:500,borderRadius:2,boxShadow:"0 4px 12px rgba(217, 80, 93, 0.3)","&:hover":{background:"linear-gradient(135deg, #f68b96ff 0%, #c52131ff 100%)",boxShadow:"0 6px 16px rgba(217, 80, 93, 0.4)"}},children:"Edit Vehicle"})]})]}),e.jsx(be,{sx:{borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",bgcolor:"#ffffff",overflow:"hidden"},children:e.jsxs(me,{sx:{p:{xs:3,md:4}},children:[e.jsxs(x,{container:!0,spacing:4,children:[e.jsx(x,{item:!0,xs:12,md:5,children:e.jsxs(o,{sx:{position:"relative"},children:[e.jsx(o,{sx:{width:"100%",height:{xs:240,md:300},borderRadius:3,mb:2,boxShadow:"0 4px 16px rgba(0,0,0,0.1)",overflow:"hidden"},children:de?e.jsx(We,{loading:C}):e.jsxs(e.Fragment,{children:[C&&e.jsx(o,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.8)",zIndex:1},children:e.jsx(W,{size:40,sx:{color:"#d9505d"}})}),e.jsx("img",{src:l[g],alt:s.name||"Vehicle",onLoad:()=>k(!1),onError:()=>P(g),style:{width:"100%",height:"100%",objectFit:"cover",display:C?"none":"block"},loading:"lazy"})]})}),l.length>0&&e.jsx(o,{sx:{display:"flex",gap:1.5,flexWrap:"wrap"},children:l.map((t,r)=>e.jsx(De,{src:t,alt:`${s.name} view ${r+1}`,active:g===r,onClick:()=>N(r),onError:()=>P(r),loading:"lazy"},r))})]})}),e.jsxs(x,{item:!0,xs:12,md:7,children:[e.jsx(n,{variant:"h4",fontWeight:"700",mb:2,sx:{color:"#2c3e50",fontSize:{xs:"24px",md:"32px"}},children:s.name||"Vehicle Name"}),e.jsxs(o,{sx:{bgcolor:"#f8f9fa",borderRadius:2,p:2.5,mb:3,border:"1px solid #e9ecef"},children:[e.jsxs(n,{variant:"subtitle1",color:"#495057",mb:1,fontWeight:"600",sx:{fontSize:"15px",display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ie,{sx:{fontSize:18}}),"Description"]}),e.jsx(n,{variant:"body1",color:"#6c757d",lineHeight:1.7,sx:{fontSize:"14px"},children:s.description||"No description available."})]}),s.searchTags&&s.searchTags.length>0&&e.jsxs(o,{children:[e.jsxs(n,{variant:"subtitle1",color:"#495057",mb:1.5,fontWeight:"600",sx:{fontSize:"15px",display:"flex",alignItems:"center",gap:1},children:[e.jsx(A,{sx:{fontSize:18}}),"Search Tags"]}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:s.searchTags.map((t,r)=>e.jsx(o,{sx:{px:2.5,py:.8,background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",color:"#1565c0",borderRadius:2,fontSize:"13px",fontWeight:600,border:"1px solid #90caf9"},children:t},r))})]})]})]}),e.jsx(o,{sx:{my:5,height:"1px",bgcolor:"#e9ecef"}}),e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:4,sx:{width:335},children:e.jsxs(D,{children:[e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e.jsx(o,{sx:{p:2,borderRadius:3,background:"linear-gradient(135deg, #fee 0%, #fcc 100%)",mb:2},children:e.jsx(T,{sx:{fontSize:32,color:"#dc3545"}})}),e.jsx(n,{variant:"h6",fontWeight:"700",sx:{fontSize:"18px",color:"#2c3e50"},children:"General Info"})]}),e.jsx(o,{children:[{label:"Brand",value:((_=s.brand)==null?void 0:_.title)||"N/A"},{label:"Model",value:s.model||"N/A"},{label:"Category",value:((M=s.category)==null?void 0:M.title)||"N/A"},{label:"Type",value:s.type||"N/A"},{label:"License Plate",value:s.licensePlateNumber||"N/A"}].map((t,r)=>e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:2,pb:2,borderBottom:r!==4?"1px solid #f0f0f0":"none"},children:[e.jsx(n,{color:"#6c757d",fontWeight:"500",sx:{fontSize:"14px"},children:t.label}),e.jsx(n,{fontWeight:"600",sx:{fontSize:"14px",color:"#2c3e50"},children:t.value})]},r))}),e.jsxs(o,{sx:{mt:3,pt:3,borderTop:"2px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(we,{sx:{fontSize:20,color:"#6c757d"}}),e.jsx(n,{variant:"subtitle2",fontWeight:"600",color:"#495057",sx:{fontSize:"15px"},children:"Zone"})]}),e.jsx(n,{variant:"body2",fontWeight:"600",sx:{fontSize:"14px",color:"#d9505d"},children:((U=s.zone)==null?void 0:U.name)||"N/A"})]})]})}),e.jsx(x,{item:!0,xs:12,md:4,sx:{width:335},children:e.jsxs(D,{children:[e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e.jsx(o,{sx:{p:2,borderRadius:3,background:"linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)",mb:2},children:e.jsx(A,{sx:{fontSize:32,color:"#28a745"}})}),e.jsx(n,{variant:"h6",fontWeight:"700",sx:{fontSize:"18px",color:"#2c3e50"},children:"Fare & Discounts"})]}),e.jsx(o,{children:[{label:"Hourly",value:(O=s.pricing)!=null&&O.hourly?`₹ ${s.pricing.hourly}`:"N/A"},{label:"Per Day",value:(G=s.pricing)!=null&&G.perDay?`₹ ${s.pricing.perDay}`:"N/A"},{label:"Distance",value:(q=s.pricing)!=null&&q.distanceWise?`₹ ${s.pricing.distanceWise}/km`:"N/A"}].map((t,r)=>e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:2,pb:2,borderBottom:"1px solid #f0f0f0"},children:[e.jsx(n,{color:"#6c757d",fontWeight:"500",sx:{fontSize:"14px"},children:t.label}),e.jsx(n,{fontWeight:"600",sx:{fontSize:"14px",color:"#2c3e50"},children:t.value})]},r))}),e.jsxs(o,{sx:{mt:3,p:2.5,borderRadius:2,background:"linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)",border:"2px solid #28a745",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(n,{fontWeight:"700",sx:{fontSize:"16px",color:"#155724"},children:"Discount"}),e.jsx(n,{fontWeight:"900",sx:{fontSize:"28px",color:"#28a745"},children:s.discount?`${s.discount}%`:"N/A"})]}),((Y=s.pricing)==null?void 0:Y.type)&&e.jsxs(o,{sx:{mt:3,pt:3,borderTop:"2px solid #f0f0f0"},children:[e.jsx(n,{variant:"body2",color:"#6c757d",sx:{fontSize:"13px",mb:.5},children:"Pricing Type"}),e.jsx(n,{fontWeight:"600",sx:{fontSize:"14px",color:"#d9505d",textTransform:"capitalize"},children:s.pricing.type})]})]})}),e.jsx(x,{item:!0,xs:12,md:4,sx:{width:340},children:e.jsxs(D,{children:[e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e.jsx(o,{sx:{p:2,borderRadius:3,background:"linear-gradient(135deg, #cfe2ff 0%, #9ec5fe 100%)",mb:2},children:e.jsx(S,{sx:{fontSize:32,color:"#0d6efd"}})}),e.jsx(n,{variant:"h6",fontWeight:"700",sx:{fontSize:"18px",color:"#2c3e50"},children:"Features"})]}),e.jsx(o,{children:[{icon:e.jsx(Ce,{sx:{fontSize:18}}),label:"Air Condition",value:s.airCondition?"Yes":"No",color:s.airCondition?"#28a745":"#6c757d"},{icon:e.jsx(S,{sx:{fontSize:18}}),label:"Engine Capacity",value:s.engineCapacity?`${s.engineCapacity} cc`:"N/A",color:"#0d6efd"},{icon:e.jsx(S,{sx:{fontSize:18}}),label:"Transmission",value:s.transmissionType?s.transmissionType.charAt(0).toUpperCase()+s.transmissionType.slice(1):"N/A",color:"#6f42c1"},{icon:e.jsx(je,{sx:{fontSize:18}}),label:"Seating Capacity",value:s.seatingCapacity||"N/A",color:"#fd7e14"},{icon:e.jsx(Ae,{sx:{fontSize:18}}),label:"Fuel Type",value:s.fuelType?s.fuelType.charAt(0).toUpperCase()+s.fuelType.slice(1):"N/A",color:"#ffc107"},{icon:e.jsx(S,{sx:{fontSize:18}}),label:"Engine Power",value:s.enginePower?`${s.enginePower} hp`:"N/A",color:"#dc3545"}].map((t,r)=>e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,pb:2,borderBottom:r!==5?"1px solid #f0f0f0":"none"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(o,{sx:{color:t.color},children:t.icon}),e.jsx(n,{color:"#6c757d",fontWeight:"500",sx:{fontSize:"13px"},children:t.label})]}),e.jsx(n,{fontWeight:"600",sx:{fontSize:"13px",color:t.color},children:t.value})]},r))})]})})]})]})}),e.jsxs(ye,{open:re,onClose:()=>y(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[e.jsx(ve,{sx:{color:"#dc3545",fontWeight:700,fontSize:"20px"},children:"Delete Vehicle"}),e.jsxs(Se,{children:[e.jsxs(n,{sx:{mb:2,fontSize:"15px"},children:["Are you sure you want to delete ",e.jsxs("strong",{children:['"',s.name,'"']}),"?"]}),e.jsx(n,{color:"text.secondary",sx:{fontSize:"14px"},children:"This action cannot be undone. All vehicle data will be permanently removed."})]}),e.jsxs(ke,{sx:{p:3,pt:0},children:[e.jsx(p,{onClick:()=>y(!1),sx:{textTransform:"none",fontWeight:500,px:3},children:"Cancel"}),e.jsx(p,{onClick:le,variant:"contained",sx:{textTransform:"none",fontWeight:500,px:3,bgcolor:"#dc3545","&:hover":{bgcolor:"#b02a37"}},children:"Delete Vehicle"})]})]}),e.jsx(ze,{open:oe,autoHideDuration:3e3,onClose:F,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(Q,{onClose:F,severity:R,sx:{backgroundColor:R==="success"?"#28a745":"#dc3545",color:"white",fontWeight:500,"& .MuiAlert-icon":{color:"white"}},children:te})})]})};export{Le as default};
