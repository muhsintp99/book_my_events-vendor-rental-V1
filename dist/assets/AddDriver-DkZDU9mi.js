import{r as s,j as e,B as n,T as i,p as P,W as T,s as j,a as se,F,ag as $,$ as p,am as ie,g as k,ao as ae,x as ne}from"./index-ClBsW6WP.js";import{C as z}from"./CloudUpload-CAUVY-kZ.js";const A=ie(n)(({theme:a})=>({border:"2px dashed #e0e0e0",borderRadius:a.shape.borderRadius,padding:a.spacing(3),textAlign:"center",backgroundColor:a.palette.grey[50],cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"150px","&:hover":{borderColor:a.palette.primary.main},"& input[type='file']":{display:"none"}})),G=[{code:"+1",flag:"ðŸ‡ºðŸ‡¸",name:"United States",iso:"us"},{code:"+596",flag:"ðŸ‡²ðŸ‡¶",name:"Martinique",iso:"mq"},{code:"+222",flag:"ðŸ‡²ðŸ‡·",name:"Mauritania",iso:"mr"},{code:"+230",flag:"ðŸ‡²ðŸ‡º",name:"Mauritius",iso:"mu"},{code:"+262",flag:"ðŸ‡¾ðŸ‡¹",name:"Mayotte",iso:"yt"},{code:"+52",flag:"ðŸ‡²ðŸ‡½",name:"Mexico",iso:"mx"},{code:"+91",flag:"ðŸ‡®ðŸ‡³",name:"India",iso:"in"},{code:"+44",flag:"ðŸ‡¬ðŸ‡§",name:"United Kingdom",iso:"gb"},{code:"+33",flag:"ðŸ‡«ðŸ‡·",name:"France",iso:"fr"},{code:"+49",flag:"ðŸ‡©ðŸ‡ª",name:"Germany",iso:"de"},{code:"+81",flag:"ðŸ‡¯ðŸ‡µ",name:"Japan",iso:"jp"},{code:"+86",flag:"ðŸ‡¨ðŸ‡³",name:"China",iso:"cn"}],J={"+1":10,"+596":9,"+222":8,"+230":7,"+262":9,"+52":10,"+91":10,"+44":10,"+33":9,"+49":10,"+81":10,"+86":11},ce=()=>{const[a,w]=s.useState(""),[u,R]=s.useState(""),[o,L]=s.useState(""),[y,q]=s.useState("+1"),[c,S]=s.useState(""),[C,M]=s.useState(""),[x,I]=s.useState(null),[N,v]=s.useState(""),[b,B]=s.useState(""),[m,E]=s.useState(""),[g,D]=s.useState(null),[H,l]=s.useState(!1),[V,h]=s.useState(""),[K,f]=s.useState("success"),Q=()=>a.trim()?u.trim()?!o.trim()||!/^\S+@\S+\.\S+$/.test(o)?"Valid email is required":!c||c.length!==J[y]?"Valid phone number is required":b?m.trim()?x?g?null:"Identity image is required":"Profile image is required":"Identity number is required":"Identity type is required":"Last name is required":"First name is required",X=t=>{const r=t.target.files[0];if(r&&r.size>1024*1024){h("Profile image must be less than 1MB"),f("error"),l(!0);return}I(r)},Y=t=>{const r=t.target.files[0];if(r&&r.size>1024*1024){h("Identity image must be less than 1MB"),f("error"),l(!0);return}D(r)},O=t=>t.preventDefault(),Z=t=>{t.preventDefault();const r=t.dataTransfer.files[0];r&&r.size>1024*1024?(h("Profile image must be less than 1MB"),f("error"),l(!0)):I(r)},_=t=>{t.preventDefault();const r=t.dataTransfer.files[0];r&&r.size>1024*1024?(h("Identity image must be less than 1MB"),f("error"),l(!0)):D(r)},ee=t=>{let r=t.target.value.replace(/\D/g,"");const d=J[y]||10;r.length>d&&(r=r.slice(0,d)),S(r),r.length!==d?v(`Phone number must be ${d} digits for ${y}`):v("")},te=t=>{t.preventDefault();const r=Q();if(r){h(r),f("error"),l(!0);return}const d={id:Date.now(),name:`${a} ${u}`,phone:`${y} ${c}`,totalTrips:0,complete:0,cancel:0,status:!0,email:o,identityType:b,identityNumber:m,profileImage:x?URL.createObjectURL(x):null,identityImage:g?URL.createObjectURL(g):null},re=[...JSON.parse(localStorage.getItem("drivers")||"[]"),d];localStorage.setItem("drivers",JSON.stringify(re)),console.log(d),h("Form submitted successfully!"),f("success"),l(!0),U()},U=()=>{w(""),R(""),L(""),q("+1"),S(""),M(""),I(null),v(""),B(""),E(""),D(null),h(""),l(!1)},W=G.filter(t=>t.name.toLowerCase().includes(C.toLowerCase())||t.code.includes(C));return e.jsx(n,{sx:{p:3,backgroundColor:"white",minHeight:"100vh",width:"100%"},children:e.jsxs(n,{sx:{maxWidth:"lg",margin:"auto"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx("img",{src:"https://via.placeholder.com/24",alt:"Driver Icon",style:{marginRight:8}}),e.jsx(i,{variant:"h5",component:"h1",children:"Add New Driver"})]}),e.jsx(i,{variant:"subtitle1",color:"text.secondary",sx:{mb:4},children:"Insert the basic information of the driver"}),e.jsxs(n,{component:"form",onSubmit:te,children:[e.jsxs(n,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3,mb:4},children:[e.jsx(P,{sx:{flex:2,p:2,boxShadow:"none",border:"1px solid #e0e0e0"},children:e.jsxs(T,{sx:{"&:last-child":{pb:2}},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"User Info"}),e.jsx(j,{fullWidth:!0,label:"First name",value:a,onChange:t=>w(t.target.value),placeholder:"Type your first name",error:a!==""&&!a.trim(),helperText:a!==""&&!a.trim()?"First name is required":"",sx:{mb:2}}),e.jsx(j,{fullWidth:!0,label:"Last name",value:u,onChange:t=>R(t.target.value),placeholder:"Type your last name",error:u!==""&&!u.trim(),helperText:u!==""&&!u.trim()?"Last name is required":"",sx:{mb:2}}),e.jsx(j,{fullWidth:!0,label:"Email",value:o,onChange:t=>L(t.target.value),placeholder:"Type your email address",error:o!==""&&(!o.trim()||!/^\S+@\S+\.\S+$/.test(o)),helperText:o!==""&&(!o.trim()||!/^\S+@\S+\.\S+$/.test(o))?"Valid email is required":"",sx:{mb:2}}),e.jsx(j,{fullWidth:!0,label:"Phone",value:c,onChange:ee,placeholder:"Enter phone number",error:c!==""&&(N||!c),helperText:c!==""&&(N||(c?"":"Phone number is required")),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(F,{variant:"standard",children:e.jsxs($,{value:y,onChange:t=>{q(t.target.value),S(""),v("")},renderValue:t=>{const r=G.find(d=>d.code===t);return e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("img",{src:`https://flagcdn.com/w20/${r==null?void 0:r.iso}.png`,alt:r==null?void 0:r.name,style:{width:20,height:14,borderRadius:2}}),r==null?void 0:r.code]})},MenuProps:{PaperProps:{style:{maxHeight:300,width:280}}},children:[e.jsx(p,{disableRipple:!0,disableTouchRipple:!0,children:e.jsx(j,{placeholder:"Search...",size:"small",fullWidth:!0,value:C,onChange:t=>M(t.target.value),onClick:t=>t.stopPropagation(),onKeyDown:t=>t.stopPropagation()})}),W.length>0?W.map(t=>e.jsxs(p,{value:t.code,children:[e.jsx("img",{src:`https://flagcdn.com/w20/${t.iso}.png`,alt:t.name,style:{width:20,height:14,borderRadius:2,marginRight:8}}),t.name," (",t.code,")"]},t.code)):e.jsx(p,{disabled:!0,children:"No results"})]})})})},sx:{mb:2}})]})}),e.jsx(P,{sx:{flex:1,p:2,boxShadow:"none",border:"1px solid #e0e0e0"},children:e.jsxs(T,{sx:{"&:last-child":{pb:2}},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Profile Image"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 1:1)"}),e.jsxs(A,{onDragOver:O,onDrop:Z,onClick:()=>document.getElementById("profile-upload").click(),children:[x?e.jsxs(n,{children:[e.jsx("img",{src:URL.createObjectURL(x),alt:"Profile preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain"}}),e.jsx(i,{variant:"body2",color:"text.secondary",children:x.name})]}):e.jsxs(n,{children:[e.jsx(z,{sx:{fontSize:40,color:"#757575",mb:1}}),e.jsx(i,{variant:"body2",color:"primary",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"profile-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:X})]})]})})]}),e.jsx(P,{sx:{p:2,mb:4,boxShadow:"none",border:"1px solid #e0e0e0"},children:e.jsxs(T,{sx:{"&:last-child":{pb:2}},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Identity Info"}),e.jsxs(n,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:2},children:[e.jsx(F,{fullWidth:!0,children:e.jsxs($,{value:b,displayEmpty:!0,onChange:t=>B(t.target.value),error:b!==""&&!b,children:[e.jsx(p,{value:"",children:e.jsx("em",{children:"Select identity type"})}),e.jsx(p,{value:"passport",children:"Passport"}),e.jsx(p,{value:"nid",children:"Nid"}),e.jsx(p,{value:"driving",children:"Driving License"})]})}),e.jsx(j,{fullWidth:!0,placeholder:"Ex: 123654789512364",value:m,onChange:t=>E(t.target.value),error:m!==""&&!m.trim(),helperText:m!==""&&!m.trim()?"Identity number is required":""})]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"JPG, JPEG, PNG Less Than 1MB (Ratio 2:1)"}),e.jsxs(A,{onDragOver:O,onDrop:_,onClick:()=>document.getElementById("identity-upload").click(),children:[g?e.jsxs(n,{children:[e.jsx("img",{src:URL.createObjectURL(g),alt:"Identity preview",style:{maxWidth:"100%",maxHeight:100,objectFit:"contain"}}),e.jsx(i,{variant:"body2",color:"text.secondary",children:g.name})]}):e.jsxs(n,{children:[e.jsx(z,{sx:{fontSize:40,color:"#757575",mb:1}}),e.jsx(i,{variant:"body2",color:"primary",sx:{mb:.5,fontWeight:"medium"},children:"Click to upload"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Or drag and drop"})]}),e.jsx("input",{type:"file",id:"identity-upload",hidden:!0,accept:"image/jpeg,image/png,image/jpg",onChange:Y})]})]})}),e.jsxs(n,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(k,{variant:"outlined",onClick:U,size:"large",children:"Reset"}),e.jsx(k,{variant:"contained",type:"submit",size:"large",children:"Submit"})]})]}),e.jsx(ae,{open:H,autoHideDuration:6e3,onClose:()=>l(!1),anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(ne,{onClose:()=>l(!1),severity:K,sx:{width:"100%"},children:V})})]})})};export{ce as default};
