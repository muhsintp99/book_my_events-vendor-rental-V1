import{r as n,h as C,j as e,B as b,T as d,a8 as k,S as B,s as w,g as S,t as T}from"./index-4okDMdnD.js";import{T as v}from"./TableContainer-C0CdaQmp.js";import{T as A,a,b as t,c as L}from"./TableRow-C6jbRdCj.js";import{T as N}from"./TableHead-B0pWnYBp.js";const q=()=>{try{const r=localStorage.getItem("user");if(!r)return null;const o=JSON.parse(r);return(o==null?void 0:o._id)||null}catch(r){return console.error("Error parsing user:",r),null}},D=r=>r?typeof r=="string"?r:Array.isArray(r)?r.map(o=>typeof o=="object"?o.label||o.time:o).join(", "):typeof r=="object"&&(r.label||r.time)||"N/A":"N/A",H=()=>{const[r,o]=n.useState(""),[g,m]=n.useState([]),[f,u]=n.useState(!0),l=q(),c=n.useCallback(async()=>{var s;if(l)try{u(!0);const y=(((s=(await C.get(`https://api.bookmyevent.ae/api/bookings/provider/${l}`)).data)==null?void 0:s.data)||[]).filter(x=>{const p=String(x.paymentStatus||"").toLowerCase(),j=String(x.moduleType||"").toLowerCase();return(p==="paid"||p==="completed")&&(j==="boutique"||j==="boutique artist")});m(y)}catch(i){console.error("Error fetching completed bookings:",i)}finally{u(!1)}},[l]);n.useEffect(()=>{c()},[c]);const h=g.filter(s=>s._id.toLowerCase().includes(r.toLowerCase())||(s.fullName||"").toLowerCase().includes(r.toLowerCase()));return e.jsxs(b,{p:2,children:[e.jsx(d,{variant:"h4",gutterBottom:!0,fontWeight:600,children:"Completed Boutique Bookings"}),e.jsxs(k,{sx:{mt:2,width:"100%",borderRadius:"12px",overflow:"hidden"},children:[e.jsxs(B,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},p:2,children:[e.jsx(w,{label:"Search by ID, customer name",size:"small",value:r,onChange:s=>o(s.target.value),sx:{maxWidth:{sm:350}}}),e.jsx(S,{variant:"contained",sx:{bgcolor:"#E15B65",color:"white",borderRadius:"30px",px:3},onClick:c,children:"Refresh"})]}),e.jsx(v,{sx:{width:"100%",overflowX:"auto"},children:e.jsxs(A,{stickyHeader:!0,children:[e.jsx(N,{children:e.jsxs(a,{children:[e.jsx(t,{children:e.jsx("strong",{children:"S#"})}),e.jsx(t,{children:e.jsx("strong",{children:"Booking ID"})}),e.jsx(t,{children:e.jsx("strong",{children:"Booking Date"})}),e.jsx(t,{children:e.jsx("strong",{children:"Schedule At"})}),e.jsx(t,{children:e.jsx("strong",{children:"Customer"})}),e.jsx(t,{children:e.jsx("strong",{children:"Amount"})}),e.jsx(t,{children:e.jsx("strong",{children:"Status"})})]})}),e.jsx(L,{children:f?e.jsx(a,{children:e.jsx(t,{colSpan:7,align:"center",sx:{py:3},children:e.jsx(T,{size:30})})}):h.length>0?h.map((s,i)=>e.jsxs(a,{hover:!0,children:[e.jsx(t,{children:i+1}),e.jsxs(t,{children:["#",s._id.slice(-6).toUpperCase()]}),e.jsx(t,{children:new Date(s.bookingDate).toLocaleDateString()}),e.jsx(t,{children:D(s.timeSlot)}),e.jsxs(t,{children:[e.jsx(d,{variant:"body2",fontWeight:600,children:s.fullName}),e.jsx(d,{variant:"caption",display:"block",children:s.emailAddress})]}),e.jsxs(t,{children:["â‚¹",s.finalPrice||0]}),e.jsx(t,{children:s.paymentStatus})]},s._id)):e.jsx(a,{children:e.jsx(t,{colSpan:7,align:"center",sx:{py:3},children:"No completed bookings found."})})})]})})]})]})};export{H as default};
