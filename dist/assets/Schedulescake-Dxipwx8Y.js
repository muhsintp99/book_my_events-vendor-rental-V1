import{r as c,j as e,B as o,x as R,b as y,aE as se,T as n,aF as Be,a9 as Fe,t as oe,ar as Pe,aG as re,aH as ne,aI as N,g as ae,ab as Re,ac as Ne,G as l,P as ie,s as h,a as k,aJ as le,F as Le,I as Ee,ag as Oe,$ as de,C as L,aL as _e,f as xe,D as Ye,aM as $e,aN as He,aO as Ge,aP as qe,Z as Ve,aK as Ue}from"./index-Psh_sqb_.js";const v="https://api.bookmyevent.ae";function et(){const[f,ce]=c.useState(new Date),[S,fe]=c.useState(new Date().getDate()),[pe,T]=c.useState(!1),[E,O]=c.useState([]),[_,he]=c.useState([]),[Y,ue]=c.useState([]),[z,A]=c.useState([]),[D,$]=c.useState([]),[Je,H]=c.useState(!1),[I,x]=c.useState(null),[G,q]=c.useState(!1),[V,U]=c.useState(null),[a,g]=c.useState({fullName:"",contactNumber:"",emailAddress:"",address:"",numberOfGuests:"",cakeId:"",deliveryType:"Home Delivery",customerMessage:"",bookingDate:new Date().toISOString().split("T")[0],timeSlot:[],paymentType:"COD",bookingType:"Direct"}),m=(()=>{let t=localStorage.getItem("providerId")||localStorage.getItem("userId");if(!t){const s=localStorage.getItem("user");if(s)try{const r=JSON.parse(s);t=r._id||r.id||r.userId}catch(r){console.error("Error parsing user from localStorage:",r)}}return t})();c.useEffect(()=>{m&&(J(),ge(),me())},[f,m]),c.useEffect(()=>{D.length===1&&!a.moduleId&&g(t=>({...t,moduleId:D[0]._id}))},[D]);const J=async()=>{if(!m){x("Provider ID is required");return}H(!0),x(null);try{const s=await(await fetch(`${v}/api/bookings/provider/${m}`)).json();s.success?O(s.data||[]):x(s.message||"Failed to fetch bookings")}catch(t){x("Error connecting to server"),console.error("Fetch error:",t)}finally{H(!1)}},ge=async()=>{try{const s=await(await fetch(`${v}/api/modules`)).json();let r=[];s.success&&s.data&&Array.isArray(s.data)?r=s.data:s.success&&s.modules&&Array.isArray(s.modules)?r=s.modules:Array.isArray(s)&&(r=s),console.log("All modules fetched:",r);const i=r.filter(d=>(d.title||d.name||"").toLowerCase()==="cake");console.log("Filtered modules for provider:",i),$(i),i.length===0&&console.warn("No modules available for this provider")}catch(t){console.error("Fetch modules error:",t),x("Failed to fetch modules: "+t.message),$([])}},me=async()=>{try{const s=await(await fetch(`${v}/api/cakes/provider/${m}?moduleId=68e5fc09651cc12c1fc0f9c9`)).json();s.success&&he(s.data||[])}catch(t){console.error("Fetch cakes error:",t)}},be=async t=>{if(window.confirm("Are you sure you want to delete this booking?")){U(t),x(null);try{const r=await(await fetch(`${v}/api/bookings/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).json();r.success?(O(i=>i.filter(d=>d._id!==t)),alert("Booking deleted successfully!")):x(r.message||"Failed to delete booking")}catch(s){x("Error deleting booking: "+s.message),console.error("Delete error:",s)}finally{U(null)}}},B=new Date,je=B.getDate(),ye=B.getMonth(),ke=B.getFullYear(),K=(()=>{const t=f.getFullYear(),s=f.getMonth(),r=new Date(t,s+1,0).getDate(),i={};for(let d=1;d<=r;d++){const te=E.filter(M=>{const j=new Date(M.bookingDate);return j.getDate()===d&&j.getMonth()===s&&j.getFullYear()===t&&M.bookingType==="Direct"}).reduce((M,j)=>M+(Array.isArray(j.timeSlot)?j.timeSlot.length:1),0);te===0?i[d]="free":te>=2?i[d]="booked":i[d]="available"}return i})(),b=E.filter(t=>{const s=new Date(t.bookingDate);return s.getDate()===S&&s.getMonth()===f.getMonth()&&s.getFullYear()===f.getFullYear()&&t.bookingType==="Direct"}),Se=t=>{const s=t.getFullYear(),r=t.getMonth(),i=new Date(s,r,1).getDay(),d=new Date(s,r+1,0).getDate();return{firstDay:i,daysInMonth:d}},{firstDay:Ce,daysInMonth:ve}=Se(f),De=f.toLocaleDateString("en-US",{month:"long",year:"numeric"}),F=t=>{switch(t){case"booked":return"#ef5350";case"available":return"#ffd54f";case"free":return"#66bb6a";default:return"#66bb6a"}},C=t=>{switch(t){case"Accepted":return"#7e57c2";case"Pending":return"#ffd54f";case"Rejected":return"#e57373";default:return"#ef5350"}},Q=t=>{ce(new Date(f.getFullYear(),f.getMonth()+t,1))},Ie=()=>{const t=[];["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(r=>t.push(e.jsx(o,{sx:{textAlign:"center",padding:{xs:"8px 4px",md:"16px"},color:"#777",fontSize:{xs:"11px",md:"14px"},fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px"},children:r},r)));for(let r=0;r<Ce;r++)t.push(e.jsx(o,{sx:{display:{xs:"none",md:"block"},backgroundColor:"#f9f9f9",borderRadius:"12px"}},`empty-${r}`));for(let r=1;r<=ve;r++){const i=K[r]||"free",d=r===je&&f.getMonth()===ye&&f.getFullYear()===ke,u=r===S;t.push(e.jsxs(o,{onClick:()=>fe(r),sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:{xs:"50px",md:"100px"},cursor:"pointer",borderRadius:{xs:"8px",md:"16px"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:u?"rgba(239, 83, 80, 0.05)":"#fff",border:u?"1px solid #ef5350":"1px solid #f0f0f0",boxShadow:u?"0 4px 12px rgba(239, 83, 80, 0.15)":"none","&:hover":{transform:{md:"translateY(-4px)"},boxShadow:"0 6px 16px rgba(0,0,0,0.08)",borderColor:"#ef5350",zIndex:1}},children:[e.jsx(o,{sx:{fontSize:{xs:"14px",md:"22px"},fontWeight:d||u?"600":"400",color:d?"#fff":u?"#ef5350":"#333",width:{xs:"28px",md:"48px"},height:{xs:"28px",md:"48px"},display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:d?"#ef5350":"transparent",marginBottom:{xs:"2px",md:"8px"},transition:"all 0.2s"},children:r}),e.jsx(o,{sx:{width:{xs:"6px",md:"10px"},height:{xs:"6px",md:"10px"},borderRadius:"50%",backgroundColor:F(i),boxShadow:`0 0 8px ${F(i)}80`}}),i!=="free"&&e.jsx(n,{sx:{display:{xs:"none",md:"block"},fontSize:"10px",mt:1,color:"#999",fontWeight:500},children:i==="booked"?"FULL":"SLOTS"})]},r))}return t},P=K[S]||"free",we=()=>b.length===0?"No bookings - All slots available":P==="booked"?`${b.length} bookings - Fully booked`:P==="available"?`${b.length} booking - Some slots available`:"All slots available",We=()=>new Date(f.getFullYear(),f.getMonth(),S).toLocaleDateString("en-US",{weekday:"short"}),p=t=>{const{name:s,value:r}=t.target;g(i=>({...i,[s]:r}))},Z=t=>{g(s=>{const r=s.timeSlot.includes(t)?s.timeSlot.filter(i=>i!==t):[...s.timeSlot,t];return{...s,timeSlot:r}})},Me=t=>{const s=t.target.value;g(i=>({...i,cakeId:s}));const r=_.find(i=>i._id===s);ue((r==null?void 0:r.variations)||[]),A([])},Te=t=>{A(s=>s.find(i=>i._id===t._id)?s.filter(i=>i._id!==t._id):[...s,{...t,quantity:1}])},X=(t,s)=>{A(r=>r.map(i=>i._id===t?{...i,quantity:Math.max(1,s)}:i))},ze=async()=>{q(!0),x(null);try{if(!a.fullName.trim()){x("Full Name is required");return}if(!a.contactNumber.trim()){x("Contact Number is required");return}if(!a.cakeId){x("Please select a cake");return}if(!z.length){x("Please select at least one cake variation");return}if(!a.bookingDate){x("Please select booking date");return}if(!a.timeSlot.length){x("Please select time slot");return}const t={moduleId:D[0]._id,moduleType:"Cake",cakeId:a.cakeId,cakeVariations:z,deliveryType:a.deliveryType,customerMessage:a.customerMessage,fullName:a.fullName,contactNumber:a.contactNumber,emailAddress:a.emailAddress,address:a.address,numberOfGuests:a.numberOfGuests?Number(a.numberOfGuests):1,bookingDate:a.bookingDate,timeSlot:a.timeSlot,paymentType:a.paymentType,bookingType:"Direct"},r=await(await fetch(`${v}/api/bookings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();r.success?(alert("Cake booking created successfully!"),T(!1),J()):x(r.message||"Booking failed")}catch{x("Error creating booking")}finally{q(!1)}},Ae=()=>{T(!0)},ee=()=>{T(!1),x(null)},w={display:"flex",alignItems:"center",gap:1,mb:2,color:"#ef5350",fontWeight:600},W={color:"#ef5350",fontSize:24};return e.jsxs(o,{sx:{width:"100%",margin:"0 auto",padding:{xs:"8px",md:"40px"},backgroundColor:"#fafafa",minHeight:"100vh",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[!m&&e.jsx(R,{severity:"warning",sx:{mb:3},children:"Provider ID not found. Please make sure you're logged in. You may need to log out and log in again."}),I&&e.jsx(R,{severity:"error",sx:{mb:3},children:I}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:{xs:"16px",md:"32px"},padding:{xs:"0 4px",md:"0 20px"}},children:[e.jsx(y,{onClick:()=>Q(-1),sx:{backgroundColor:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"1px solid #f0f0f0","&:hover":{backgroundColor:"#f5f5f5",transform:"scale(1.1)"},transition:"all 0.2s"},children:e.jsx(se,{})}),e.jsx(n,{sx:{fontSize:{xs:"20px",md:"32px"},fontWeight:"600",color:"#333",letterSpacing:"-0.5px"},children:De}),e.jsx(y,{onClick:()=>Q(1),sx:{backgroundColor:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"1px solid #f0f0f0","&:hover":{backgroundColor:"#f5f5f5",transform:"scale(1.1)"},transition:"all 0.2s"},children:e.jsx(Be,{})})]}),e.jsx(o,{sx:{backgroundColor:"#fff",borderRadius:{xs:"16px",md:"24px"},marginBottom:{xs:"24px",md:"40px"},padding:{xs:"12px 8px",md:"40px"},boxShadow:"0 10px 30px rgba(0,0,0,0.04)",border:"1px solid #f0f0f0"},children:e.jsx(o,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:{xs:"4px",md:"16px"}},children:Ie()})}),e.jsx(o,{sx:{backgroundColor:"#fff",borderRadius:{xs:"8px",md:"12px"},padding:{xs:"12px 8px",md:"24px"},marginBottom:{xs:"16px",md:"32px"},boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:"12px",md:"24px"},flexWrap:"wrap",flexDirection:{xs:"row",md:"row"}},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(o,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#ef5350"}}),e.jsx(n,{sx:{fontSize:"15px",color:"#666"},children:"Fully Booked"})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(o,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#ffd54f"}}),e.jsx(n,{sx:{fontSize:"15px",color:"#666"},children:"Slots Available"})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(o,{sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#66bb6a"}}),e.jsx(n,{sx:{fontSize:"15px",color:"#666"},children:"Fully Free"})]})]})}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:{xs:2,md:4},backgroundColor:"#fff",borderRadius:"24px",padding:{xs:"20px",md:"32px"},marginBottom:"32px",boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0"},children:[e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:{xs:"70px",md:"100px"},height:{xs:"70px",md:"100px"},backgroundColor:"#ef5350",borderRadius:"20px",color:"#fff",boxShadow:"0 8px 16px rgba(239, 83, 80, 0.2)"},children:[e.jsx(n,{sx:{fontSize:{xs:"12px",md:"14px"},fontWeight:"600",textTransform:"uppercase",opacity:.9},children:We()}),e.jsx(n,{sx:{fontSize:{xs:"28px",md:"40px"},fontWeight:"700",lineHeight:1},children:S})]}),e.jsxs(o,{sx:{flex:1},children:[e.jsx(n,{sx:{fontSize:{xs:"18px",md:"28px"},fontWeight:"600",color:"#1a1a1a",marginBottom:"4px"},children:"Schedule Details"}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(o,{sx:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:F(P)}}),e.jsx(n,{sx:{fontSize:{xs:"14px",md:"16px"},color:"#666",fontWeight:"500"},children:we()})]})]})]}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(n,{sx:{fontSize:{xs:"20px",md:"24px"},fontWeight:"700",color:"#1a1a1a",mb:3,pl:1},children:"Today's Appointments"}),b.length>0?e.jsx(o,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:b.map(t=>{var s,r;return e.jsxs(o,{sx:{backgroundColor:"#fff",borderRadius:"24px",border:"1px solid #f0f0f0",padding:{xs:"20px",md:"32px"},position:"relative",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0,0,0,0.02)",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 30px rgba(0,0,0,0.06)",borderColor:"#ef5350"},"&::before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:"6px",backgroundColor:C(t.status)}},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[e.jsxs(o,{children:[e.jsx(n,{sx:{fontSize:{xs:"12px",md:"13px"},fontWeight:"700",textTransform:"uppercase",color:C(t.status),letterSpacing:"1px",mb:.5},children:Array.isArray(t.timeSlot)?t.timeSlot.map((i,d)=>e.jsxs("span",{children:[i.label," (",i.time,")",d<t.timeSlot.length-1?", ":""]},d)):(s=t.timeSlot)!=null&&s.label?`${t.timeSlot.label} (${t.timeSlot.time})`:"All Day"}),e.jsx(n,{sx:{fontSize:{xs:"18px",md:"22px"},fontWeight:"700",color:"#1a1a1a"},children:t.fullName})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Fe,{label:t.status,sx:{fontWeight:"600",fontSize:"12px",backgroundColor:`${C(t.status)}15`,color:C(t.status),border:`1px solid ${C(t.status)}30`}}),e.jsx(y,{onClick:()=>be(t._id),disabled:V===t._id,sx:{backgroundColor:"#fff1f1",color:"#ef5350","&:hover":{backgroundColor:"#ef5350",color:"#fff"}},children:V===t._id?e.jsx(oe,{size:20,color:"inherit"}):e.jsx(Pe,{fontSize:"small"})})]})]}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"repeat(3, 1fr)"},gap:3,pt:3,borderTop:"1px solid #f8f8f8"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(o,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(re,{fontSize:"small"})}),e.jsxs(o,{children:[e.jsx(n,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Contact"}),e.jsx(n,{sx:{fontSize:"14px",fontWeight:"500"},children:t.contactNumber})]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(o,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(ne,{fontSize:"small"})}),e.jsxs(o,{children:[e.jsx(n,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Email"}),e.jsx(n,{sx:{fontSize:"14px",fontWeight:"500"},children:t.emailAddress||"N/A"})]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(o,{sx:{p:1,borderRadius:"10px",backgroundColor:"#f5f5f5",color:"#666"},children:e.jsx(N,{fontSize:"small"})}),e.jsxs(o,{children:[e.jsx(n,{sx:{fontSize:"11px",color:"#999",textTransform:"uppercase",fontWeight:"600"},children:"Cake"}),e.jsx(n,{sx:{fontSize:"14px",fontWeight:"500"},children:((r=t.cakeId)==null?void 0:r.name)||"Cake Booking"})]})]})]})]},t._id)})}):e.jsx(o,{sx:{textAlign:"center",py:8,backgroundColor:"#fff",borderRadius:"24px",border:"2px dashed #eee"},children:e.jsx(n,{sx:{color:"#999",fontSize:"16px"},children:"No appointments scheduled for this date."})})]}),b.length===0&&e.jsxs(o,{sx:{backgroundColor:"#f5f5f5",borderRadius:{xs:"12px",md:"20px"},padding:{xs:"24px",md:"48px"},textAlign:"center"},children:[e.jsx("div",{style:{margin:"0 auto 20px",width:"100px",height:"100px"},children:e.jsxs("svg",{width:"100",height:"100",viewBox:"0 0 80 80",fill:"none",children:[e.jsx("rect",{x:"10",y:"15",width:"60",height:"50",rx:"4",stroke:"#ccc",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M25 15 L25 10 M55 15 L55 10",stroke:"#ccc",strokeWidth:"2"}),e.jsx("path",{d:"M20 25 L60 25",stroke:"#ccc",strokeWidth:"2"}),e.jsx("path",{d:"M35 45 L45 45 M35 45 L40 40 M35 45 L40 50",stroke:"#66bb6a",strokeWidth:"2",strokeLinecap:"round"})]})}),e.jsx(n,{sx:{fontSize:{xs:"18px",md:"24px"},fontWeight:"500",marginBottom:{xs:"8px",md:"10px"},color:"#333"},children:"No Bookings Today"}),e.jsx(n,{sx:{fontSize:{xs:"14px",md:"16px"},color:"#666"},children:"All slots are available for booking"})]}),e.jsx(ae,{variant:"contained",sx:{position:"fixed",bottom:{xs:"16px",md:"32px"},right:{xs:"16px",md:"32px"},backgroundColor:"#ef5350",color:"#fff",borderRadius:"50%",width:{xs:"56px",md:"64px"},height:{xs:"56px",md:"64px"},minWidth:"unset",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 6px 16px rgba(0,0,0,0.3)","&:hover":{backgroundColor:"#e53935"}},onClick:Ae,children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 5v14M5 12h14"})})}),e.jsx(Re,{fullScreen:!0,open:pe,onClose:ee,PaperProps:{sx:{backgroundColor:"#fafafa"}},children:e.jsxs(o,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(o,{sx:{px:{xs:2,md:4},py:2.5,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#fff",borderBottom:"1px solid #f0f0f0",position:"sticky",top:0,zIndex:10},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(y,{onClick:ee,sx:{color:"#333"},children:e.jsx(se,{})}),e.jsx(n,{variant:"h5",sx:{fontWeight:800,color:"#1a1a1a",letterSpacing:"-0.5px"},children:"Create New Booking"})]})}),e.jsx(Ne,{sx:{flex:1,p:0,backgroundColor:"#f8f9fa"},children:e.jsxs(o,{sx:{maxWidth:"1200px",margin:"0 auto",p:{xs:2,md:4}},children:[I&&e.jsx(R,{severity:"error",sx:{mb:4,borderRadius:"16px",border:"1px solid #ffcdd2",boxShadow:"0 4px 12px rgba(239, 83, 80, 0.1)"},children:I}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,children:e.jsxs(o,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(n,{variant:"h6",sx:{...w,mb:3},children:[e.jsx(ie,{sx:W}),"Client Information"]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(h,{fullWidth:!0,name:"fullName",label:"Full Name",variant:"outlined",value:a.fullName,onChange:p,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(ie,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(h,{fullWidth:!0,name:"contactNumber",label:"Contact Number",variant:"outlined",value:a.contactNumber,onChange:p,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(re,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(h,{fullWidth:!0,name:"emailAddress",label:"Email Address (Optional)",variant:"outlined",value:a.emailAddress,onChange:p,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(ne,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(h,{fullWidth:!0,name:"address",label:"Delivery Address (Optional)",variant:"outlined",value:a.address,onChange:p,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(N,{sx:{color:"#999",fontSize:20}})})}})})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(o,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(n,{variant:"h6",sx:{...w,mb:3},children:[e.jsx(le,{sx:W}),"Cake Selection"]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,children:e.jsxs(Le,{fullWidth:!0,variant:"outlined",children:[e.jsx(Ee,{shrink:!0,children:"Select Cake"}),e.jsxs(Oe,{name:"cakeId",value:a.cakeId,onChange:Me,label:"Select Cake",displayEmpty:!0,children:[e.jsx(de,{value:"",disabled:!0,children:e.jsx("span",{style:{color:"#999"},children:"Select Cake"})}),_.map(t=>e.jsx(de,{value:t._id,children:t.cakeTitle||t.packageName},t._id))]})]})}),Y.length>0&&e.jsxs(l,{item:!0,xs:12,children:[e.jsx(n,{variant:"subtitle2",sx:{mb:2,fontWeight:700,color:"#555"},children:"Select Variations"}),e.jsx(o,{sx:{maxHeight:"300px",overflowY:"auto",pr:1},children:e.jsx(l,{container:!0,spacing:2,children:Y.map(t=>{const s=z.find(r=>r._id===t._id);return e.jsx(l,{item:!0,xs:12,children:e.jsxs(o,{sx:{p:2,borderRadius:"16px",border:"1px solid",borderColor:s?"#ef5350":"#f0f0f0",backgroundColor:s?"#fff5f5":"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(L,{checked:!!s,onChange:()=>Te(t),sx:{color:"#ef5350","&.Mui-checked":{color:"#ef5350"}}}),e.jsxs(o,{children:[e.jsx(n,{variant:"body2",sx:{fontWeight:600},children:t.name}),e.jsxs(n,{variant:"caption",sx:{color:"#ef5350",fontWeight:700},children:["AED ",t.price]})]})]}),s&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(y,{size:"small",onClick:()=>X(t._id,s.quantity-1),sx:{border:"1px solid #ef5350",color:"#ef5350"},children:e.jsx(n,{variant:"body2",sx:{fontWeight:900},children:"-"})}),e.jsx(n,{sx:{minWidth:"24px",textAlign:"center",fontWeight:600},children:s.quantity}),e.jsx(y,{size:"small",onClick:()=>X(t._id,s.quantity+1),sx:{backgroundColor:"#ef5350",color:"#fff","&:hover":{backgroundColor:"#e53935"}},children:e.jsx(n,{variant:"body2",sx:{fontWeight:900},children:"+"})})]})]})},t._id)})})})]})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(o,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(n,{variant:"h6",sx:{...w,mb:3},children:[e.jsx(_e,{sx:W}),"Scheduling"]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsxs(l,{item:!0,xs:12,md:6,children:[e.jsx(h,{fullWidth:!0,name:"bookingDate",label:"Booking Date",type:"date",variant:"outlined",value:a.bookingDate,onChange:p,InputLabelProps:{shrink:!0},sx:{mb:4}}),e.jsx(n,{variant:"subtitle2",sx:{mb:2,fontWeight:700,color:"#555"},children:"Select Delivery Type"}),e.jsx(o,{sx:{display:"flex",gap:2,mb:4},children:["Home Delivery","Store Pickup"].map(t=>e.jsx(o,{onClick:()=>g(s=>({...s,deliveryType:t})),sx:{flex:1,p:1.5,textAlign:"center",borderRadius:"12px",border:"2px solid",borderColor:a.deliveryType===t?"#ef5350":"#f0f0f0",backgroundColor:a.deliveryType===t?"#fff5f5":"#fff",cursor:"pointer",fontWeight:700,fontSize:"13px",transition:"all 0.2s",color:a.deliveryType===t?"#ef5350":"#666"},children:t},t))}),e.jsx(n,{variant:"subtitle2",sx:{mb:2,fontWeight:700,color:"#555"},children:"Select Time Slots"}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:1.5,p:2,backgroundColor:"#fcfcfc",borderRadius:"16px",border:"1px solid #f5f5f5"},children:[e.jsx(xe,{control:e.jsx(L,{checked:a.timeSlot.includes("Morning"),onChange:()=>Z("Morning"),sx:{color:"#ef5350","&.Mui-checked":{color:"#ef5350"}}}),label:e.jsxs(o,{sx:{ml:1},children:[e.jsx(n,{variant:"body2",sx:{fontWeight:600},children:"Morning Delivery"}),e.jsx(n,{variant:"caption",sx:{color:"#999"},children:"9:00 AM - 1:00 PM"})]})}),e.jsx(Ye,{sx:{my:1,opacity:.5}}),e.jsx(xe,{control:e.jsx(L,{checked:a.timeSlot.includes("Evening"),onChange:()=>Z("Evening"),sx:{color:"#ef5350","&.Mui-checked":{color:"#ef5350"}}}),label:e.jsxs(o,{sx:{ml:1},children:[e.jsx(n,{variant:"body2",sx:{fontWeight:600},children:"Evening Delivery"}),e.jsx(n,{variant:"caption",sx:{color:"#999"},children:"6:00 PM - 10:00 PM"})]})})]})]}),e.jsxs(l,{item:!0,xs:12,md:6,children:[e.jsx(n,{variant:"subtitle2",sx:{mb:2,fontWeight:700,color:"#555"},children:"Payment Method"}),e.jsxs(l,{container:!0,spacing:2,children:[[{id:"COD",label:"COD",icon:e.jsx($e,{})},{id:"Card",label:"Card",icon:e.jsx(He,{})},{id:"UPI",label:"UPI",icon:e.jsx(Ge,{})},{id:"Bank Transfer",label:"Bank",icon:e.jsx(qe,{})},{id:"Other",label:"Other",icon:e.jsx(Ve,{})}].map(t=>e.jsx(l,{item:!0,xs:6,children:e.jsxs(o,{onClick:()=>g(s=>({...s,paymentType:t.id})),sx:{p:1.5,display:"flex",flexDirection:"column",alignItems:"center",gap:.5,borderRadius:"12px",border:"2px solid",borderColor:a.paymentType===t.id?"#ef5350":"#f0f0f0",backgroundColor:a.paymentType===t.id?"#fff5f5":"#fff",cursor:"pointer",transition:"all 0.2s","&:hover":{borderColor:"#ef5350",transform:"translateY(-2px)"}},children:[e.jsx(o,{sx:{color:a.paymentType===t.id?"#ef5350":"#666",transform:"scale(0.8)"},children:t.icon}),e.jsx(n,{variant:"caption",sx:{fontWeight:700,fontSize:"10px",color:a.paymentType===t.id?"#ef5350":"#666"},children:t.label})]})},t.id)),e.jsx(l,{item:!0,xs:12,children:e.jsx(h,{fullWidth:!0,name:"address",label:"Delivery Address (Optional)",variant:"outlined",value:a.address,onChange:p,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(N,{sx:{color:"#999",fontSize:20}})})}})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(h,{fullWidth:!0,name:"numberOfGuests",label:"Number of Guests (Optional)",type:"number",variant:"outlined",value:a.numberOfGuests||"",onChange:p,InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(Ue,{sx:{color:"#999",fontSize:20}})})}})})]})]})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(o,{sx:{backgroundColor:"#fff",borderRadius:"24px",p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.03)",border:"1px solid #f0f0f0",height:"100%"},children:[e.jsxs(n,{variant:"h6",sx:{...w,mb:3},children:[e.jsx(le,{sx:W}),"Additional Customization"]}),e.jsx(h,{fullWidth:!0,name:"customerMessage",label:"Message on Cake",multiline:!0,rows:4,variant:"outlined",value:a.customerMessage,onChange:p,placeholder:"E.g. Happy Birthday John! Any special instructions..."})]})})]})]})}),e.jsx(o,{sx:{p:2.5,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderTop:"1px solid #f0f0f0",display:"flex",justifyContent:"center",zIndex:1e3},children:e.jsx(ae,{onClick:ze,disabled:G,variant:"contained",sx:{backgroundColor:"#ef5350",px:8,py:1.8,borderRadius:"16px",fontWeight:700,fontSize:"16px",textTransform:"none",boxShadow:"0 8px 24px rgba(239, 83, 80, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"#e53935",transform:"translateY(-2px)",boxShadow:"0 12px 30px rgba(239, 83, 80, 0.4)"},"&:active":{transform:"translateY(0)"}},children:G?e.jsx(oe,{size:24,color:"inherit"}):"Confirm & Save Booking"})})]})})]})}export{et as default};
