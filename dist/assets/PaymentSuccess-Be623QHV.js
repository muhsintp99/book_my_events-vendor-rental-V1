import{t as d,r as m,j as o,B as f,s as g,T as y,g as l}from"./index-CE2Glvdc.js";const p="https://api.bookmyevent.ae";function h(){const[u]=d(),s=u.get("orderId"),a=JSON.parse(localStorage.getItem("user")||"{}"),r=a==null?void 0:a._id,i=localStorage.getItem("moduleId");return m.useEffect(()=>{if(!s||!r||!i)return;let e;return(async()=>{try{await l.post(`${p}/api/payment/verify-subscription-payment`,{orderId:s}),e=setInterval(async()=>{var c;const t=(c=(await l.get(`${p}/api/subscription/status/${r}?moduleId=${i}`)).data)==null?void 0:c.subscription;(t==null?void 0:t.status)==="active"&&(t!=null&&t.isCurrent)&&(clearInterval(e),localStorage.setItem("upgrade",JSON.stringify({isSubscribed:!0,status:"active",plan:t.planId,module:t.moduleId,access:{canAccess:!0,isExpired:!1}})),window.history.replaceState({},"","/payment-success"),window.location.href="/makeupartist/portfolio")},3e3)}catch(n){console.error("Payment verification failed:",n)}})(),()=>{e&&clearInterval(e)}},[s,r,i]),o.jsxs(f,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2},children:[o.jsx(g,{}),o.jsx(y,{fontWeight:600,children:"Activating your subscription, please waitâ€¦"})]})}export{h as default};
