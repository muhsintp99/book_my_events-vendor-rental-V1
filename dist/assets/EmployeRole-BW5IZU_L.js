import{r as a,j as e,B as c,T as u,s as g,aK as z,f as G,C as H,g as y,b as J,a6 as U,c as T,al as W,ai as $,a5 as K}from"./index-OVaJuQpY.js";import{S as _}from"./Search-CxqNrern.js";import{D as Q}from"./Delete-C53G5cQj.js";import{T as X}from"./TableContainer-BccXGCzU.js";import{T as Y,a as Z,b as D,c as o,d as ee}from"./TableRow-DcESB2gX.js";const re=()=>{const[E,k]=a.useState("Role name example"),[d,h]=a.useState({Trip:!1,Vehicle:!1,Driver:!1,Marketing:!1,"Store setup":!1,"My wallet":!1,Profile:!1,Employees:!1,"My shop":!1,Reviews:!1,Chat:!1,Report:!1}),[N,P]=a.useState(0),[m,f]=a.useState(""),[B,C]=a.useState(""),[M,S]=a.useState(!1),[v,A]=a.useState(""),[n,x]=a.useState(()=>{const s=localStorage.getItem("roles");return s?JSON.parse(s):[{id:1,roleName:"manager",modules:"Vehicle",createdAt:"11-Sep-25"}]}),[I,p]=a.useState(!1),[i,j]=a.useState(null);a.useEffect(()=>{localStorage.setItem("roles",JSON.stringify(n)),window.dispatchEvent(new Event("rolesUpdated"))},[n]);const L=s=>{h({...d,[s.target.name]:s.target.checked})},O=s=>{if(s.preventDefault(),!m.trim()){alert("Role name is required to submit.");return}const t=Object.entries(d).filter(([l,b])=>b).map(([l])=>l).join(", "),r={id:i?i.id:Date.now(),roleName:m.trim(),modules:t||"None",createdAt:i?i.createdAt:new Date().toLocaleDateString("en-GB")};i?(x(n.map(l=>l.id===i.id?r:l)),p(!1),j(null)):x([...n,r]),console.log({roleName:E,permissions:d}),S(!0),R()},R=()=>{k("Role name example"),h({Trip:!1,Vehicle:!1,Driver:!1,Marketing:!1,"Store setup":!1,"My wallet":!1,Profile:!1,Employees:!1,"My shop":!1,Reviews:!1,Chat:!1,Report:!1}),f(""),C(""),p(!1),j(null)},w=(s,t)=>{t!=="clickaway"&&S(!1)},V=s=>{x(n.filter(t=>t.id!==s))},F=s=>{p(!0),j(s),f(s.roleName),P(0);const t={...d};s.modules.split(", ").forEach(r=>{r in t&&(t[r]=!0)}),h(t)};function q(s){const{children:t,value:r,index:l,...b}=s;return e.jsx("div",{role:"tabpanel",hidden:r!==l,id:`simple-tabpanel-${l}`,"aria-labelledby":`simple-tab-${l}`,...b,children:r===l&&e.jsx(c,{sx:{p:3},children:t})})}return e.jsxs(c,{sx:{p:3,width:1200,margin:"auto",backgroundColor:"white"},children:[e.jsxs(u,{variant:"h6",gutterBottom:!0,children:[e.jsx("span",{role:"img","aria-label":"user"})," ",e.jsx("b",{children:"CUSTOM ROLE"})]}),e.jsxs(c,{component:"form",sx:{backgroundColor:"#fff",p:2,borderRadius:1,boxShadow:1},children:[e.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Role Form"}),e.jsxs(q,{value:N,index:0,children:[e.jsx(g,{fullWidth:!0,label:"Role name (Default)*",variant:"outlined",value:m,onChange:s=>f(s.target.value),placeholder:"Type role name",sx:{mb:2},required:!0,inputProps:{maxLength:100}}),e.jsx(g,{fullWidth:!0,label:"Short description (Default)",variant:"outlined",multiline:!0,rows:4,value:B,onChange:s=>C(s.target.value),placeholder:"Type short description",inputProps:{maxLength:500}})]}),e.jsx(u,{variant:"subtitle1",gutterBottom:!0,children:"Module Permission :"}),e.jsx(z,{row:!0,sx:{justifyContent:"space-between",mb:2},children:["Catering","Profile","Employees","Reviews"].map(s=>e.jsx(G,{control:e.jsx(H,{checked:d[s],onChange:L,name:s}),label:s},s))}),e.jsxs(c,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(y,{variant:"outlined",color:"#E15B65",onClick:R,sx:{color:"#E15B65"},children:"Reset"}),e.jsx(y,{variant:"contained",color:"primary",onClick:O,sx:{color:"white",bgcolor:"#E15B65"},children:"Submit"})]})]}),!I&&e.jsxs(c,{sx:{mt:5,backgroundColor:"#fff",p:2,borderRadius:1,boxShadow:1},children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(u,{variant:"h6",children:"Roles Table"}),e.jsx(g,{size:"small",placeholder:"Search role",value:v,onChange:s=>A(s.target.value),InputProps:{endAdornment:e.jsx(J,{position:"end",children:e.jsx(_,{})})}})]}),e.jsx(X,{component:U,children:e.jsxs(Y,{children:[e.jsx(Z,{sx:{backgroundColor:"#f9fafb"},children:e.jsxs(D,{children:[e.jsx(o,{children:"Sl#"}),e.jsx(o,{children:"Role Name"}),e.jsx(o,{children:"Modules"}),e.jsx(o,{children:"Created At"}),e.jsx(o,{children:"Action"})]})}),e.jsx(ee,{children:n.filter(s=>s.roleName.toLowerCase().includes(v.toLowerCase())).map((s,t)=>e.jsxs(D,{children:[e.jsx(o,{children:t+1}),e.jsx(o,{children:s.roleName}),e.jsx(o,{children:s.modules}),e.jsx(o,{children:s.createdAt}),e.jsxs(o,{children:[e.jsx(T,{color:"primary",onClick:()=>F(s),children:e.jsx(W,{})}),e.jsx(T,{color:"error",onClick:()=>V(s.id),children:e.jsx(Q,{})})]})]},s.id))})]})})]}),e.jsx($,{open:M,autoHideDuration:3e3,onClose:w,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(K,{onClose:w,severity:"info",sx:{backgroundColor:"#1976d2",color:"white"},children:"Role updated successfully!"})})]})};export{re as default};
