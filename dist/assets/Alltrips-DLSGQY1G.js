import{r as n,j as e,B as p,T as f,a5 as y,S as h,s as k,g as l,t as S,h as w}from"./index-a1HedzDv.js";import{T as B}from"./TableContainer-Bb_yKX_u.js";import{T as C,a as T,b as o,c as s,d as v}from"./TableRow-CtunvNL7.js";const E=()=>{const[r,x]=n.useState(""),[j,u]=n.useState([]),[i,g]=n.useState(!0);n.useEffect(()=>{(async()=>{try{const a=await w.get("https://api.bookmyevent.ae/api/bookings");u(a.data.bookings||[])}catch(a){console.error("Error fetching bookings:",a)}finally{g(!1)}})()},[]);const m=t=>x(t.target.value),c=j.filter(t=>(t.fullName||"").toLowerCase().includes(r.toLowerCase())||(t.emailAddress||"").toLowerCase().includes(r.toLowerCase())||t._id.toLowerCase().includes(r.toLowerCase()));return e.jsxs(p,{p:2,children:[e.jsx(f,{variant:"h4",gutterBottom:!0,children:"All Bookings"}),e.jsxs(y,{sx:{mt:2,width:"100%",borderRadius:"10px"},children:[e.jsxs(h,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},p:2,children:[e.jsx(k,{label:"Search by Booking ID, Name, Email",variant:"outlined",size:"small",value:r,onChange:m,sx:{maxWidth:{sm:300}}}),e.jsx(l,{variant:"contained",color:"primary",children:"Export"})]}),e.jsx(B,{sx:{width:"100%",overflowX:"auto"},children:e.jsxs(C,{stickyHeader:!0,children:[e.jsx(T,{children:e.jsxs(o,{children:[e.jsx(s,{children:"S#"}),e.jsx(s,{children:"Booking ID"}),e.jsx(s,{children:"Customer"}),e.jsx(s,{children:"Email"}),e.jsx(s,{children:"Booking Date"}),e.jsx(s,{children:"Guests"}),e.jsx(s,{children:"Amount"}),e.jsx(s,{children:"Status"}),e.jsx(s,{children:"Payment Status"}),e.jsx(s,{children:"Action"})]})}),e.jsxs(v,{children:[i&&e.jsx(o,{children:e.jsx(s,{colSpan:10,align:"center",children:e.jsx(S,{size:28})})}),!i&&c.map((t,a)=>{var d;return e.jsxs(o,{children:[e.jsx(s,{children:a+1}),e.jsxs(s,{children:["#",t._id.slice(-6)]}),e.jsx(s,{children:t.fullName||"N/A"}),e.jsx(s,{children:t.emailAddress||"N/A"}),e.jsx(s,{children:new Date(t.bookingDate).toLocaleDateString()}),e.jsx(s,{children:t.numberOfGuests||"-"}),e.jsxs(s,{children:["â‚¹",((d=t.finalPrice)==null?void 0:d.toLocaleString())||0]}),e.jsx(s,{style:{color:t.status==="Accepted"?"green":t.status==="Rejected"?"red":"orange",fontWeight:600},children:t.status}),e.jsx(s,{style:{textTransform:"capitalize",color:t.paymentStatus==="completed"?"green":t.paymentStatus==="failed"?"red":"orange",fontWeight:600},children:t.paymentStatus}),e.jsx(s,{children:e.jsxs(h,{direction:"row",spacing:1,children:[e.jsx(l,{variant:"outlined",size:"small",color:"primary",children:"View"}),e.jsx(l,{variant:"outlined",size:"small",color:"secondary",children:"Download"})]})})]},t._id)}),!i&&c.length===0&&e.jsx(o,{children:e.jsx(s,{colSpan:10,align:"center",children:"No bookings found"})})]})]})})]})]})};export{E as default};
